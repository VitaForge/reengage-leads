"use strict";exports.id=657,exports.ids=[657],exports.modules={657:(a,b,c)=>{let d;c.d(b,{m:()=>am});var e=c(23232);function f(a,b){return"function"==typeof a?a(b):a}function g(a,b){return p(b).reduce((a,b)=>null===a?null:void 0!==a?a[b]:void 0,a)}function h(a,b,c){let d=p(b);return function a(b){if(!d.length)return f(c,b);let e=d.shift();if("string"==typeof e||"number"==typeof e&&!Array.isArray(b))return"object"==typeof b?(null===b&&(b={}),{...b,[e]:a(b[e])}):{[e]:a()};if(Array.isArray(b)&&"number"==typeof e){let c=b.slice(0,e);return[...c.length?c:Array(e),a(b[e]),...b.slice(e+1)]}return[...Array(e),a()]}(a)}let i=/^(\d+)$/gm,j=/\.(\d+)(?=\.)/gm,k=/^(\d+)\./gm,l=/\.(\d+$)/gm,m=/\.{2,}/gm,n="__int__",o=`${n}$1`;function p(a){if(Array.isArray(a))return[...a];if("string"!=typeof a)throw Error("Path must be a string.");return a.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(i,o).replace(j,`.${o}.`).replace(k,`${o}.`).replace(l,`.${o}`).replace(m,".").split(".").map(a=>{if(a.startsWith(n)){let b=a.substring(n.length),c=parseInt(b,10);return String(c)===b?c:b}return a})}function q(a,b){return b.validationLogic({form:b.form,validators:b.validators,event:{type:a,async:!1},runValidation:a=>a.validators.filter(Boolean).map(a=>({cause:a.cause,validate:a.fn}))})}function r(a,b){let{asyncDebounceMs:c}=b,{onBlurAsyncDebounceMs:d,onChangeAsyncDebounceMs:e,onDynamicAsyncDebounceMs:f}=b.validators||{},g=c??0;return b.validationLogic({form:b.form,validators:b.validators,event:{type:a,async:!0},runValidation:b=>b.validators.filter(Boolean).map(b=>{let c=b?.cause||a,h=g;switch(c){case"change":h=e??g;break;case"blur":h=d??g;break;case"dynamic":h=f??g;break;case"submit":h=0}return"submit"===a&&(h=0),{cause:c,validate:b.fn,debounceMs:h}})})}let s=a=>!!a&&"object"==typeof a&&"fields"in a;function t(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;if(a instanceof Date&&b instanceof Date)return a.getTime()===b.getTime();if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(let[c,d]of a)if(!b.has(c)||!Object.is(d,b.get(c)))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let e of c)if(!d.includes(e)||!t(a[e],b[e]))return!1;return!0}let u=({newFormValidatorError:a,isPreviousErrorFromFormValidator:b,previousErrorValue:c})=>a?{newErrorValue:a,newSource:"form"}:b?{newErrorValue:void 0,newSource:void 0}:c?{newErrorValue:c,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},v=({formLevelError:a,fieldLevelError:b})=>b?{newErrorValue:b,newSource:"field"}:a?{newErrorValue:a,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function w(a,b){return null==a?b:{...a,...b}}let x=256,y=[];for(;x--;)y[x]=(x+256).toString(16).substring(1);class z{constructor(a,b){this.listeners=new Set,this.subscribe=a=>{var b,c;this.listeners.add(a);let d=null==(c=null==(b=this.options)?void 0:b.onSubscribe)?void 0:c.call(b,a,this);return()=>{this.listeners.delete(a),null==d||d()}},this.prevState=a,this.state=a,this.options=b}setState(a){var b,c,d;(this.prevState=this.state,null==(b=this.options)?void 0:b.updateFn)?this.state=this.options.updateFn(this.prevState)(a):"function"==typeof a?this.state=a(this.prevState):this.state=a,null==(d=null==(c=this.options)?void 0:c.onUpdate)||d.call(c),I(this)}}class A{constructor(a){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{let a=this.options.deps.length,b=Array(a),c=Array(a);for(let d=0;d<a;d++){let a=this.options.deps[d];b[d]=a.prevState,c[d]=a.state}return this.lastSeenDepValues=c,{prevDepVals:b,currDepVals:c,prevVal:this.prevState??void 0}},this.recompute=()=>{var a,b;this.prevState=this.state;let c=this.getDepVals();this.state=this.options.fn(c),null==(b=(a=this.options).onUpdate)||b.call(a)},this.checkIfRecalculationNeededDeeply=()=>{for(let a of this.options.deps)a instanceof A&&a.checkIfRecalculationNeededDeeply();let a=!1,b=this.lastSeenDepValues,{currDepVals:c}=this.getDepVals();for(let d=0;d<c.length;d++)if(c[d]!==b[d]){a=!0;break}a&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{for(let a of(this.unregisterFromGraph(),this._subscriptions))a()}),this.subscribe=a=>{var b,c;this.listeners.add(a);let d=null==(c=(b=this.options).onSubscribe)?void 0:c.call(b,a,this);return()=>{this.listeners.delete(a),null==d||d()}},this.options=a,this.state=a.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(a=this.options.deps){for(let b of a)if(b instanceof A)b.registerOnGraph(),this.registerOnGraph(b.options.deps);else if(b instanceof z){let a=B.get(b);a||(a=new Set,B.set(b,a)),a.add(this);let c=C.get(this);c||(c=new Set,C.set(this,c)),c.add(b)}}unregisterFromGraph(a=this.options.deps){for(let b of a)if(b instanceof A)this.unregisterFromGraph(b.options.deps);else if(b instanceof z){let a=B.get(b);a&&a.delete(this);let c=C.get(this);c&&c.delete(b)}}}let B=new WeakMap,C=new WeakMap,D={current:[]},E=!1,F=0,G=new Set,H=new Map;function I(a){if((F>0&&!H.has(a)&&H.set(a,a.prevState),G.add(a),!(F>0))&&!E)try{for(E=!0;G.size>0;){let a=Array.from(G);for(let b of(G.clear(),a)){let a=H.get(b)??b.prevState;b.prevState=a;let c={prevVal:b.prevState,currentVal:b.state};for(let a of b.listeners)a(c)}for(let b of a){let a=B.get(b);a&&(D.current.push(b),function a(b){for(let c of Array.from(b).sort((a,b)=>a instanceof A&&a.options.deps.includes(b)?1:b instanceof A&&b.options.deps.includes(a)?-1:0)){if(D.current.includes(c))continue;D.current.push(c),c.recompute();let b=C.get(c);if(b)for(let c of b){let b=B.get(c);b&&a(b)}}}(a))}for(let b of a){let a=B.get(b);if(a)for(let b of a){let a={prevVal:b.prevState,currentVal:b.state};for(let c of b.listeners)c(a)}}}}finally{E=!1,D.current=[],H.clear()}}function J(a){F++;try{a()}finally{if(0==--F){let a=G.values().next().value;a&&I(a)}}}function K(a,...b){return"function"==typeof a?a(...b):a}class L{#a=!0;#b;#c;#d;#e;#f;#g;#h;#i=0;#j=5;#k=!1;#l=()=>{this.debugLog("Connected to event bus"),this.#f=!0,this.#k=!1,this.debugLog("Emitting queued events",this.#e),this.#e.forEach(a=>this.emitEventToBus(a)),this.#e=[],this.stopConnectLoop(),this.#c().removeEventListener("tanstack-connect-success",this.#l)};#m=()=>{if(this.#i<this.#j){this.#i++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#c().removeEventListener("tanstack-connect",this.#m),this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#n=()=>{this.#k||(this.#k=!0,this.#c().addEventListener("tanstack-connect-success",this.#l),this.#m())};constructor({pluginId:a,debug:b=!1,enabled:c=!0,reconnectEveryMs:d=300}){this.#b=a,this.#a=c,this.#c=this.getGlobalTarget,this.#d=b,this.debugLog(" Initializing event subscription for plugin",this.#b),this.#e=[],this.#f=!1,this.#g=null,this.#h=d}startConnectLoop(){null!==this.#g||this.#f||(this.debugLog(`Starting connect loop (every ${this.#h}ms)`),this.#g=setInterval(this.#m,this.#h))}stopConnectLoop(){this.#k=!1,null!==this.#g&&(clearInterval(this.#g),this.#g=null,this.debugLog("Stopped connect loop"))}debugLog(...a){this.#d&&console.log(`ðŸŒ´ [tanstack-devtools:${this.#b}-plugin]`,...a)}getGlobalTarget(){if("undefined"!=typeof globalThis&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if("undefined"!=typeof window&&void 0!==window.addEventListener)return this.debugLog("Using window as event target"),window;let a="undefined"!=typeof EventTarget?new EventTarget:void 0;return void 0===a||void 0===a.addEventListener?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),a)}getPluginId(){return this.#b}dispatchCustomEventShim(a,b){try{let c=new Event(a,{detail:b});this.#c().dispatchEvent(c)}catch(a){this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(a,b){try{this.#c().dispatchEvent(new CustomEvent(a,{detail:b}))}catch(c){this.dispatchCustomEventShim(a,b)}}emitEventToBus(a){this.debugLog("Emitting event to client bus",a),this.dispatchCustomEvent("tanstack-dispatch-event",a)}emit(a,b){if(!this.#a)return void this.debugLog("Event bus client is disabled, not emitting event",a,b);if(!this.#f){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#e.push({type:`${this.#b}:${a}`,payload:b,pluginId:this.#b}),"undefined"==typeof CustomEvent||this.#k||(this.#n(),this.startConnectLoop());return}return this.emitEventToBus({type:`${this.#b}:${a}`,payload:b,pluginId:this.#b})}on(a,b){let c=`${this.#b}:${a}`;if(!this.#a)return this.debugLog("Event bus client is disabled, not registering event",c),()=>{};let d=a=>{this.debugLog("Received event from bus",a.detail),b(a.detail)};return this.#c().addEventListener(c,d),this.debugLog("Registered event to bus",c),()=>{this.#c().removeEventListener(c,d)}}onAll(a){if(!this.#a)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};let b=b=>{a(b.detail)};return this.#c().addEventListener("tanstack-devtools-global",b),()=>this.#c().removeEventListener("tanstack-devtools-global",b)}onAllPluginEvents(a){if(!this.#a)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};let b=b=>{let c=b.detail;this.#b&&c.pluginId!==this.#b||a(c)};return this.#c().addEventListener("tanstack-devtools-global",b),()=>this.#c().removeEventListener("tanstack-devtools-global",b)}}class M extends L{constructor(a){super({pluginId:"pacer",debug:a?.debug})}}let N=new M;function O(){return{executionCount:0,isPending:!1,lastArgs:void 0,lastExecutionTime:0,nextExecutionTime:0,status:"idle",maybeExecuteCount:0}}let P={enabled:!0,leading:!0,trailing:!0,wait:0};class Q{constructor(a,b){this.fn=a,this.store=new z(O()),this.setOptions=a=>{this.options={...this.options,...a},this.#o()||this.cancel()},this.#p=a=>{this.store.setState(b=>{let c={...b,...a},{isPending:d}=c;return{...c,status:this.#o()?d?"pending":"idle":"disabled"}}),N.emit("Throttler",this)},this.#o=()=>!!K(this.options.enabled,this),this.#q=()=>K(this.options.wait,this),this.maybeExecute=(...a)=>{this.#p({maybeExecuteCount:this.store.state.maybeExecuteCount+1});let b=Date.now(),c=b-this.store.state.lastExecutionTime,d=this.#q();if(this.options.leading&&c>=d)this.#r(...a);else if(this.#p({lastArgs:a}),!this.#s&&this.options.trailing){let a=this.store.state.lastExecutionTime?b-this.store.state.lastExecutionTime:0;this.#p({isPending:!0}),this.#s=setTimeout(()=>{let{lastArgs:a}=this.store.state;void 0!==a&&this.#r(...a)},d-a)}},this.#r=(...a)=>{if(!this.#o())return;this.fn(...a);let b=Date.now(),c=b+this.#q();this.#t(),this.#p({executionCount:this.store.state.executionCount+1,lastExecutionTime:b,nextExecutionTime:c,isPending:!1,lastArgs:void 0}),this.options.onExecute?.(a,this),setTimeout(()=>{this.store.state.isPending||this.#p({nextExecutionTime:void 0})},this.#q())},this.flush=()=>{this.store.state.isPending&&this.store.state.lastArgs&&this.#r(...this.store.state.lastArgs)},this.#t=()=>{this.#s&&(clearTimeout(this.#s),this.#s=void 0)},this.cancel=()=>{this.#t(),this.#p({lastArgs:void 0,isPending:!1})},this.reset=()=>{this.#p(O())},this.key=function(a){return a||("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"")}(b.key),this.options={...P,...b},this.#p(this.options.initialState??{}),N.on("d-Throttler",a=>{a.payload.key===this.key&&(this.#p(a.payload.store.state),this.setOptions(a.payload.options))})}#s;#p;#o;#q;#r;#t}let R=a=>{if(!a.validators)return a.runValidation({validators:[],form:a.form});let b=a.event.async,c=b?void 0:{fn:a.validators.onMount,cause:"mount"},d={fn:b?a.validators.onChangeAsync:a.validators.onChange,cause:"change"},e={fn:b?a.validators.onBlurAsync:a.validators.onBlur,cause:"blur"},f={fn:b?a.validators.onSubmitAsync:a.validators.onSubmit,cause:"submit"},g=b?void 0:{fn:()=>void 0,cause:"server"};switch(a.event.type){case"mount":return a.runValidation({validators:[c],form:a.form});case"submit":return a.runValidation({validators:[d,e,f,g],form:a.form});case"server":return a.runValidation({validators:[],form:a.form});case"blur":return a.runValidation({validators:[e,g],form:a.form});case"change":return a.runValidation({validators:[d,g],form:a.form});default:throw Error(`Unknown validation event type: ${a.event.type}`)}},S=(a,b)=>{let c=function(a,b){let c=new Map;for(let d of a){let a=d.path??[],e=b,f="";for(let b=0;b<a.length;b++){let c=a[b];if(void 0===c)continue;let d="object"==typeof c?c.key:c,g=Number(d);Array.isArray(e)&&!Number.isNaN(g)?f+=`[${g}]`:f+=(b>0?".":"")+String(d),e="object"==typeof e&&null!==e?e[d]:void 0}c.set(f,(c.get(f)??[]).concat(d))}return Object.fromEntries(c)}(a,b);return{form:c,fields:c}},T={validate({value:a,validationSource:b},c){let d=c["~standard"].validate(a);if(d instanceof Promise)throw Error("async function passed to sync validator");if(d.issues)return"field"===b?d.issues:S(d.issues,a)},async validateAsync({value:a,validationSource:b},c){let d=await c["~standard"].validate(a);if(d.issues)return"field"===b?d.issues:S(d.issues,a)}},U=a=>!!a&&"~standard"in a,V={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function W(a){function b(a,b){return`${a}[${b}]`}function c(c,d,e,f){let g=[b(c,d)];switch(e){case"swap":g.push(b(c,f));break;case"move":{let[a,e]=[Math.min(d,f),Math.max(d,f)];for(let d=a;d<=e;d++)g.push(b(c,d));break}default:{let e=a.getFieldValue(c),f=Array.isArray(e)?e.length:0;for(let a=d+1;a<f;a++)g.push(b(c,a))}}return Object.keys(a.fieldInfo).filter(a=>g.some(b=>a.startsWith(b)))}function d(b,c){("up"===c?b:[...b].reverse()).forEach(b=>{var d;let f=(d=b.toString(),d.replace(/\[(\d+)\]/,(a,b)=>{let d=parseInt(b,10),e="up"===c?d+1:Math.max(0,d-1);return`[${e}]`})),g=a.getFieldMeta(f);g?a.setFieldMeta(b,g):a.setFieldMeta(b,e())})}let e=()=>V;return{handleArrayMove:function(e,f,g){let h=c(e,f,"move",g),i=Math.min(f,g),j=Math.max(f,g);for(let a=i;a<=j;a++)h.push(b(e,a));let k=Object.keys(a.fieldInfo).reduce((c,d)=>(d.startsWith(b(e,f))&&c.set(d,a.getFieldMeta(d)),c),new Map);d(h,f<g?"up":"down"),Object.keys(a.fieldInfo).filter(a=>a.startsWith(b(e,g))).forEach(c=>{let d=c.replace(b(e,g),b(e,f)),h=k.get(d);h&&a.setFieldMeta(c,h)})},handleArrayRemove:function(a,b){d(c(a,b,"remove"),"up")},handleArraySwap:function(d,e,f){c(d,e,"swap",f).forEach(c=>{if(!c.toString().startsWith(b(d,e)))return;let g=c.toString().replace(b(d,e),b(d,f)),[h,i]=[a.getFieldMeta(c),a.getFieldMeta(g)];h&&a.setFieldMeta(g,h),i&&a.setFieldMeta(c,i)})},handleArrayInsert:function(f,g){let h=c(f,g,"insert");d(h,"down"),h.forEach(c=>{c.toString().startsWith(b(f,g))&&a.setFieldMeta(c,e())})}}}class X extends L{constructor(){super({pluginId:"form-devtools",reconnectEveryMs:1e3})}}let Y=new X;function Z(a){return{values:a.values??{},errorMap:a.errorMap??{},fieldMetaBase:a.fieldMetaBase??{},isSubmitted:a.isSubmitted??!1,isSubmitting:a.isSubmitting??!1,isValidating:a.isValidating??!1,submissionAttempts:a.submissionAttempts??0,isSubmitSuccessful:a.isSubmitSuccessful??!1,validationMetaMap:a.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class ${constructor(a){this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{let a=this.fieldMetaDerived.mount(),b=this.store.mount(),c=()=>{a(),b(),Y.emit("form-unmounted",{id:this._formId})};this.options.listeners?.onMount?.({formApi:this});let{onMount:d}=this.options.validators||{};return Y.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}),d&&this.validateSync("mount"),c},this.update=a=>{if(!a)return;let b=this.options;this.options=a;let c=!!a.transform?.deps?.some((a,b)=>a!==this.prevTransformArray[b]),d=a.defaultValues&&!t(a.defaultValues,b.defaultValues)&&!this.state.isTouched,e=!t(a.defaultState,b.defaultState)&&!this.state.isTouched;(d||e||c)&&(J(()=>{this.baseStore.setState(()=>Z(Object.assign({},this.state,e?a.defaultState:{},d?{values:a.defaultValues}:{},c?{_force_re_eval:!this.state._force_re_eval}:{})))}),Y.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}))},this.reset=(a,b)=>{let{fieldMeta:c}=this.state,d=this.resetFieldMeta(c);a&&!b?.keepDefaultValues&&(this.options={...this.options,defaultValues:a}),this.baseStore.setState(()=>Z({...this.options.defaultState,values:a??this.options.defaultValues??this.options.defaultState?.values,fieldMetaBase:d}))},this.validateAllFields=async a=>{let b=[];return J(()=>{Object.values(this.fieldInfo).forEach(c=>{if(!c.instance)return;let d=c.instance;b.push(Promise.resolve().then(()=>d.validate(a,{skipFormValidation:!0}))),c.instance.state.meta.isTouched||c.instance.setMeta(a=>({...a,isTouched:!0}))})}),(await Promise.all(b)).flat()},this.validateArrayFieldsStartingFrom=async(a,b,c)=>{let d=this.getFieldValue(a),e=Array.isArray(d)?Math.max(d.length-1,0):null,f=[`${a}[${b}]`];for(let c=b+1;c<=(e??0);c++)f.push(`${a}[${c}]`);let g=Object.keys(this.fieldInfo).filter(a=>f.some(b=>a.startsWith(b))),h=[];return J(()=>{g.forEach(a=>{h.push(Promise.resolve().then(()=>this.validateField(a,c)))})}),(await Promise.all(h)).flat()},this.validateField=(a,b)=>{let c=this.fieldInfo[a]?.instance;return c?(c.state.meta.isTouched||c.setMeta(a=>({...a,isTouched:!0})),c.validate(b)):[]},this.validateSync=a=>{let b=q(a,{...this.options,form:this,validationLogic:this.options.validationLogic||R}),c=!1,d={};return J(()=>{for(let a of b){if(!a.validate)continue;let{formError:b,fieldErrors:e}=_(this.runValidator({validate:a.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"})),f=aa(a.cause);for(let a of Object.keys(this.state.fieldMeta)){if(void 0===this.baseStore.state.fieldMetaBase[a])continue;let b=this.getFieldMeta(a);if(!b)continue;let{errorMap:c,errorSourceMap:g}=b,h=e?.[a],{newErrorValue:i,newSource:j}=u({newFormValidatorError:h,isPreviousErrorFromFormValidator:g?.[f]==="form",previousErrorValue:c?.[f]});"form"===j&&(d[a]={...d[a],[f]:h}),c?.[f]!==i&&this.setFieldMeta(a,a=>({...a,errorMap:{...a.errorMap,[f]:i},errorSourceMap:{...a.errorSourceMap,[f]:j}}))}this.state.errorMap?.[f]!==b&&this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[f]:b}})),(b||e)&&(c=!0)}let e=aa("submit");this.state.errorMap?.[e]&&"submit"!==a&&!c&&this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[e]:void 0}}));let f=aa("server");this.state.errorMap?.[f]&&"server"!==a&&!c&&this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[f]:void 0}}))}),{hasErrored:c,fieldsErrorMap:d}},this.validateAsync=async a=>{let b,c=r(a,{...this.options,form:this,validationLogic:this.options.validationLogic||R});this.state.isFormValidating||this.baseStore.setState(a=>({...a,isFormValidating:!0}));let d=[];for(let a of c){if(!a.validate)continue;let c=aa(a.cause),e=this.state.validationMetaMap[c];e?.lastAbortController.abort();let f=new AbortController;this.state.validationMetaMap[c]={lastAbortController:f},d.push(new Promise(async c=>{let d;try{d=await new Promise((b,c)=>{setTimeout(async()=>{if(f.signal.aborted)return b(void 0);try{b(await this.runValidator({validate:a.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:f.signal},type:"validateAsync"}))}catch(a){c(a)}},a.debounceMs)})}catch(a){d=a}let{formError:e,fieldErrors:g}=_(d);g&&(b=b?{...b,...g}:g);let h=aa(a.cause);for(let a of Object.keys(this.state.fieldMeta)){if(void 0===this.baseStore.state.fieldMetaBase[a])continue;let c=this.getFieldMeta(a);if(!c)continue;let{errorMap:d,errorSourceMap:e}=c,{newErrorValue:f,newSource:g}=u({newFormValidatorError:b?.[a],isPreviousErrorFromFormValidator:e?.[h]==="form",previousErrorValue:d?.[h]});d?.[h]!==f&&this.setFieldMeta(a,a=>({...a,errorMap:{...a.errorMap,[h]:f},errorSourceMap:{...a.errorSourceMap,[h]:g}}))}this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[h]:e}})),c(b?{fieldErrors:b,errorMapKey:h}:void 0)}))}let e={};if(d.length){for(let a of(await Promise.all(d)))if(a?.fieldErrors){let{errorMapKey:b}=a;for(let[c,d]of Object.entries(a.fieldErrors)){let a={...e[c]||{},[b]:d};e[c]=a}}}return this.baseStore.setState(a=>({...a,isFormValidating:!1})),e},this.validate=a=>{let{hasErrored:b,fieldsErrorMap:c}=this.validateSync(a);return b&&!this.options.asyncAlways?c:this.validateAsync(a)},this.getFieldValue=a=>g(this.state.values,a),this.getFieldMeta=a=>this.state.fieldMeta[a],this.getFieldInfo=a=>this.fieldInfo[a]||={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}},this.setFieldMeta=(a,b)=>{this.baseStore.setState(c=>({...c,fieldMetaBase:{...c.fieldMetaBase,[a]:f(b,c.fieldMetaBase[a])}}))},this.resetFieldMeta=a=>Object.keys(a).reduce((a,b)=>(a[b]=V,a),{}),this.setFieldValue=(a,b,c)=>{let d=c?.dontUpdateMeta??!1,e=c?.dontRunListeners??!1,f=c?.dontValidate??!1;J(()=>{d||this.setFieldMeta(a,a=>({...a,isTouched:!0,isDirty:!0,errorMap:{...a?.errorMap,onMount:void 0}})),this.baseStore.setState(c=>({...c,values:h(c.values,a,b)}))}),e||this.getFieldInfo(a).instance?.triggerOnChangeListener(),f||this.validateField(a,"change")},this.deleteField=a=>{let b=[...Object.keys(this.fieldInfo).filter(b=>{let c=a.toString();return b!==c&&b.startsWith(c)}),a];this.baseStore.setState(a=>{let c={...a};return b.forEach(a=>{c.values=function(a,b){let c=p(b);return function a(b){if(!b)return;if(1===c.length){let a=c[0];if(Array.isArray(b)&&"number"==typeof a)return b.filter((b,c)=>c!==a);let{[a]:d,...e}=b;return e}let d=c.shift();if("string"==typeof d&&"object"==typeof b)return{...b,[d]:a(b[d])};if("number"==typeof d&&Array.isArray(b)){if(d>=b.length)return b;let c=b.slice(0,d);return[...c.length?c:Array(d),a(b[d]),...b.slice(d+1)]}throw Error("It seems we have created an infinite loop in deleteBy. ")}(a)}(c.values,a),delete this.fieldInfo[a],delete c.fieldMetaBase[a]}),c})},this.pushFieldValue=(a,b,c)=>{this.setFieldValue(a,a=>[...Array.isArray(a)?a:[],b],c)},this.insertFieldValue=async(a,b,c,d)=>{this.setFieldValue(a,a=>[...a.slice(0,b),c,...a.slice(b)],w(d,{dontValidate:!0}));let e=d?.dontValidate??!1;e||await this.validateField(a,"change"),W(this).handleArrayInsert(a,b),e||await this.validateArrayFieldsStartingFrom(a,b,"change")},this.replaceFieldValue=async(a,b,c,d)=>{this.setFieldValue(a,a=>a.map((a,d)=>d===b?c:a),w(d,{dontValidate:!0})),d?.dontValidate||(await this.validateField(a,"change"),await this.validateArrayFieldsStartingFrom(a,b,"change"))},this.removeFieldValue=async(a,b,c)=>{let d=this.getFieldValue(a),e=Array.isArray(d)?Math.max(d.length-1,0):null;if(this.setFieldValue(a,a=>a.filter((a,c)=>c!==b),w(c,{dontValidate:!0})),W(this).handleArrayRemove(a,b),null!==e){let b=`${a}[${e}]`;this.deleteField(b)}c?.dontValidate||(await this.validateField(a,"change"),await this.validateArrayFieldsStartingFrom(a,b,"change"))},this.swapFieldValues=(a,b,c,d)=>{this.setFieldValue(a,a=>{let d=a[b],e=a[c];return h(h(a,`${b}`,e),`${c}`,d)},w(d,{dontValidate:!0})),W(this).handleArraySwap(a,b,c),d?.dontValidate||(this.validateField(a,"change"),this.validateField(`${a}[${b}]`,"change"),this.validateField(`${a}[${c}]`,"change"))},this.moveFieldValues=(a,b,c,d)=>{this.setFieldValue(a,a=>{let d=[...a];return d.splice(c,0,d.splice(b,1)[0]),d},w(d,{dontValidate:!0})),W(this).handleArrayMove(a,b,c),d?.dontValidate||(this.validateField(a,"change"),this.validateField(`${a}[${b}]`,"change"),this.validateField(`${a}[${c}]`,"change"))},this.clearFieldValues=(a,b)=>{let c=this.getFieldValue(a),d=Array.isArray(c)?Math.max(c.length-1,0):null;if(this.setFieldValue(a,[],w(b,{dontValidate:!0})),null!==d)for(let b=0;b<=d;b++){let c=`${a}[${b}]`;this.deleteField(c)}b?.dontValidate||this.validateField(a,"change")},this.resetField=a=>{this.baseStore.setState(b=>({...b,fieldMetaBase:{...b.fieldMetaBase,[a]:V},values:this.options.defaultValues?h(b.values,a,g(this.options.defaultValues,a)):b.values}))},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((a,[b,c])=>(Object.keys(c).length&&c.errors.length&&(a[b]={errors:c.errors,errorMap:c.errorMap}),a),{})}),this.parseValuesWithSchema=a=>T.validate({value:this.state.values,validationSource:"form"},a),this.parseValuesWithSchemaAsync=a=>T.validateAsync({value:this.state.values,validationSource:"form"},a),this.timeoutIds={validations:{},listeners:{},formListeners:{}},this._formId=a?.formId??function(){let a,b=0,c="";if(!d||x+16>256){for(d=Array(256),b=256;b--;)d[b]=256*Math.random()|0;b=0,x=0}for(;b<16;b++)a=d[x+b],6===b?c+=y[15&a|64]:8===b?c+=y[63&a|128]:c+=y[a],1&b&&b>1&&b<11&&(c+="-");return x++,c}(),this._devtoolsSubmissionOverride=!1,this.baseStore=new z(Z({...a?.defaultState,values:a?.defaultValues??a?.defaultState?.values})),this.fieldMetaDerived=new A({deps:[this.baseStore],fn:({prevDepVals:a,currDepVals:b,prevVal:c})=>{let d=a?.[0],e=b[0],f=0,h={};for(let a of Object.keys(e.fieldMetaBase)){let b=e.fieldMetaBase[a],i=d?.fieldMetaBase[a],j=c?.[a],k=g(e.values,a),l=j?.errors;if(!i||b.errorMap!==i.errorMap){l=Object.values(b.errorMap??{}).filter(a=>void 0!==a);let c=this.getFieldInfo(a)?.instance;c&&!c.options.disableErrorFlat&&(l=l.flat(1))}let m=!function(a){return!(Array.isArray(a)&&0===a.length)}(l),n=!b.isDirty,o=t(k,g(this.options.defaultValues,a))||t(k,this.getFieldInfo(a)?.instance?.options.defaultValue);if(j&&j.isPristine===n&&j.isValid===m&&j.isDefaultValue===o&&j.errors===l&&b===i){h[a]=j,f++;continue}h[a]={...b,errors:l??[],isPristine:n,isValid:m,isDefaultValue:o}}return Object.keys(e.fieldMetaBase).length&&c&&f===Object.keys(e.fieldMetaBase).length?c:h}}),this.store=new A({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:a,currDepVals:b,prevVal:c})=>{let d=a?.[0],e=b[0],f=Object.values(b[1]).filter(Boolean),g=f.some(a=>a.isValidating),h=f.every(a=>a.isValid),i=f.some(a=>a.isTouched),j=f.some(a=>a.isBlurred),k=f.every(a=>a.isDefaultValue),l=i&&e.errorMap?.onMount,m=f.some(a=>a.isDirty),n=!m,o=!!(e.errorMap?.onMount||f.some(a=>a?.errorMap?.onMount)),p=c?.errors??[];d&&e.errorMap===d.errorMap||(p=Object.values(e.errorMap).reduce((a,b)=>(void 0===b||(b&&s(b)?a.push(b.form):a.push(b)),a),[]));let q=0===p.length,r=h&&q,u=this.options.canSubmitWhenInvalid??!1,v=0===e.submissionAttempts&&!i&&!o||!g&&!e.isSubmitting&&r||u,w=e.errorMap;if(l&&(p=p.filter(a=>a!==e.errorMap.onMount),w=Object.assign(w,{onMount:void 0})),c&&d&&c.errorMap===w&&c.fieldMeta===this.fieldMetaDerived.state&&c.errors===p&&c.isFieldsValidating===g&&c.isFieldsValid===h&&c.isFormValid===q&&c.isValid===r&&c.canSubmit===v&&c.isTouched===i&&c.isBlurred===j&&c.isPristine===n&&c.isDefaultValue===k&&c.isDirty===m&&t(d,e))return c;let x={...e,errorMap:w,fieldMeta:this.fieldMetaDerived.state,errors:p,isFieldsValidating:g,isFieldsValid:h,isFormValid:q,isValid:r,canSubmit:v,isTouched:i,isBlurred:j,isPristine:n,isDefaultValue:k,isDirty:m},y=this.options.transform?.deps??[];if(y.length!==this.prevTransformArray.length||y.some((a,b)=>a!==this.prevTransformArray[b])){let a=Object.assign({},this,{state:x});this.options.transform?.fn(a),x=a.state,this.prevTransformArray=y}return x}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(a||{});let b=new Q(a=>Y.emit("form-state",{id:this._formId,state:a}),{wait:300}).maybeExecute;this.store.subscribe(()=>{b(this.store.state)}),Y.on("request-form-state",a=>{a.payload.id===this._formId&&Y.emit("form-api",{id:this._formId,state:this.store.state,options:this.options})}),Y.on("request-form-reset",a=>{a.payload.id===this._formId&&this.reset()}),Y.on("request-form-force-submit",a=>{a.payload.id===this._formId&&(this._devtoolsSubmissionOverride=!0,this.handleSubmit(),this._devtoolsSubmissionOverride=!1)})}get state(){return this.store.state}get formId(){return this._formId}runValidator(a){return U(a.validate)?T[a.type](a.value,a.validate):a.validate(a.value)}async handleSubmit(a){this.baseStore.setState(a=>({...a,isSubmitted:!1,submissionAttempts:a.submissionAttempts+1,isSubmitSuccessful:!1})),J(()=>{Object.values(this.fieldInfo).forEach(a=>{a.instance&&(a.instance.state.meta.isTouched||a.instance.setMeta(a=>({...a,isTouched:!0})))})});let b=a??this.options.onSubmitMeta;if(!this.state.canSubmit&&!this._devtoolsSubmissionOverride)return void this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:b});this.baseStore.setState(a=>({...a,isSubmitting:!0}));let c=()=>{this.baseStore.setState(a=>({...a,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){c(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:b}),Y.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validateAllFields",errors:Object.values(this.state.fieldMeta).map(a=>a.errors).flat()});return}if(await this.validate("submit"),!this.state.isValid){c(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:b}),Y.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validate",errors:this.state.errors});return}J(()=>{Object.values(this.fieldInfo).forEach(a=>{a.instance?.options.listeners?.onSubmit?.({value:a.instance.state.value,fieldApi:a.instance})})}),this.options.listeners?.onSubmit?.({formApi:this,meta:b});try{await this.options.onSubmit?.({value:this.state.values,formApi:this,meta:b}),J(()=>{this.baseStore.setState(a=>({...a,isSubmitted:!0,isSubmitSuccessful:!0})),Y.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!0}),c()})}catch(a){throw this.baseStore.setState(a=>({...a,isSubmitSuccessful:!1})),Y.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"inflight",onError:a}),c(),a}}setErrorMap(a){J(()=>{Object.entries(a).forEach(([a,b])=>{if(s(b)){let{formError:c,fieldErrors:d}=_(b);for(let b of Object.keys(this.fieldInfo))this.getFieldMeta(b)&&this.setFieldMeta(b,c=>({...c,errorMap:{...c.errorMap,[a]:d?.[b]},errorSourceMap:{...c.errorSourceMap,[a]:"form"}}));this.baseStore.setState(b=>({...b,errorMap:{...b.errorMap,[a]:c}}))}else this.baseStore.setState(c=>({...c,errorMap:{...c.errorMap,[a]:b}}))})})}}function _(a){if(a)return s(a)?{formError:_(a.form).formError,fieldErrors:a.fields}:{formError:a};return{formError:void 0}}function aa(a){switch(a){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}var ab=c(89096);function ac(a,b=a=>a){return(0,ab.useSyncExternalStoreWithSelector)(a.subscribe,()=>a.state,()=>a.state,b,ad)}function ad(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(let[c,d]of a)if(!b.has(c)||!Object.is(d,b.get(c)))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}if(a instanceof Date&&b instanceof Date)return a.getTime()===b.getTime();let c=ae(a);if(c.length!==ae(b).length)return!1;for(let d=0;d<c.length;d++)if(!Object.prototype.hasOwnProperty.call(b,c[d])||!Object.is(a[c[d]],b[c[d]]))return!1;return!0}function ae(a){return Object.keys(a).concat(Object.getOwnPropertySymbols(a))}var af=c(69505);class ag{constructor(a){this.options={},this.mount=()=>{let a=this.store.mount();void 0===this.options.defaultValue||this.getMeta().isTouched||this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0}),this.getInfo().instance=this,this.update(this.options);let{onMount:b}=this.options.validators||{};if(b){let a=this.runValidator({validate:b,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});a&&this.setMeta(b=>({...b,errorMap:{...b?.errorMap,onMount:a},errorSourceMap:{...b?.errorSourceMap,onMount:"field"}}))}return this.options.listeners?.onMount?.({value:this.state.value,fieldApi:this}),a},this.update=a=>{this.options=a,this.name=a.name,!this.state.meta.isTouched&&void 0!==this.options.defaultValue&&(t(this.form.getFieldValue(this.name),a.defaultValue)||this.form.setFieldValue(this.name,a.defaultValue,{dontUpdateMeta:!0,dontValidate:!0,dontRunListeners:!0})),this.form.getFieldMeta(this.name)||this.form.setFieldMeta(this.name,this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(a,b)=>{this.form.setFieldValue(this.name,a,w(b,{dontRunListeners:!0,dontValidate:!0})),b?.dontRunListeners||this.triggerOnChangeListener(),b?.dontValidate||this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=a=>this.form.setFieldMeta(this.name,a),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(a,b)=>{this.form.pushFieldValue(this.name,a,w(b,{dontRunListeners:!0})),b?.dontRunListeners||this.triggerOnChangeListener()},this.insertValue=(a,b,c)=>{this.form.insertFieldValue(this.name,a,b,w(c,{dontRunListeners:!0})),c?.dontRunListeners||this.triggerOnChangeListener()},this.replaceValue=(a,b,c)=>{this.form.replaceFieldValue(this.name,a,b,w(c,{dontRunListeners:!0})),c?.dontRunListeners||this.triggerOnChangeListener()},this.removeValue=(a,b)=>{this.form.removeFieldValue(this.name,a,w(b,{dontRunListeners:!0})),b?.dontRunListeners||this.triggerOnChangeListener()},this.swapValues=(a,b,c)=>{this.form.swapFieldValues(this.name,a,b,w(c,{dontRunListeners:!0})),c?.dontRunListeners||this.triggerOnChangeListener()},this.moveValue=(a,b,c)=>{this.form.moveFieldValues(this.name,a,b,w(c,{dontRunListeners:!0})),c?.dontRunListeners||this.triggerOnChangeListener()},this.clearValues=a=>{this.form.clearFieldValues(this.name,w(a,{dontRunListeners:!0})),a?.dontRunListeners||this.triggerOnChangeListener()},this.getLinkedFields=a=>{let b=Object.values(this.form.fieldInfo),c=[];for(let d of b){if(!d.instance)continue;let{onChangeListenTo:b,onBlurListenTo:e}=d.instance.options.validators||{};"change"===a&&b?.includes(this.name)&&c.push(d.instance),"blur"===a&&e?.includes(this.name)&&c.push(d.instance)}return c},this.validateSync=(a,b)=>{let c=q(a,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||R}),d=this.getLinkedFields(a).reduce((b,c)=>{let d=q(a,{...c.options,form:c.form,validationLogic:c.form.options.validationLogic||R});return d.forEach(a=>{a.field=c}),b.concat(d)},[]),e=!1;J(()=>{let a=(a,c)=>{let d=ai(c.cause),f=c.validate?ah(a.runValidator({validate:c.validate,value:{value:a.store.state.value,validationSource:"field",fieldApi:a},type:"validate"})):void 0,{newErrorValue:g,newSource:h}=v({formLevelError:b[d],fieldLevelError:f});a.state.meta.errorMap?.[d]!==g&&a.setMeta(a=>({...a,errorMap:{...a.errorMap,[d]:g},errorSourceMap:{...a.errorSourceMap,[d]:h}})),g&&(e=!0)};for(let b of c)a(this,b);for(let b of d)b.validate&&a(b.field,b)});let f=ai("submit");return this.state.meta.errorMap?.[f]&&"submit"!==a&&!e&&this.setMeta(a=>({...a,errorMap:{...a.errorMap,[f]:void 0},errorSourceMap:{...a.errorSourceMap,[f]:void 0}})),{hasErrored:e}},this.validateAsync=async(a,b)=>{let c=r(a,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||R}),d=await b,e=this.getLinkedFields(a),f=e.reduce((b,c)=>{let d=r(a,{...c.options,form:c.form,validationLogic:c.form.options.validationLogic||R});return d.forEach(a=>{a.field=c}),b.concat(d)},[]);for(let a of(this.state.meta.isValidating||this.setMeta(a=>({...a,isValidating:!0})),e))a.setMeta(a=>({...a,isValidating:!0}));let g=[],h=[],i=(a,b,c)=>{let e=ai(b.cause),f=a.getInfo().validationMetaMap[e];f?.lastAbortController.abort();let g=new AbortController;this.getInfo().validationMetaMap[e]={lastAbortController:g},c.push(new Promise(async c=>{let f;try{f=await new Promise((c,d)=>{this.timeoutIds.validations[b.cause]&&clearTimeout(this.timeoutIds.validations[b.cause]),this.timeoutIds.validations[b.cause]=setTimeout(async()=>{if(g.signal.aborted)return c(void 0);try{c(await this.runValidator({validate:b.validate,value:{value:a.store.state.value,fieldApi:a,signal:g.signal,validationSource:"field"},type:"validateAsync"}))}catch(a){d(a)}},b.debounceMs)})}catch(a){f=a}if(g.signal.aborted)return c(void 0);let h=ah(f),{newErrorValue:i,newSource:j}=v({formLevelError:d[this.name]?.[e],fieldLevelError:h});a.setMeta(a=>({...a,errorMap:{...a?.errorMap,[e]:i},errorSourceMap:{...a.errorSourceMap,[e]:j}})),c(i)}))};for(let a of c)a.validate&&i(this,a,g);for(let a of f)a.validate&&i(a.field,a,h);let j=[];for(let a of((g.length||h.length)&&(j=await Promise.all(g),await Promise.all(h)),this.setMeta(a=>({...a,isValidating:!1})),e))a.setMeta(a=>({...a,isValidating:!1}));return j.filter(Boolean)},this.validate=(a,b)=>{if(!this.state.meta.isTouched)return[];let{fieldsErrorMap:c}=b?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(a),{hasErrored:d}=this.validateSync(a,c[this.name]??{});if(d&&!this.options.asyncAlways)return this.getInfo().validationMetaMap[ai(a)]?.lastAbortController.abort(),this.state.meta.errors;let e=b?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(a);return this.validateAsync(a,e)},this.handleChange=a=>{this.setValue(a)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta(a=>({...a,isTouched:!0})),this.state.meta.isBlurred||this.setMeta(a=>({...a,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.parseValueWithSchema=a=>T.validate({value:this.state.value,validationSource:"field"},a),this.parseValueWithSchemaAsync=a=>T.validateAsync({value:this.state.value,validationSource:"field"},a),this.form=a.form,this.name=a.name,this.options=a,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new A({deps:[this.form.store],fn:()=>{let b=this.form.getFieldMeta(this.name)??{...V,...a.defaultMeta},c=this.form.getFieldValue(this.name);return b.isTouched||void 0!==c||void 0===this.options.defaultValue||t(c,this.options.defaultValue)||(c=this.options.defaultValue),{value:c,meta:b}}})}get state(){return this.store.state}runValidator(a){return U(a.validate)?T[a.type](a.value,a.validate):a.validate(a.value)}setErrorMap(a){this.setMeta(b=>({...b,errorMap:{...b.errorMap,...a}}))}triggerOnBlurListener(){let a=this.form.options.listeners?.onBlurDebounceMs;a&&a>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this})},a)):this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this});let b=this.options.listeners?.onBlurDebounceMs;b&&b>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})},b)):this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}triggerOnChangeListener(){let a=this.form.options.listeners?.onChangeDebounceMs;a&&a>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout(()=>{this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this})},a)):this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this});let b=this.options.listeners?.onChangeDebounceMs;b&&b>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},b)):this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})}}function ah(a){if(a)return a}function ai(a){switch(a){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}let aj="undefined"!=typeof window?af.useLayoutEffect:af.useEffect,ak=({children:a,...b})=>{let c=function(a){let b=(0,af.useRef)(a);b.current=a;let c=(0,af.useMemo)(()=>{let c=new ag({...b.current,form:a.form,name:a.name});return c.Field=ak,c},[a.form,a.name]);return aj(c.mount,[c]),aj(()=>{c.update(a)}),ac(c.store,"array"===a.mode?a=>[a.meta,Object.keys(a.value??[]).length]:void 0),c}(b),d=(0,af.useMemo)(()=>f(a,c),[a,c,c.state.value,c.state.meta]);return(0,e.jsx)(e.Fragment,{children:d})};function al({form:a,selector:b,children:c}){return f(c,ac(a.store,b))}function am(a){let b=(0,af.useId)(),[c]=(0,af.useState)(()=>{let c=new $({...a,formId:b});return c.Field=function(a){return(0,e.jsx)(ak,{...a,form:c})},c.Subscribe=function(a){return(0,e.jsx)(al,{form:c,selector:a.selector,children:a.children})},c});return aj(c.mount,[]),aj(()=>{c.update(a)}),c}},72263:(a,b,c)=>{var d=c(69505),e="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},f=d.useState,g=d.useEffect,h=d.useLayoutEffect,i=d.useDebugValue;function j(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!e(a,c)}catch(a){return!0}}var k="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(a,b){return b()}:function(a,b){var c=b(),d=f({inst:{value:c,getSnapshot:b}}),e=d[0].inst,k=d[1];return h(function(){e.value=c,e.getSnapshot=b,j(e)&&k({inst:e})},[a,c,b]),g(function(){return j(e)&&k({inst:e}),a(function(){j(e)&&k({inst:e})})},[a]),i(c),c};b.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:k},73912:(a,b,c)=>{var d=c(69505),e=c(88938),f="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},g=e.useSyncExternalStore,h=d.useRef,i=d.useEffect,j=d.useMemo,k=d.useDebugValue;b.useSyncExternalStoreWithSelector=function(a,b,c,d,e){var l=h(null);if(null===l.current){var m={hasValue:!1,value:null};l.current=m}else m=l.current;var n=g(a,(l=j(function(){function a(a){if(!i){if(i=!0,g=a,a=d(a),void 0!==e&&m.hasValue){var b=m.value;if(e(b,a))return h=b}return h=a}if(b=h,f(g,a))return b;var c=d(a);return void 0!==e&&e(b,c)?(g=a,b):(g=a,h=c)}var g,h,i=!1,j=void 0===c?null:c;return[function(){return a(b())},null===j?void 0:function(){return a(j())}]},[b,c,d,e]))[0],l[1]);return i(function(){m.hasValue=!0,m.value=n},[n]),k(n),n}},88938:(a,b,c)=>{a.exports=c(72263)},89096:(a,b,c)=>{a.exports=c(73912)}};