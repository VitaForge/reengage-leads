"use strict";exports.id=916,exports.ids=[916],exports.modules={774:(a,b,c)=>{c.d(b,{c:()=>s,f:()=>n,i:()=>q,n:()=>t,p:()=>o,s:()=>r,t:()=>p});var d=c(49957),e=c(78731);c(35298),c(74297);var f=c(5263),g=c(75564),h=c(75578),i=c(71121);c(50891);var j=c(75301);function k(a){let b=a.split("."),c=parseInt(b[b.length-1]||"0",10);return isNaN(c)?0:c}function l(a,b){let c={};for(let d in a)c[d]={name:d,value:"",options:{...b,maxAge:0}};return c}function m(a,b,c){let d=function(a,b){let c={};for(let[d,e]of Object.entries(function(a){let b=a.headers?.get("cookie");if(!b)return{};let c={};for(let a of b.split("; ")){let[b,...d]=a.split("=");b&&d.length>0&&(c[b]=d.join("="))}return c}(b)))d.startsWith(a)&&(c[d]=e);return c}(a,c),e=c.context.logger;return{getValue:()=>Object.keys(d).sort((a,b)=>k(a)-k(b)).map(a=>d[a]).join(""),hasChunks:()=>Object.keys(d).length>0,chunk(c,f){let g=l(d,b);for(let a in d)delete d[a];for(let h of function(a,b,c){let d=Math.ceil(a.value.length/3896);if(1===d)return b[a.name]=a.value,[a];let e=[];for(let c=0;c<d;c++){let d=`${a.name}.${c}`,f=3896*c,g=a.value.substring(f,f+3896);e.push({...a,name:d,value:g}),b[d]=g}return c.debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:200,valueSize:a.value.length,chunkCount:d,chunks:e.map(a=>a.value.length+200)}),e}({name:a,value:c,options:{...b,...f}},d,e))g[h.name]=h;return Object.values(g)},clean(){let a=l(d,b);for(let a in d)delete d[a];return Object.values(a)},setCookies(a){for(let b of a)c.setCookie(b.name,b.value,b.options)}}}function n(a,b){let c=a.getCookie(b);if(c)return c;let d=[],e=a.headers?.get("cookie");if(!e)return null;let f={};for(let a of e.split("; ")){let[b,...c]=a.split("=");b&&c.length>0&&(f[b]=c.join("="))}for(let[a,c]of Object.entries(f))if(a.startsWith(b+".")){let b=parseInt(a.split(".").at(-1)||"0",10);isNaN(b)||d.push({index:b,value:c})}return d.length>0?(d.sort((a,b)=>a.index-b.index),d.map(a=>a.value).join("")):null}let o=h.lqM(h.Ikc({disableCookieCache:h.auy.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:h.auy.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}));function p(a){let b=(a.advanced?.useSecureCookies!==void 0?a.advanced?.useSecureCookies:void 0!==a.baseURL?!!a.baseURL.startsWith("https://"):f.KV)?"__Secure-":"",c=!!a.advanced?.crossSubDomainCookies?.enabled,d=c?a.advanced?.crossSubDomainCookies?.domain||(a.baseURL?new URL(a.baseURL).hostname:void 0):void 0;if(c&&!d)throw new g.$("baseURL is required when crossSubdomainCookies are enabled");return function(e,f={}){let g=a.advanced?.cookiePrefix||"better-auth",h=a.advanced?.cookies?.[e]?.name||`${g}.${e}`,i=a.advanced?.cookies?.[e]?.attributes;return{name:`${b}${h}`,attributes:{secure:!!b,sameSite:"lax",path:"/",httpOnly:!0,...c?{domain:d}:{},...a.advanced?.defaultCookieAttributes,...f,...i}}}}function q(a){let b=p(a),c=b("session_token",{maxAge:a.session?.expiresIn||function(a,b){var c="7d";if("string"!=typeof c||0===c.length||c.length>100)throw Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify(c)}`);let d=/^(?<value>-?\d*\.?\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec(c);if(!d?.groups)return NaN;let{value:e,unit:f="ms"}=d.groups,g=parseFloat(e),h=f.toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*g;case"months":case"month":case"mo":return 26298e5*g;case"weeks":case"week":case"w":return 6048e5*g;case"days":case"day":case"d":return 864e5*g;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*g;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*g;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:throw Error(`Unknown unit "${h}" provided to ms.parse(). value=${JSON.stringify(c)}`)}}("7d")/1e3}),d=b("session_data",{maxAge:a.session?.cookieCache?.maxAge||300}),e=b("account_data",{maxAge:a.session?.cookieCache?.maxAge||300}),f=b("dont_remember");return{sessionToken:{name:c.name,options:c.attributes},sessionData:{name:d.name,options:d.attributes},dontRememberToken:{name:f.name,options:f.attributes},accountData:{name:e.name,options:e.attributes}}}async function r(a,b,c){if(a.context.options.session?.cookieCache?.enabled){let f,g=Object.entries(b.session).reduce((b,[c,d])=>{let e=a.context.options.session?.additionalFields?.[c];return e&&!1===e.returned||(b[c]=d),b},{}),h=(0,e.l)(a.context.options,b.user),k=a.context.options.session?.cookieCache?.version,l="1";if(k){if("string"==typeof k)l=k;else if("function"==typeof k){let a=k(b.session,b.user);l=a instanceof Promise?await a:a}}let n={session:g,user:h,updatedAt:Date.now(),version:l},o={...a.context.authCookies.sessionData.options,maxAge:c?void 0:a.context.authCookies.sessionData.options.maxAge},p=(0,e.u)(o.maxAge||60,"sec").getTime(),q=a.context.options.session?.cookieCache?.strategy||"compact";if((f="jwe"===q?await (0,d.r)(n,a.context.secret,"better-auth-session",o.maxAge||300):"jwt"===q?await (0,d.t)(n,a.context.secret,o.maxAge||300):i.z.encode(JSON.stringify({session:n,expiresAt:p,signature:await (0,j.s)("SHA-256","base64urlnopad").sign(a.context.secret,JSON.stringify({...n,expiresAt:p}))}),{padding:!1})).length>4093){let b=m(a.context.authCookies.sessionData.name,o,a),c=b.chunk(f,o);b.setCookies(c)}else{let b=m(a.context.authCookies.sessionData.name,o,a);if(b.hasChunks()){let a=b.clean();b.setCookies(a)}a.setCookie(a.context.authCookies.sessionData.name,f,o)}}}async function s(a,b,c,d){let e=await a.getSignedCookie(a.context.authCookies.dontRememberToken.name,a.context.secret);c=void 0!==c?c:!!e;let f=a.context.authCookies.sessionToken.options,g=c?void 0:a.context.sessionConfig.expiresIn;await a.setSignedCookie(a.context.authCookies.sessionToken.name,b.session.token,a.context.secret,{...f,maxAge:g,...d}),c&&await a.setSignedCookie(a.context.authCookies.dontRememberToken.name,"true",a.context.secret,a.context.authCookies.dontRememberToken.options),await r(a,b,c),a.context.setNewSession(b),a.context.options.secondaryStorage&&await a.context.secondaryStorage?.set(b.session.token,JSON.stringify({user:b.user,session:b.session}),Math.floor((new Date(b.session.expiresAt).getTime()-Date.now())/1e3))}function t(a,b){a.setCookie(a.context.authCookies.sessionToken.name,"",{...a.context.authCookies.sessionToken.options,maxAge:0});let c=m(a.context.authCookies.sessionData.name,a.context.authCookies.sessionData.options,a),d=c.clean();c.setCookies(d),b||a.setCookie(a.context.authCookies.dontRememberToken.name,"",{...a.context.authCookies.dontRememberToken.options,maxAge:0})}},864:(a,b,c)=>{c.d(b,{Q:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"JSONReferenceNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"JSONReferenceNode",reference:a,traversal:b}),cloneWithTraversal:(a,b)=>(0,d.CN)({...a,traversal:b})})},1045:(a,b,c)=>{c.d(b,{A:()=>au});var d=c(21820),e=c(29021);let f=new Map,g=new Map,h=Symbol("OriginError"),i={};class j extends Promise{constructor(a,b,c,d,e={}){let g,i;super((a,b)=>{g=a,i=b}),this.tagged=Array.isArray(a.raw),this.strings=a,this.args=b,this.handler=c,this.canceller=d,this.options=e,this.state=null,this.statement=null,this.resolve=a=>(this.active=!1,g(a)),this.reject=a=>(this.active=!1,i(a)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[h]=this.handler.debug?Error():this.tagged&&function(a){if(f.has(a))return f.get(a);let b=Error.stackTraceLimit;return Error.stackTraceLimit=4,f.set(a,Error()),Error.stackTraceLimit=b,f.get(a)}(this.strings)}get origin(){return(this.handler.debug?this[h].stack:this.tagged&&g.has(this.strings)?g.get(this.strings):g.set(this.strings,this[h].stack).get(this.strings))||""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(a=1,b){let c;return(this.options.simple=!1,"function"==typeof a&&(b=a,a=1),this.cursorRows=a,"function"==typeof b)?(this.cursorFn=b,this):{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};c&&c();let a=new Promise((a,b)=>{this.cursorFn=b=>(a({value:b,done:!1}),new Promise(a=>c=a)),this.resolve=()=>(this.active=!1,a({done:!0})),this.reject=a=>(this.active=!1,b(a))});return this.execute(),a},return:()=>(c&&c(i),{done:!0})})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw Error(".stream has been renamed to .forEach")}forEach(a){return this.forEachFn=a,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}}class k extends Error{constructor(a){super(a.message),this.name=this.constructor.name,Object.assign(this,a)}}let l={connection:function a(b,c,d){let{host:e,port:f}=d||c,g=Object.assign(Error("write "+b+" "+(c.path||e+":"+f)),{code:b,errno:b,address:c.path||e},c.path?{}:{port:f});return Error.captureStackTrace(g,a),g},postgres:function a(b){let c=new k(b);return Error.captureStackTrace(c,a),c},generic:function a(b,c){let d=Object.assign(Error(b+": "+c),{code:b});return Error.captureStackTrace(d,a),d},notSupported:function a(b){let c=Object.assign(Error(b+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:b});return Error.captureStackTrace(c,a),c}};class m{then(){z()}catch(){z()}finally(){z()}}class n extends m{constructor(a){super(),this.value=F(a)}}class o extends m{constructor(a,b,c){super(),this.value=a,this.type=b,this.array=c}}class p extends m{constructor(a,b){super(),this.first=a,this.rest=b}build(a,b,c,d){let e=y.map(([b,c])=>({fn:c,i:a.search(b)})).sort((a,b)=>a.i-b.i).pop();return -1===e.i?E(this.first,d):e.fn(this.first,this.rest,b,c,d)}}function q(a,b,c,d){let e=a instanceof o?a.value:a;if(void 0===e&&(a instanceof o?a.value=d.transform.undefined:e=a=d.transform.undefined,void 0===e))throw l.generic("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+c.push(a instanceof o?(b.push(a.value),a.array?a.array[a.type||G(a.value)]||a.type||function a(b){return Array.isArray(b)?a(b[0]):1009*("string"==typeof b)}(a.value):a.type):(b.push(a),G(a)))}let r=D({string:{to:25,from:null,serialize:a=>""+a},number:{to:0,from:[21,23,26,700,701],serialize:a=>""+a,parse:a=>+a},json:{to:114,from:[114,3802],serialize:a=>JSON.stringify(a),parse:a=>JSON.parse(a)},boolean:{to:16,from:16,serialize:a=>!0===a?"t":"f",parse:a=>"t"===a},date:{to:1184,from:[1082,1114,1184],serialize:a=>(a instanceof Date?a:new Date(a)).toISOString(),parse:a=>new Date(a)},bytea:{to:17,from:17,serialize:a=>"\\x"+Buffer.from(a).toString("hex"),parse:a=>Buffer.from(a.slice(2),"hex")}});function s(a,b,c,d,e,f){for(let g=1;g<a.strings.length;g++)b+=t(b,c,d,e,f)+a.strings[g],c=a.args[g];return b}function t(a,b,c,d,e){return b instanceof p?b.build(a,c,d,e):b instanceof j?u(b,c,d,e):b instanceof n?b.value:b&&b[0]instanceof j?b.reduce((a,b)=>a+" "+u(b,c,d,e),""):q(b,c,d,e)}function u(a,b,c,d){return a.fragment=!0,s(a,a.strings[0],a.args[0],b,c,d)}function v(a,b,c,d,e){return a.map(a=>"("+d.map(d=>t("values",a[d],b,c,e)).join(",")+")").join(",")}function w(a,b,c,d,e){let f=Array.isArray(a[0]),g=b.length?b.flat():Object.keys(f?a[0]:a);return v(f?a:[a],c,d,g,e)}function x(a,b,c,d,e){let f;return("string"==typeof a&&(a=[a].concat(b)),Array.isArray(a))?E(a,e):(b.length?b.flat():Object.keys(a)).map(b=>((f=a[b])instanceof j?u(f,c,d,e):f instanceof n?f.value:q(f,c,d,e))+" as "+F(e.transform.column.to?e.transform.column.to(b):b)).join(",")}let y=Object.entries({values:w,in:(...a)=>{let b=w(...a);return"()"===b?"(null)":b},select:x,as:x,returning:x,"\\(":x,update:(a,b,c,d,e)=>(b.length?b.flat():Object.keys(a)).map(b=>F(e.transform.column.to?e.transform.column.to(b):b)+"="+t("values",a[b],c,d,e)),insert(a,b,c,d,e){let f=b.length?b.flat():Object.keys(Array.isArray(a)?a[0]:a);return"("+E(f,e)+")values"+v(Array.isArray(a)?a:[a],c,d,f,e)}}).map(([a,b])=>[RegExp("((?:^|[\\s(])"+a+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),b]);function z(){throw l.generic("NOT_TAGGED_CALL","Query not called as a tagged template literal")}let A=r.serializers,B=r.parsers,C=function(a){let b=D(a||{});return{serializers:Object.assign({},A,b.serializers),parsers:Object.assign({},B,b.parsers)}};function D(a){return Object.keys(a).reduce((b,c)=>(a[c].from&&[].concat(a[c].from).forEach(d=>b.parsers[d]=a[c].parse),a[c].serialize&&(b.serializers[a[c].to]=a[c].serialize,a[c].from&&[].concat(a[c].from).forEach(d=>b.serializers[d]=a[c].serialize)),b),{parsers:{},serializers:{}})}function E(a,{transform:{column:b}}){return a.map(a=>F(b.to?b.to(a):a)).join(",")}let F=function(a){return'"'+a.replace(/"/g,'""').replace(/\./g,'"."')+'"'},G=function a(b){return b instanceof o?b.type:b instanceof Date?1184:b instanceof Uint8Array?17:!0===b||!1===b?16:"bigint"==typeof b?20:Array.isArray(b)?a(b[0]):0},H=/\\/g,I=/"/g,J=function a(b,c,d,e){if(!1===Array.isArray(b))return b;if(!b.length)return"{}";let f=b[0],g=1020===e?";":",";return Array.isArray(f)&&!f.type?"{"+b.map(b=>a(b,c,d,e)).join(g)+"}":"{"+b.map(a=>{if(void 0===a&&void 0===(a=d.transform.undefined))throw l.generic("UNDEFINED_VALUE","Undefined values are not allowed");return null===a?"null":'"'+(c?c(a.type?a.value:a):""+a).replace(H,"\\\\").replace(I,'\\"')+'"'}).join(g)+"}"},K={i:0,char:null,str:"",quoted:!1,last:0},L=a=>{let b=a[0];for(let c=1;c<a.length;c++)b+="_"===a[c]?a[++c].toUpperCase():a[c];return b},M=a=>{let b=a[0].toUpperCase();for(let c=1;c<a.length;c++)b+="_"===a[c]?a[++c].toUpperCase():a[c];return b},N=a=>a.replace(/_/g,"-"),O=a=>a.replace(/([A-Z])/g,"_$1").toLowerCase(),P=a=>(a.slice(0,1)+a.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),Q=a=>a.replace(/-/g,"_");function R(a){return function b(c,d){return"object"==typeof c&&null!==c&&(114===d.type||3802===d.type)?Array.isArray(c)?c.map(a=>b(a,d)):Object.entries(c).reduce((c,[e,f])=>Object.assign(c,{[a(e)]:b(f,d)}),{}):c}}L.column={from:L},L.value={from:R(L)},O.column={to:O};let S={...L};S.column.to=O,M.column={from:M},M.value={from:R(M)},P.column={to:P};let T={...M};T.column.to=P,N.column={from:N},N.value={from:R(N)},Q.column={to:Q};let U={...N};U.column.to=Q;var V=c(91645),W=c(34631),X=c(55511),Y=c(27910),Z=c(74998);class $ extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}}let _=function(a=[]){let b=a.slice(),c=0;return{get length(){return b.length-c},remove:a=>{let c=b.indexOf(a);return -1===c?null:(b.splice(c,1),a)},push:a=>(b.push(a),a),shift:()=>{let a=b[c++];return c===b.length?(c=0,b=[]):b[c-1]=void 0,a}}},aa=Buffer.allocUnsafe(256),ab=Object.assign(function(){return ab.i=0,ab},"BCcDdEFfHPpQSX".split("").reduce((a,b)=>{let c=b.charCodeAt(0);return a[b]=()=>(aa[0]=c,ab.i=5,ab),a},{}),{N:"\0",i:0,inc:a=>(ab.i+=a,ab),str(a){let b=Buffer.byteLength(a);return ac(b),ab.i+=aa.write(a,ab.i,b,"utf8"),ab},i16:a=>(ac(2),aa.writeUInt16BE(a,ab.i),ab.i+=2,ab),i32:(a,b)=>(b||0===b?aa.writeUInt32BE(a,b):(ac(4),aa.writeUInt32BE(a,ab.i),ab.i+=4),ab),z:a=>(ac(a),aa.fill(0,ab.i,ab.i+a),ab.i+=a,ab),raw:a=>(aa=Buffer.concat([aa.subarray(0,ab.i),a]),ab.i=aa.length,ab),end(a=1){aa.writeUInt32BE(ab.i-a,a);let b=aa.subarray(0,ab.i);return ab.i=0,aa=Buffer.allocUnsafe(256),b}});function ac(a){if(aa.length-ab.i<a){let b=aa,c=b.length;aa=Buffer.allocUnsafe(c+(c>>1)+a),b.copy(aa)}}let ad=function a(b,c={},{onopen:d=ak,onend:e=ak,onclose:f=ak}={}){let{ssl:g,max:h,user:k,host:m,port:n,database:o,parsers:p,transform:r,onnotice:t,onnotify:u,onparameter:v,max_pipeline:w,keep_alive:x,backoff:y,target_session_attrs:z}=b,A=_(),B=ae++,C={pid:null,secret:null},D=aq(aU,b.idle_timeout),E=aq(aU,b.max_lifetime),F=aq(function(){aS(l.connection("CONNECT_TIMEOUT",b,G)),G.destroy()},b.connect_timeout),G=null,H,I=new $,L=Buffer.alloc(0),M=b.fetch_types,N={},O={},P=Math.random().toString(36).slice(2),Q=1,R=0,S=0,T=0,U=0,aa=0,ac=0,ad=0,am=null,ar=null,as=!1,at=null,au=null,av=null,aw=null,ax=null,ay=null,az=null,aA=null,aB=null,aC=null,aD={queue:c.closed,idleTimer:D,connect(a){av=a,aP()},terminate:aV,execute:aG,cancel:aF,end:aU,count:0,id:B};return c.closed&&c.closed.push(aD),aD;async function aE(){let a;try{a=b.socket?await Promise.resolve(b.socket(b)):new V.Socket}catch(a){aR(a);return}return a.on("error",aR),a.on("close",aW),a.on("drain",aM),a}async function aF({pid:a,secret:b},c,d){try{H=ab().i32(16).i32(0x4d2162e).i32(a).i32(b).end(16),await aO(),G.once("error",d),G.once("close",c)}catch(a){d(a)}}function aG(a){if(as)return aT(a,l.connection("CONNECTION_DESTROYED",b));if(!a.cancelled)try{return a.state=C,aB?A.push(a):(aB=a).active=!0,function(a){let c=[],d=[],e=s(a,a.strings[0],a.args[0],c,d,b);a.tagged||a.args.forEach(a=>q(a,c,d,b)),a.prepare=b.prepare&&(!("prepare"in a.options)||a.options.prepare),a.string=e,a.signature=a.prepare&&d+e,a.onlyDescribe&&delete O[a.signature],a.parameters=a.parameters||c,a.prepared=a.prepare&&a.signature in O,a.describeFirst=a.onlyDescribe||c.length&&!a.prepared,a.statement=a.prepared?O[a.signature]:{string:e,types:d,name:a.prepare?P+Q++:""},"function"==typeof b.debug&&b.debug(B,e,c,d)}(a),aJ(function(a){var b;if(a.parameters.length>=65534)throw l.generic("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return a.options.simple?ab().Q().str(a.statement.string+ab.N).end():a.describeFirst?Buffer.concat([aH(a),ag]):a.prepare?a.prepared?aI(a):Buffer.concat([aH(a),aI(a)]):(b=a,Buffer.concat([a4(b.statement.string,b.parameters,b.statement.types),aj,aI(b)]))}(a))&&!a.describeFirst&&!a.cursorFn&&A.length<w&&(!a.options.onexecute||a.options.onexecute(aD))}catch(a){return 0===A.length&&aJ(af),aS(a),!0}}function aH(a){return Buffer.concat([a4(a.statement.string,a.parameters,a.statement.types,a.statement.name),function(a,b=""){return ab().D().str("S").str(b+ab.N).end()}("S",a.statement.name)])}function aI(a){return Buffer.concat([function(a,c,d="",e=""){let f,g;return ab().B().str(e+ab.N).str(d+ab.N).i16(0).i16(a.length),a.forEach((d,e)=>{if(null===d)return ab.i32(0xffffffff);g=c[e],a[e]=d=g in b.serializers?b.serializers[g](d):""+d,f=ab.i,ab.inc(4).str(d).i32(ab.i-f-4,f)}),ab.i16(0),ab.end()}(a.parameters,a.statement.types,a.statement.name,a.cursorName),a.cursorFn?a5("",a.cursorRows):ai])}function aJ(a,b){return(ay=ay?Buffer.concat([ay,a]):Buffer.from(a),b||ay.length>=1024)?aK(b):(null===ar&&(ar=setImmediate(aK)),!0)}function aK(a){let b=G.write(ay,a);return null!==ar&&clearImmediate(ar),ay=ar=null,b}async function aL(){if(aJ(ah),!await new Promise(a=>G.once("data",b=>a(83===b[0])))&&"prefer"===g)return aQ();G.removeAllListeners(),(G=W.connect({socket:G,servername:V.isIP(G.host)?void 0:G.host,..."require"===g||"allow"===g||"prefer"===g?{rejectUnauthorized:!1}:"verify-full"===g?{}:"object"==typeof g?g:{}})).on("secureConnect",aQ),G.on("error",aR),G.on("close",aW),G.on("drain",aM)}function aM(){aB||d(aD)}function aN(c){if(!at||(at.push(c),!((S-=c.length)>0)))for(L=at?Buffer.concat(at,aa-S):0===L.length?c:Buffer.concat([L,c],L.length+c.length);L.length>4;){if((aa=L.readUInt32BE(1))>=L.length){S=aa-L.length,at=[L];break}try{!function(c,e=c[0]){(68===e?function(a){let b,c,d,e=7,f=aB.isRaw?Array(aB.statement.columns.length):{};for(let g=0;g<aB.statement.columns.length;g++)c=aB.statement.columns[g],b=a.readInt32BE(e),e+=4,d=-1===b?null:!0===aB.isRaw?a.subarray(e,e+=b):void 0===c.parser?a.toString("utf8",e,e+=b):!0===c.parser.array?c.parser(a.toString("utf8",e+1,e+=b)):c.parser(a.toString("utf8",e,e+=b)),aB.isRaw?f[g]=!0===aB.isRaw?d:r.value.from?r.value.from(d,c):d:f[c.name]=r.value.from?r.value.from(d,c):d;aB.forEachFn?aB.forEachFn(r.row.from?r.row.from(f):f,I):I[ad++]=r.row.from?r.row.from(f):f}:100===e?function(a){ax&&(ax.push(a.subarray(5))||G.pause())}:65===e?function(a){if(!u)return;let b=9;for(;0!==a[b++];);u(a.toString("utf8",9,b-1),a.toString("utf8",b,a.length-1))}:83===e?function(a){let[c,d]=a.toString("utf8",5,a.length-1).split(ab.N);N[c]=d,b.parameters[c]!==d&&(b.parameters[c]=d,v&&v(c,d))}:90===e?function(c){if(aB&&aB.options.simple&&aB.resolve(au||I),aB=au=null,I=new $,F.cancel(),av){if(z)if(N.in_hot_standby&&N.default_transaction_read_only){var e,f;if(e=z,f=N,"read-write"===e&&"on"===f.default_transaction_read_only||"read-only"===e&&"off"===f.default_transaction_read_only||"primary"===e&&"on"===f.in_hot_standby||"standby"===e&&"off"===f.in_hot_standby||"prefer-standby"===e&&"off"===f.in_hot_standby&&b.host[U])return aV()}else{let a=new j([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],aG,null,{simple:!0});a.resolve=([[a],[b]])=>{N.default_transaction_read_only=a.transaction_read_only,N.in_hot_standby=b.pg_is_in_recovery?"on":"off"},a.execute();return}return M?(av.reserve&&(av=null),a2()):(av&&!av.reserve&&aG(av),b.shared.retries=U=0,void(av=null))}for(;A.length&&(aB=A.shift())&&(aB.active=!0,aB.cancelled);)a(b).cancel(aB.state,aB.cancelled.resolve,aB.cancelled.reject);aB||(aD.reserved?aD.reserved.release||73!==c[5]?aD.reserved():aw?aV():(aD.reserved=null,d(aD)):aw?aV():d(aD))}:67===e?function(a){ad=0;for(let b=a.length-1;b>0;b--)if(32===a[b]&&a[b+1]<58&&null===I.count&&(I.count=+a.toString("utf8",b+1,a.length-1)),a[b-1]>=65){I.command=a.toString("utf8",5,b),I.state=C;break}return(aC&&(aC(),aC=null),"BEGIN"!==I.command||1===h||aD.reserved)?aB.options.simple?aX():void(aB.cursorFn&&(I.count&&aB.cursorFn(I),aJ(af)),aB.resolve(I)):aS(l.generic("UNSAFE_TRANSACTION","Only use sql.begin, sql.reserved or max: 1"))}:50===e?aX:49===e?function(){aB.parsing=!1}:116===e?function(a){let b=a.readUInt16BE(5);for(let c=0;c<b;++c)aB.statement.types[c]||(aB.statement.types[c]=a.readUInt32BE(7+4*c));aB.prepare&&(O[aB.signature]=aB.statement),aB.describeFirst&&!aB.onlyDescribe&&(aJ(aI(aB)),aB.describeFirst=!1)}:84===e?function(a){let b;I.command&&((au=au||[I]).push(I=new $),I.count=null,aB.statement.columns=null);let c=a.readUInt16BE(5),d=7;aB.statement.columns=Array(c);for(let e=0;e<c;++e){for(b=d;0!==a[d++];);let c=a.readUInt32BE(d),f=a.readUInt16BE(d+4),g=a.readUInt32BE(d+6);aB.statement.columns[e]={name:r.column.from?r.column.from(a.toString("utf8",b,d-1)):a.toString("utf8",b,d-1),parser:p[g],table:c,number:f,type:g},d+=18}if(I.statement=aB.statement,aB.onlyDescribe)return aB.resolve(aB.statement),aJ(af)}:82===e?aY:110===e?function(){if(I.statement=aB.statement,I.statement.columns=[],aB.onlyDescribe)return aB.resolve(aB.statement),aJ(af)}:75===e?function(a){C.pid=a.readUInt32BE(5),C.secret=a.readUInt32BE(9)}:69===e?function(a){var b,c;aB&&(aB.cursorFn||aB.describeFirst)&&aJ(af);let d=l.postgres(an(a));aB&&aB.retried?aS(aB.retried):aB&&aB.prepared&&al.has(d.routine)?(b=aB,c=d,delete O[b.signature],b.retried=c,aG(b)):aS(d)}:115===e?a3:51===e?function(){I.count&&aB.cursorFn(I),aB.resolve(I)}:71===e?function(){ax=new Y.Writable({autoDestroy:!0,write(a,b,c){G.write(ab().d().raw(a).end(),c)},destroy(a,b){b(a),G.write(ab().f().str(a+ab.N).end()),ax=null},final(a){G.write(ab().c().end()),aC=a}}),aB.resolve(ax)}:78===e?function(a){t?t(an(a)):console.log(an(a))}:72===e?function(){ax=new Y.Readable({read(){G.resume()}}),aB.resolve(ax)}:99===e?function(){ax&&ax.push(null),ax=null}:73===e?function(){}:86===e?function(){aS(l.notSupported("FunctionCallResponse"))}:118===e?function(){aS(l.notSupported("NegotiateProtocolVersion"))}:87===e?function(){ax=new Y.Duplex({autoDestroy:!0,read(){G.resume()},write(a,b,c){G.write(ab().d().raw(a).end(),c)},destroy(a,b){b(a),G.write(ab().f().str(a+ab.N).end()),ax=null},final(a){G.write(ab().c().end()),aC=a}}),aB.resolve(ax)}:function(a){console.error("Postgres.js : Unknown Message:",a[0])})(c)}(L.subarray(0,aa+1))}catch(a){aB&&(aB.cursorFn||aB.describeFirst)&&aJ(af),aS(a)}L=L.subarray(aa+1),S=0,at=null}}async function aO(){if(as=!1,N={},G||(G=await aE()),G){if(F.start(),b.socket)return g?aL():aQ();if(G.on("connect",g?aL:aQ),b.path)return G.connect(b.path);G.ssl=g,G.connect(n[T],m[T]),G.host=m[T],G.port=n[T],T=(T+1)%n.length}}function aP(){setTimeout(aO,R?R+ac-Z.performance.now():0)}function aQ(){try{O={},M=b.fetch_types,P=Math.random().toString(36).slice(2),Q=1,E.start(),G.on("data",aN),x&&G.setKeepAlive&&G.setKeepAlive(!0,1e3*x);let a=H||ab().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:k,database:o,client_encoding:"UTF8"},b.connection)).filter(([,a])=>a).map(([a,b])=>a+ab.N+b).join(ab.N)).z(2).end(0);aJ(a)}catch(a){aR(a)}}function aR(a){if(aD.queue!==c.connecting||!b.host[U+1])for(aS(a);A.length;)aT(A.shift(),a)}function aS(a){ax&&(ax.destroy(a),ax=null),aB&&aT(aB,a),av&&(aT(av,a),av=null)}function aT(a,c){if(a.reserve)return a.reject(c);c&&"object"==typeof c||(c=Error(c)),"query"in c||"parameters"in c||Object.defineProperties(c,{stack:{value:c.stack+a.origin.replace(/.*\n/,"\n"),enumerable:b.debug},query:{value:a.string,enumerable:b.debug},parameters:{value:a.parameters,enumerable:b.debug},args:{value:a.args,enumerable:b.debug},types:{value:a.statement&&a.statement.types,enumerable:b.debug}}),a.reject(c)}function aU(){return aw||(aD.reserved||e(aD),aD.reserved||av||aB||0!==A.length?aw=new Promise(a=>az=a):(aV(),new Promise(a=>G&&"closed"!==G.readyState?G.once("close",a):a())))}function aV(){as=!0,(ax||aB||av||A.length)&&aR(l.connection("CONNECTION_DESTROYED",b)),clearImmediate(ar),G&&(G.removeListener("data",aN),G.removeListener("connect",aQ),"open"===G.readyState&&G.end(ab().X().end())),az&&(az(),aw=az=null)}async function aW(a){if(L=Buffer.alloc(0),S=0,at=null,clearImmediate(ar),G.removeListener("data",aN),G.removeListener("connect",aQ),D.cancel(),E.cancel(),F.cancel(),G.removeAllListeners(),G=null,av)return aP();!a&&(aB||A.length)&&aR(l.connection("CONNECTION_CLOSED",b,G)),R=Z.performance.now(),a&&b.shared.retries++,ac=("function"==typeof y?y(b.shared.retries):y)*1e3,f(aD,l.connection("CONNECTION_CLOSED",b,G))}function aX(){I.statement||(I.statement=aB.statement),I.columns=aB.statement.columns}async function aY(a,b=a.readUInt32BE(5)){(3===b?aZ:5===b?a$:10===b?a_:11===b?a0:12===b?function(a){a.toString("utf8",9).split(ab.N,1)[0].slice(2)!==am&&(aS(l.generic("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),G.destroy())}:0!==b?function(a,b){console.error("Postgres.js : Unknown Auth:",b)}:ak)(a,b)}async function aZ(){let a=await a1();aJ(ab().p().str(a).z(1).end())}async function a$(a){let b="md5"+await ao(Buffer.concat([Buffer.from(await ao(await a1()+k)),a.subarray(9)]));aJ(ab().p().str(b).z(1).end())}async function a_(){aA=(await X.randomBytes(18)).toString("base64"),ab().p().str("SCRAM-SHA-256"+ab.N);let a=ab.i;aJ(ab.inc(4).str("n,,n=*,r="+aA).i32(ab.i-a-4,a).end())}async function a0(a){var b;let c=a.toString("utf8",9).split(",").reduce((a,b)=>(a[b[0]]=b.slice(2),a),{}),d=await X.pbkdf2Sync(await a1(),Buffer.from(c.s,"base64"),parseInt(c.i),32,"sha256"),e=await ap(d,"Client Key"),f="n=*,r="+aA+",r="+c.r+",s="+c.s+",i="+c.i+",c=biws,r="+c.r;am=(await ap(await ap(d,"Server Key"),f)).toString("base64");let g="c=biws,r="+c.r+",p="+(function(a,b){let c=Math.max(a.length,b.length),d=Buffer.allocUnsafe(c);for(let e=0;e<c;e++)d[e]=a[e]^b[e];return d})(e,Buffer.from(await ap(await (b=e,X.createHash("sha256").update(b).digest()),f))).toString("base64");aJ(ab().p().str(g).end())}function a1(){return Promise.resolve("function"==typeof b.pass?b.pass():b.pass)}async function a2(){M=!1,(await new j([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],aG)).forEach(({oid:a,typarray:c})=>(function(a,c){if(b.parsers[c]&&b.serializers[c])return;let d=b.parsers[a];b.shared.typeArrayMap[a]=c,b.parsers[c]=a=>(K.i=K.last=0,function a(b,c,d,e){let f=[],g=1020===e?";":",";for(;b.i<c.length;b.i++){if(b.char=c[b.i],b.quoted)"\\"===b.char?b.str+=c[++b.i]:'"'===b.char?(f.push(d?d(b.str):b.str),b.str="",b.quoted='"'===c[b.i+1],b.last=b.i+2):b.str+=b.char;else if('"'===b.char)b.quoted=!0;else if("{"===b.char)b.last=++b.i,f.push(a(b,c,d,e));else if("}"===b.char){b.quoted=!1,b.last<b.i&&f.push(d?d(c.slice(b.last,b.i)):c.slice(b.last,b.i)),b.last=b.i+1;break}else b.char===g&&"}"!==b.p&&'"'!==b.p&&(f.push(d?d(c.slice(b.last,b.i)):c.slice(b.last,b.i)),b.last=b.i+1);b.p=b.char}return b.last<b.i&&f.push(d?d(c.slice(b.last,b.i+1)):c.slice(b.last,b.i+1)),f}(K,a,d,c)),b.parsers[c].array=!0,b.serializers[c]=d=>J(d,b.serializers[a],b,c)})(a,c))}async function a3(){try{let a=await Promise.resolve(aB.cursorFn(I));ad=0,a===i?aJ(function(a=""){return Buffer.concat([ab().C().str("P").str(a+ab.N).end(),ab().S().end()])}(aB.portal)):(I=new $,aJ(a5("",aB.cursorRows)))}catch(a){aJ(af),aB.reject(a)}}function a4(a,b,c,d=""){return ab().P().str(d+ab.N).str(a+ab.N).i16(b.length),b.forEach((a,b)=>ab.i32(c[b]||0)),ab.end()}function a5(a="",b=0){return Buffer.concat([ab().E().str(a+ab.N).i32(b).end(),ag])}},ae=1,af=ab().S().end(),ag=ab().H().end(),ah=ab().i32(8).i32(0x4d2162f).end(8),ai=Buffer.concat([ab().E().str(ab.N).i32(0).end(),af]),aj=ab().D().str("S").str(ab.N).end(),ak=()=>{},al=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),am={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"};function an(a){let b={},c=5;for(let d=5;d<a.length-1;d++)0===a[d]&&(b[am[a[c]]]=a.toString("utf8",c+1,d),c=d+1);return b}function ao(a){return X.createHash("md5").update(a).digest("hex")}function ap(a,b){return X.createHmac("sha256",a).update(b).digest()}function aq(a,b){let c;if(!(b="function"==typeof b?b():b))return{cancel:ak,start:ak};return{cancel(){c&&(clearTimeout(c),c=null)},start(){c&&clearTimeout(c),c=setTimeout(d,1e3*b,arguments)}};function d(b){a.apply(null,b),c=null}}let ar=()=>{};function as(a,b,c,d){let e,f,g,h=d.raw?Array(b.length):{};for(let i=0;i<b.length;i++)e=a[c++],f=b[i],g=110===e?null:117===e?void 0:void 0===f.parser?a.toString("utf8",c+4,c+=4+a.readUInt32BE(c)):!0===f.parser.array?f.parser(a.toString("utf8",c+5,c+=4+a.readUInt32BE(c))):f.parser(a.toString("utf8",c+4,c+=4+a.readUInt32BE(c))),d.raw?h[i]=!0===d.raw?g:d.value.from?d.value.from(g,f):g:h[f.name]=d.value.from?d.value.from(g,f):g;return{i:c,row:d.row.from?d.row.from(h):h}}function at(a,b,c=393216){return new Promise(async(d,e)=>{await a.begin(async a=>{let e;b||([{oid:b}]=await a`select lo_creat(-1) as oid`);let[{fd:f}]=await a`select lo_open(${b}, ${c}) as fd`,g={writable:i,readable:h,close:()=>a`select lo_close(${f})`.then(e),tell:()=>a`select lo_tell64(${f})`,read:b=>a`select loread(${f}, ${b}) as data`,write:b=>a`select lowrite(${f}, ${b})`,truncate:b=>a`select lo_truncate64(${f}, ${b})`,seek:(b,c=0)=>a`select lo_lseek64(${f}, ${b}, ${c})`,size:()=>a`
          select
            lo_lseek64(${f}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return d(g),new Promise(async a=>e=a);async function h({highWaterMark:a=16384,start:b=0,end:c=1/0}={}){let d=c-b;return b&&await g.seek(b),new Y.Readable({highWaterMark:a,async read(a){let b=a>d?a-d:a;d-=a;let[{data:c}]=await g.read(b);this.push(c),c.length<a&&this.push(null)}})}async function i({highWaterMark:a=16384,start:b=0}={}){return b&&await g.seek(b),new Y.Writable({highWaterMark:a,write(a,b,c){g.write(a).then(()=>c(),c)}})}}).catch(e)})}Object.assign(av,{PostgresError:k,toPascal:M,pascal:T,toCamel:L,camel:S,toKebab:N,kebab:U,fromPascal:P,fromCamel:O,fromKebab:Q,BigInt:{to:20,from:[20],parse:a=>BigInt(a),serialize:a=>a.toString()}});let au=av;function av(a,b){let c=function(a,b){var c;if(a&&a.shared)return a;let e=process.env,f=(a&&"string"!=typeof a?a:b)||{},{url:g,multihost:h}=function(a){if(!a||"string"!=typeof a)return{url:{searchParams:new Map}};let b=a;b=decodeURIComponent((b=b.slice(b.indexOf("://")+3).split(/[?/]/)[0]).slice(b.indexOf("@")+1));let c=new URL(a.replace(b,b.split(",")[0]));return{url:{username:decodeURIComponent(c.username),password:decodeURIComponent(c.password),host:c.host,hostname:c.hostname,port:c.port,pathname:c.pathname,searchParams:c.searchParams},multihost:b.indexOf(",")>-1&&b}}(a),i=[...g.searchParams].reduce((a,[b,c])=>(a[b]=c,a),{}),j=f.hostname||f.host||h||g.hostname||e.PGHOST||"localhost",k=f.port||g.port||e.PGPORT||5432,l=f.user||f.username||g.username||e.PGUSERNAME||e.PGUSER||function(){try{return d.userInfo().username}catch(a){return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}();f.no_prepare&&(f.prepare=!1),i.sslmode&&(i.ssl=i.sslmode,delete i.sslmode),"timeout"in f&&(console.log("The timeout option is deprecated, use idle_timeout instead"),f.idle_timeout=f.timeout),"system"===i.sslrootcert&&(i.ssl="verify-full");let m=["idle_timeout","connect_timeout","max_lifetime","max_pipeline","backoff","keep_alive"],n={max:10,ssl:!1,idle_timeout:null,connect_timeout:30,max_lifetime:ax,max_pipeline:100,backoff:aw,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(j)?j:j.split(",").map(a=>a.split(":")[0]),port:Array.isArray(k)?k:j.split(",").map(a=>parseInt(a.split(":")[1]||k)),path:f.path||j.indexOf("/")>-1&&j+"/.s.PGSQL."+k,database:f.database||f.db||(g.pathname||"").slice(1)||e.PGDATABASE||l,user:l,pass:f.pass||f.password||g.password||e.PGPASSWORD||"",...Object.entries(n).reduce((a,[b,c])=>{let d=b in f?f[b]:b in i?"disable"!==i[b]&&"false"!==i[b]&&i[b]:e["PG"+b.toUpperCase()]||c;return a[b]="string"==typeof d&&m.includes(b)?+d:d,a},{}),connection:{application_name:e.PGAPPNAME||"postgres.js",...f.connection,...Object.entries(i).reduce((a,[b,c])=>(b in n||(a[b]=c),a),{})},types:f.types||{},target_session_attrs:function(a,b,c){let d=a.target_session_attrs||b.searchParams.get("target_session_attrs")||c.PGTARGETSESSIONATTRS;if(!d||["read-write","read-only","primary","standby","prefer-standby"].includes(d))return d;throw Error("target_session_attrs "+d+" is not supported")}(f,g,e),onnotice:f.onnotice,onnotify:f.onnotify,onclose:f.onclose,onparameter:f.onparameter,socket:f.socket,transform:{undefined:(c=f.transform||{undefined:void 0}).undefined,column:{from:"function"==typeof c.column?c.column:c.column&&c.column.from,to:c.column&&c.column.to},value:{from:"function"==typeof c.value?c.value:c.value&&c.value.from,to:c.value&&c.value.to},row:{from:"function"==typeof c.row?c.row:c.row&&c.row.from,to:c.row&&c.row.to}},parameters:{},shared:{retries:0,typeArrayMap:{}},...C(f.types)}}(a,b),f=c.no_subscribe||function(a,b){let c=new Map,d="postgresjs_"+Math.random().toString(36).slice(2),e={},f,g,h=!1,i=l.sql=a({...b,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...b.connection,replication:"database"},onclose:async function(){h||(g=null,e.pid=e.secret=void 0,m(await n(i,d,b.publications)),c.forEach(a=>a.forEach(({onsubscribe:a})=>a())))},no_subscribe:!0}),j=i.end,k=i.close;return i.end=async()=>(h=!0,g&&await new Promise(a=>(g.once("close",a),g.end())),j()),i.close=async()=>(g&&await new Promise(a=>(g.once("close",a),g.end())),k()),l;async function l(a,h,j=ar,k=ar){a=function(a){let b=a.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!b)throw Error("Malformed subscribe pattern: "+a);let[,c,d,e]=b;return(c||"*")+(d?":"+(-1===d.indexOf(".")?"public."+d:d):"")+(e?"="+e:"")}(a),f||(f=n(i,d,b.publications));let o={fn:h,onsubscribe:j},p=c.has(a)?c.get(a).add(o):c.set(a,new Set([o])).get(a),q=()=>{p.delete(o),0===p.size&&c.delete(a)};return f.then(a=>(m(a),j(),g&&g.on("error",k),{unsubscribe:q,state:e,sql:i}))}function m(a){g=a.stream,e.pid=a.state.pid,e.secret=a.state.secret}async function n(a,c,d){if(!d)throw Error("Missing publication names");let e=await a.unsafe(`CREATE_REPLICATION_SLOT ${c} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[f]=e,g=await a.unsafe(`START_REPLICATION SLOT ${c} LOGICAL ${f.consistent_point} (proto_version '1', publication_names '${d}')`).writable(),h={lsn:Buffer.concat(f.consistent_point.split("/").map(a=>Buffer.from(("00000000"+a).slice(-8),"hex")))};return g.on("data",function(c){var d,e,f,j,k;119===c[0]?(d=c.subarray(25),e=h,f=a.options.parsers,j=i,k=b.transform,Object.entries({R:a=>{let b=1,c=e[a.readUInt32BE(b)]={schema:a.toString("utf8",b+=4,b=a.indexOf(0,b))||"pg_catalog",table:a.toString("utf8",b+1,b=a.indexOf(0,b+1)),columns:Array(a.readUInt16BE(b+=2)),keys:[]};b+=2;let d=0,g;for(;b<a.length;)(g=c.columns[d++]={key:a[b++],name:k.column.from?k.column.from(a.toString("utf8",b,b=a.indexOf(0,b))):a.toString("utf8",b,b=a.indexOf(0,b)),type:a.readUInt32BE(b+=1),parser:f[a.readUInt32BE(b)],atttypmod:a.readUInt32BE(b+=4)}).key&&c.keys.push(g),b+=4},Y:()=>{},O:()=>{},B:a=>{var b;b=a.readBigInt64BE(9),e.date=new Date(Date.UTC(2e3,0,1)+Number(b/BigInt(1e3))),e.lsn=a.subarray(1,9)},I:a=>{let b=1,c=e[a.readUInt32BE(b)],{row:d}=as(a,c.columns,b+=7,k);j(d,{command:"insert",relation:c})},D:a=>{let b=1,c=e[a.readUInt32BE(b)],d=75===a[b+=4];j(d||79===a[b]?as(a,c.columns,b+=3,k).row:null,{command:"delete",relation:c,key:d})},U:a=>{let b=1,c=e[a.readUInt32BE(b)],d=75===a[b+=4],f=d||79===a[b]?as(a,c.columns,b+=3,k):null;f&&(b=f.i);let{row:g}=as(a,c.columns,b+3,k);j(g,{command:"update",relation:c,key:d,old:f&&f.row})},T:()=>{},C:()=>{}}).reduce((a,[b,c])=>(a[b.charCodeAt(0)]=c,a),{})[d[0]](d)):107===c[0]&&c[17]&&(h.lsn=c.subarray(1,9),function(){let a=Buffer.alloc(34);a[0]=114,a.fill(h.lsn,1),a.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),g.write(a)}())}),g.on("error",function(a){console.error("Unexpected error during logical streaming - reconnecting",a)}),g.on("close",a.close),{stream:g,state:e.state};function i(a,b){let c=b.relation.schema+"."+b.relation.table;o("*",a,b),o("*:"+c,a,b),b.relation.keys.length&&o("*:"+c+"="+b.relation.keys.map(b=>a[b.name]),a,b),o(b.command,a,b),o(b.command+":"+c,a,b),b.relation.keys.length&&o(b.command+":"+c+"="+b.relation.keys.map(b=>a[b.name]),a,b)}}function o(a,b,d){c.has(a)&&c.get(a).forEach(({fn:c})=>c(b,d,a))}}(av,{...c}),g=!1,h=_(),m=_(),q=_(),r=_(),s=_(),t=_(),u=_(),v=_(),w={connecting:m,reserved:q,closed:r,ended:s,open:t,busy:u,full:v},x=[...Array(c.max)].map(()=>ad(c,w,{onopen:P,onend:O,onclose:Q})),y=z(function(a){return g?a.reject(l.connection("CONNECTION_ENDED",c,c)):t.length?I(t.shift(),a):r.length?N(r.shift(),a):void(u.length?I(u.shift(),a):h.push(a))});return Object.assign(y,{get parameters(){return c.parameters},largeObject:at.bind(null,y),subscribe:f,CLOSE:i,END:i,PostgresError:k,options:c,reserve:D,listen:A,begin:E,close:L,end:K}),y;function z(a){return a.debug=c.debug,Object.entries(c.types).reduce((a,[b,c])=>(a[b]=a=>new o(a,c.to),a),b),Object.assign(d,{types:b,typed:b,unsafe:function(b,c=[],d={}){return 2!=arguments.length||Array.isArray(c)||(d=c,c=[]),new j([b],c,a,J,{prepare:!1,...d,simple:"simple"in d?d.simple:0===c.length})},notify:B,array:function a(b,d){return Array.isArray(b)?new o(b,d||(b.length?G(b)||25:0),c.shared.typeArrayMap):a(Array.from(arguments))},json:H,file:function(b,c=[],d={}){return 2!=arguments.length||Array.isArray(c)||(d=c,c=[]),new j([],c,c=>{e.readFile(b,"utf8",(b,d)=>{if(b)return c.reject(b);c.strings=[d],a(c)})},J,{...d,simple:"simple"in d?d.simple:0===c.length})}}),d;function b(a,b){return new o(a,b)}function d(b,...e){return b&&Array.isArray(b.raw)?new j(b,e,a,J):"string"!=typeof b||e.length?new p(b,e):new n(c.transform.column.to?c.transform.column.to(b):b)}}async function A(a,b,d){let e={fn:b,onlisten:d},f=A.sql||(A.sql=av({...c,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(A.channels).forEach(([a,{listeners:b}])=>{delete A.channels[a],Promise.all(b.map(b=>A(a,b.fn,b.onlisten).catch(()=>{})))})},onnotify(a,b){a in A.channels&&A.channels[a].listeners.forEach(a=>a.fn(b))}})),g=A.channels||(A.channels={});if(a in g){g[a].listeners.push(e);let b=await g[a].result;return e.onlisten&&e.onlisten(),{state:b.state,unlisten:i}}g[a]={result:f`listen ${f.unsafe('"'+a.replace(/"/g,'""')+'"')}`,listeners:[e]};let h=await g[a].result;return e.onlisten&&e.onlisten(),{state:h.state,unlisten:i};async function i(){if(a in g!=!1&&(g[a].listeners=g[a].listeners.filter(a=>a!==e),!g[a].listeners.length))return delete g[a],f`unlisten ${f.unsafe('"'+a.replace(/"/g,'""')+'"')}`}}async function B(a,b){return await y`select pg_notify(${a}, ${""+b})`}async function D(){let a=_(),b=t.length?t.shift():await new Promise((a,b)=>{let c={reserve:a,reject:b};h.push(c),r.length&&N(r.shift(),c)});F(b,q),b.reserved=()=>a.length?b.execute(a.shift()):F(b,q),b.reserved.release=!0;let c=z(function(c){b.queue===v?a.push(c):b.execute(c)||F(b,v)});return c.release=()=>{b.reserved=null,P(b)},c}async function E(a,b){b||(b=a,a="");let c=_(),d=0,e,f=null;try{return await y.unsafe("begin "+a.replace(/[^a-z ]/ig,""),[],{onexecute:function(a){e=a,F(a,q),a.reserved=()=>c.length?a.execute(c.shift()):F(a,q)}}).execute(),await Promise.race([g(e,b),new Promise((a,b)=>e.onclose=b)])}catch(a){throw a}async function g(a,b,e){let h,i,j=z(function(b){b.catch(a=>h||(h=a)),a.queue===v?c.push(b):a.execute(b)||F(a,v)});j.savepoint=function b(c,e){return c&&Array.isArray(c.raw)?b(a=>a.apply(a,arguments)):(1==arguments.length&&(e=c,c=null),g(a,e,"s"+d+++(c?"_"+c:"")))},j.prepare=a=>f=a.replace(/[^a-z0-9$-_. ]/gi),e&&await j`savepoint ${j(e)}`;try{if(i=await new Promise((a,c)=>{let d=b(j);Promise.resolve(Array.isArray(d)?Promise.all(d):d).then(a,c)}),h)throw h}catch(a){throw await (e?j`rollback to ${j(e)}`:j`rollback`),a instanceof k&&"25P02"===a.code&&h||a}return e||(f?await j`prepare transaction '${j.unsafe(f)}'`:await j`commit`),i}}function F(a,b){return a.queue.remove(a),b.push(a),a.queue=b,b===t?a.idleTimer.start():a.idleTimer.cancel(),a}function H(a){return new o(a,3802)}function I(a,b){return a.execute(b)?F(a,u):F(a,v)}function J(a){return new Promise((b,d)=>{a.state?a.active?ad(c).cancel(a.state,b,d):a.cancelled={resolve:b,reject:d}:(h.remove(a),a.cancelled=!0,a.reject(l.generic("57014","canceling statement due to user request")),b())})}async function K({timeout:a=null}={}){let b;return g||(await 1,g=Promise.race([new Promise(c=>null!==a&&(b=setTimeout(M,1e3*a,c))),Promise.all(x.map(a=>a.end()).concat(A.sql?A.sql.end({timeout:0}):[],f.sql?f.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(b)))}async function L(){await Promise.all(x.map(a=>a.end()))}async function M(a){for(await Promise.all(x.map(a=>a.terminate()));h.length;)h.shift().reject(l.connection("CONNECTION_DESTROYED",c));a()}function N(a,b){return F(a,m),a.connect(b),a}function O(a){F(a,s)}function P(a){if(0===h.length)return F(a,t);let b=Math.ceil(h.length/(m.length+1)),c=!0;for(;c&&h.length&&b-- >0;){let b=h.shift();if(b.reserve)return b.reserve(a);c=a.execute(b)}c?F(a,u):F(a,v)}function Q(a,b){F(a,r),a.reserved=null,a.onclose&&(a.onclose(b),a.onclose=null),c.onclose&&c.onclose(a.id),h.length&&N(a,h.shift())}}function aw(a){return(.5+Math.random()/2)*Math.min(3**a/100,20)}function ax(){return 60*(30+30*Math.random())}},3763:(a,b,c)=>{c.d(b,{u:()=>g});var d=c(94329),e=c(37175),f=c(90091);class g extends f.pe{static [d.i]="PgDateColumnBaseBuilder";defaultNow(){return this.default((0,e.ll)`now()`)}}},4308:(a,b,c)=>{c.d(b,{bj:()=>i,uc:()=>k});var d=c(31866),e=c(69679),f=c(77175),g=c(44228),h=c(17938);class i{#a;get table(){return this.#a}constructor(a){this.#a=a}as(a){return new j(this.#a,a)}}class j{#a;#b;get table(){return this.#a}get alias(){return this.#b}constructor(a,b){this.#a=a,this.#b=b}toOperationNode(){return d.N.create((0,g.M$)(this.#a),e.O.create(this.#b))}}function k(a){return(0,h.Gv)(a)&&(0,f.N)(a)&&(0,h.Kg)(a.table)&&(0,h.Kg)(a.alias)}},4601:(a,b,c)=>{c.d(b,{F:()=>d,x:()=>e});class d extends Error{node;constructor(a){super("no result"),this.node=a}}function e(a){return Object.prototype.hasOwnProperty.call(a,"prototype")}},4642:(a,b,c)=>{c.d(b,{dw:()=>k,p6:()=>l,qw:()=>i});var d=c(94329),e=c(58941),f=c(90091),g=c(3763);class h extends g.u{static [d.i]="PgDateBuilder";constructor(a){super(a,"date","PgDate")}build(a){return new i(a,this.config)}}class i extends f.Kl{static [d.i]="PgDate";getSQLType(){return"date"}mapFromDriverValue(a){return new Date(a)}mapToDriverValue(a){return a.toISOString()}}class j extends g.u{static [d.i]="PgDateStringBuilder";constructor(a){super(a,"string","PgDateString")}build(a){return new k(a,this.config)}}class k extends f.Kl{static [d.i]="PgDateString";getSQLType(){return"date"}}function l(a,b){let{name:c,config:d}=(0,e.Ll)(a,b);return d?.mode==="date"?new h(c):new j(c)}},4758:(a,b,c)=>{c.d(b,{h:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"PrimitiveValueListNode"===a.kind,create:a=>(0,d.CN)({kind:"PrimitiveValueListNode",values:(0,d.CN)([...a])})})},4787:(a,b,c)=>{c.d(b,{$s:()=>j,U2:()=>i,dJ:()=>l,qH:()=>k});var d=c(4758),e=c(67882),f=c(84605),g=c(17938),h=c(63860);function i(a){var b;return(0,g.MH)(a)?(b=a).some(h.SS)?e.s.create(b.map(a=>j(a))):d.h.create(b):j(a)}function j(a){return(0,h.SS)(a)?(0,h.YK)(a):f.q.create(a)}function k(a){return(0,g.Et)(a)||(0,g.Lm)(a)||(0,g.kZ)(a)}function l(a){if(!k(a))throw Error(`unsafe immediate value ${JSON.stringify(a)}`);return f.q.createImmediate(a)}},5170:(a,b,c)=>{c.d(b,{D:()=>e});let d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function e(a){let b="";for(let c=0;c<a;++c)b+=d[~~(Math.random()*d.length)];return b}},5263:(a,b,c)=>{c.d(b,{$F:()=>d.l,KV:()=>d.f,Km:()=>d.s,Nu:()=>d.p,_K:()=>d.c,h:()=>d.n,lh:()=>d.u,p4:()=>d.t,p8:()=>d.a,t$:()=>d.o,vF:()=>d.i,yz:()=>d.d});var d=c(48070)},5386:(a,b,c)=>{let d;c.d(b,{ZB:()=>rp});let e=Object.prototype.hasOwnProperty;function f(a,b){let c=/\{([a-zA-Z0-9_][a-zA-Z0-9_-]*?)\}/g;return function(d={}){return a.replace(c,function(a,c){if(!e.call(d,c))throw Error(`Parameter '${c}' is required`);let f=d[c];if("string"!=typeof f&&"number"!=typeof f)throw Error(`Parameter '${c}' must be a string or number`);return b?.charEncoding==="percent"?encodeURIComponent(`${f}`):`${f}`})}}let g="production",h={[g]:"https://api.polar.sh",sandbox:"https://sandbox-api.polar.sh"},i={userAgent:"speakeasy-sdk/typescript 0.41.5 2.755.9 0.1.0 @polar-sh/sdk"};class j{constructor(){for(let a of(this.sdkInitHooks=[],this.beforeCreateRequestHooks=[],this.beforeRequestHooks=[],this.afterSuccessHooks=[],this.afterErrorHooks=[],[]))"sdkInit"in a&&this.registerSDKInitHook(a),"beforeCreateRequest"in a&&this.registerBeforeCreateRequestHook(a),"beforeRequest"in a&&this.registerBeforeRequestHook(a),"afterSuccess"in a&&this.registerAfterSuccessHook(a),"afterError"in a&&this.registerAfterErrorHook(a)}registerSDKInitHook(a){this.sdkInitHooks.push(a)}registerBeforeCreateRequestHook(a){this.beforeCreateRequestHooks.push(a)}registerBeforeRequestHook(a){this.beforeRequestHooks.push(a)}registerAfterSuccessHook(a){this.afterSuccessHooks.push(a)}registerAfterErrorHook(a){this.afterErrorHooks.push(a)}sdkInit(a){return this.sdkInitHooks.reduce((a,b)=>b.sdkInit(a),a)}beforeCreateRequest(a,b){let c=b;for(let b of this.beforeCreateRequestHooks)c=b.beforeCreateRequest(a,c);return c}async beforeRequest(a,b){let c=b;for(let b of this.beforeRequestHooks)c=await b.beforeRequest(a,c);return c}async afterSuccess(a,b){let c=b;for(let b of this.afterSuccessHooks)c=await b.afterSuccess(a,c);return c}async afterError(a,b,c){let d=b,e=c;for(let b of this.afterErrorHooks){let c=await b.afterError(a,d,e);d=c.response,e=c.error}return{response:d,error:e}}}class k extends Error{constructor(a,b){let c=a;b?.cause&&(c+=`: ${b.cause}`),super(c,b),this.name="HTTPClientError",void 0===this.cause&&(this.cause=b?.cause)}}class l extends k{constructor(){super(...arguments),this.name="UnexpectedClientError"}}class m extends k{constructor(){super(...arguments),this.name="InvalidRequestError"}}class n extends k{constructor(){super(...arguments),this.name="RequestAbortedError"}}class o extends k{constructor(){super(...arguments),this.name="RequestTimeoutError"}}class p extends k{constructor(){super(...arguments),this.name="ConnectionError"}}function q(a){return{ok:!0,value:a}}function r(a){return{ok:!1,error:a}}async function s(a){let b=await a;if(!b.ok)throw b.error;return b.value}function t(a,b,c){function d(c,d){var e;for(let f in Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(e=c._zod).traits??(e.traits=new Set),c._zod.traits.add(a),b(c,d),g.prototype)f in c||Object.defineProperty(c,f,{value:g.prototype[f].bind(c)});c._zod.constr=g,c._zod.def=d}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}Object.freeze({status:"aborted"}),Symbol("zod_brand");class u extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}let v={};function w(a){return a&&Object.assign(v,a),v}let x=/^\d+$/,y=/^-?\d+(?:\.\d+)?/i,z=/true|false/i;function A(a,b){return"bigint"==typeof b?b.toString():b}function B(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function C(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}function D(a,b,c){Object.defineProperty(a,b,{get(){{let d=c();return a[b]=d,d}},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function E(a){return JSON.stringify(a)}let F=Error.captureStackTrace?Error.captureStackTrace:(...a)=>{};function G(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let H=B(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function I(a){if(!1===G(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!1!==G(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}let J=new Set(["string","number","symbol"]);function K(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function L(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}let M={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function N(a,b=0){for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function O(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function P(a){return"string"==typeof a?a:a?.message}function Q(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=P(a.inst?._zod.def?.error?.(a))??P(b?.error?.(a))??P(c.customError?.(a))??P(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}let R=t("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),S=t("$ZodCheckNumberFormat",(a,b)=>{R.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=M[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=x)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inst:a})}}),T=t("$ZodCheckStringFormat",(a,b)=>{var c,d;R.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})});class U{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}let V=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),Object.defineProperty(a,"message",{get:()=>JSON.stringify(b,A,2),enumerable:!0}),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},W=t("$ZodError",V),X=t("$ZodError",V,{Parent:Error}),Y=(a,b,c,d)=>{let e=c?Object.assign(c,{async:!1}):{async:!1},f=a._zod.run({value:b,issues:[]},e);if(f instanceof Promise)throw new u;if(f.issues.length){let a=new(d?.Err??X)(f.issues.map(a=>Q(a,e,w())));throw F(a,d?.callee),a}return f.value},Z=async(a,b,c,d)=>{let e=c?Object.assign(c,{async:!0}):{async:!0},f=a._zod.run({value:b,issues:[]},e);if(f instanceof Promise&&(f=await f),f.issues.length){let a=new(d?.Err??X)(f.issues.map(a=>Q(a,e,w())));throw F(a,d?.callee),a}return f.value},$=(a,b,c)=>{let d=c?{...c,async:!1}:{async:!1},e=a._zod.run({value:b,issues:[]},d);if(e instanceof Promise)throw new u;return e.issues.length?{success:!1,error:new(X??W)(e.issues.map(a=>Q(a,d,w())))}:{success:!0,data:e.value}},_=async(a,b,c)=>{let d=c?Object.assign(c,{async:!0}):{async:!0},e=a._zod.run({value:b,issues:[]},d);return e instanceof Promise&&(e=await e),e.issues.length?{success:!1,error:new X(e.issues.map(a=>Q(a,d,w())))}:{success:!0,data:e.value}},aa={major:4,minor:0,patch:0},ab=t("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=aa;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=N(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new u;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=N(a,b)))});else{if(a.issues.length===b)continue;e||(e=N(a,b))}}return d?d.then(()=>a):a};a._zod.run=(c,e)=>{let f=a._zod.parse(c,e);if(f instanceof Promise){if(!1===e.async)throw new u;return f.then(a=>b(a,d,e))}return b(f,d,e)}}a["~standard"]={validate:b=>{try{let c=$(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return _(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),ac=t("$ZodString",(a,b)=>{ab.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??(a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)})(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),ad=t("$ZodStringFormat",(a,b)=>{T.init(a,b),ac.init(a,b)}),ae=t("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=function(a){let b=function(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-]\\d{2}:\\d{2})");let d=`${b}(?:${c.join("|")})`;return RegExp(`^(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))T(?:${d})$`)}(b)),ad.init(a,b)}),af=t("$ZodNumber",(a,b)=>{ab.init(a,b),a._zod.pattern=a._zod.bag.pattern??y,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),ag=t("$ZodNumber",(a,b)=>{S.init(a,b),af.init(a,b)}),ah=t("$ZodBoolean",(a,b)=>{ab.init(a,b),a._zod.pattern=z,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),ai=t("$ZodAny",(a,b)=>{ab.init(a,b),a._zod.parse=a=>a}),aj=t("$ZodVoid",(a,b)=>{ab.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"void",code:"invalid_type",input:d,inst:a}),b}}),ak=t("$ZodDate",(a,b)=>{ab.init(a,b),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=new Date(c.value)}catch(a){}let e=c.value,f=e instanceof Date;return f&&!Number.isNaN(e.getTime())||c.issues.push({expected:"date",code:"invalid_type",input:e,...f?{received:"Invalid Date"}:{},inst:a}),c}});function al(a,b,c){a.issues.length&&b.issues.push(...O(c,a.issues)),b.value[c]=a.value}let am=t("$ZodArray",(a,b)=>{ab.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>al(b,c,a))):al(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function an(a,b,c){a.issues.length&&b.issues.push(...O(c,a.issues)),b.value[c]=a.value}function ao(a,b,c,d){a.issues.length?void 0===d[c]?c in d?b.value[c]=void 0:b.value[c]=a.value:b.issues.push(...O(c,a.issues)):void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}let ap=t("$ZodObject",(a,b)=>{let c,d;ab.init(a,b);let e=B(()=>{let a=Object.keys(b.shape);for(let c of a)if(!(b.shape[c]instanceof ab))throw Error(`Invalid element at key "${c}": expected a Zod schema`);let c=function(a){return Object.keys(a).filter(b=>"optional"===a[b]._zod.optin&&"optional"===a[b]._zod.optout)}(b.shape);return{shape:b.shape,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(c)}});D(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=!v.jitless,g=f&&H.value,h=b.catchall;a._zod.parse=(i,j)=>{d??(d=e.value);let k=i.value;if(!G(k))return i.issues.push({expected:"object",code:"invalid_type",input:k,inst:a}),i;let l=[];if(f&&g&&j?.async===!1&&!0!==j.jitless)c||(c=(a=>{let b=new U(["shape","payload","ctx"]),c=e.value,d=a=>{let b=E(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let f=Object.create(null),g=0;for(let a of c.keys)f[a]=`key_${g++}`;for(let a of(b.write("const newResult = {}"),c.keys))if(c.optionalKeys.has(a)){let c=f[a];b.write(`const ${c} = ${d(a)};`);let e=E(a);b.write(`
        if (${c}.issues.length) {
          if (input[${e}] === undefined) {
            if (${e} in input) {
              newResult[${e}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${c}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${e}, ...iss.path] : [${e}],
              }))
            );
          }
        } else if (${c}.value === undefined) {
          if (${e} in input) newResult[${e}] = undefined;
        } else {
          newResult[${e}] = ${c}.value;
        }
        `)}else{let c=f[a];b.write(`const ${c} = ${d(a)};`),b.write(`
          if (${c}.issues.length) payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${E(a)}, ...iss.path] : [${E(a)}]
          })));`),b.write(`newResult[${E(a)}] = ${c}.value`)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),i=c(i,j);else{i.value={};let a=d.shape;for(let b of d.keys){let c=a[b],d=c._zod.run({value:k[b],issues:[]},j),e="optional"===c._zod.optin&&"optional"===c._zod.optout;d instanceof Promise?l.push(d.then(a=>e?ao(a,i,b,k):an(a,i,b))):e?ao(d,i,b,k):an(d,i,b)}}if(!h)return l.length?Promise.all(l).then(()=>i):i;let m=[],n=d.keySet,o=h._zod,p=o.def.type;for(let a of Object.keys(k)){if(n.has(a))continue;if("never"===p){m.push(a);continue}let b=o.run({value:k[a],issues:[]},j);b instanceof Promise?l.push(b.then(b=>an(b,i,a))):an(b,i,a)}return(m.length&&i.issues.push({code:"unrecognized_keys",keys:m,input:k,inst:a}),l.length)?Promise.all(l).then(()=>i):i}});function aq(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;return b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>Q(a,d,w())))}),b}let ar=t("$ZodUnion",(a,b)=>{ab.init(a,b),D(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),D(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),D(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),D(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>C(a.source)).join("|")})$`)}}),a._zod.parse=(c,d)=>{let e=!1,f=[];for(let a of b.options){let b=a._zod.run({value:c.value,issues:[]},d);if(b instanceof Promise)f.push(b),e=!0;else{if(0===b.issues.length)return b;f.push(b)}}return e?Promise.all(f).then(b=>aq(b,c,a,d)):aq(f,c,a,d)}}),as=t("$ZodIntersection",(a,b)=>{ab.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>at(a,b,c)):at(a,e,f)}});function at(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),N(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(I(b)&&I(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}let au=t("$ZodRecord",(a,b)=>{ab.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!I(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[];if(b.keyType._zod.values){let g,h=b.keyType._zod.values;for(let a of(c.value={},h))if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...O(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...O(a,g.issues)),c.value[a]=g.value)}for(let a in e)h.has(a)||(g=g??[]).push(a);g&&g.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:g})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(h.issues.length){c.issues.push({origin:"record",code:"invalid_key",issues:h.issues.map(a=>Q(a,d,w())),input:g,path:[g],inst:a}),c.value[h.value]=h.value;continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...O(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...O(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}}),av=t("$ZodEnum",(a,b)=>{ab.init(a,b);let c=function(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}(b.entries);a._zod.values=new Set(c),a._zod.pattern=RegExp(`^(${c.filter(a=>J.has(typeof a)).map(a=>"string"==typeof a?K(a):a.toString()).join("|")})$`),a._zod.parse=(b,d)=>{let e=b.value;return a._zod.values.has(e)||b.issues.push({code:"invalid_value",values:c,input:e,inst:a}),b}}),aw=t("$ZodLiteral",(a,b)=>{ab.init(a,b),a._zod.values=new Set(b.values),a._zod.pattern=RegExp(`^(${b.values.map(a=>"string"==typeof a?K(a):a?a.toString():String(a)).join("|")})$`),a._zod.parse=(c,d)=>{let e=c.value;return a._zod.values.has(e)||c.issues.push({code:"invalid_value",values:b.values,input:e,inst:a}),c}}),ax=t("$ZodTransform",(a,b)=>{ab.init(a,b),a._zod.parse=(a,c)=>{let d=b.transform(a.value,a);if(c.async)return(d instanceof Promise?d:Promise.resolve(d)).then(b=>(a.value=b,a));if(d instanceof Promise)throw new u;return a.value=d,a}}),ay=t("$ZodOptional",(a,b)=>{ab.init(a,b),a._zod.optin="optional",a._zod.optout="optional",D(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),D(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${C(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>"optional"===b.innerType._zod.optin?b.innerType._zod.run(a,c):void 0===a.value?a:b.innerType._zod.run(a,c)}),az=t("$ZodNullable",(a,b)=>{ab.init(a,b),D(a._zod,"optin",()=>b.innerType._zod.optin),D(a._zod,"optout",()=>b.innerType._zod.optout),D(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${C(a.source)}|null)$`):void 0}),D(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),aA=t("$ZodDefault",(a,b)=>{ab.init(a,b),a._zod.optin="optional",D(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>aB(a,b)):aB(d,b)}});function aB(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let aC=t("$ZodPipe",(a,b)=>{ab.init(a,b),D(a._zod,"values",()=>b.in._zod.values),D(a._zod,"optin",()=>b.in._zod.optin),D(a._zod,"optout",()=>b.out._zod.optout),a._zod.parse=(a,c)=>{let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>aD(a,b,c)):aD(d,b,c)}});function aD(a,b,c){return N(a)?a:b.out._zod.run({value:a.value,issues:a.issues},c)}let aE=t("$ZodLazy",(a,b)=>{ab.init(a,b),D(a._zod,"innerType",()=>b.getter()),D(a._zod,"pattern",()=>a._zod.innerType._zod.pattern),D(a._zod,"propValues",()=>a._zod.innerType._zod.propValues),D(a._zod,"optin",()=>a._zod.innerType._zod.optin),D(a._zod,"optout",()=>a._zod.innerType._zod.optout),a._zod.parse=(b,c)=>a._zod.innerType._zod.run(b,c)}),aF=t("$ZodCustom",(a,b)=>{R.init(a,b),ab.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>aG(b,c,d,a));aG(e,c,d,a)}});function aG(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(function(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}(a))}}let aH=t("ZodMiniType",(a,b)=>{if(!a._zod)throw Error("Uninitialized schema in ZodMiniType.");ab.init(a,b),a.def=b,a.parse=(b,c)=>Y(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>$(a,b,c),a.parseAsync=async(b,c)=>Z(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>_(a,b,c),a.check=(...c)=>a.clone({...b,checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),a.clone=(b,c)=>(function(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d})(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a)}),aI=t("ZodMiniString",(a,b)=>{ac.init(a,b),aH.init(a,b)});function aJ(a){return new aI({type:"string",...L(a)})}let aK=t("ZodMiniStringFormat",(a,b)=>{ad.init(a,b),aI.init(a,b)}),aL=t("ZodMiniNumber",(a,b)=>{af.init(a,b),aH.init(a,b)});function aM(a){return new aL({type:"number",checks:[],...L(a)})}let aN=t("ZodMiniNumberFormat",(a,b)=>{ag.init(a,b),aL.init(a,b)});function aO(a){return new aN({type:"number",check:"number_format",abort:!1,format:"safeint",...L(a)})}let aP=t("ZodMiniBoolean",(a,b)=>{ah.init(a,b),aH.init(a,b)});function aQ(a){return new aP({type:"boolean",...L(a)})}let aR=t("ZodMiniAny",(a,b)=>{ai.init(a,b),aH.init(a,b)});function aS(){return new aR({type:"any"})}let aT=t("ZodMiniVoid",(a,b)=>{aj.init(a,b),aH.init(a,b)});function aU(a){return new aT({type:"void",...L(a)})}let aV=t("ZodMiniDate",(a,b)=>{ak.init(a,b),aH.init(a,b)});function aW(a){return new aV({type:"date",...L(a)})}let aX=t("ZodMiniArray",(a,b)=>{am.init(a,b),aH.init(a,b)});function aY(a,b){return new aX({type:"array",element:a,...L(b)})}let aZ=t("ZodMiniObject",(a,b)=>{ap.init(a,b),aH.init(a,b),D(a,"shape",()=>b.shape)});function a$(a,b){return new aZ({type:"object",get shape(){return Object.defineProperty(this,"shape",{value:{...a},writable:!0,enumerable:!0,configurable:!0}),this.shape},...L(b)})}let a_=t("ZodMiniUnion",(a,b)=>{ar.init(a,b),aH.init(a,b)});function a0(a,b){return new a_({type:"union",options:a,...L(b)})}let a1=t("ZodMiniIntersection",(a,b)=>{as.init(a,b),aH.init(a,b)});function a2(a,b){return new a1({type:"intersection",left:a,right:b})}let a3=t("ZodMiniRecord",(a,b)=>{au.init(a,b),aH.init(a,b)});function a4(a,b,c){return new a3({type:"record",keyType:a,valueType:b,...L(c)})}let a5=t("ZodMiniEnum",(a,b)=>{av.init(a,b),aH.init(a,b)});function a6(a,b){return new a5({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...L(b)})}let a7=t("ZodMiniLiteral",(a,b)=>{aw.init(a,b),aH.init(a,b)});function a8(a,b){return new a7({type:"literal",values:Array.isArray(a)?a:[a],...L(b)})}let a9=t("ZodMiniTransform",(a,b)=>{ax.init(a,b),aH.init(a,b)});function ba(a){return new a9({type:"transform",transform:a})}let bb=t("ZodMiniOptional",(a,b)=>{ay.init(a,b),aH.init(a,b)});function bc(a){return new bb({type:"optional",innerType:a})}let bd=t("ZodMiniNullable",(a,b)=>{az.init(a,b),aH.init(a,b)});function be(a){return new bd({type:"nullable",innerType:a})}let bf=t("ZodMiniDefault",(a,b)=>{aA.init(a,b),aH.init(a,b)});function bg(a,b){return new bf({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})}let bh=t("ZodMiniPipe",(a,b)=>{aC.init(a,b),aH.init(a,b)});function bi(a,b){return new bh({type:"pipe",in:a,out:b})}let bj=t("ZodMiniLazy",(a,b)=>{aE.init(a,b),aH.init(a,b)});function bk(a){return new bj({type:"lazy",getter:a})}let bl=t("ZodMiniCustom",(a,b)=>{aF.init(a,b),aH.init(a,b)});function bm(a,b){let c=L(b);return c.abort??(c.abort=!0),new bl({type:"custom",check:"custom",fn:a??(()=>!0),...c})}function bn(a){return btoa(String.fromCodePoint(...a))}function bo(a){return new TextEncoder().encode(a)}function bp(a){if("object"!=typeof a||null===a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)}a0([bm(a=>a instanceof Uint8Array),bi(aJ(),ba(bo))]),a0([bm(a=>a instanceof Uint8Array),bi(aJ(),ba(function(a){return Uint8Array.from(atob(a),a=>a.charCodeAt(0))}))]);class bq extends Error{constructor(a){super(a),this.name="EncodingError"}}function br(a){return(b,c,d)=>{let e="",f=d?.explode?by(b,c):[[b,c]];if(f.every(([a,b])=>null==b))return;let g=a=>d?.charEncoding==="percent"?encodeURIComponent(a):a,h=a=>g(bz(a)),i=g(a);return f.forEach(([a,b])=>{let c="",d=null;if(null!=b)null!=(d=Array.isArray(b)?bB(b,a=>`${h(a)}`)?.join(i):bp(b)?bC(Object.entries(b),([a,b])=>`${g(a)}${i}${h(b)}`)?.join(i):`${h(b)}`)&&(c=`${g(a)}=${d}`)&&"="!==c&&(e+=`&${c}`)}),e.slice(1)}}let bs=br(","),bt=br(" "),bu=br("|");function bv(a,b,c){let d="",e=c?.explode?by(a,b):[[a,b]],f=a=>c?.charEncoding==="percent"?encodeURIComponent(a):a;return e.forEach(([a,b])=>{let c="",e="";null!=b&&(e=Array.isArray(b)?JSON.stringify(b,bA):bp(b)?JSON.stringify(b,bA):`${f(bz(b))}`,(c=`${f(a)}=${e}`)&&"="!==c&&(d+=`&${c}`))}),d.slice(1)}function bw(a,b,c){if(void 0===b)return;let d=a=>c?.charEncoding==="percent"?encodeURIComponent(a):a,e=d(JSON.stringify(b,bA));return c?.explode?e:`${d(a)}=${e}`}let bx=(a,b,c)=>{let d="",e=c?.explode?by(a,b):[[a,b]];if(e.every(([a,b])=>null==b))return;let f=a=>c?.charEncoding==="percent"?encodeURIComponent(a):a,g=a=>f(bz(a));return e.forEach(([a,e])=>{let h="";if(null!=e){if(Array.isArray(e))h=bB(e,a=>`${g(a)}`)?.join(",");else if(bp(e)){let a=bC(Object.entries(e),([a,b])=>`,${f(a)},${g(b)}`);h=a?.join("").slice(1)}else{let d=c?.explode&&bp(b)?`${a}=`:"";h=`${d}${g(e)}`}d+=h?`,${h}`:""}}),d.slice(1)};function by(a,b){return Array.isArray(b)?b.map(b=>[a,b]):bp(b)?Object.entries(b??{}).map(([a,b])=>[a,b]):[[a,b]]}function bz(a){return null==a?"":a instanceof Date?a.toISOString():a instanceof Uint8Array?bn(a):"object"==typeof a?JSON.stringify(a,bA):`${a}`}function bA(a,b){return b instanceof Uint8Array?bn(b):b}function bB(a,b){let c=a.reduce((a,c)=>{if(null==c)return a;let d=b(c);return null==d||a.push(d),a},[]);return c.length?c:null}function bC(a,b){let c=[];for(let[d,e]of a){if(null==e)continue;let a=b([d,e]);null!=a&&c.push(a)}return c.length?c:null}function bD(...a){return a.filter(Boolean).join("&")}function bE(a){return function(b,c){let d={...c,explode:c?.explode??!0,charEncoding:c?.charEncoding??"percent"};return bD(...Object.entries(b).map(([b,c])=>a(b,c,d)))}}bE(bw);let bF=bE(bs);bE(bt),bE(bu);let bG=bE(function(a,b,c){if(null!=b){if(!bp(b))throw new bq(`Value of parameter '${a}' which uses deepObject encoding must be an object or null`);return function a(b,c,d){if(null==c)return;let e="",f=a=>d?.charEncoding==="percent"?encodeURIComponent(a):a;if(!bp(c))throw new bq(`Expected parameter '${b}' to be an object.`);return Object.entries(c).forEach(([c,g])=>{if(null==g)return;let h=`${b}[${c}]`;if(bp(g)){let b=a(h,g,d);e+=null==b?"":`&${b}`;return}let i=Array.isArray(g)?g:[g],j=bB(i,a=>`${f(h)}=${f(bz(a))}`)?.join("&");e+=null==j?"":`&${j}`}),e.slice(1)}(a,b,c)}});function bH(a,b,c,d,e){for(d=0,b=Array.isArray(b)?b:b.split(".");d<b.length;d++){let c=b[d];a=null!=c&&a?a[c]:e}return a===e?c:a}let bI=a$({POLAR_ACCESS_TOKEN:bc(aJ()),POLAR_DEBUG:bc(new aP({type:"boolean",coerce:!0,...L(void 0)}))});function bJ(){if(d)return d;let a={};return a=("Deno"in globalThis?0:1)?bH(globalThis,"process.env")??{}:globalThis.Deno?.env?.toObject?.()??{},d=bI.parse(a)}let bK=(a,b)=>null==b?fetch(a):fetch(a,b);class bL{constructor(a={}){this.options=a,this.requestHooks=[],this.requestErrorHooks=[],this.responseHooks=[],this.fetcher=a.fetcher||bK}async request(a){let b=a;for(let a of this.requestHooks){let c=await a(b);c&&(b=c)}try{let a=await this.fetcher(b);for(let c of this.responseHooks)await c(a,b);return a}catch(a){for(let c of this.requestErrorHooks)await c(a,b);throw a}}addHook(...a){if("beforeRequest"===a[0])this.requestHooks.push(a[1]);else if("requestError"===a[0])this.requestErrorHooks.push(a[1]);else if("response"===a[0])this.responseHooks.push(a[1]);else throw Error(`Invalid hook type: ${a[0]}`);return this}removeHook(...a){let b;if("beforeRequest"===a[0])b=this.requestHooks;else if("requestError"===a[0])b=this.requestErrorHooks;else if("response"===a[0])b=this.responseHooks;else throw Error(`Invalid hook type: ${a[0]}`);let c=b.findIndex(b=>b===a[1]);return c>=0&&b.splice(c,1),this}clone(){let a=new bL(this.options);return a.requestHooks=this.requestHooks.slice(),a.requestErrorHooks=this.requestErrorHooks.slice(),a.responseHooks=this.responseHooks.slice(),a}}let bM=/\s*;\s*/g;function bN(a,b){if("*"===b)return!0;let c=a.headers.get("content-type")?.trim()||"application/octet-stream";c=c.toLowerCase();let[d="",...e]=b.toLowerCase().trim().split(bM);if(2!==d.split("/").length)return!1;let[f="",...g]=c.split(bM),[h="",i=""]=f.split("/");if(!h||!i||"*/*"!==d&&f!==d&&`${h}/*`!==d&&`*/${i}`!==d||g.length<e.length)return!1;let j=new Set(g);for(let a of e)if(!j.has(a))return!1;return!0}let bO=RegExp("^[0-9]xx$","i");function bP(a,b){let c=`${a.status}`,d=Array.isArray(b)?b:[b];return!!d.length&&d.some(a=>{let b=`${a}`;if("default"===b)return!0;if(!bO.test(`${b}`))return b===c;let d=b.charAt(0);if(!d)throw Error("Invalid status code range");let e=c.charAt(0);if(!e)throw Error(`Invalid response status code: ${c}`);return e===d})}function bQ(a){if("object"!=typeof a||null==a)return!1;let b=a instanceof TypeError&&a.message.toLowerCase().startsWith("failed to fetch"),c=a instanceof TypeError&&a.message.toLowerCase().startsWith("fetch failed"),d="name"in a&&"ConnectionError"===a.name,e="code"in a&&"string"==typeof a.code&&"econnreset"===a.code.toLowerCase();return b||c||e||d}function bR(a){if("object"!=typeof a||null==a)return!1;let b="name"in a&&"TimeoutError"===a.name,c="code"in a&&23===a.code,d="code"in a&&"string"==typeof a.code&&"econnaborted"===a.code.toLowerCase();return b||c||d}let bS={initialInterval:500,maxInterval:6e4,exponent:1.5,maxElapsedTime:36e5};class bT extends Error{constructor(a,b){let c=a;b?.cause&&(c+=`: ${b.cause}`),super(c,b),this.name="PermanentError",void 0===this.cause&&(this.cause=b?.cause),Object.setPrototypeOf(this,bT.prototype)}}class bU extends Error{constructor(a,b){super(a),this.response=b,this.name="TemporaryError",Object.setPrototypeOf(this,bU.prototype)}}async function bV(a,b){var c,d;return"backoff"===b.config.strategy?bX((c=a,d={statusCodes:b.statusCodes,retryConnectionErrors:!!b.config.retryConnectionErrors},async()=>{try{let a=await c();if(function(a,b){let c=`${a.status}`;return b.some(a=>{if(!bW.test(a))return a===c;let b=a.charAt(0);if(!b)throw Error("Invalid status code range");let d=c.charAt(0);if(!d)throw Error(`Invalid response status code: ${c}`);return d===b})}(a,d.statusCodes))throw new bU("Response failed with retryable status code",a);return a}catch(a){if(a instanceof bU||d.retryConnectionErrors&&(bR(a)||bQ(a)))throw a;throw new bT("Permanent error",{cause:a})}}),b.config.backoff??bS):await a()}let bW=RegExp("^[0-9]xx$","i");async function bX(a,b){let{maxElapsedTime:c,initialInterval:d,exponent:e,maxInterval:f}=b,g=Date.now(),h=0;for(;;)try{return await a()}catch(i){if(i instanceof bT)throw i.cause;if(Date.now()-g>c){if(i instanceof bU)return i.response;throw i}let a=0;i instanceof bU&&(a=function(a){let b=a.headers.get("retry-after")||"";if(!b)return 0;let c=Number(b);if(Number.isInteger(c))return 1e3*c;let d=Date.parse(b);if(Number.isInteger(d)){let a=d-Date.now();return a>0?Math.ceil(a):0}return 0}(i.response)),a<=0&&(a=d*Math.pow(h,e)+1e3*Math.random());let b=Math.min(a,f);await bY(b),h++}}async function bY(a){return new Promise(b=>setTimeout(b,a))}var bZ,b$,b_,b0,b1,b2,b3,b4=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},b5=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};let b6="undefined"==typeof globalThis?null:globalThis,b7="object"==typeof b6&&null!=b6&&"importScripts"in b6&&"function"==typeof b6.importScripts||"undefined"!=typeof navigator&&"serviceWorker"in navigator||"object"==typeof window&&void 0!==window.document;class b8{constructor(a={}){bZ.set(this,void 0),b$.set(this,void 0),b_.set(this,void 0),"object"==typeof a&&null!=a&&"hooks"in a&&a.hooks instanceof j?b4(this,b$,a.hooks,"f"):b4(this,b$,new j,"f");let b=function(a){let b=a.serverURL;return b||(b=h[a.server??g]||""),new URL(f(b)({}))}(a);b&&(b.pathname=b.pathname.replace(/\/+$/,"")+"/");let{baseURL:c,client:d}=b5(this,b$,"f").sdkInit({baseURL:b,client:a.httpClient||new bL});this._baseURL=c,b4(this,bZ,d,"f"),this._options={...a,hooks:b5(this,b$,"f")},b4(this,b_,this._options.debugLogger,"f"),!b5(this,b_,"f")&&bJ().POLAR_DEBUG&&b4(this,b_,console,"f")}_createRequest(a,b,c){let d,{method:e,path:f,query:g,headers:h,security:j}=b,k=b.baseURL??this._baseURL;if(!k)return r(new m("No base URL provided for operation"));let n=new URL(k),o=new URL(f,n);f&&(n.pathname+=n.pathname.endsWith("/")?"":"/",n.pathname+=o.pathname.replace(/^\/+/,""));let p=g||"",s=[];for(let[a,b]of Object.entries(j?.queryParams||{})){let c=bs(a,b,{charEncoding:"percent"});void 0!==c&&s.push(c)}if(s.length&&(p+=`&${s.join("&")}`),p){let a=p.startsWith("&")?p.slice(1):p;n.search=`?${a}`}let t=new Headers(h),u=j?.basic.username,v=j?.basic.password;if(null!=u||null!=v){let a=bn(bo([u||"",v||""].join(":")));t.set("Authorization",`Basic ${a}`)}for(let[a,b]of new Headers(j?.headers||{}))t.set(a,b);let w=t.get("cookie")||"";for(let[a,b]of Object.entries(j?.cookies||{}))w+=`; ${a}=${b}`;for(let[a,b]of(w=w.startsWith("; ")?w.slice(2):w,t.set("cookie",w),new Headers(c?.headers??c?.fetchOptions?.headers)))t.set(a,b);b7||t.set(b.uaHeader??"user-agent",b.userAgent??i.userAgent);let x={...c?.fetchOptions,...c};!x?.signal&&b.timeoutMs&&b.timeoutMs>0&&(x.signal=AbortSignal.timeout(b.timeoutMs)),b.body instanceof ReadableStream&&Object.assign(x,{duplex:"half"});try{d=b5(this,b$,"f").beforeCreateRequest(a,{url:n,options:{...x,body:b.body??null,headers:t,method:e}})}catch(a){return r(new l("Create request hook failed to execute",{cause:a}))}return q(new Request(d.url,d.options))}async _do(a,b){let{context:c,errorCodes:d}=b;return bV(async()=>{let b=await b5(this,b$,"f").beforeRequest(c,a.clone());await cb(b5(this,b_,"f"),b).catch(a=>b5(this,b_,"f")?.log("Failed to log request:",a));let e=await b5(this,bZ,"f").request(b);try{if(bP(e,d)){let a=await b5(this,b$,"f").afterError(c,e,null);if(a.error)throw a.error;e=a.response||e}else e=await b5(this,b$,"f").afterSuccess(c,e)}finally{await cc(b5(this,b_,"f"),e,b).catch(a=>b5(this,b_,"f")?.log("Failed to log response:",a))}return e},{config:b.retryConfig,statusCodes:b.retryCodes}).then(a=>q(a),a=>{switch(!0){case function(a){if("object"!=typeof a||null==a)return!1;let b="name"in a&&"AbortError"===a.name,c="code"in a&&20===a.code,d="code"in a&&"string"==typeof a.code&&"econnaborted"===a.code.toLowerCase();return b||c||d}(a):return r(new n("Request aborted by client",{cause:a}));case bR(a):return r(new o("Request timed out",{cause:a}));case bQ(a):return r(new p("Unable to make request",{cause:a}));default:return r(new l("Unexpected HTTP client error",{cause:a}))}})}}bZ=new WeakMap,b$=new WeakMap,b_=new WeakMap;let b9=/(application|text)\/.*?\+*json.*/,ca=/(application|text)\/(.*?\+*\bjsonl\b.*|.*?\+*\bx-ndjson\b.*)/;async function cb(a,b){if(!a)return;let c=b.headers.get("content-type"),d=c?.split(";")[0]||"";for(let[c,d]of(a.group(`> Request: ${b.method} ${b.url}`),a.group("Headers:"),b.headers.entries()))a.log(`${c}: ${d}`);switch(a.groupEnd(),a.group("Body:"),!0){case b9.test(d):a.log(await b.clone().json());break;case d.startsWith("text/"):a.log(await b.clone().text());break;case"multipart/form-data"===d:for(let[c,d]of(await b.clone().formData())){let b=d instanceof Blob?"<Blob>":d;a.log(`${c}: ${b}`)}break;default:a.log(`<${c}>`)}a.groupEnd(),a.groupEnd()}async function cc(a,b,c){if(!a)return;let d=b.headers.get("content-type"),e=d?.split(";")[0]||"";for(let[d,e]of(a.group(`< Response: ${c.method} ${c.url}`),a.log("Status Code:",b.status,b.statusText),a.group("Headers:"),b.headers.entries()))a.log(`${d}: ${e}`);switch(a.groupEnd(),a.group("Body:"),!0){case bN(b,"application/json")||b9.test(e)&&!ca.test(e):a.log(await b.clone().json());break;case bN(b,"application/jsonl")||ca.test(e):a.log(await b.clone().text());break;case bN(b,"text/event-stream"):a.log(`<${d}>`);break;case bN(b,"text/*"):a.log(await b.clone().text());break;case bN(b,"multipart/form-data"):for(let[c,d]of(await b.clone().formData())){let b=d instanceof Blob?"<Blob>":d;a.log(`${c}: ${b}`)}break;default:a.log(`<${d}>`)}a.groupEnd(),a.groupEnd()}class cd extends Error{constructor(a,b){super(a),this.statusCode=b.response.status,this.body=b.body,this.headers=b.response.headers,this.contentType=b.response.headers.get("content-type")||"",this.rawResponse=b.response,this.name="PolarError"}}class ce extends Error{static[Symbol.hasInstance](a){return a instanceof Error&&"rawValue"in a&&"rawMessage"in a&&"pretty"in a&&"function"==typeof a.pretty}constructor(a,b,c){super(`${a}: ${b}`),this.name="SDKValidationError",this.cause=b,this.rawValue=c,this.rawMessage=a}pretty(){return this.cause instanceof W?`${this.rawMessage}
${cf(this.cause)}`:this.toString()}}function cf(a){let b=[];for(let c of[...a.issues].sort((a,b)=>a.path.length-b.path.length))b.push(` ${c.message}`),c.path?.length&&b.push(`   at ${function(a){let b=[];for(let c of a)"number"==typeof c?b.push(`[${c}]`):"symbol"==typeof c?b.push(`[${JSON.stringify(String(c))}]`):/[^\w$]/.test(c)?b.push(`[${JSON.stringify(c)}]`):(b.length&&b.push("."),b.push(c));return b.join("")}(c.path)}`);return b.join("\n")}class cg extends cd{constructor(a,b){super(a,b),this.name="ResponseValidationError",this.cause=b.cause,this.rawValue=b.rawValue,this.rawMessage=b.rawMessage}pretty(){return this.cause instanceof W?`${this.rawMessage}
${cf(this.cause)}`:this.toString()}}class ch extends cd{constructor(a,b){a&&(a+=": "),a+=`Status ${b.response.status}`;let c=b.response.headers.get("content-type")||'""';"application/json"!==c&&(a+=` Content-Type ${c.includes(" ")?`"${c}"`:c}`);let d=b.body||'""';a+=d.length>100?"\n":". ";let e=d;if(d.length>1e4){let a=d.substring(0,1e4),b=d.length-1e4;e=`${a}...and ${b} more chars`}a+=`Body: ${e}`,super(a=a.trim(),b),this.name="SDKError"}}let ci={jsonl:"application/jsonl",json:"application/json",text:"text/plain",bytes:"application/octet-stream",stream:"application/octet-stream",sse:"text/event-stream",nil:"*",fail:"*"};function cj(a,b,c){return{...c,err:!0,enc:"json",codes:a,schema:b}}function ck(a,b,c){return{...c,enc:"json",codes:a,schema:b}}function cl(a,b,c){return{...c,enc:"nil",codes:a,schema:b}}function cm(a){return{enc:"fail",codes:a}}function cn(...a){return async function(b,c,d){let e,f,g;for(let c of a){let{codes:a}=c,d="ctype"in c?c.ctype:ci[c.enc];if(d&&bP(b,a)&&bN(b,d)||!d&&bP(b,a)){f=c;break}}if(!f)return[{ok:!1,error:new ch("Unexpected Status or Content-Type",{response:b,request:c,body:await b.text().catch(()=>"")})},e];let h=f.enc,i="";switch(h){case"json":e=JSON.parse(i=await b.text());break;case"jsonl":case"stream":case"sse":e=b.body;break;case"bytes":e=new Uint8Array(await b.arrayBuffer());break;case"text":case"fail":e=i=await b.text();break;case"nil":i=await b.text(),e=void 0;break;default:throw Error(`Unsupported response type: ${h}`)}if("fail"===f.enc)return[{ok:!1,error:new ch("API error occurred",{request:c,response:b,body:i})},e];let j=f.key||d?.resultKey;if(g="err"in f?{...d?.extraFields,...f.hdrs?{Headers:cp(b.headers)}:null,...bp(e)?e:null,request$:c,response$:b,body$:i}:j?{...d?.extraFields,...f.hdrs?{Headers:cp(b.headers)}:null,[j]:e}:f.hdrs?{...d?.extraFields,...f.hdrs?{Headers:cp(b.headers)}:null,...bp(e)?e:null}:e,!("err"in f))return[cq(g,a=>f.schema.parse(a),"Response validation failed",{request:c,response:b,body:i}),e];{let a=cq(g,a=>f.schema.parse(a),"Response validation failed",{request:c,response:b,body:i});return[a.ok?{ok:!1,error:a.value}:a,e]}}}let co=/, */;function cp(a){let b={};for(let[c,d]of a.entries())b[c]=d.split(co);return b}function cq(a,b,c,d){try{return q(b(a))}catch(b){return r(new cg(c,{cause:b,rawValue:a,rawMessage:c,...d}))}}function cr(a,b){let c={};if(!Object.keys(b).length)return a;for(let[d,e]of Object.entries(a)){let a=b[d];null!==a&&(c[a??d]=e)}return c}function cs(a){let b={};for(let[c,d]of Object.entries(a))void 0!==d&&(b[c]=d);return b}function ct(a,b,c){try{return q(b(a))}catch(b){return r(new ce(c,b,a))}}!function(a){a.Incomplete="incomplete",a.UnrecognisedSecurityType="unrecognized_security_type"}(b0||(b0={}));class cu extends Error{constructor(a,b){super(b),this.code=a,this.name="SecurityError"}static incomplete(){return new cu(b0.Incomplete,"Security requirements not met in order to perform the operation")}static unrecognizedType(a){return new cu(b0.UnrecognisedSecurityType,`Unrecognised security type: ${a}`)}}function cv(...a){let b={basic:{},headers:{},queryParams:{},cookies:{},oauth2:{type:"none"}},c=a.find(a=>a.every(a=>{if(null==a.value)return!1;if("http:basic"===a.type)return null!=a.value.username||null!=a.value.password;if("http:custom"===a.type)return null;if("oauth2:password"===a.type)return"string"==typeof a.value&&!!a.value;if("oauth2:client_credentials"===a.type)return"string"==typeof a.value?!!a.value:null!=a.value.clientID||null!=a.value.clientSecret;else if("string"==typeof a.value)return!!a.value;else throw Error(`Unrecognized security type: ${a.type} (value type: ${typeof a.value})`)}));return null==c?null:(c.forEach(a=>{if(null==a.value)return;let{type:c}=a;switch(c){case"apiKey:header":b.headers[a.fieldName]=a.value;break;case"apiKey:query":b.queryParams[a.fieldName]=a.value;break;case"apiKey:cookie":b.cookies[a.fieldName]=a.value;break;case"http:basic":var d,e;d=b,null!=(e=a).value&&(d.basic=e.value);break;case"http:custom":case"oauth2:client_credentials":break;case"http:bearer":case"oauth2":case"oauth2:password":case"openIdConnect":!function(a,b){if("string"!=typeof b.value||!b.value)return;let c=b.value;"bearer "!==c.slice(0,7).toLowerCase()&&(c=`Bearer ${c}`),void 0!==b.fieldName&&(a.headers[b.fieldName]=c)}(b,a);break;default:throw cu.unrecognizedType(c)}}),b)}function cw(a){return cv([{fieldName:"Authorization",type:"http:bearer",value:a?.accessToken??bJ().POLAR_ACCESS_TOKEN}])}async function cx(a){if(null!=a)return"function"==typeof a?a():a}a0([aJ(),aO()]),a0([aJ(),aO()]);let cy=a$({loc:aY(a0([aJ(),aO()])),msg:aJ(),type:aJ()}),cz=a$({loc:aY(a0([aJ(),aO()])),msg:aJ(),type:aJ()});class cA extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,null!=a.detail&&(this.detail=a.detail),this.name="HTTPValidationError"}}let cB=bi(a$({detail:bc(aY(cy)),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new cA(a,{request:a.request$,response:a.response$,body:a.body$})));bi(bi(bm(a=>a instanceof cA),ba(a=>a.data$)),a$({detail:bc(aY(cz))}));let cC=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",GrantedAt:"granted_at",MinusGrantedAt:"-granted_at",RevokedAt:"revoked_at",MinusRevokedAt:"-revoked_at"}),cD=t("$ZodISODateTime",(a,b)=>{ae.init(a,b),aK.init(a,b)});function cE(a){return new cD({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...L(a)})}let cF=a$({note:be(aJ())}),cG=a$({note:be(aJ())});a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let cH=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("custom"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:cF}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),cI=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),type:a8("custom"),description:aJ(),selectable:aQ(),deletable:aQ(),organizationId:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:cG}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),cJ=bi(a$({guild_id:aJ(),role_id:aJ(),kick_member:aQ(),guild_token:aJ()}),ba(a=>cr(a,{guild_id:"guildId",role_id:"roleId",kick_member:"kickMember",guild_token:"guildToken"}))),cK=bi(a$({guildId:aJ(),roleId:aJ(),kickMember:aQ(),guildToken:aJ()}),ba(a=>cr(a,{guildId:"guild_id",roleId:"role_id",kickMember:"kick_member",guildToken:"guild_token"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let cL=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("discord"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:cJ}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),cM=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),type:a8("discord"),description:aJ(),selectable:aQ(),deletable:aQ(),organizationId:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:cK}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),cN=a$({archived:a4(aJ(),aQ()),files:aY(aJ())}),cO=a$({archived:a4(aJ(),aQ()),files:aY(aJ())});a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let cP=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("downloadables"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:cN}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),cQ=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),type:a8("downloadables"),description:aJ(),selectable:aQ(),deletable:aQ(),organizationId:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:cO}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),cR=a6({Pull:"pull",Triage:"triage",Push:"push",Maintain:"maintain",Admin:"admin"}),cS=bi(a$({repository_owner:aJ(),repository_name:aJ(),permission:cR}),ba(a=>cr(a,{repository_owner:"repositoryOwner",repository_name:"repositoryName"}))),cT=bi(a$({repositoryOwner:aJ(),repositoryName:aJ(),permission:cR}),ba(a=>cr(a,{repositoryOwner:"repository_owner",repositoryName:"repository_name"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let cU=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("github_repository"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:cS}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),cV=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),type:a8("github_repository"),description:aJ(),selectable:aQ(),deletable:aQ(),organizationId:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:cT}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),cW=bi(a$({limit:aO(),enable_customer_admin:aQ()}),ba(a=>cr(a,{enable_customer_admin:"enableCustomerAdmin"}))),cX=bi(a$({limit:aO(),enableCustomerAdmin:aQ()}),ba(a=>cr(a,{enableCustomerAdmin:"enable_customer_admin"}))),cY=a6({Year:"year",Month:"month",Day:"day"}),cZ=a$({ttl:aO(),timeframe:cY}),c$=a$({ttl:aO(),timeframe:cY}),c_=bi(a$({prefix:be(aJ()),expires:be(cZ),activations:be(cW),limit_usage:be(aO())}),ba(a=>cr(a,{limit_usage:"limitUsage"}))),c0=bi(a$({prefix:be(aJ()),expires:be(c$),activations:be(cX),limitUsage:be(aO())}),ba(a=>cr(a,{limitUsage:"limit_usage"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let c1=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("license_keys"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:c_}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),c2=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),type:a8("license_keys"),description:aJ(),selectable:aQ(),deletable:aQ(),organizationId:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:c0}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),c3=bi(a$({units:aO(),rollover:aQ(),meter_id:aJ()}),ba(a=>cr(a,{meter_id:"meterId"}))),c4=bi(a$({units:aO(),rollover:aQ(),meterId:aJ()}),ba(a=>cr(a,{meterId:"meter_id"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let c5=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("meter_credit"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:c3}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),c6=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),type:a8("meter_credit"),description:aJ(),selectable:aQ(),deletable:aQ(),organizationId:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:c4}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),c7=a0([cH,cL,cU,cP,c1,c5]),c8=a0([cI,cM,cV,cQ,c2,c6]),c9=a$({}),da=a$({}),db=bi(a$({account_id:bc(be(aJ())),guild_id:bc(aJ()),role_id:bc(aJ()),granted_account_id:bc(aJ())}),ba(a=>cr(a,{account_id:"accountId",guild_id:"guildId",role_id:"roleId",granted_account_id:"grantedAccountId"}))),dc=bi(a$({accountId:bc(be(aJ())),guildId:bc(aJ()),roleId:bc(aJ()),grantedAccountId:bc(aJ())}),ba(a=>cr(a,{accountId:"account_id",guildId:"guild_id",roleId:"role_id",grantedAccountId:"granted_account_id"}))),dd=a$({files:bc(aY(aJ()))}),de=a$({files:bc(aY(aJ()))}),df=a$({message:aJ(),type:aJ(),timestamp:aJ()});a$({message:aJ(),type:aJ(),timestamp:aJ()});let dg=a6({Pull:"pull",Triage:"triage",Push:"push",Maintain:"maintain",Admin:"admin"}),dh=bi(a$({account_id:bc(be(aJ())),repository_owner:bc(aJ()),repository_name:bc(aJ()),permission:bc(dg),granted_account_id:bc(aJ())}),ba(a=>cr(a,{account_id:"accountId",repository_owner:"repositoryOwner",repository_name:"repositoryName",granted_account_id:"grantedAccountId"}))),di=bi(a$({accountId:bc(be(aJ())),repositoryOwner:bc(aJ()),repositoryName:bc(aJ()),permission:bc(dg),grantedAccountId:bc(aJ())}),ba(a=>cr(a,{accountId:"account_id",repositoryOwner:"repository_owner",repositoryName:"repository_name",grantedAccountId:"granted_account_id"}))),dj=bi(a$({license_key_id:bc(aJ()),display_key:bc(aJ())}),ba(a=>cr(a,{license_key_id:"licenseKeyId",display_key:"displayKey"}))),dk=bi(a$({licenseKeyId:bc(aJ()),displayKey:bc(aJ())}),ba(a=>cr(a,{licenseKeyId:"license_key_id",displayKey:"display_key"}))),dl=a6({Ad:"AD",Ae:"AE",Af:"AF",Ag:"AG",Ai:"AI",Al:"AL",Am:"AM",Ao:"AO",Aq:"AQ",Ar:"AR",As:"AS",At:"AT",Au:"AU",Aw:"AW",Ax:"AX",Az:"AZ",Ba:"BA",Bb:"BB",Bd:"BD",Be:"BE",Bf:"BF",Bg:"BG",Bh:"BH",Bi:"BI",Bj:"BJ",Bl:"BL",Bm:"BM",Bn:"BN",Bo:"BO",Bq:"BQ",Br:"BR",Bs:"BS",Bt:"BT",Bv:"BV",Bw:"BW",By:"BY",Bz:"BZ",Ca:"CA",Cc:"CC",Cd:"CD",Cf:"CF",Cg:"CG",Ch:"CH",Ci:"CI",Ck:"CK",Cl:"CL",Cm:"CM",Cn:"CN",Co:"CO",Cr:"CR",Cu:"CU",Cv:"CV",Cw:"CW",Cx:"CX",Cy:"CY",Cz:"CZ",De:"DE",Dj:"DJ",Dk:"DK",Dm:"DM",Do:"DO",Dz:"DZ",Ec:"EC",Ee:"EE",Eg:"EG",Eh:"EH",Er:"ER",Es:"ES",Et:"ET",Fi:"FI",Fj:"FJ",Fk:"FK",Fm:"FM",Fo:"FO",Fr:"FR",Ga:"GA",Gb:"GB",Gd:"GD",Ge:"GE",Gf:"GF",Gg:"GG",Gh:"GH",Gi:"GI",Gl:"GL",Gm:"GM",Gn:"GN",Gp:"GP",Gq:"GQ",Gr:"GR",Gs:"GS",Gt:"GT",Gu:"GU",Gw:"GW",Gy:"GY",Hk:"HK",Hm:"HM",Hn:"HN",Hr:"HR",Ht:"HT",Hu:"HU",Id:"ID",Ie:"IE",Il:"IL",Im:"IM",In:"IN",Io:"IO",Iq:"IQ",Ir:"IR",Is:"IS",It:"IT",Je:"JE",Jm:"JM",Jo:"JO",Jp:"JP",Ke:"KE",Kg:"KG",Kh:"KH",Ki:"KI",Km:"KM",Kn:"KN",Kp:"KP",Kr:"KR",Kw:"KW",Ky:"KY",Kz:"KZ",La:"LA",Lb:"LB",Lc:"LC",Li:"LI",Lk:"LK",Lr:"LR",Ls:"LS",Lt:"LT",Lu:"LU",Lv:"LV",Ly:"LY",Ma:"MA",Mc:"MC",Md:"MD",Me:"ME",Mf:"MF",Mg:"MG",Mh:"MH",Mk:"MK",Ml:"ML",Mm:"MM",Mn:"MN",Mo:"MO",Mp:"MP",Mq:"MQ",Mr:"MR",Ms:"MS",Mt:"MT",Mu:"MU",Mv:"MV",Mw:"MW",Mx:"MX",My:"MY",Mz:"MZ",Na:"NA",Nc:"NC",Ne:"NE",Nf:"NF",Ng:"NG",Ni:"NI",Nl:"NL",No:"NO",Np:"NP",Nr:"NR",Nu:"NU",Nz:"NZ",Om:"OM",Pa:"PA",Pe:"PE",Pf:"PF",Pg:"PG",Ph:"PH",Pk:"PK",Pl:"PL",Pm:"PM",Pn:"PN",Pr:"PR",Ps:"PS",Pt:"PT",Pw:"PW",Py:"PY",Qa:"QA",Re:"RE",Ro:"RO",Rs:"RS",Ru:"RU",Rw:"RW",Sa:"SA",Sb:"SB",Sc:"SC",Sd:"SD",Se:"SE",Sg:"SG",Sh:"SH",Si:"SI",Sj:"SJ",Sk:"SK",Sl:"SL",Sm:"SM",Sn:"SN",So:"SO",Sr:"SR",Ss:"SS",St:"ST",Sv:"SV",Sx:"SX",Sy:"SY",Sz:"SZ",Tc:"TC",Td:"TD",Tf:"TF",Tg:"TG",Th:"TH",Tj:"TJ",Tk:"TK",Tl:"TL",Tm:"TM",Tn:"TN",To:"TO",Tr:"TR",Tt:"TT",Tv:"TV",Tw:"TW",Tz:"TZ",Ua:"UA",Ug:"UG",Um:"UM",Us:"US",Uy:"UY",Uz:"UZ",Va:"VA",Vc:"VC",Ve:"VE",Vg:"VG",Vi:"VI",Vn:"VN",Vu:"VU",Wf:"WF",Ws:"WS",Ye:"YE",Yt:"YT",Za:"ZA",Zm:"ZM",Zw:"ZW"}),dm=bi(a$({line1:bc(be(aJ())),line2:bc(be(aJ())),postal_code:bc(be(aJ())),city:bc(be(aJ())),state:bc(be(aJ())),country:dl}),ba(a=>cr(a,{postal_code:"postalCode"}))),dn=bi(a$({line1:bc(be(aJ())),line2:bc(be(aJ())),postalCode:bc(be(aJ())),city:bc(be(aJ())),state:bc(be(aJ())),country:dl}),ba(a=>cr(a,{postalCode:"postal_code"}))),dp=a6({AdNrt:"ad_nrt",AeTrn:"ae_trn",ArCuit:"ar_cuit",AuAbn:"au_abn",AuArn:"au_arn",BgUic:"bg_uic",BhVat:"bh_vat",BoTin:"bo_tin",BrCnpj:"br_cnpj",BrCpf:"br_cpf",CaBn:"ca_bn",CaGstHst:"ca_gst_hst",CaPstBc:"ca_pst_bc",CaPstMb:"ca_pst_mb",CaPstSk:"ca_pst_sk",CaQst:"ca_qst",ChUid:"ch_uid",ChVat:"ch_vat",ClTin:"cl_tin",CnTin:"cn_tin",CoNit:"co_nit",CrTin:"cr_tin",DeStn:"de_stn",DoRcn:"do_rcn",EcRuc:"ec_ruc",EgTin:"eg_tin",EsCif:"es_cif",EuOssVat:"eu_oss_vat",EuVat:"eu_vat",GbVat:"gb_vat",GeVat:"ge_vat",HkBr:"hk_br",HrOib:"hr_oib",HuTin:"hu_tin",IdNpwp:"id_npwp",IlVat:"il_vat",InGst:"in_gst",IsVat:"is_vat",JpCn:"jp_cn",JpRn:"jp_rn",JpTrn:"jp_trn",KePin:"ke_pin",KrBrn:"kr_brn",KzBin:"kz_bin",LiUid:"li_uid",MxRfc:"mx_rfc",MyFrp:"my_frp",MyItn:"my_itn",MySst:"my_sst",NgTin:"ng_tin",NoVat:"no_vat",NoVoec:"no_voec",NzGst:"nz_gst",OmVat:"om_vat",PeRuc:"pe_ruc",PhTin:"ph_tin",RoTin:"ro_tin",RsPib:"rs_pib",RuInn:"ru_inn",RuKpp:"ru_kpp",SaVat:"sa_vat",SgGst:"sg_gst",SgUen:"sg_uen",SiTin:"si_tin",SvNit:"sv_nit",ThVat:"th_vat",TrTin:"tr_tin",TwVat:"tw_vat",UaVat:"ua_vat",UsEin:"us_ein",UyRuc:"uy_ruc",VeRif:"ve_rif",VnTin:"vn_tin",ZaVat:"za_vat"});a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),dp]),a0([aJ(),dp]);let dq=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),external_id:be(aJ()),email:aJ(),email_verified:aQ(),name:be(aJ()),billing_address:be(dm),tax_id:be(aY(be(a0([aJ(),dp])))),organization_id:aJ(),deleted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),avatar_url:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",external_id:"externalId",email_verified:"emailVerified",billing_address:"billingAddress",tax_id:"taxId",organization_id:"organizationId",deleted_at:"deletedAt",avatar_url:"avatarUrl"})));bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),externalId:be(aJ()),email:aJ(),emailVerified:aQ(),name:be(aJ()),billingAddress:be(dn),taxId:be(aY(be(a0([aJ(),dp])))),organizationId:aJ(),deletedAt:be(bi(aW(),ba(a=>a.toISOString()))),avatarUrl:aJ()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",externalId:"external_id",emailVerified:"email_verified",billingAddress:"billing_address",taxId:"tax_id",organizationId:"organization_id",deletedAt:"deleted_at",avatarUrl:"avatar_url"}))),a0([db,dh,dd,dj,c9]);let dr=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),granted_at:bc(be(bi(cE({offset:!0}),ba(a=>new Date(a))))),is_granted:aQ(),revoked_at:bc(be(bi(cE({offset:!0}),ba(a=>new Date(a))))),is_revoked:aQ(),subscription_id:be(aJ()),order_id:be(aJ()),customer_id:aJ(),benefit_id:aJ(),error:bc(be(df)),customer:dq,benefit:c7,properties:a0([db,dh,dd,dj,c9])}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",granted_at:"grantedAt",is_granted:"isGranted",revoked_at:"revokedAt",is_revoked:"isRevoked",subscription_id:"subscriptionId",order_id:"orderId",customer_id:"customerId",benefit_id:"benefitId"}))),ds=bi(a$({total_count:aO(),max_page:aO()}),ba(a=>cr(a,{total_count:"totalCount",max_page:"maxPage"}))),dt=a$({items:aY(dr),pagination:ds});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let du=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),customerId:bc(be(a0([aJ(),aY(aJ())]))),isGranted:bc(be(aQ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(cC)))}),ba(a=>cr(a,{organizationId:"organization_id",customerId:"customer_id",isGranted:"is_granted"}))),dv=bi(a$({Result:dt}),ba(a=>cr(a,{Result:"result"})));var dw=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},dx=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};class dy{constructor(a){b1.set(this,void 0),b2.set(this,void 0),this[b3]="APIPromise",dw(this,b1,a instanceof Promise?a:Promise.resolve(a),"f"),dw(this,b2,a instanceof Promise?dx(this,b1,"f").then(([a])=>a):Promise.resolve(a[0]),"f")}then(a,b){return dx(this,b1,"f").then(a?([b])=>a(b):void 0,b)}catch(a){return dx(this,b2,"f").catch(a)}finally(a){return dx(this,b2,"f").finally(a)}$inspect(){return dx(this,b1,"f")}}function dz(a,b){return{[Symbol.asyncIterator]:async function*(){if(yield a,b(a))return;let c=a;for(c=await c.next();null!=c;c=await c.next())if(yield c,b(c))return}}}function dA(a){return{...a,next:()=>null,[Symbol.asyncIterator]:async function*(){yield a}}}async function dB(a){let b=await a;if(!b.ok)throw b.error;return{...b.value,next:function a(b){return()=>{let c=b();return null==c?null:c.then(b=>{if(!b.ok)throw b.error;return{...b.value,next:a(b.next)}})}}(b.next),"~next":b["~next"],[Symbol.asyncIterator]:async function*(){for await(let a of b){if(!a.ok)throw a.error;yield a.value}}}}b1=new WeakMap,b2=new WeakMap,b3=Symbol.toStringTag;async function dC(a,b,c){let d=ct(b,a=>Y(du,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/benefit-grants/")(),h=bF({customer_id:e.customer_id,is_granted:e.is_granted,limit:e.limit,organization_id:e.organization_id,page:e.page,sorting:e.sorting}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"benefit-grants:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,dv,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(dC(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}Symbol("URL_OVERRIDE");class dD extends b8{async list(a,b){return dB(new dy(dC(this,a,b)))}}let dE=a$({note:bc(be(aJ()))});a0([aJ(),aO(),aM(),aQ()]);let dF=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("custom"),description:aJ(),organizationId:bc(be(aJ())),properties:dE}),ba(a=>cr(a,{organizationId:"organization_id"}))),dG=bi(a$({guildToken:aJ(),roleId:aJ(),kickMember:aQ()}),ba(a=>cr(a,{guildToken:"guild_token",roleId:"role_id",kickMember:"kick_member"})));a0([aJ(),aO(),aM(),aQ()]);let dH=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("discord"),description:aJ(),organizationId:bc(be(aJ())),properties:dG}),ba(a=>cr(a,{organizationId:"organization_id"}))),dI=a$({archived:bc(a4(aJ(),aQ())),files:aY(aJ())});a0([aJ(),aO(),aM(),aQ()]);let dJ=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("downloadables"),description:aJ(),organizationId:bc(be(aJ())),properties:dI}),ba(a=>cr(a,{organizationId:"organization_id"}))),dK=a6({Pull:"pull",Triage:"triage",Push:"push",Maintain:"maintain",Admin:"admin"}),dL=bi(a$({repositoryOwner:aJ(),repositoryName:aJ(),permission:dK}),ba(a=>cr(a,{repositoryOwner:"repository_owner",repositoryName:"repository_name"})));a0([aJ(),aO(),aM(),aQ()]);let dM=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("github_repository"),description:aJ(),organizationId:bc(be(aJ())),properties:dL}),ba(a=>cr(a,{organizationId:"organization_id"}))),dN=bi(a$({limit:aO(),enableCustomerAdmin:aQ()}),ba(a=>cr(a,{enableCustomerAdmin:"enable_customer_admin"}))),dO=bi(a$({prefix:bc(be(aJ())),expires:bc(be(c$)),activations:bc(be(dN)),limitUsage:bc(be(aO()))}),ba(a=>cr(a,{limitUsage:"limit_usage"})));a0([aJ(),aO(),aM(),aQ()]);let dP=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("license_keys"),description:aJ(),organizationId:bc(be(aJ())),properties:dO}),ba(a=>cr(a,{organizationId:"organization_id"}))),dQ=bi(a$({units:aO(),rollover:aQ(),meterId:aJ()}),ba(a=>cr(a,{meterId:"meter_id"})));a0([aJ(),aO(),aM(),aQ()]);let dR=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("meter_credit"),description:aJ(),organizationId:bc(be(aJ())),properties:dQ}),ba(a=>cr(a,{organizationId:"organization_id"}))),dS=a0([a2(dF,a$({type:a8("custom")})),a2(dH,a$({type:a8("discord")})),a2(dJ,a$({type:a8("downloadables")})),a2(dM,a$({type:a8("github_repository")})),a2(dP,a$({type:a8("license_keys")})),a2(dR,a$({type:a8("meter_credit")}))]);async function dT(a,b,c){let d=ct(b,a=>Y(dS,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/benefits/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"benefits:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,c7),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}class dU extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="NotPermitted"}}let dV=bi(a$({error:a8("NotPermitted"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new dU(a,{request:a.request$,response:a.response$,body:a.body$})));class dW extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="ResourceNotFound"}}let dX=bi(a$({error:a8("ResourceNotFound"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new dW(a,{request:a.request$,response:a.response$,body:a.body$}))),dY=a$({id:aJ()});async function dZ(a,b,c){let d=ct(b,a=>Y(dY,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/benefits/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"benefits:delete",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["403","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(cl(204,aU()),cj(403,dV),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let d$=a$({id:aJ()});async function d_(a,b,c){let d=ct(b,a=>Y(d$,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/benefits/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"benefits:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,c7),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}a0([aJ(),aY(aJ())]);let d0=bi(a$({id:aJ(),isGranted:bc(be(aQ())),customerId:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10)}),ba(a=>cr(a,{isGranted:"is_granted",customerId:"customer_id"}))),d1=bi(a$({Result:dt}),ba(a=>cr(a,{Result:"result"})));async function d2(a,b,c){let d=ct(b,a=>Y(d0,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/benefits/{id}/grants")(g),i=bF({customer_id:e.customer_id,is_granted:e.is_granted,limit:e.limit,page:e.page}),j=new Headers(cs({Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"benefits:grants",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"GET",baseURL:c?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[dA(n),{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[dA(p),{status:"request-error",request:o}];let q=p.value,[r,s]=await cn(ck(200,d1,{key:"Result"}),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});if(!r.ok)return[dA(r),{status:"complete",request:o,response:q}];let t={...r,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(d2(a,{...b,page:f},c)),"~next":{page:f}}})(s)};return[{...t,...dz(t,a=>!a.ok)},{status:"complete",request:o,response:q}]}let d3=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Description:"description",MinusDescription:"-description",Type:"type",MinusType:"-type"}),d4=a6({Custom:"custom",Discord:"discord",GithubRepository:"github_repository",Downloadables:"downloadables",LicenseKeys:"license_keys",MeterCredit:"meter_credit"}),d5=a$({items:aY(c7),pagination:ds}),d6=a0([aJ(),aO(),aQ(),aY(aJ()),aY(aO()),aY(aQ())]);a0([aJ(),aY(aJ())]),a0([d4,aY(d4)]);let d7=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),typeFilter:bc(be(a0([d4,aY(d4)]))),query:bc(be(aJ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(d3))),metadata:bc(be(a4(aJ(),d6)))}),ba(a=>cr(a,{organizationId:"organization_id",typeFilter:"type_filter"}))),d8=bi(a$({Result:d5}),ba(a=>cr(a,{Result:"result"})));async function d9(a,b,c){let d=ct(b,a=>Y(d7,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/benefits/")(),h=bD(bG({metadata:e.metadata}),bF({limit:e.limit,organization_id:e.organization_id,page:e.page,query:e.query,sorting:e.sorting,type:e.type_filter})),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"benefits:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,d8,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(d9(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}a0([aJ(),aO(),aM(),aQ()]);let ea=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),description:bc(be(aJ())),type:a8("custom"),properties:bc(be(cG))});a0([aJ(),aO(),aM(),aQ()]);let eb=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),description:bc(be(aJ())),type:a8("discord"),properties:bc(be(dG))});a0([aJ(),aO(),aM(),aQ()]);let ec=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),description:bc(be(aJ())),type:a8("downloadables"),properties:bc(be(dI))});a0([aJ(),aO(),aM(),aQ()]);let ed=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),description:bc(be(aJ())),type:a8("github_repository"),properties:bc(be(dL))});a0([aJ(),aO(),aM(),aQ()]);let ee=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),description:bc(be(aJ())),type:a8("license_keys"),properties:bc(be(dO))});a0([aJ(),aO(),aM(),aQ()]);let ef=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),description:bc(be(aJ())),type:a8("meter_credit"),properties:bc(be(dQ))});a0([ea,eb,ed,ec,ee,ef]);let eg=bi(a$({id:aJ(),requestBody:a0([ea,eb,ed,ec,ee,ef])}),ba(a=>cr(a,{requestBody:"RequestBody"})));async function eh(a,b,c){let d=ct(b,a=>Y(eg,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.RequestBody,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/benefits/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"benefits:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,c7),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class ei extends b8{async list(a,b){return dB(new dy(d9(this,a,b)))}async create(a,b){return s(new dy(dT(this,a,b)))}async get(a,b){return s(new dy(d_(this,a,b)))}async update(a,b){return s(new dy(eh(this,a,b)))}async delete(a,b){return s(new dy(dZ(this,a,b)))}async grants(a,b){return dB(new dy(d2(this,a,b)))}}let ej=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:d4,description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),ek=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),type:d4,description:aJ(),selectable:aQ(),deletable:aQ(),organizationId:aJ()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),el=a6({Catalog:"catalog",AdHoc:"ad_hoc"}),em=a6({Day:"day",Week:"week",Month:"month",Year:"year"}),en=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),source:el,amount_type:a8("custom"),is_archived:aQ(),product_id:aJ(),type:a8("recurring"),recurring_interval:em,price_currency:aJ(),minimum_amount:be(aO()),maximum_amount:be(aO()),preset_amount:be(aO()),legacy:a8(!0)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",amount_type:"amountType",is_archived:"isArchived",product_id:"productId",recurring_interval:"recurringInterval",price_currency:"priceCurrency",minimum_amount:"minimumAmount",maximum_amount:"maximumAmount",preset_amount:"presetAmount"}))),eo=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),source:el,amountType:a8("custom"),isArchived:aQ(),productId:aJ(),type:a8("recurring"),recurringInterval:em,priceCurrency:aJ(),minimumAmount:be(aO()),maximumAmount:be(aO()),presetAmount:be(aO()),legacy:a8(!0)}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",amountType:"amount_type",isArchived:"is_archived",productId:"product_id",recurringInterval:"recurring_interval",priceCurrency:"price_currency",minimumAmount:"minimum_amount",maximumAmount:"maximum_amount",presetAmount:"preset_amount"}))),ep=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),source:el,amount_type:a8("fixed"),is_archived:aQ(),product_id:aJ(),type:a8("recurring"),recurring_interval:em,price_currency:aJ(),price_amount:aO(),legacy:a8(!0)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",amount_type:"amountType",is_archived:"isArchived",product_id:"productId",recurring_interval:"recurringInterval",price_currency:"priceCurrency",price_amount:"priceAmount"}))),eq=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),source:el,amountType:a8("fixed"),isArchived:aQ(),productId:aJ(),type:a8("recurring"),recurringInterval:em,priceCurrency:aJ(),priceAmount:aO(),legacy:a8(!0)}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",amountType:"amount_type",isArchived:"is_archived",productId:"product_id",recurringInterval:"recurring_interval",priceCurrency:"price_currency",priceAmount:"price_amount"}))),er=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),source:el,amount_type:a8("free"),is_archived:aQ(),product_id:aJ(),type:a8("recurring"),recurring_interval:em,legacy:a8(!0)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",amount_type:"amountType",is_archived:"isArchived",product_id:"productId",recurring_interval:"recurringInterval"}))),es=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),source:el,amountType:a8("free"),isArchived:aQ(),productId:aJ(),type:a8("recurring"),recurringInterval:em,legacy:a8(!0)}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",amountType:"amount_type",isArchived:"is_archived",productId:"product_id",recurringInterval:"recurring_interval"}))),et=a0([a2(en,bi(a$({amount_type:a8("custom")}),ba(a=>({amountType:a.amount_type})))),a2(ep,bi(a$({amount_type:a8("fixed")}),ba(a=>({amountType:a.amount_type})))),a2(er,bi(a$({amount_type:a8("free")}),ba(a=>({amountType:a.amount_type}))))]),eu=a0([a2(eo,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(eq,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(es,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))]),ev=bi(a$({id:aJ(),organization_id:aJ(),name:aJ(),path:aJ(),mime_type:aJ(),size:aO(),storage_version:be(aJ()),checksum_etag:be(aJ()),checksum_sha256_base64:be(aJ()),checksum_sha256_hex:be(aJ()),last_modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),version:be(aJ()),service:a8("product_media"),is_uploaded:aQ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),size_readable:aJ(),public_url:aJ()}),ba(a=>cr(a,{organization_id:"organizationId",mime_type:"mimeType",storage_version:"storageVersion",checksum_etag:"checksumEtag",checksum_sha256_base64:"checksumSha256Base64",checksum_sha256_hex:"checksumSha256Hex",last_modified_at:"lastModifiedAt",is_uploaded:"isUploaded",created_at:"createdAt",size_readable:"sizeReadable",public_url:"publicUrl"}))),ew=bi(a$({id:aJ(),organizationId:aJ(),name:aJ(),path:aJ(),mimeType:aJ(),size:aO(),storageVersion:be(aJ()),checksumEtag:be(aJ()),checksumSha256Base64:be(aJ()),checksumSha256Hex:be(aJ()),lastModifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),version:be(aJ()),service:a8("product_media"),isUploaded:aQ(),createdAt:bi(aW(),ba(a=>a.toISOString())),sizeReadable:aJ(),publicUrl:aJ()}),ba(a=>cr(a,{organizationId:"organization_id",mimeType:"mime_type",storageVersion:"storage_version",checksumEtag:"checksum_etag",checksumSha256Base64:"checksum_sha256_base64",checksumSha256Hex:"checksum_sha256_hex",lastModifiedAt:"last_modified_at",isUploaded:"is_uploaded",createdAt:"created_at",sizeReadable:"size_readable",publicUrl:"public_url"}))),ex=a6({OneTime:"one_time",Recurring:"recurring"}),ey=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),source:el,amount_type:a8("custom"),is_archived:aQ(),product_id:aJ(),type:ex,recurring_interval:be(em),price_currency:aJ(),minimum_amount:be(aO()),maximum_amount:be(aO()),preset_amount:be(aO())}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",amount_type:"amountType",is_archived:"isArchived",product_id:"productId",recurring_interval:"recurringInterval",price_currency:"priceCurrency",minimum_amount:"minimumAmount",maximum_amount:"maximumAmount",preset_amount:"presetAmount"}))),ez=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),source:el,amountType:a8("custom"),isArchived:aQ(),productId:aJ(),type:ex,recurringInterval:be(em),priceCurrency:aJ(),minimumAmount:be(aO()),maximumAmount:be(aO()),presetAmount:be(aO())}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",amountType:"amount_type",isArchived:"is_archived",productId:"product_id",recurringInterval:"recurring_interval",priceCurrency:"price_currency",minimumAmount:"minimum_amount",maximumAmount:"maximum_amount",presetAmount:"preset_amount"}))),eA=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),source:el,amount_type:a8("fixed"),is_archived:aQ(),product_id:aJ(),type:ex,recurring_interval:be(em),price_currency:aJ(),price_amount:aO()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",amount_type:"amountType",is_archived:"isArchived",product_id:"productId",recurring_interval:"recurringInterval",price_currency:"priceCurrency",price_amount:"priceAmount"}))),eB=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),source:el,amountType:a8("fixed"),isArchived:aQ(),productId:aJ(),type:ex,recurringInterval:be(em),priceCurrency:aJ(),priceAmount:aO()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",amountType:"amount_type",isArchived:"is_archived",productId:"product_id",recurringInterval:"recurring_interval",priceCurrency:"price_currency",priceAmount:"price_amount"}))),eC=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),source:el,amount_type:a8("free"),is_archived:aQ(),product_id:aJ(),type:ex,recurring_interval:be(em)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",amount_type:"amountType",is_archived:"isArchived",product_id:"productId",recurring_interval:"recurringInterval"}))),eD=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),source:el,amountType:a8("free"),isArchived:aQ(),productId:aJ(),type:ex,recurringInterval:be(em)}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",amountType:"amount_type",isArchived:"is_archived",productId:"product_id",recurringInterval:"recurring_interval"}))),eE=a$({id:aJ(),name:aJ()}),eF=a$({id:aJ(),name:aJ()}),eG=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),source:el,amount_type:a8("metered_unit"),is_archived:aQ(),product_id:aJ(),type:ex,recurring_interval:be(em),price_currency:aJ(),unit_amount:aJ(),cap_amount:be(aO()),meter_id:aJ(),meter:eE}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",amount_type:"amountType",is_archived:"isArchived",product_id:"productId",recurring_interval:"recurringInterval",price_currency:"priceCurrency",unit_amount:"unitAmount",cap_amount:"capAmount",meter_id:"meterId"}))),eH=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),source:el,amountType:a8("metered_unit"),isArchived:aQ(),productId:aJ(),type:ex,recurringInterval:be(em),priceCurrency:aJ(),unitAmount:aJ(),capAmount:be(aO()),meterId:aJ(),meter:eF}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",amountType:"amount_type",isArchived:"is_archived",productId:"product_id",recurringInterval:"recurring_interval",priceCurrency:"price_currency",unitAmount:"unit_amount",capAmount:"cap_amount",meterId:"meter_id"}))),eI=bi(a$({min_seats:aO(),max_seats:bc(be(aO())),price_per_seat:aO()}),ba(a=>cr(a,{min_seats:"minSeats",max_seats:"maxSeats",price_per_seat:"pricePerSeat"}))),eJ=bi(a$({minSeats:aO(),maxSeats:bc(be(aO())),pricePerSeat:aO()}),ba(a=>cr(a,{minSeats:"min_seats",maxSeats:"max_seats",pricePerSeat:"price_per_seat"}))),eK=a$({tiers:aY(eI)}),eL=a$({tiers:aY(eJ)}),eM=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),source:el,amount_type:a8("seat_based"),is_archived:aQ(),product_id:aJ(),type:ex,recurring_interval:be(em),price_currency:aJ(),seat_tiers:eK}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",amount_type:"amountType",is_archived:"isArchived",product_id:"productId",recurring_interval:"recurringInterval",price_currency:"priceCurrency",seat_tiers:"seatTiers"}))),eN=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),source:el,amountType:a8("seat_based"),isArchived:aQ(),productId:aJ(),type:ex,recurringInterval:be(em),priceCurrency:aJ(),seatTiers:eL}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",amountType:"amount_type",isArchived:"is_archived",productId:"product_id",recurringInterval:"recurring_interval",priceCurrency:"price_currency",seatTiers:"seat_tiers"}))),eO=a0([a2(eG,bi(a$({amount_type:a8("metered_unit")}),ba(a=>({amountType:a.amount_type})))),a2(ey,bi(a$({amount_type:a8("custom")}),ba(a=>({amountType:a.amount_type})))),a2(eA,bi(a$({amount_type:a8("fixed")}),ba(a=>({amountType:a.amount_type})))),a2(eM,bi(a$({amount_type:a8("seat_based")}),ba(a=>({amountType:a.amount_type})))),a2(eC,bi(a$({amount_type:a8("free")}),ba(a=>({amountType:a.amount_type}))))]),eP=a0([a2(eH,bi(a$({amountType:a8("metered_unit")}),ba(a=>({amount_type:a.amountType})))),a2(ez,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(eB,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(eN,bi(a$({amountType:a8("seat_based")}),ba(a=>({amount_type:a.amountType})))),a2(eD,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))]),eQ=a6({Day:"day",Week:"week",Month:"month",Year:"year"});a0([aJ(),aO(),aM(),aQ()]),a0([et,eO]);let eR=bi(a$({metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_interval:be(eQ),trial_interval_count:be(aO()),name:aJ(),description:be(aJ()),recurring_interval:be(em),recurring_interval_count:be(aO()),is_recurring:aQ(),is_archived:aQ(),organization_id:aJ(),prices:aY(a0([et,eO])),benefits:aY(ej),medias:aY(ev)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",trial_interval:"trialInterval",trial_interval_count:"trialIntervalCount",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",is_recurring:"isRecurring",is_archived:"isArchived",organization_id:"organizationId"}))),eS=a6({Once:"once",Forever:"forever",Repeating:"repeating"}),eT=a6({Fixed:"fixed",Percentage:"percentage"});a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let eU=bi(a$({duration:eS,type:eT,amount:aO(),currency:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),starts_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),max_redemptions:be(aO()),redemptions_count:aO(),organization_id:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",starts_at:"startsAt",ends_at:"endsAt",max_redemptions:"maxRedemptions",redemptions_count:"redemptionsCount",organization_id:"organizationId"}))),eV=bi(a$({duration:eS,type:eT,amount:aO(),currency:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),startsAt:be(bi(aW(),ba(a=>a.toISOString()))),endsAt:be(bi(aW(),ba(a=>a.toISOString()))),maxRedemptions:be(aO()),redemptionsCount:aO(),organizationId:aJ()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",startsAt:"starts_at",endsAt:"ends_at",maxRedemptions:"max_redemptions",redemptionsCount:"redemptions_count",organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let eW=bi(a$({duration:eS,duration_in_months:aO(),type:eT,amount:aO(),currency:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),starts_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),max_redemptions:be(aO()),redemptions_count:aO(),organization_id:aJ()}),ba(a=>cr(a,{duration_in_months:"durationInMonths",created_at:"createdAt",modified_at:"modifiedAt",starts_at:"startsAt",ends_at:"endsAt",max_redemptions:"maxRedemptions",redemptions_count:"redemptionsCount",organization_id:"organizationId"}))),eX=bi(a$({duration:eS,durationInMonths:aO(),type:eT,amount:aO(),currency:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),startsAt:be(bi(aW(),ba(a=>a.toISOString()))),endsAt:be(bi(aW(),ba(a=>a.toISOString()))),maxRedemptions:be(aO()),redemptionsCount:aO(),organizationId:aJ()}),ba(a=>cr(a,{durationInMonths:"duration_in_months",createdAt:"created_at",modifiedAt:"modified_at",startsAt:"starts_at",endsAt:"ends_at",maxRedemptions:"max_redemptions",redemptionsCount:"redemptions_count",organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let eY=bi(a$({duration:eS,type:eT,basis_points:aO(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),starts_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),max_redemptions:be(aO()),redemptions_count:aO(),organization_id:aJ()}),ba(a=>cr(a,{basis_points:"basisPoints",created_at:"createdAt",modified_at:"modifiedAt",starts_at:"startsAt",ends_at:"endsAt",max_redemptions:"maxRedemptions",redemptions_count:"redemptionsCount",organization_id:"organizationId"}))),eZ=bi(a$({duration:eS,type:eT,basisPoints:aO(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),startsAt:be(bi(aW(),ba(a=>a.toISOString()))),endsAt:be(bi(aW(),ba(a=>a.toISOString()))),maxRedemptions:be(aO()),redemptionsCount:aO(),organizationId:aJ()}),ba(a=>cr(a,{basisPoints:"basis_points",createdAt:"created_at",modifiedAt:"modified_at",startsAt:"starts_at",endsAt:"ends_at",maxRedemptions:"max_redemptions",redemptionsCount:"redemptions_count",organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let e$=bi(a$({duration:eS,duration_in_months:aO(),type:eT,basis_points:aO(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),starts_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),max_redemptions:be(aO()),redemptions_count:aO(),organization_id:aJ()}),ba(a=>cr(a,{duration_in_months:"durationInMonths",basis_points:"basisPoints",created_at:"createdAt",modified_at:"modifiedAt",starts_at:"startsAt",ends_at:"endsAt",max_redemptions:"maxRedemptions",redemptions_count:"redemptionsCount",organization_id:"organizationId"}))),e_=bi(a$({duration:eS,durationInMonths:aO(),type:eT,basisPoints:aO(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),startsAt:be(bi(aW(),ba(a=>a.toISOString()))),endsAt:be(bi(aW(),ba(a=>a.toISOString()))),maxRedemptions:be(aO()),redemptionsCount:aO(),organizationId:aJ()}),ba(a=>cr(a,{durationInMonths:"duration_in_months",basisPoints:"basis_points",createdAt:"created_at",modifiedAt:"modified_at",startsAt:"starts_at",endsAt:"ends_at",maxRedemptions:"max_redemptions",redemptionsCount:"redemptions_count",organizationId:"organization_id"}))),e0=a6({Stripe:"stripe"});a0([aJ(),aO(),aM(),aQ()]),a0([eW,eU,e$,eY]);let e1=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_interval:be(eQ),trial_interval_count:be(aO()),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),payment_processor:e0,client_secret:aJ(),success_url:be(aJ()),label:be(aJ()),allow_discount_codes:aQ(),require_billing_address:aQ(),discount_id:be(aJ()),organization_id:aJ(),products:aY(eR),discount:be(a0([eW,eU,e$,eY])),url:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",trial_interval:"trialInterval",trial_interval_count:"trialIntervalCount",payment_processor:"paymentProcessor",client_secret:"clientSecret",success_url:"successUrl",allow_discount_codes:"allowDiscountCodes",require_billing_address:"requireBillingAddress",discount_id:"discountId",organization_id:"organizationId"})));a0([aJ(),aO(),aM(),aQ()]);let e2=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),trialInterval:bc(be(eQ)),trialIntervalCount:bc(be(aO())),paymentProcessor:a8("stripe"),label:bc(be(aJ())),allowDiscountCodes:bg(aQ(),!0),requireBillingAddress:bg(aQ(),!1),discountId:bc(be(aJ())),successUrl:bc(be(aJ())),productId:aJ()}),ba(a=>cr(a,{trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",paymentProcessor:"payment_processor",allowDiscountCodes:"allow_discount_codes",requireBillingAddress:"require_billing_address",discountId:"discount_id",successUrl:"success_url",productId:"product_id"})));a0([aJ(),aO(),aM(),aQ()]);let e3=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),trialInterval:bc(be(eQ)),trialIntervalCount:bc(be(aO())),paymentProcessor:a8("stripe"),label:bc(be(aJ())),allowDiscountCodes:bg(aQ(),!0),requireBillingAddress:bg(aQ(),!1),discountId:bc(be(aJ())),successUrl:bc(be(aJ())),productPriceId:aJ()}),ba(a=>cr(a,{trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",paymentProcessor:"payment_processor",allowDiscountCodes:"allow_discount_codes",requireBillingAddress:"require_billing_address",discountId:"discount_id",successUrl:"success_url",productPriceId:"product_price_id"})));a0([aJ(),aO(),aM(),aQ()]);let e4=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),trialInterval:bc(be(eQ)),trialIntervalCount:bc(be(aO())),paymentProcessor:a8("stripe"),label:bc(be(aJ())),allowDiscountCodes:bg(aQ(),!0),requireBillingAddress:bg(aQ(),!1),discountId:bc(be(aJ())),successUrl:bc(be(aJ())),products:aY(aJ())}),ba(a=>cr(a,{trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",paymentProcessor:"payment_processor",allowDiscountCodes:"allow_discount_codes",requireBillingAddress:"require_billing_address",discountId:"discount_id",successUrl:"success_url"}))),e5=a0([e3,e2,e4]);async function e6(a,b,c){let d=ct(b,a=>Y(e5,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/checkout-links/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkout-links:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,e1),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let e7=a$({id:aJ()});async function e8(a,b,c){let d=ct(b,a=>Y(e7,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/checkout-links/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkout-links:delete",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(cl(204,aU()),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let e9=a$({id:aJ()});async function fa(a,b,c){let d=ct(b,a=>Y(e9,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/checkout-links/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkout-links:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,e1),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let fb=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Label:"label",MinusLabel:"-label",SuccessUrl:"success_url",MinusSuccessUrl:"-success_url",AllowDiscountCodes:"allow_discount_codes",MinusAllowDiscountCodes:"-allow_discount_codes"}),fc=a$({items:aY(e1),pagination:ds});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let fd=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),productId:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(fb)))}),ba(a=>cr(a,{organizationId:"organization_id",productId:"product_id"}))),fe=bi(a$({Result:fc}),ba(a=>cr(a,{Result:"result"})));async function ff(a,b,c){let d=ct(b,a=>Y(fd,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/checkout-links/")(),h=bF({limit:e.limit,organization_id:e.organization_id,page:e.page,product_id:e.product_id,sorting:e.sorting}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkout-links:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,fe,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(ff(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}a0([aJ(),aO(),aM(),aQ()]);let fg=bi(a$({trialInterval:bc(be(eQ)),trialIntervalCount:bc(be(aO())),metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),products:bc(be(aY(aJ()))),label:bc(be(aJ())),allowDiscountCodes:bc(be(aQ())),requireBillingAddress:bc(be(aQ())),discountId:bc(be(aJ())),successUrl:bc(be(aJ()))}),ba(a=>cr(a,{trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",allowDiscountCodes:"allow_discount_codes",requireBillingAddress:"require_billing_address",discountId:"discount_id",successUrl:"success_url"}))),fh=bi(a$({id:aJ(),checkoutLinkUpdate:fg}),ba(a=>cr(a,{checkoutLinkUpdate:"CheckoutLinkUpdate"})));async function fi(a,b,c){let d=ct(b,a=>Y(fh,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.CheckoutLinkUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/checkout-links/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkout-links:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,e1),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class fj extends b8{async list(a,b){return dB(new dy(ff(this,a,b)))}async create(a,b){return s(new dy(e6(this,a,b)))}async get(a,b){return s(new dy(fa(this,a,b)))}async update(a,b){return s(new dy(fi(this,a,b)))}async delete(a,b){return s(new dy(e8(this,a,b)))}}let fk=bi(a$({form_label:bc(aJ()),form_help_text:bc(aJ()),form_placeholder:bc(aJ())}),ba(a=>cr(a,{form_label:"formLabel",form_help_text:"formHelpText",form_placeholder:"formPlaceholder"}))),fl=bi(a$({formLabel:bc(aJ()),formHelpText:bc(aJ()),formPlaceholder:bc(aJ())}),ba(a=>cr(a,{formLabel:"form_label",formHelpText:"form_help_text",formPlaceholder:"form_placeholder"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let fm=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),type:a8("checkbox"),slug:aJ(),name:aJ(),organization_id:aJ(),properties:fk}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),fn=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),type:a8("checkbox"),slug:aJ(),name:aJ(),organizationId:aJ(),properties:fl}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),fo=bi(a$({form_label:bc(aJ()),form_help_text:bc(aJ()),form_placeholder:bc(aJ()),ge:bc(aO()),le:bc(aO())}),ba(a=>cr(a,{form_label:"formLabel",form_help_text:"formHelpText",form_placeholder:"formPlaceholder"}))),fp=bi(a$({formLabel:bc(aJ()),formHelpText:bc(aJ()),formPlaceholder:bc(aJ()),ge:bc(aO()),le:bc(aO())}),ba(a=>cr(a,{formLabel:"form_label",formHelpText:"form_help_text",formPlaceholder:"form_placeholder"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let fq=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),type:a8("date"),slug:aJ(),name:aJ(),organization_id:aJ(),properties:fo}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),fr=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),type:a8("date"),slug:aJ(),name:aJ(),organizationId:aJ(),properties:fp}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),fs=bi(a$({form_label:bc(aJ()),form_help_text:bc(aJ()),form_placeholder:bc(aJ()),ge:bc(aO()),le:bc(aO())}),ba(a=>cr(a,{form_label:"formLabel",form_help_text:"formHelpText",form_placeholder:"formPlaceholder"}))),ft=bi(a$({formLabel:bc(aJ()),formHelpText:bc(aJ()),formPlaceholder:bc(aJ()),ge:bc(aO()),le:bc(aO())}),ba(a=>cr(a,{formLabel:"form_label",formHelpText:"form_help_text",formPlaceholder:"form_placeholder"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let fu=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),type:a8("number"),slug:aJ(),name:aJ(),organization_id:aJ(),properties:fs}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),fv=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),type:a8("number"),slug:aJ(),name:aJ(),organizationId:aJ(),properties:ft}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),fw=a$({value:aJ(),label:aJ()}),fx=a$({value:aJ(),label:aJ()}),fy=bi(a$({form_label:bc(aJ()),form_help_text:bc(aJ()),form_placeholder:bc(aJ()),options:aY(fw)}),ba(a=>cr(a,{form_label:"formLabel",form_help_text:"formHelpText",form_placeholder:"formPlaceholder"}))),fz=bi(a$({formLabel:bc(aJ()),formHelpText:bc(aJ()),formPlaceholder:bc(aJ()),options:aY(fx)}),ba(a=>cr(a,{formLabel:"form_label",formHelpText:"form_help_text",formPlaceholder:"form_placeholder"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let fA=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),type:a8("select"),slug:aJ(),name:aJ(),organization_id:aJ(),properties:fy}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),fB=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),type:a8("select"),slug:aJ(),name:aJ(),organizationId:aJ(),properties:fz}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),fC=bi(a$({form_label:bc(aJ()),form_help_text:bc(aJ()),form_placeholder:bc(aJ()),textarea:bc(aQ()),min_length:bc(aO()),max_length:bc(aO())}),ba(a=>cr(a,{form_label:"formLabel",form_help_text:"formHelpText",form_placeholder:"formPlaceholder",min_length:"minLength",max_length:"maxLength"}))),fD=bi(a$({formLabel:bc(aJ()),formHelpText:bc(aJ()),formPlaceholder:bc(aJ()),textarea:bc(aQ()),minLength:bc(aO()),maxLength:bc(aO())}),ba(a=>cr(a,{formLabel:"form_label",formHelpText:"form_help_text",formPlaceholder:"form_placeholder",minLength:"min_length",maxLength:"max_length"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let fE=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),type:a8("text"),slug:aJ(),name:aJ(),organization_id:aJ(),properties:fC}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),fF=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),type:a8("text"),slug:aJ(),name:aJ(),organizationId:aJ(),properties:fD}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id"}))),fG=a0([a2(fm,a$({type:a8("checkbox")})),a2(fq,a$({type:a8("date")})),a2(fu,a$({type:a8("number")})),a2(fA,a$({type:a8("select")})),a2(fE,a$({type:a8("text")}))]),fH=a0([a2(fn,a$({type:a8("checkbox")})),a2(fr,a$({type:a8("date")})),a2(fv,a$({type:a8("number")})),a2(fB,a$({type:a8("select")})),a2(fF,a$({type:a8("text")}))]),fI=bi(a$({custom_field_id:aJ(),custom_field:fG,order:aO(),required:aQ()}),ba(a=>cr(a,{custom_field_id:"customFieldId",custom_field:"customField"}))),fJ=bi(a$({customFieldId:aJ(),customField:fH,order:aO(),required:aQ()}),ba(a=>cr(a,{customFieldId:"custom_field_id",customField:"custom_field"}))),fK=a6({Required:"required",Optional:"optional",Disabled:"disabled"}),fL=bi(a$({country:fK,state:fK,city:fK,postal_code:fK,line1:fK,line2:fK}),ba(a=>cr(a,{postal_code:"postalCode"}))),fM=bi(a$({country:fK,state:fK,city:fK,postalCode:fK,line1:fK,line2:fK}),ba(a=>cr(a,{postalCode:"postal_code"}))),fN=a$({duration:eS,type:eT,amount:aO(),currency:aJ(),id:aJ(),name:aJ(),code:be(aJ())}),fO=a$({duration:eS,type:eT,amount:aO(),currency:aJ(),id:aJ(),name:aJ(),code:be(aJ())}),fP=bi(a$({duration:eS,duration_in_months:aO(),type:eT,amount:aO(),currency:aJ(),id:aJ(),name:aJ(),code:be(aJ())}),ba(a=>cr(a,{duration_in_months:"durationInMonths"}))),fQ=bi(a$({duration:eS,durationInMonths:aO(),type:eT,amount:aO(),currency:aJ(),id:aJ(),name:aJ(),code:be(aJ())}),ba(a=>cr(a,{durationInMonths:"duration_in_months"}))),fR=bi(a$({duration:eS,type:eT,basis_points:aO(),id:aJ(),name:aJ(),code:be(aJ())}),ba(a=>cr(a,{basis_points:"basisPoints"}))),fS=bi(a$({duration:eS,type:eT,basisPoints:aO(),id:aJ(),name:aJ(),code:be(aJ())}),ba(a=>cr(a,{basisPoints:"basis_points"}))),fT=bi(a$({duration:eS,duration_in_months:aO(),type:eT,basis_points:aO(),id:aJ(),name:aJ(),code:be(aJ())}),ba(a=>cr(a,{duration_in_months:"durationInMonths",basis_points:"basisPoints"}))),fU=bi(a$({duration:eS,durationInMonths:aO(),type:eT,basisPoints:aO(),id:aJ(),name:aJ(),code:be(aJ())}),ba(a=>cr(a,{durationInMonths:"duration_in_months",basisPoints:"basis_points"}))),fV=a6({Invoice:"invoice",Prorate:"prorate"}),fW=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),name:aJ(),slug:aJ(),avatar_url:be(aJ()),proration_behavior:fV,allow_customer_updates:aQ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",avatar_url:"avatarUrl",proration_behavior:"prorationBehavior",allow_customer_updates:"allowCustomerUpdates"})));a0([et,eO]),a0([eu,eP]);let fX=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_interval:be(eQ),trial_interval_count:be(aO()),name:aJ(),description:be(aJ()),recurring_interval:be(em),recurring_interval_count:be(aO()),is_recurring:aQ(),is_archived:aQ(),organization_id:aJ(),prices:aY(a0([et,eO])),benefits:aY(ej),medias:aY(ev)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",trial_interval:"trialInterval",trial_interval_count:"trialIntervalCount",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",is_recurring:"isRecurring",is_archived:"isArchived",organization_id:"organizationId"}))),fY=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),trialInterval:be(eQ),trialIntervalCount:be(aO()),name:aJ(),description:be(aJ()),recurringInterval:be(em),recurringIntervalCount:be(aO()),isRecurring:aQ(),isArchived:aQ(),organizationId:aJ(),prices:aY(a0([eu,eP])),benefits:aY(ek),medias:aY(ew)}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",recurringInterval:"recurring_interval",recurringIntervalCount:"recurring_interval_count",isRecurring:"is_recurring",isArchived:"is_archived",organizationId:"organization_id"})));a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))]),a0([et,eO]),a0([et,eO]),a0([fP,fN,fT,fR]);let fZ=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),custom_field_data:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))])))),payment_processor:e0,status:a8("confirmed"),client_secret:aJ(),url:aJ(),expires_at:bi(cE({offset:!0}),ba(a=>new Date(a))),success_url:aJ(),return_url:be(aJ()),embed_origin:be(aJ()),amount:aO(),seats:bc(be(aO())),price_per_seat:bc(be(aO())),discount_amount:aO(),net_amount:aO(),tax_amount:be(aO()),total_amount:aO(),currency:aJ(),allow_trial:be(aQ()),active_trial_interval:be(eQ),active_trial_interval_count:be(aO()),trial_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),organization_id:aJ(),product_id:be(aJ()),product_price_id:be(aJ()),discount_id:be(aJ()),allow_discount_codes:aQ(),require_billing_address:aQ(),is_discount_applicable:aQ(),is_free_product_price:aQ(),is_payment_required:aQ(),is_payment_setup_required:aQ(),is_payment_form_required:aQ(),customer_id:be(aJ()),is_business_customer:aQ(),customer_name:be(aJ()),customer_email:be(aJ()),customer_ip_address:be(aJ()),customer_billing_name:be(aJ()),customer_billing_address:be(dm),customer_tax_id:be(aJ()),payment_processor_metadata:a4(aJ(),aJ()),billing_address_fields:fL,products:aY(fX),product:be(fX),product_price:be(a0([et,eO])),prices:be(a4(aJ(),aY(a0([et,eO])))),discount:be(a0([fP,fN,fT,fR])),organization:fW,attached_custom_fields:be(aY(fI)),customer_session_token:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",custom_field_data:"customFieldData",payment_processor:"paymentProcessor",client_secret:"clientSecret",expires_at:"expiresAt",success_url:"successUrl",return_url:"returnUrl",embed_origin:"embedOrigin",price_per_seat:"pricePerSeat",discount_amount:"discountAmount",net_amount:"netAmount",tax_amount:"taxAmount",total_amount:"totalAmount",allow_trial:"allowTrial",active_trial_interval:"activeTrialInterval",active_trial_interval_count:"activeTrialIntervalCount",trial_end:"trialEnd",organization_id:"organizationId",product_id:"productId",product_price_id:"productPriceId",discount_id:"discountId",allow_discount_codes:"allowDiscountCodes",require_billing_address:"requireBillingAddress",is_discount_applicable:"isDiscountApplicable",is_free_product_price:"isFreeProductPrice",is_payment_required:"isPaymentRequired",is_payment_setup_required:"isPaymentSetupRequired",is_payment_form_required:"isPaymentFormRequired",customer_id:"customerId",is_business_customer:"isBusinessCustomer",customer_name:"customerName",customer_email:"customerEmail",customer_ip_address:"customerIpAddress",customer_billing_name:"customerBillingName",customer_billing_address:"customerBillingAddress",customer_tax_id:"customerTaxId",payment_processor_metadata:"paymentProcessorMetadata",billing_address_fields:"billingAddressFields",product_price:"productPrice",attached_custom_fields:"attachedCustomFields",customer_session_token:"customerSessionToken"})));class f$ extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="AlreadyActiveSubscriptionError"}}let f_=bi(a$({error:a8("AlreadyActiveSubscriptionError"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new f$(a,{request:a.request$,response:a.response$,body:a.body$})));class f0 extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="NotOpenCheckout"}}let f1=bi(a$({error:a8("NotOpenCheckout"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new f0(a,{request:a.request$,response:a.response$,body:a.body$})));class f2 extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="PaymentNotReady"}}let f3=bi(a$({error:a8("PaymentNotReady"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new f2(a,{request:a.request$,response:a.response$,body:a.body$})));class f4 extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="TrialAlreadyRedeemed"}}let f5=a0([f_,f1,f3,bi(a$({error:a8("TrialAlreadyRedeemed"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new f4(a,{request:a.request$,response:a.response$,body:a.body$})))]);class f6 extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="ExpiredCheckoutError"}}let f7=bi(a$({error:a8("ExpiredCheckoutError"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new f6(a,{request:a.request$,response:a.response$,body:a.body$})));class f8 extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="PaymentError"}}let f9=bi(a$({error:a8("PaymentError"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new f8(a,{request:a.request$,response:a.response$,body:a.body$}))),ga=a6({Ad:"AD",Ae:"AE",Af:"AF",Ag:"AG",Ai:"AI",Al:"AL",Am:"AM",Ao:"AO",Aq:"AQ",Ar:"AR",As:"AS",At:"AT",Au:"AU",Aw:"AW",Ax:"AX",Az:"AZ",Ba:"BA",Bb:"BB",Bd:"BD",Be:"BE",Bf:"BF",Bg:"BG",Bh:"BH",Bi:"BI",Bj:"BJ",Bl:"BL",Bm:"BM",Bn:"BN",Bo:"BO",Bq:"BQ",Br:"BR",Bs:"BS",Bt:"BT",Bv:"BV",Bw:"BW",By:"BY",Bz:"BZ",Ca:"CA",Cc:"CC",Cd:"CD",Cf:"CF",Cg:"CG",Ch:"CH",Ci:"CI",Ck:"CK",Cl:"CL",Cm:"CM",Cn:"CN",Co:"CO",Cr:"CR",Cv:"CV",Cw:"CW",Cx:"CX",Cy:"CY",Cz:"CZ",De:"DE",Dj:"DJ",Dk:"DK",Dm:"DM",Do:"DO",Dz:"DZ",Ec:"EC",Ee:"EE",Eg:"EG",Eh:"EH",Er:"ER",Es:"ES",Et:"ET",Fi:"FI",Fj:"FJ",Fk:"FK",Fm:"FM",Fo:"FO",Fr:"FR",Ga:"GA",Gb:"GB",Gd:"GD",Ge:"GE",Gf:"GF",Gg:"GG",Gh:"GH",Gi:"GI",Gl:"GL",Gm:"GM",Gn:"GN",Gp:"GP",Gq:"GQ",Gr:"GR",Gs:"GS",Gt:"GT",Gu:"GU",Gw:"GW",Gy:"GY",Hk:"HK",Hm:"HM",Hn:"HN",Hr:"HR",Ht:"HT",Hu:"HU",Id:"ID",Ie:"IE",Il:"IL",Im:"IM",In:"IN",Io:"IO",Iq:"IQ",Is:"IS",It:"IT",Je:"JE",Jm:"JM",Jo:"JO",Jp:"JP",Ke:"KE",Kg:"KG",Kh:"KH",Ki:"KI",Km:"KM",Kn:"KN",Kr:"KR",Kw:"KW",Ky:"KY",Kz:"KZ",La:"LA",Lb:"LB",Lc:"LC",Li:"LI",Lk:"LK",Lr:"LR",Ls:"LS",Lt:"LT",Lu:"LU",Lv:"LV",Ly:"LY",Ma:"MA",Mc:"MC",Md:"MD",Me:"ME",Mf:"MF",Mg:"MG",Mh:"MH",Mk:"MK",Ml:"ML",Mm:"MM",Mn:"MN",Mo:"MO",Mp:"MP",Mq:"MQ",Mr:"MR",Ms:"MS",Mt:"MT",Mu:"MU",Mv:"MV",Mw:"MW",Mx:"MX",My:"MY",Mz:"MZ",Na:"NA",Nc:"NC",Ne:"NE",Nf:"NF",Ng:"NG",Ni:"NI",Nl:"NL",No:"NO",Np:"NP",Nr:"NR",Nu:"NU",Nz:"NZ",Om:"OM",Pa:"PA",Pe:"PE",Pf:"PF",Pg:"PG",Ph:"PH",Pk:"PK",Pl:"PL",Pm:"PM",Pn:"PN",Pr:"PR",Ps:"PS",Pt:"PT",Pw:"PW",Py:"PY",Qa:"QA",Re:"RE",Ro:"RO",Rs:"RS",Rw:"RW",Sa:"SA",Sb:"SB",Sc:"SC",Sd:"SD",Se:"SE",Sg:"SG",Sh:"SH",Si:"SI",Sj:"SJ",Sk:"SK",Sl:"SL",Sm:"SM",Sn:"SN",So:"SO",Sr:"SR",Ss:"SS",St:"ST",Sv:"SV",Sx:"SX",Sz:"SZ",Tc:"TC",Td:"TD",Tf:"TF",Tg:"TG",Th:"TH",Tj:"TJ",Tk:"TK",Tl:"TL",Tm:"TM",Tn:"TN",To:"TO",Tr:"TR",Tt:"TT",Tv:"TV",Tw:"TW",Tz:"TZ",Ua:"UA",Ug:"UG",Um:"UM",Us:"US",Uy:"UY",Uz:"UZ",Va:"VA",Vc:"VC",Ve:"VE",Vg:"VG",Vi:"VI",Vn:"VN",Vu:"VU",Wf:"WF",Ws:"WS",Ye:"YE",Yt:"YT",Za:"ZA",Zm:"ZM",Zw:"ZW"}),gb=bi(a$({line1:bc(be(aJ())),line2:bc(be(aJ())),postalCode:bc(be(aJ())),city:bc(be(aJ())),state:bc(be(aJ())),country:ga}),ba(a=>cr(a,{postalCode:"postal_code"})));a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))]);let gc=bi(a$({customFieldData:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))])))),productId:bc(be(aJ())),productPriceId:bc(be(aJ())),amount:bc(be(aO())),seats:bc(be(aO())),isBusinessCustomer:bc(be(aQ())),customerName:bc(be(aJ())),customerEmail:bc(be(aJ())),customerBillingName:bc(be(aJ())),customerBillingAddress:bc(be(gb)),customerTaxId:bc(be(aJ())),discountCode:bc(be(aJ())),allowTrial:bc(be(a8(!1))),confirmationTokenId:bc(be(aJ()))}),ba(a=>cr(a,{customFieldData:"custom_field_data",productId:"product_id",productPriceId:"product_price_id",isBusinessCustomer:"is_business_customer",customerName:"customer_name",customerEmail:"customer_email",customerBillingName:"customer_billing_name",customerBillingAddress:"customer_billing_address",customerTaxId:"customer_tax_id",discountCode:"discount_code",allowTrial:"allow_trial",confirmationTokenId:"confirmation_token_id"}))),gd=bi(a$({clientSecret:aJ(),checkoutConfirmStripe:gc}),ba(a=>cr(a,{clientSecret:"client_secret",checkoutConfirmStripe:"CheckoutConfirmStripe"})));async function ge(a,b,c){let d=ct(b,a=>Y(gd,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.CheckoutConfirmStripe,{explode:!0}),h={client_secret:bx("client_secret",e.client_secret,{explode:!1,charEncoding:"percent"})},i=f("/v1/checkouts/client/{client_secret}/confirm")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkouts:client_confirm",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"POST",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["400","403","404","410","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,fZ),cj(400,f9),cj(403,f5),cj(404,dX),cj(410,f7),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}let gf=a6({Open:"open",Expired:"expired",Confirmed:"confirmed",Succeeded:"succeeded",Failed:"failed"});a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))]),a0([et,eO]),a0([et,eO]),a0([fP,fN,fT,fR]);let gg=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),custom_field_data:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))])))),payment_processor:e0,status:gf,client_secret:aJ(),url:aJ(),expires_at:bi(cE({offset:!0}),ba(a=>new Date(a))),success_url:aJ(),return_url:be(aJ()),embed_origin:be(aJ()),amount:aO(),seats:bc(be(aO())),price_per_seat:bc(be(aO())),discount_amount:aO(),net_amount:aO(),tax_amount:be(aO()),total_amount:aO(),currency:aJ(),allow_trial:be(aQ()),active_trial_interval:be(eQ),active_trial_interval_count:be(aO()),trial_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),organization_id:aJ(),product_id:be(aJ()),product_price_id:be(aJ()),discount_id:be(aJ()),allow_discount_codes:aQ(),require_billing_address:aQ(),is_discount_applicable:aQ(),is_free_product_price:aQ(),is_payment_required:aQ(),is_payment_setup_required:aQ(),is_payment_form_required:aQ(),customer_id:be(aJ()),is_business_customer:aQ(),customer_name:be(aJ()),customer_email:be(aJ()),customer_ip_address:be(aJ()),customer_billing_name:be(aJ()),customer_billing_address:be(dm),customer_tax_id:be(aJ()),payment_processor_metadata:a4(aJ(),aJ()),billing_address_fields:fL,products:aY(fX),product:be(fX),product_price:be(a0([et,eO])),prices:be(a4(aJ(),aY(a0([et,eO])))),discount:be(a0([fP,fN,fT,fR])),organization:fW,attached_custom_fields:be(aY(fI))}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",custom_field_data:"customFieldData",payment_processor:"paymentProcessor",client_secret:"clientSecret",expires_at:"expiresAt",success_url:"successUrl",return_url:"returnUrl",embed_origin:"embedOrigin",price_per_seat:"pricePerSeat",discount_amount:"discountAmount",net_amount:"netAmount",tax_amount:"taxAmount",total_amount:"totalAmount",allow_trial:"allowTrial",active_trial_interval:"activeTrialInterval",active_trial_interval_count:"activeTrialIntervalCount",trial_end:"trialEnd",organization_id:"organizationId",product_id:"productId",product_price_id:"productPriceId",discount_id:"discountId",allow_discount_codes:"allowDiscountCodes",require_billing_address:"requireBillingAddress",is_discount_applicable:"isDiscountApplicable",is_free_product_price:"isFreeProductPrice",is_payment_required:"isPaymentRequired",is_payment_setup_required:"isPaymentSetupRequired",is_payment_form_required:"isPaymentFormRequired",customer_id:"customerId",is_business_customer:"isBusinessCustomer",customer_name:"customerName",customer_email:"customerEmail",customer_ip_address:"customerIpAddress",customer_billing_name:"customerBillingName",customer_billing_address:"customerBillingAddress",customer_tax_id:"customerTaxId",payment_processor_metadata:"paymentProcessorMetadata",billing_address_fields:"billingAddressFields",product_price:"productPrice",attached_custom_fields:"attachedCustomFields"}))),gh=bi(a$({clientSecret:aJ()}),ba(a=>cr(a,{clientSecret:"client_secret"})));async function gi(a,b,c){let d=ct(b,a=>Y(gh,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={client_secret:bx("client_secret",d.value.client_secret,{explode:!1,charEncoding:"percent"})},g=f("/v1/checkouts/client/{client_secret}")(e),h=new Headers(cs({Accept:"application/json"})),i={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkouts:client_get",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},j=a._createRequest(i,{method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!j.ok)return[j,{status:"invalid"}];let k=j.value,l=await a._do(k,{context:i,errorCodes:["404","410","422","4XX","5XX"],retryConfig:i.retryConfig,retryCodes:i.retryCodes});if(!l.ok)return[l,{status:"request-error",request:k}];let m=l.value,[n]=await cn(ck(200,gg),cj(404,dX),cj(410,f7),cj(422,cB),cm("4XX"),cm("5XX"))(m,k,{extraFields:{HttpMeta:{Response:m,Request:k}}});return!n.ok,[n,{status:"complete",request:k,response:m}]}a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))]);let gj=bi(a$({customFieldData:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))])))),productId:bc(be(aJ())),productPriceId:bc(be(aJ())),amount:bc(be(aO())),seats:bc(be(aO())),isBusinessCustomer:bc(be(aQ())),customerName:bc(be(aJ())),customerEmail:bc(be(aJ())),customerBillingName:bc(be(aJ())),customerBillingAddress:bc(be(gb)),customerTaxId:bc(be(aJ())),discountCode:bc(be(aJ())),allowTrial:bc(be(a8(!1)))}),ba(a=>cr(a,{customFieldData:"custom_field_data",productId:"product_id",productPriceId:"product_price_id",isBusinessCustomer:"is_business_customer",customerName:"customer_name",customerEmail:"customer_email",customerBillingName:"customer_billing_name",customerBillingAddress:"customer_billing_address",customerTaxId:"customer_tax_id",discountCode:"discount_code",allowTrial:"allow_trial"}))),gk=bi(a$({clientSecret:aJ(),checkoutUpdatePublic:gj}),ba(a=>cr(a,{clientSecret:"client_secret",checkoutUpdatePublic:"CheckoutUpdatePublic"})));async function gl(a,b,c){let d=ct(b,a=>Y(gk,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.CheckoutUpdatePublic,{explode:!0}),h={client_secret:bx("client_secret",e.client_secret,{explode:!1,charEncoding:"percent"})},i=f("/v1/checkouts/client/{client_secret}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkouts:client_update",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["403","404","410","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,gg),cj(403,f5),cj(404,dX),cj(410,f7),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))]),a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))]),a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]),a0([et,eO]),a0([eu,eP]),a0([et,eO]),a0([eu,eP]),a0([fP,fN,fT,fR]),a0([fQ,fO,fU,fS]),a0([aJ(),aO(),aQ()]),a0([aJ(),aO(),aQ()]);let gm=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),custom_field_data:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))])))),payment_processor:e0,status:gf,client_secret:aJ(),url:aJ(),expires_at:bi(cE({offset:!0}),ba(a=>new Date(a))),success_url:aJ(),return_url:be(aJ()),embed_origin:be(aJ()),amount:aO(),seats:bc(be(aO())),price_per_seat:bc(be(aO())),discount_amount:aO(),net_amount:aO(),tax_amount:be(aO()),total_amount:aO(),currency:aJ(),allow_trial:be(aQ()),active_trial_interval:be(eQ),active_trial_interval_count:be(aO()),trial_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),organization_id:aJ(),product_id:be(aJ()),product_price_id:be(aJ()),discount_id:be(aJ()),allow_discount_codes:aQ(),require_billing_address:aQ(),is_discount_applicable:aQ(),is_free_product_price:aQ(),is_payment_required:aQ(),is_payment_setup_required:aQ(),is_payment_form_required:aQ(),customer_id:be(aJ()),is_business_customer:aQ(),customer_name:be(aJ()),customer_email:be(aJ()),customer_ip_address:be(aJ()),customer_billing_name:be(aJ()),customer_billing_address:be(dm),customer_tax_id:be(aJ()),payment_processor_metadata:a4(aJ(),aJ()),billing_address_fields:fL,trial_interval:be(eQ),trial_interval_count:be(aO()),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),external_customer_id:be(aJ()),customer_external_id:be(aJ()),products:aY(fX),product:be(fX),product_price:be(a0([et,eO])),prices:be(a4(aJ(),aY(a0([et,eO])))),discount:be(a0([fP,fN,fT,fR])),subscription_id:be(aJ()),attached_custom_fields:be(aY(fI)),customer_metadata:a4(aJ(),a0([aJ(),aO(),aQ()]))}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",custom_field_data:"customFieldData",payment_processor:"paymentProcessor",client_secret:"clientSecret",expires_at:"expiresAt",success_url:"successUrl",return_url:"returnUrl",embed_origin:"embedOrigin",price_per_seat:"pricePerSeat",discount_amount:"discountAmount",net_amount:"netAmount",tax_amount:"taxAmount",total_amount:"totalAmount",allow_trial:"allowTrial",active_trial_interval:"activeTrialInterval",active_trial_interval_count:"activeTrialIntervalCount",trial_end:"trialEnd",organization_id:"organizationId",product_id:"productId",product_price_id:"productPriceId",discount_id:"discountId",allow_discount_codes:"allowDiscountCodes",require_billing_address:"requireBillingAddress",is_discount_applicable:"isDiscountApplicable",is_free_product_price:"isFreeProductPrice",is_payment_required:"isPaymentRequired",is_payment_setup_required:"isPaymentSetupRequired",is_payment_form_required:"isPaymentFormRequired",customer_id:"customerId",is_business_customer:"isBusinessCustomer",customer_name:"customerName",customer_email:"customerEmail",customer_ip_address:"customerIpAddress",customer_billing_name:"customerBillingName",customer_billing_address:"customerBillingAddress",customer_tax_id:"customerTaxId",payment_processor_metadata:"paymentProcessorMetadata",billing_address_fields:"billingAddressFields",trial_interval:"trialInterval",trial_interval_count:"trialIntervalCount",external_customer_id:"externalCustomerId",customer_external_id:"customerExternalId",product_price:"productPrice",subscription_id:"subscriptionId",attached_custom_fields:"attachedCustomFields",customer_metadata:"customerMetadata"})));bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),customFieldData:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))])))),paymentProcessor:e0,status:gf,clientSecret:aJ(),url:aJ(),expiresAt:bi(aW(),ba(a=>a.toISOString())),successUrl:aJ(),returnUrl:be(aJ()),embedOrigin:be(aJ()),amount:aO(),seats:bc(be(aO())),pricePerSeat:bc(be(aO())),discountAmount:aO(),netAmount:aO(),taxAmount:be(aO()),totalAmount:aO(),currency:aJ(),allowTrial:be(aQ()),activeTrialInterval:be(eQ),activeTrialIntervalCount:be(aO()),trialEnd:be(bi(aW(),ba(a=>a.toISOString()))),organizationId:aJ(),productId:be(aJ()),productPriceId:be(aJ()),discountId:be(aJ()),allowDiscountCodes:aQ(),requireBillingAddress:aQ(),isDiscountApplicable:aQ(),isFreeProductPrice:aQ(),isPaymentRequired:aQ(),isPaymentSetupRequired:aQ(),isPaymentFormRequired:aQ(),customerId:be(aJ()),isBusinessCustomer:aQ(),customerName:be(aJ()),customerEmail:be(aJ()),customerIpAddress:be(aJ()),customerBillingName:be(aJ()),customerBillingAddress:be(dn),customerTaxId:be(aJ()),paymentProcessorMetadata:a4(aJ(),aJ()),billingAddressFields:fM,trialInterval:be(eQ),trialIntervalCount:be(aO()),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),externalCustomerId:be(aJ()),customerExternalId:be(aJ()),products:aY(fY),product:be(fY),productPrice:be(a0([eu,eP])),prices:be(a4(aJ(),aY(a0([eu,eP])))),discount:be(a0([fQ,fO,fU,fS])),subscriptionId:be(aJ()),attachedCustomFields:be(aY(fJ)),customerMetadata:a4(aJ(),a0([aJ(),aO(),aQ()]))}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",customFieldData:"custom_field_data",paymentProcessor:"payment_processor",clientSecret:"client_secret",expiresAt:"expires_at",successUrl:"success_url",returnUrl:"return_url",embedOrigin:"embed_origin",pricePerSeat:"price_per_seat",discountAmount:"discount_amount",netAmount:"net_amount",taxAmount:"tax_amount",totalAmount:"total_amount",allowTrial:"allow_trial",activeTrialInterval:"active_trial_interval",activeTrialIntervalCount:"active_trial_interval_count",trialEnd:"trial_end",organizationId:"organization_id",productId:"product_id",productPriceId:"product_price_id",discountId:"discount_id",allowDiscountCodes:"allow_discount_codes",requireBillingAddress:"require_billing_address",isDiscountApplicable:"is_discount_applicable",isFreeProductPrice:"is_free_product_price",isPaymentRequired:"is_payment_required",isPaymentSetupRequired:"is_payment_setup_required",isPaymentFormRequired:"is_payment_form_required",customerId:"customer_id",isBusinessCustomer:"is_business_customer",customerName:"customer_name",customerEmail:"customer_email",customerIpAddress:"customer_ip_address",customerBillingName:"customer_billing_name",customerBillingAddress:"customer_billing_address",customerTaxId:"customer_tax_id",paymentProcessorMetadata:"payment_processor_metadata",billingAddressFields:"billing_address_fields",trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",externalCustomerId:"external_customer_id",customerExternalId:"customer_external_id",productPrice:"product_price",subscriptionId:"subscription_id",attachedCustomFields:"attached_custom_fields",customerMetadata:"customer_metadata"})));let gn=bi(a$({amountType:a8("custom"),priceCurrency:bg(aJ(),"usd"),minimumAmount:bc(be(aO())),maximumAmount:bc(be(aO())),presetAmount:bc(be(aO()))}),ba(a=>cr(a,{amountType:"amount_type",priceCurrency:"price_currency",minimumAmount:"minimum_amount",maximumAmount:"maximum_amount",presetAmount:"preset_amount"}))),go=bi(a$({amountType:a8("fixed"),priceAmount:aO(),priceCurrency:bg(aJ(),"usd")}),ba(a=>cr(a,{amountType:"amount_type",priceAmount:"price_amount",priceCurrency:"price_currency"}))),gp=bi(a$({amountType:a8("free")}),ba(a=>cr(a,{amountType:"amount_type"})));a0([aM(),aJ()]);let gq=bi(a$({amountType:a8("metered_unit"),meterId:aJ(),priceCurrency:bg(aJ(),"usd"),unitAmount:a0([aM(),aJ()]),capAmount:bc(be(aO()))}),ba(a=>cr(a,{amountType:"amount_type",meterId:"meter_id",priceCurrency:"price_currency",unitAmount:"unit_amount",capAmount:"cap_amount"}))),gr=bi(a$({amountType:a8("seat_based"),priceCurrency:bg(aJ(),"usd"),seatTiers:eL}),ba(a=>cr(a,{amountType:"amount_type",priceCurrency:"price_currency",seatTiers:"seat_tiers"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))]),a0([aJ(),aO(),aM(),aQ()]),a0([a2(gq,bi(a$({amountType:a8("metered_unit")}),ba(a=>({amount_type:a.amountType})))),a2(go,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(gr,bi(a$({amountType:a8("seat_based")}),ba(a=>({amount_type:a.amountType})))),a2(gn,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(gp,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))]);let gs=bi(a$({trialInterval:bc(be(eQ)),trialIntervalCount:bc(be(aO())),metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),customFieldData:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))])))),discountId:bc(be(aJ())),allowDiscountCodes:bg(aQ(),!0),requireBillingAddress:bg(aQ(),!1),amount:bc(be(aO())),seats:bc(be(aO())),allowTrial:bg(aQ(),!0),customerId:bc(be(aJ())),isBusinessCustomer:bg(aQ(),!1),externalCustomerId:bc(be(aJ())),customerName:bc(be(aJ())),customerEmail:bc(be(aJ())),customerIpAddress:bc(be(aJ())),customerBillingName:bc(be(aJ())),customerBillingAddress:bc(be(gb)),customerTaxId:bc(be(aJ())),customerMetadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),subscriptionId:bc(be(aJ())),successUrl:bc(be(aJ())),returnUrl:bc(be(aJ())),embedOrigin:bc(be(aJ())),products:aY(aJ()),prices:bc(be(a4(aJ(),aY(a0([a2(gq,bi(a$({amountType:a8("metered_unit")}),ba(a=>({amount_type:a.amountType})))),a2(go,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(gr,bi(a$({amountType:a8("seat_based")}),ba(a=>({amount_type:a.amountType})))),a2(gn,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(gp,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))])))))}),ba(a=>cr(a,{trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",customFieldData:"custom_field_data",discountId:"discount_id",allowDiscountCodes:"allow_discount_codes",requireBillingAddress:"require_billing_address",allowTrial:"allow_trial",customerId:"customer_id",isBusinessCustomer:"is_business_customer",externalCustomerId:"external_customer_id",customerName:"customer_name",customerEmail:"customer_email",customerIpAddress:"customer_ip_address",customerBillingName:"customer_billing_name",customerBillingAddress:"customer_billing_address",customerTaxId:"customer_tax_id",customerMetadata:"customer_metadata",subscriptionId:"subscription_id",successUrl:"success_url",returnUrl:"return_url",embedOrigin:"embed_origin"})));async function gt(a,b,c){let d=ct(b,a=>Y(gs,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/checkouts/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkouts:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,gm),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let gu=a$({id:aJ()});async function gv(a,b,c){let d=ct(b,a=>Y(gu,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/checkouts/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkouts:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,gm),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let gw=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",ExpiresAt:"expires_at",MinusExpiresAt:"-expires_at",Status:"status",MinusStatus:"-status"}),gx=a$({items:aY(gm),pagination:ds});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([gf,aY(gf)]);let gy=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),productId:bc(be(a0([aJ(),aY(aJ())]))),customerId:bc(be(a0([aJ(),aY(aJ())]))),status:bc(be(a0([gf,aY(gf)]))),query:bc(be(aJ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(gw)))}),ba(a=>cr(a,{organizationId:"organization_id",productId:"product_id",customerId:"customer_id"}))),gz=bi(a$({Result:gx}),ba(a=>cr(a,{Result:"result"})));async function gA(a,b,c){let d=ct(b,a=>Y(gy,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/checkouts/")(),h=bF({customer_id:e.customer_id,limit:e.limit,organization_id:e.organization_id,page:e.page,product_id:e.product_id,query:e.query,sorting:e.sorting,status:e.status}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkouts:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,gz,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(gA(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))]),a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let gB=bi(a$({customFieldData:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))])))),productId:bc(be(aJ())),productPriceId:bc(be(aJ())),amount:bc(be(aO())),seats:bc(be(aO())),isBusinessCustomer:bc(be(aQ())),customerName:bc(be(aJ())),customerEmail:bc(be(aJ())),customerBillingName:bc(be(aJ())),customerBillingAddress:bc(be(gb)),customerTaxId:bc(be(aJ())),trialInterval:bc(be(eQ)),trialIntervalCount:bc(be(aO())),metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),discountId:bc(be(aJ())),allowDiscountCodes:bc(be(aQ())),requireBillingAddress:bc(be(aQ())),allowTrial:bc(be(aQ())),customerIpAddress:bc(be(aJ())),customerMetadata:bc(be(a4(aJ(),a0([aJ(),aO(),aM(),aQ()])))),successUrl:bc(be(aJ())),returnUrl:bc(be(aJ())),embedOrigin:bc(be(aJ()))}),ba(a=>cr(a,{customFieldData:"custom_field_data",productId:"product_id",productPriceId:"product_price_id",isBusinessCustomer:"is_business_customer",customerName:"customer_name",customerEmail:"customer_email",customerBillingName:"customer_billing_name",customerBillingAddress:"customer_billing_address",customerTaxId:"customer_tax_id",trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",discountId:"discount_id",allowDiscountCodes:"allow_discount_codes",requireBillingAddress:"require_billing_address",allowTrial:"allow_trial",customerIpAddress:"customer_ip_address",customerMetadata:"customer_metadata",successUrl:"success_url",returnUrl:"return_url",embedOrigin:"embed_origin"}))),gC=bi(a$({id:aJ(),checkoutUpdate:gB}),ba(a=>cr(a,{checkoutUpdate:"CheckoutUpdate"})));async function gD(a,b,c){let d=ct(b,a=>Y(gC,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.CheckoutUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/checkouts/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"checkouts:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["403","404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,gm),cj(403,f5),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class gE extends b8{async list(a,b){return dB(new dy(gA(this,a,b)))}async create(a,b){return s(new dy(gt(this,a,b)))}async get(a,b){return s(new dy(gv(this,a,b)))}async update(a,b){return s(new dy(gD(this,a,b)))}async clientGet(a,b){return s(new dy(gi(this,a,b)))}async clientUpdate(a,b){return s(new dy(gl(this,a,b)))}async clientConfirm(a,b){return s(new dy(ge(this,a,b)))}}let gF=a$({func:bg(a8("count"),"count")}),gG=a$({func:bg(a8("count"),"count")}),gH=a6({Eq:"eq",Ne:"ne",Gt:"gt",Gte:"gte",Lt:"lt",Lte:"lte",Like:"like",NotLike:"not_like"});a0([aJ(),aO(),aQ()]),a0([aJ(),aO(),aQ()]);let gI=a$({property:aJ(),operator:gH,value:a0([aJ(),aO(),aQ()])}),gJ=a$({property:aJ(),operator:gH,value:a0([aJ(),aO(),aQ()])}),gK=a6({And:"and",Or:"or"}),gL=a$({conjunction:gK,clauses:aY(a0([gI,bk(()=>gL)]))}),gM=a$({conjunction:gK,clauses:aY(a0([gJ,bk(()=>gM)]))});a0([gI,bk(()=>gL)]),a0([gJ,bk(()=>gM)]);let gN=a6({Sum:"sum",Max:"max",Min:"min",Avg:"avg"}),gO=a$({func:gN,property:aJ()}),gP=a$({func:gN,property:aJ()}),gQ=a$({func:bg(a8("unique"),"unique"),property:aJ()}),gR=a$({func:bg(a8("unique"),"unique"),property:aJ()});a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]),a0([a2(gO,a$({func:a8("avg")})),a2(gO,a$({func:a8("max")})),a2(gO,a$({func:a8("min")})),a2(gO,a$({func:a8("sum")})),a2(gQ,a$({func:a8("unique")})),a2(gF,a$({func:a8("count")}))]),a0([a2(gP,a$({func:a8("avg")})),a2(gP,a$({func:a8("max")})),a2(gP,a$({func:a8("min")})),a2(gP,a$({func:a8("sum")})),a2(gR,a$({func:a8("unique")})),a2(gG,a$({func:a8("count")}))]);let gS=bi(a$({metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),name:aJ(),filter:gL,aggregation:a0([a2(gO,a$({func:a8("avg")})),a2(gO,a$({func:a8("max")})),a2(gO,a$({func:a8("min")})),a2(gO,a$({func:a8("sum")})),a2(gQ,a$({func:a8("unique")})),a2(gF,a$({func:a8("count")}))]),organization_id:aJ(),archived_at:bc(be(bi(cE({offset:!0}),ba(a=>new Date(a)))))}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId",archived_at:"archivedAt"}))),gT=bi(a$({metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),name:aJ(),filter:gM,aggregation:a0([a2(gP,a$({func:a8("avg")})),a2(gP,a$({func:a8("max")})),a2(gP,a$({func:a8("min")})),a2(gP,a$({func:a8("sum")})),a2(gR,a$({func:a8("unique")})),a2(gG,a$({func:a8("count")}))]),organizationId:aJ(),archivedAt:bc(be(bi(aW(),ba(a=>a.toISOString()))))}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",organizationId:"organization_id",archivedAt:"archived_at"}))),gU=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),meter_id:aJ(),consumed_units:aM(),credited_units:aO(),balance:aM(),customer:dq,meter:gS}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",customer_id:"customerId",meter_id:"meterId",consumed_units:"consumedUnits",credited_units:"creditedUnits"}))),gV=a$({id:aJ()});async function gW(a,b,c){let d=ct(b,a=>Y(gV,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/customer-meters/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer_meters:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,gU),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let gX=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",ModifiedAt:"modified_at",MinusModifiedAt:"-modified_at",CustomerId:"customer_id",MinusCustomerId:"-customer_id",CustomerName:"customer_name",MinusCustomerName:"-customer_name",MeterId:"meter_id",MinusMeterId:"-meter_id",MeterName:"meter_name",MinusMeterName:"-meter_name",ConsumedUnits:"consumed_units",MinusConsumedUnits:"-consumed_units",CreditedUnits:"credited_units",MinusCreditedUnits:"-credited_units",Balance:"balance",MinusBalance:"-balance"}),gY=a$({items:aY(gU),pagination:ds});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let gZ=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),customerId:bc(be(a0([aJ(),aY(aJ())]))),externalCustomerId:bc(be(a0([aJ(),aY(aJ())]))),meterId:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(gX)))}),ba(a=>cr(a,{organizationId:"organization_id",customerId:"customer_id",externalCustomerId:"external_customer_id",meterId:"meter_id"}))),g$=bi(a$({Result:gY}),ba(a=>cr(a,{Result:"result"})));async function g_(a,b,c){let d=ct(b,a=>Y(gZ,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/customer-meters/")(),h=bF({customer_id:e.customer_id,external_customer_id:e.external_customer_id,limit:e.limit,meter_id:e.meter_id,organization_id:e.organization_id,page:e.page,sorting:e.sorting}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer_meters:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,g$,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(g_(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}class g0 extends b8{async list(a,b){return dB(new dy(g_(this,a,b)))}async get(a,b){return s(new dy(gW(this,a,b)))}}let g1=bi(a$({expires_at:bi(cE({offset:!0}),ba(a=>new Date(a))),return_url:be(aJ())}),ba(a=>cr(a,{expires_at:"expiresAt",return_url:"returnUrl"})));async function g2(a,b,c){let d=f("/v1/customer-portal/customer-session/introspect")(),e=new Headers(cs({Accept:"application/json"})),g=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),h={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer_portal:customer-session:introspect",oAuth2Scopes:null,resolvedSecurity:g,securitySource:b,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},i=a._createRequest(h,{security:g,method:"GET",baseURL:c?.serverURL,path:d,headers:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!i.ok)return[i,{status:"invalid"}];let j=i.value,k=await a._do(j,{context:h,errorCodes:["4XX","5XX"],retryConfig:h.retryConfig,retryCodes:h.retryCodes});if(!k.ok)return[k,{status:"request-error",request:j}];let l=k.value,[m]=await cn(ck(200,g1),cm("4XX"),cm("5XX"))(l,j);return!m.ok,[m,{status:"complete",request:j,response:l}]}class g3 extends b8{async introspect(a,b){return s(new dy(g2(this,a,b)))}}let g4=a6({Downloadable:"downloadable",ProductMedia:"product_media",OrganizationAvatar:"organization_avatar"}),g5=bi(a$({url:aJ(),headers:bc(a4(aJ(),aJ())),expires_at:bi(cE({offset:!0}),ba(a=>new Date(a)))}),ba(a=>cr(a,{expires_at:"expiresAt"}))),g6=bi(a$({id:aJ(),organization_id:aJ(),name:aJ(),path:aJ(),mime_type:aJ(),size:aO(),storage_version:be(aJ()),checksum_etag:be(aJ()),checksum_sha256_base64:be(aJ()),checksum_sha256_hex:be(aJ()),last_modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),download:g5,version:be(aJ()),is_uploaded:aQ(),service:g4,size_readable:aJ()}),ba(a=>cr(a,{organization_id:"organizationId",mime_type:"mimeType",storage_version:"storageVersion",checksum_etag:"checksumEtag",checksum_sha256_base64:"checksumSha256Base64",checksum_sha256_hex:"checksumSha256Hex",last_modified_at:"lastModifiedAt",is_uploaded:"isUploaded",size_readable:"sizeReadable"}))),g7=bi(a$({id:aJ(),benefit_id:aJ(),file:g6}),ba(a=>cr(a,{benefit_id:"benefitId"}))),g8=a$({items:aY(g7),pagination:ds});bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"}))),a0([aJ(),aY(aJ())]);let g9=bi(a$({benefitId:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10)}),ba(a=>cr(a,{benefitId:"benefit_id"}))),ha=bi(a$({Result:g8}),ba(a=>cr(a,{Result:"result"})));async function hb(a,b,c,d){let e=ct(c,a=>Y(g9,a),"Input validation failed");if(!e.ok)return[dA(e),{status:"invalid"}];let g=e.value,h=f("/v1/customer-portal/downloadables/")(),i=bF({benefit_id:g.benefit_id,limit:g.limit,page:g.page}),j=new Headers(cs({Accept:"application/json"})),k=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),l={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:downloadables:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:d?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,ha,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(e=>{let f=c?.page??1,g=f+1,h=bH(e,"pagination.max_page");if("number"!=typeof h||h<=f||!e)return{next:()=>null};let i=bH(e,"items");if(!Array.isArray(i)||!i.length)return{next:()=>null};let j=c?.limit??10;return i.length<j?{next:()=>null}:{next:()=>new dy(hb(a,b,{...c,page:g},d)),"~next":{page:g}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}class hc extends b8{async list(a,b,c){return dB(new dy(hb(this,a,b,c)))}}let hd=a$({note:be(aJ())}),he=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),name:aJ(),slug:aJ(),avatar_url:be(aJ()),proration_behavior:fV,allow_customer_updates:aQ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",avatar_url:"avatarUrl",proration_behavior:"prorationBehavior",allow_customer_updates:"allowCustomerUpdates"})));a0([aJ(),aO(),aM(),aQ()]);let hf=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("custom"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),organization:he,properties:hd}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),hg=bi(a$({account_id:aJ(),account_username:be(aJ())}),ba(a=>cr(a,{account_id:"accountId",account_username:"accountUsername"})));a0([aJ(),dp]);let hh=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),email:aJ(),email_verified:aQ(),name:be(aJ()),billing_name:be(aJ()),billing_address:be(dm),tax_id:be(aY(be(a0([aJ(),dp])))),oauth_accounts:a4(aJ(),hg),default_payment_method_id:bc(be(aJ()))}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",email_verified:"emailVerified",billing_name:"billingName",billing_address:"billingAddress",tax_id:"taxId",oauth_accounts:"oauthAccounts",default_payment_method_id:"defaultPaymentMethodId"}))),hi=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),granted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),revoked_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),benefit_id:aJ(),subscription_id:be(aJ()),order_id:be(aJ()),is_granted:aQ(),is_revoked:aQ(),customer:hh,benefit:hf,properties:c9}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",granted_at:"grantedAt",revoked_at:"revokedAt",customer_id:"customerId",benefit_id:"benefitId",subscription_id:"subscriptionId",order_id:"orderId",is_granted:"isGranted",is_revoked:"isRevoked"}))),hj=bi(a$({guild_id:aJ()}),ba(a=>cr(a,{guild_id:"guildId"})));a0([aJ(),aO(),aM(),aQ()]);let hk=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("discord"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),organization:he,properties:hj}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),hl=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),granted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),revoked_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),benefit_id:aJ(),subscription_id:be(aJ()),order_id:be(aJ()),is_granted:aQ(),is_revoked:aQ(),customer:hh,benefit:hk,properties:db}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",granted_at:"grantedAt",revoked_at:"revokedAt",customer_id:"customerId",benefit_id:"benefitId",subscription_id:"subscriptionId",order_id:"orderId",is_granted:"isGranted",is_revoked:"isRevoked"}))),hm=bi(a$({active_files:aY(aJ())}),ba(a=>cr(a,{active_files:"activeFiles"})));a0([aJ(),aO(),aM(),aQ()]);let hn=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("downloadables"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),organization:he,properties:hm}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),ho=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),granted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),revoked_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),benefit_id:aJ(),subscription_id:be(aJ()),order_id:be(aJ()),is_granted:aQ(),is_revoked:aQ(),customer:hh,benefit:hn,properties:dd}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",granted_at:"grantedAt",revoked_at:"revokedAt",customer_id:"customerId",benefit_id:"benefitId",subscription_id:"subscriptionId",order_id:"orderId",is_granted:"isGranted",is_revoked:"isRevoked"}))),hp=bi(a$({repository_owner:aJ(),repository_name:aJ()}),ba(a=>cr(a,{repository_owner:"repositoryOwner",repository_name:"repositoryName"})));a0([aJ(),aO(),aM(),aQ()]);let hq=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("github_repository"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),organization:he,properties:hp}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),hr=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),granted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),revoked_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),benefit_id:aJ(),subscription_id:be(aJ()),order_id:be(aJ()),is_granted:aQ(),is_revoked:aQ(),customer:hh,benefit:hq,properties:dh}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",granted_at:"grantedAt",revoked_at:"revokedAt",customer_id:"customerId",benefit_id:"benefitId",subscription_id:"subscriptionId",order_id:"orderId",is_granted:"isGranted",is_revoked:"isRevoked"}))),hs=bi(a$({prefix:be(aJ()),expires:be(cZ),activations:be(cW),limit_usage:be(aO())}),ba(a=>cr(a,{limit_usage:"limitUsage"})));a0([aJ(),aO(),aM(),aQ()]);let ht=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("license_keys"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),organization:he,properties:hs}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),hu=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),granted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),revoked_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),benefit_id:aJ(),subscription_id:be(aJ()),order_id:be(aJ()),is_granted:aQ(),is_revoked:aQ(),customer:hh,benefit:ht,properties:dj}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",granted_at:"grantedAt",revoked_at:"revokedAt",customer_id:"customerId",benefit_id:"benefitId",subscription_id:"subscriptionId",order_id:"orderId",is_granted:"isGranted",is_revoked:"isRevoked"}))),hv=bi(a$({last_credited_meter_id:bc(aJ()),last_credited_units:bc(aO()),last_credited_at:bc(aJ())}),ba(a=>cr(a,{last_credited_meter_id:"lastCreditedMeterId",last_credited_units:"lastCreditedUnits",last_credited_at:"lastCreditedAt"})));bi(a$({lastCreditedMeterId:bc(aJ()),lastCreditedUnits:bc(aO()),lastCreditedAt:bc(aJ())}),ba(a=>cr(a,{lastCreditedMeterId:"last_credited_meter_id",lastCreditedUnits:"last_credited_units",lastCreditedAt:"last_credited_at"})));let hw=bi(a$({units:aO(),rollover:aQ(),meter_id:aJ()}),ba(a=>cr(a,{meter_id:"meterId"})));a0([aJ(),aO(),aM(),aQ()]);let hx=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),type:a8("meter_credit"),description:aJ(),selectable:aQ(),deletable:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),organization:he,properties:hw}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),hy=a0([hl,hr,ho,hu,hi,bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),granted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),revoked_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),benefit_id:aJ(),subscription_id:be(aJ()),order_id:be(aJ()),is_granted:aQ(),is_revoked:aQ(),customer:hh,benefit:hx,properties:hv}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",granted_at:"grantedAt",revoked_at:"revokedAt",customer_id:"customerId",benefit_id:"benefitId",subscription_id:"subscriptionId",order_id:"orderId",is_granted:"isGranted",is_revoked:"isRevoked"})))]);bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let hz=a$({id:aJ()});async function hA(a,b,c,d){let e=ct(c,a=>Y(hz,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/benefit-grants/{id}")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:benefit-grants:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,hy),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let hB=a6({GrantedAt:"granted_at",MinusGrantedAt:"-granted_at",Type:"type",MinusType:"-type",Organization:"organization",MinusOrganization:"-organization"}),hC=a$({items:aY(hy),pagination:ds});bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"}))),a0([d4,aY(d4)]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let hD=bi(a$({typeFilter:bc(be(a0([d4,aY(d4)]))),benefitId:bc(be(a0([aJ(),aY(aJ())]))),checkoutId:bc(be(a0([aJ(),aY(aJ())]))),orderId:bc(be(a0([aJ(),aY(aJ())]))),subscriptionId:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(hB)))}),ba(a=>cr(a,{typeFilter:"type_filter",benefitId:"benefit_id",checkoutId:"checkout_id",orderId:"order_id",subscriptionId:"subscription_id"}))),hE=bi(a$({Result:hC}),ba(a=>cr(a,{Result:"result"})));async function hF(a,b,c,d){let e=ct(c,a=>Y(hD,a),"Input validation failed");if(!e.ok)return[dA(e),{status:"invalid"}];let g=e.value,h=f("/v1/customer-portal/benefit-grants/")(),i=bF({benefit_id:g.benefit_id,checkout_id:g.checkout_id,limit:g.limit,order_id:g.order_id,page:g.page,sorting:g.sorting,subscription_id:g.subscription_id,type:g.type_filter}),j=new Headers(cs({Accept:"application/json"})),k=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),l={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:benefit-grants:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:d?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,hE,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(e=>{let f=c?.page??1,g=f+1,h=bH(e,"pagination.max_page");if("number"!=typeof h||h<=f||!e)return{next:()=>null};let i=bH(e,"items");if(!Array.isArray(i)||!i.length)return{next:()=>null};let j=c?.limit??10;return i.length<j?{next:()=>null}:{next:()=>new dy(hF(a,b,{...c,page:g},d)),"~next":{page:g}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let hG=bi(a$({benefitType:a8("custom")}),ba(a=>cr(a,{benefitType:"benefit_type"}))),hH=bi(a$({accountId:be(aJ())}),ba(a=>cr(a,{accountId:"account_id"}))),hI=bi(a$({benefitType:a8("discord"),properties:hH}),ba(a=>cr(a,{benefitType:"benefit_type"}))),hJ=bi(a$({benefitType:a8("downloadables")}),ba(a=>cr(a,{benefitType:"benefit_type"}))),hK=bi(a$({accountId:be(aJ())}),ba(a=>cr(a,{accountId:"account_id"}))),hL=bi(a$({benefitType:a8("github_repository"),properties:hK}),ba(a=>cr(a,{benefitType:"benefit_type"}))),hM=bi(a$({benefitType:a8("license_keys")}),ba(a=>cr(a,{benefitType:"benefit_type"}))),hN=bi(a$({benefitType:a8("meter_credit")}),ba(a=>cr(a,{benefitType:"benefit_type"}))),hO=a0([a2(hI,bi(a$({benefitType:a8("discord")}),ba(a=>({benefit_type:a.benefitType})))),a2(hL,bi(a$({benefitType:a8("github_repository")}),ba(a=>({benefit_type:a.benefitType})))),a2(hG,bi(a$({benefitType:a8("custom")}),ba(a=>({benefit_type:a.benefitType})))),a2(hJ,bi(a$({benefitType:a8("downloadables")}),ba(a=>({benefit_type:a.benefitType})))),a2(hM,bi(a$({benefitType:a8("license_keys")}),ba(a=>({benefit_type:a.benefitType})))),a2(hN,bi(a$({benefitType:a8("meter_credit")}),ba(a=>({benefit_type:a.benefitType}))))]);bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let hP=bi(a$({id:aJ(),customerBenefitGrantUpdate:hO}),ba(a=>cr(a,{customerBenefitGrantUpdate:"CustomerBenefitGrantUpdate"})));async function hQ(a,b,c,d){let e=ct(c,a=>Y(hP,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g=e.value,h=bw("body",g.CustomerBenefitGrantUpdate,{explode:!0}),i={id:bx("id",g.id,{explode:!1,charEncoding:"percent"})},j=f("/v1/customer-portal/benefit-grants/{id}")(i),k=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),l=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),m={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:benefit-grants:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:d?.serverURL,path:j,headers:k,body:h,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["403","404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,hy),cj(403,dV),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class hR extends b8{async list(a,b,c){return dB(new dy(hF(this,a,b,c)))}async get(a,b,c){return s(new dy(hA(this,a,b,c)))}async update(a,b,c){return s(new dy(hQ(this,a,b,c)))}}let hS=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),name:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt"}))),hT=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),meter_id:aJ(),consumed_units:aM(),credited_units:aO(),balance:aM(),meter:hS}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",customer_id:"customerId",meter_id:"meterId",consumed_units:"consumedUnits",credited_units:"creditedUnits"})));bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let hU=a$({id:aJ()});async function hV(a,b,c,d){let e=ct(c,a=>Y(hU,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/meters/{id}")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:customer_meters:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,hT),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let hW=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",ModifiedAt:"modified_at",MinusModifiedAt:"-modified_at",MeterId:"meter_id",MinusMeterId:"-meter_id",MeterName:"meter_name",MinusMeterName:"-meter_name",ConsumedUnits:"consumed_units",MinusConsumedUnits:"-consumed_units",CreditedUnits:"credited_units",MinusCreditedUnits:"-credited_units",Balance:"balance",MinusBalance:"-balance"}),hX=a$({items:aY(hT),pagination:ds});bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"}))),a0([aJ(),aY(aJ())]);let hY=bi(a$({meterId:bc(be(a0([aJ(),aY(aJ())]))),query:bc(be(aJ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(hW)))}),ba(a=>cr(a,{meterId:"meter_id"}))),hZ=bi(a$({Result:hX}),ba(a=>cr(a,{Result:"result"})));async function h$(a,b,c,d){let e=ct(c,a=>Y(hY,a),"Input validation failed");if(!e.ok)return[dA(e),{status:"invalid"}];let g=e.value,h=f("/v1/customer-portal/meters/")(),i=bF({limit:g.limit,meter_id:g.meter_id,page:g.page,query:g.query,sorting:g.sorting}),j=new Headers(cs({Accept:"application/json"})),k=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),l={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:customer_meters:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:d?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,hZ,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(e=>{let f=c?.page??1,g=f+1,h=bH(e,"pagination.max_page");if("number"!=typeof h||h<=f||!e)return{next:()=>null};let i=bH(e,"items");if(!Array.isArray(i)||!i.length)return{next:()=>null};let j=c?.limit??10;return i.length<j?{next:()=>null}:{next:()=>new dy(h$(a,b,{...c,page:g},d)),"~next":{page:g}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}class h_ extends b8{async list(a,b,c){return dB(new dy(h$(this,a,b,c)))}async get(a,b,c){return s(new dy(hV(this,a,b,c)))}}let h0=bi(a$({confirmationTokenId:aJ(),setDefault:aQ(),returnUrl:aJ()}),ba(a=>cr(a,{confirmationTokenId:"confirmation_token_id",setDefault:"set_default",returnUrl:"return_url"}))),h1=bi(a$({status:a8("requires_action"),client_secret:aJ()}),ba(a=>cr(a,{client_secret:"clientSecret"}))),h2=bi(a$({brand:aJ(),last4:aJ(),exp_month:aO(),exp_year:aO(),wallet:bc(be(aJ()))}),ba(a=>cr(a,{exp_month:"expMonth",exp_year:"expYear"}))),h3=a0([bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),processor:e0,customer_id:aJ(),type:a8("card"),method_metadata:h2}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",customer_id:"customerId",method_metadata:"methodMetadata"}))),bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),processor:e0,customer_id:aJ(),type:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",customer_id:"customerId"})))]),h4=bi(a$({status:a8("succeeded"),payment_method:h3}),ba(a=>cr(a,{payment_method:"paymentMethod"}))),h5=a0([a2(h1,a$({status:a8("requires_action")})),a2(h4,a$({status:a8("succeeded")}))]);async function h6(a,b,c,d){let e=ct(c,a=>Y(h0,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g=bw("body",e.value,{explode:!0}),h=f("/v1/customer-portal/customers/me/payment-methods")(),i=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:customers:add_payment_method",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:d?.serverURL,path:h,headers:i,body:g,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,h5),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let h7=bi(a$({setupIntentId:aJ(),setDefault:aQ()}),ba(a=>cr(a,{setupIntentId:"setup_intent_id",setDefault:"set_default"})));class h8 extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="CustomerNotReady"}}let h9=bi(a$({error:a8("CustomerNotReady"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new h8(a,{request:a.request$,response:a.response$,body:a.body$})));async function ia(a,b,c,d){let e=ct(c,a=>Y(h7,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g=bw("body",e.value,{explode:!0}),h=f("/v1/customer-portal/customers/me/payment-methods/confirm")(),i=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:customers:confirm_payment_method",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:d?.serverURL,path:h,headers:i,body:g,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["400","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,h5),cj(400,h9),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}class ib extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="PaymentMethodInUseByActiveSubscription"}}let ic=bi(a$({error:a8("PaymentMethodInUseByActiveSubscription"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new ib(a,{request:a.request$,response:a.response$,body:a.body$})));bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let id=a$({id:aJ()});async function ie(a,b,c,d){let e=ct(c,a=>Y(id,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/customers/me/payment-methods/{id}")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:customers:delete_payment_method",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["400","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(cl(204,aU()),cj(400,ic),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}async function ig(a,b,c){let d=f("/v1/customer-portal/customers/me")(),e=new Headers(cs({Accept:"application/json"})),g=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),h={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer_portal:customers:get",oAuth2Scopes:null,resolvedSecurity:g,securitySource:b,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},i=a._createRequest(h,{security:g,method:"GET",baseURL:c?.serverURL,path:d,headers:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!i.ok)return[i,{status:"invalid"}];let j=i.value,k=await a._do(j,{context:h,errorCodes:["4XX","5XX"],retryConfig:h.retryConfig,retryCodes:h.retryCodes});if(!k.ok)return[k,{status:"request-error",request:j}];let l=k.value,[m]=await cn(ck(200,hh),cm("4XX"),cm("5XX"))(l,j);return!m.ok,[m,{status:"complete",request:j,response:l}]}let ih=a$({items:aY(h3),pagination:ds});bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let ii=a$({page:bg(aO(),1),limit:bg(aO(),10)}),ij=bi(a$({Result:ih}),ba(a=>cr(a,{Result:"result"})));async function ik(a,b,c,d){let e=ct(c,a=>Y(ii,a),"Input validation failed");if(!e.ok)return[dA(e),{status:"invalid"}];let g=e.value,h=f("/v1/customer-portal/customers/me/payment-methods")(),i=bF({limit:g.limit,page:g.page}),j=new Headers(cs({Accept:"application/json"})),k=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),l={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:customers:list_payment_methods",oAuth2Scopes:null,resolvedSecurity:k,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:d?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,ij,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(e=>{let f=c?.page??1,g=f+1,h=bH(e,"pagination.max_page");if("number"!=typeof h||h<=f||!e)return{next:()=>null};let i=bH(e,"items");if(!Array.isArray(i)||!i.length)return{next:()=>null};let j=c?.limit??10;return i.length<j?{next:()=>null}:{next:()=>new dy(ik(a,b,{...c,page:g},d)),"~next":{page:g}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let il=bi(a$({billingName:bc(be(aJ())),billingAddress:bc(be(gb)),taxId:bc(be(aJ()))}),ba(a=>cr(a,{billingName:"billing_name",billingAddress:"billing_address",taxId:"tax_id"})));async function im(a,b,c,d){let e=ct(c,a=>Y(il,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g=bw("body",e.value,{explode:!0}),h=f("/v1/customer-portal/customers/me")(),i=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:customers:update",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"PATCH",baseURL:d?.serverURL,path:h,headers:i,body:g,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,hh),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}class io extends b8{async get(a,b){return s(new dy(ig(this,a,b)))}async update(a,b,c){return s(new dy(im(this,a,b,c)))}async listPaymentMethods(a,b,c){return dB(new dy(ik(this,a,b,c)))}async addPaymentMethod(a,b,c){return s(new dy(h6(this,a,b,c)))}async confirmPaymentMethod(a,b,c){return s(new dy(ia(this,a,b,c)))}async deletePaymentMethod(a,b,c){return s(new dy(ie(this,a,b,c)))}}a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let ip=bi(a$({key:aJ(),organizationId:aJ(),label:aJ(),conditions:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),meta:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()])))}),ba(a=>cr(a,{organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),dp]);let iq=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),external_id:be(aJ()),email:aJ(),email_verified:aQ(),name:be(aJ()),billing_address:be(dm),tax_id:be(aY(be(a0([aJ(),dp])))),organization_id:aJ(),deleted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),avatar_url:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",external_id:"externalId",email_verified:"emailVerified",billing_address:"billingAddress",tax_id:"taxId",organization_id:"organizationId",deleted_at:"deletedAt",avatar_url:"avatarUrl"}))),ir=a6({Granted:"granted",Revoked:"revoked",Disabled:"disabled"}),is=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),organization_id:aJ(),customer_id:aJ(),customer:iq,benefit_id:aJ(),key:aJ(),display_key:aJ(),status:ir,limit_activations:be(aO()),usage:aO(),limit_usage:be(aO()),validations:aO(),last_validated_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),expires_at:be(bi(cE({offset:!0}),ba(a=>new Date(a))))}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId",customer_id:"customerId",benefit_id:"benefitId",display_key:"displayKey",limit_activations:"limitActivations",limit_usage:"limitUsage",last_validated_at:"lastValidatedAt",expires_at:"expiresAt"})));a0([aJ(),aO(),aM(),aQ()]);let it=bi(a$({id:aJ(),license_key_id:aJ(),label:aJ(),meta:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),license_key:is}),ba(a=>cr(a,{license_key_id:"licenseKeyId",created_at:"createdAt",modified_at:"modifiedAt",license_key:"licenseKey"})));async function iu(a,b,c){let d=ct(b,a=>Y(ip,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/customer-portal/license-keys/activate")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer_portal:license_keys:activate",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},j=a._createRequest(i,{method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!j.ok)return[j,{status:"invalid"}];let k=j.value,l=await a._do(k,{context:i,errorCodes:["403","404","422","4XX","5XX"],retryConfig:i.retryConfig,retryCodes:i.retryCodes});if(!l.ok)return[l,{status:"request-error",request:k}];let m=l.value,[n]=await cn(ck(200,it),cj(403,dV),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(m,k,{extraFields:{HttpMeta:{Response:m,Request:k}}});return!n.ok,[n,{status:"complete",request:k,response:m}]}let iv=bi(a$({key:aJ(),organizationId:aJ(),activationId:aJ()}),ba(a=>cr(a,{organizationId:"organization_id",activationId:"activation_id"})));async function iw(a,b,c){let d=ct(b,a=>Y(iv,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/customer-portal/license-keys/deactivate")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer_portal:license_keys:deactivate",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},j=a._createRequest(i,{method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!j.ok)return[j,{status:"invalid"}];let k=j.value,l=await a._do(k,{context:i,errorCodes:["404","422","4XX","5XX"],retryConfig:i.retryConfig,retryCodes:i.retryCodes});if(!l.ok)return[l,{status:"request-error",request:k}];let m=l.value,[n]=await cn(cl(204,aU()),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(m,k,{extraFields:{HttpMeta:{Response:m,Request:k}}});return!n.ok,[n,{status:"complete",request:k,response:m}]}a0([aJ(),aO(),aM(),aQ()]);let ix=bi(a$({id:aJ(),license_key_id:aJ(),label:aJ(),meta:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a))))}),ba(a=>cr(a,{license_key_id:"licenseKeyId",created_at:"createdAt",modified_at:"modifiedAt"}))),iy=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),organization_id:aJ(),customer_id:aJ(),customer:iq,benefit_id:aJ(),key:aJ(),display_key:aJ(),status:ir,limit_activations:be(aO()),usage:aO(),limit_usage:be(aO()),validations:aO(),last_validated_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),expires_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),activations:aY(ix)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId",customer_id:"customerId",benefit_id:"benefitId",display_key:"displayKey",limit_activations:"limitActivations",limit_usage:"limitUsage",last_validated_at:"lastValidatedAt",expires_at:"expiresAt"})));bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let iz=a$({id:aJ()});async function iA(a,b,c,d){let e=ct(c,a=>Y(iz,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/license-keys/{id}")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:license_keys:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,iy),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}class iB extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="Unauthorized"}}let iC=bi(a$({error:a8("Unauthorized"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new iB(a,{request:a.request$,response:a.response$,body:a.body$}))),iD=a$({items:aY(is),pagination:ds});bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let iE=bi(a$({benefitId:bc(be(aJ())),page:bg(aO(),1),limit:bg(aO(),10)}),ba(a=>cr(a,{benefitId:"benefit_id"}))),iF=bi(a$({Result:iD}),ba(a=>cr(a,{Result:"result"})));async function iG(a,b,c,d){let e=ct(c,a=>Y(iE,a),"Input validation failed");if(!e.ok)return[dA(e),{status:"invalid"}];let g=e.value,h=f("/v1/customer-portal/license-keys/")(),i=bF({benefit_id:g.benefit_id,limit:g.limit,page:g.page}),j=new Headers(cs({Accept:"application/json"})),k=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),l={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:license_keys:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:d?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["401","404","422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,iF,{key:"Result"}),cj(401,iC),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(e=>{let f=c?.page??1,g=f+1,h=bH(e,"pagination.max_page");if("number"!=typeof h||h<=f||!e)return{next:()=>null};let i=bH(e,"items");if(!Array.isArray(i)||!i.length)return{next:()=>null};let j=c?.limit??10;return i.length<j?{next:()=>null}:{next:()=>new dy(iG(a,b,{...c,page:g},d)),"~next":{page:g}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}a0([aJ(),aO(),aM(),aQ()]);let iH=bi(a$({key:aJ(),organizationId:aJ(),activationId:bc(be(aJ())),benefitId:bc(be(aJ())),customerId:bc(be(aJ())),incrementUsage:bc(be(aO())),conditions:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()])))}),ba(a=>cr(a,{organizationId:"organization_id",activationId:"activation_id",benefitId:"benefit_id",customerId:"customer_id",incrementUsage:"increment_usage"}))),iI=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),organization_id:aJ(),customer_id:aJ(),customer:iq,benefit_id:aJ(),key:aJ(),display_key:aJ(),status:ir,limit_activations:be(aO()),usage:aO(),limit_usage:be(aO()),validations:aO(),last_validated_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),expires_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),activation:bc(be(ix))}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId",customer_id:"customerId",benefit_id:"benefitId",display_key:"displayKey",limit_activations:"limitActivations",limit_usage:"limitUsage",last_validated_at:"lastValidatedAt",expires_at:"expiresAt"})));async function iJ(a,b,c){let d=ct(b,a=>Y(iH,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/customer-portal/license-keys/validate")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer_portal:license_keys:validate",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},j=a._createRequest(i,{method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!j.ok)return[j,{status:"invalid"}];let k=j.value,l=await a._do(k,{context:i,errorCodes:["404","422","4XX","5XX"],retryConfig:i.retryConfig,retryCodes:i.retryCodes});if(!l.ok)return[l,{status:"request-error",request:k}];let m=l.value,[n]=await cn(ck(200,iI),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(m,k,{extraFields:{HttpMeta:{Response:m,Request:k}}});return!n.ok,[n,{status:"complete",request:k,response:m}]}class iK extends b8{async list(a,b,c){return dB(new dy(iG(this,a,b,c)))}async get(a,b,c){return s(new dy(iA(this,a,b,c)))}async validate(a,b){return s(new dy(iJ(this,a,b)))}async activate(a,b){return s(new dy(iu(this,a,b)))}async deactivate(a,b){return s(new dy(iw(this,a,b)))}}let iL=bi(a$({status:aJ(),client_secret:bc(be(aJ())),error:bc(be(aJ()))}),ba(a=>cr(a,{client_secret:"clientSecret"})));class iM extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="OrderNotEligibleForRetry"}}let iN=bi(a$({error:a8("OrderNotEligibleForRetry"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new iM(a,{request:a.request$,response:a.response$,body:a.body$})));class iO extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="PaymentAlreadyInProgress"}}let iP=bi(a$({error:a8("PaymentAlreadyInProgress"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new iO(a,{request:a.request$,response:a.response$,body:a.body$}))),iQ=bi(a$({confirmationTokenId:bc(be(aJ())),paymentMethodId:bc(be(aJ())),paymentProcessor:bc(e0)}),ba(a=>cr(a,{confirmationTokenId:"confirmation_token_id",paymentMethodId:"payment_method_id",paymentProcessor:"payment_processor"})));bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let iR=bi(a$({id:aJ(),customerOrderConfirmPayment:iQ}),ba(a=>cr(a,{customerOrderConfirmPayment:"CustomerOrderConfirmPayment"})));async function iS(a,b,c,d){let e=ct(c,a=>Y(iR,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g=e.value,h=bw("body",g.CustomerOrderConfirmPayment,{explode:!0}),i={id:bx("id",g.id,{explode:!1,charEncoding:"percent"})},j=f("/v1/customer-portal/orders/{id}/confirm-payment")(i),k=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),l=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),m={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:orders:confirm_retry_payment",oAuth2Scopes:null,resolvedSecurity:l,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"POST",baseURL:d?.serverURL,path:j,headers:k,body:h,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","409","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,iL),cj(404,dX),cj(409,iP),cj(422,iN),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class iT extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="MissingInvoiceBillingDetails"}}let iU=bi(a$({error:a8("MissingInvoiceBillingDetails"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new iT(a,{request:a.request$,response:a.response$,body:a.body$})));class iV extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="NotPaidOrder"}}let iW=bi(a$({error:a8("NotPaidOrder"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new iV(a,{request:a.request$,response:a.response$,body:a.body$}))),iX=a0([iU,iW]);bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let iY=a$({id:aJ()});async function iZ(a,b,c,d){let e=ct(c,a=>Y(iY,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/orders/{id}/invoice")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:orders:generate_invoice",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(202,aS()),cj(422,iX),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let i$=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),name:aJ(),slug:aJ(),avatar_url:be(aJ()),proration_behavior:fV,allow_customer_updates:aQ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",avatar_url:"avatarUrl",proration_behavior:"prorationBehavior",allow_customer_updates:"allowCustomerUpdates"})));a0([et,eO]);let i_=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_interval:be(eQ),trial_interval_count:be(aO()),name:aJ(),description:be(aJ()),recurring_interval:be(em),recurring_interval_count:be(aO()),is_recurring:aQ(),is_archived:aQ(),organization_id:aJ(),prices:aY(a0([et,eO])),benefits:aY(ej),medias:aY(ev),organization:i$}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",trial_interval:"trialInterval",trial_interval_count:"trialIntervalCount",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",is_recurring:"isRecurring",is_archived:"isArchived",organization_id:"organizationId"}))),i0=a6({CustomerService:"customer_service",LowQuality:"low_quality",MissingFeatures:"missing_features",SwitchedService:"switched_service",TooComplex:"too_complex",TooExpensive:"too_expensive",Unused:"unused",Other:"other"}),i1=a6({Incomplete:"incomplete",IncompleteExpired:"incomplete_expired",Trialing:"trialing",Active:"active",PastDue:"past_due",Canceled:"canceled",Unpaid:"unpaid"}),i2=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),amount:aO(),currency:aJ(),recurring_interval:em,recurring_interval_count:aO(),status:i1,current_period_start:bi(cE({offset:!0}),ba(a=>new Date(a))),current_period_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_start:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),cancel_at_period_end:aQ(),canceled_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),started_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ended_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),product_id:aJ(),discount_id:be(aJ()),checkout_id:be(aJ()),seats:bc(be(aO())),customer_cancellation_reason:be(i0),customer_cancellation_comment:be(aJ())}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",current_period_start:"currentPeriodStart",current_period_end:"currentPeriodEnd",trial_start:"trialStart",trial_end:"trialEnd",cancel_at_period_end:"cancelAtPeriodEnd",canceled_at:"canceledAt",started_at:"startedAt",ends_at:"endsAt",ended_at:"endedAt",customer_id:"customerId",product_id:"productId",discount_id:"discountId",checkout_id:"checkoutId",customer_cancellation_reason:"customerCancellationReason",customer_cancellation_comment:"customerCancellationComment"}))),i3=a6({Purchase:"purchase",SubscriptionCreate:"subscription_create",SubscriptionCycle:"subscription_cycle",SubscriptionUpdate:"subscription_update"}),i4=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),label:aJ(),amount:aO(),tax_amount:aO(),proration:aQ(),product_price_id:be(aJ())}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",tax_amount:"taxAmount",product_price_id:"productPriceId"}))),i5=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),label:aJ(),amount:aO(),taxAmount:aO(),proration:aQ(),productPriceId:be(aJ())}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",taxAmount:"tax_amount",productPriceId:"product_price_id"}))),i6=a6({Pending:"pending",Paid:"paid",Refunded:"refunded",PartiallyRefunded:"partially_refunded"}),i7=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),status:i6,paid:aQ(),subtotal_amount:aO(),discount_amount:aO(),net_amount:aO(),tax_amount:aO(),total_amount:aO(),applied_balance_amount:aO(),due_amount:aO(),refunded_amount:aO(),refunded_tax_amount:aO(),currency:aJ(),billing_reason:i3,billing_name:be(aJ()),billing_address:be(dm),invoice_number:aJ(),is_invoice_generated:aQ(),seats:bc(be(aO())),customer_id:aJ(),product_id:be(aJ()),discount_id:be(aJ()),subscription_id:be(aJ()),checkout_id:be(aJ()),user_id:aJ(),product:be(i_),subscription:be(i2),items:aY(i4),description:aJ(),next_payment_attempt_at:bc(be(bi(cE({offset:!0}),ba(a=>new Date(a)))))}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",subtotal_amount:"subtotalAmount",discount_amount:"discountAmount",net_amount:"netAmount",tax_amount:"taxAmount",total_amount:"totalAmount",applied_balance_amount:"appliedBalanceAmount",due_amount:"dueAmount",refunded_amount:"refundedAmount",refunded_tax_amount:"refundedTaxAmount",billing_reason:"billingReason",billing_name:"billingName",billing_address:"billingAddress",invoice_number:"invoiceNumber",is_invoice_generated:"isInvoiceGenerated",customer_id:"customerId",product_id:"productId",discount_id:"discountId",subscription_id:"subscriptionId",checkout_id:"checkoutId",user_id:"userId",next_payment_attempt_at:"nextPaymentAttemptAt"})));bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let i8=a$({id:aJ()});async function i9(a,b,c,d){let e=ct(c,a=>Y(i8,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/orders/{id}")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:orders:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,i7),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let ja=a$({status:aJ(),error:bc(be(aJ()))});bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let jb=a$({id:aJ()});async function jc(a,b,c,d){let e=ct(c,a=>Y(jb,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/orders/{id}/payment-status")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:orders:get_payment_status",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,ja),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let jd=a$({url:aJ()});bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let je=a$({id:aJ()});async function jf(a,b,c,d){let e=ct(c,a=>Y(je,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/orders/{id}/invoice")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:orders:invoice",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,jd),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let jg=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Amount:"amount",MinusAmount:"-amount",NetAmount:"net_amount",MinusNetAmount:"-net_amount",Product:"product",MinusProduct:"-product",Subscription:"subscription",MinusSubscription:"-subscription"}),jh=a$({items:aY(i7),pagination:ds}),ji=a6({OneTime:"one_time",Recurring:"recurring"});bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"}))),a0([aJ(),aY(aJ())]),a0([ji,aY(ji)]),a0([aJ(),aY(aJ())]);let jj=bi(a$({productId:bc(be(a0([aJ(),aY(aJ())]))),productBillingType:bc(be(a0([ji,aY(ji)]))),subscriptionId:bc(be(a0([aJ(),aY(aJ())]))),query:bc(be(aJ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(jg)))}),ba(a=>cr(a,{productId:"product_id",productBillingType:"product_billing_type",subscriptionId:"subscription_id"}))),jk=bi(a$({Result:jh}),ba(a=>cr(a,{Result:"result"})));async function jl(a,b,c,d){let e=ct(c,a=>Y(jj,a),"Input validation failed");if(!e.ok)return[dA(e),{status:"invalid"}];let g=e.value,h=f("/v1/customer-portal/orders/")(),i=bF({limit:g.limit,page:g.page,product_billing_type:g.product_billing_type,product_id:g.product_id,query:g.query,sorting:g.sorting,subscription_id:g.subscription_id}),j=new Headers(cs({Accept:"application/json"})),k=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),l={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:orders:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:d?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,jk,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(e=>{let f=c?.page??1,g=f+1,h=bH(e,"pagination.max_page");if("number"!=typeof h||h<=f||!e)return{next:()=>null};let i=bH(e,"items");if(!Array.isArray(i)||!i.length)return{next:()=>null};let j=c?.limit??10;return i.length<j?{next:()=>null}:{next:()=>new dy(jl(a,b,{...c,page:g},d)),"~next":{page:g}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let jm=bi(a$({billingName:be(aJ()),billingAddress:be(gb)}),ba(a=>cr(a,{billingName:"billing_name",billingAddress:"billing_address"})));bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let jn=bi(a$({id:aJ(),customerOrderUpdate:jm}),ba(a=>cr(a,{customerOrderUpdate:"CustomerOrderUpdate"})));async function jo(a,b,c,d){let e=ct(c,a=>Y(jn,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g=e.value,h=bw("body",g.CustomerOrderUpdate,{explode:!0}),i={id:bx("id",g.id,{explode:!1,charEncoding:"percent"})},j=f("/v1/customer-portal/orders/{id}")(i),k=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),l=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),m={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:orders:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:d?.serverURL,path:j,headers:k,body:h,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,i7),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class jp extends b8{async list(a,b,c){return dB(new dy(jl(this,a,b,c)))}async get(a,b,c){return s(new dy(i9(this,a,b,c)))}async update(a,b,c){return s(new dy(jo(this,a,b,c)))}async generateInvoice(a,b,c){return s(new dy(iZ(this,a,b,c)))}async invoice(a,b,c){return s(new dy(jf(this,a,b,c)))}async getPaymentStatus(a,b,c){return s(new dy(jc(this,a,b,c)))}async confirmRetryPayment(a,b,c){return s(new dy(iS(this,a,b,c)))}}a0([et,eO]);let jq=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_interval:be(eQ),trial_interval_count:be(aO()),name:aJ(),description:be(aJ()),recurring_interval:be(em),recurring_interval_count:be(aO()),is_recurring:aQ(),is_archived:aQ(),organization_id:aJ(),prices:aY(a0([et,eO])),benefits:aY(ej),medias:aY(ev)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",trial_interval:"trialInterval",trial_interval_count:"trialIntervalCount",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",is_recurring:"isRecurring",is_archived:"isArchived",organization_id:"organizationId"}))),jr=a$({organization:i$,products:aY(jq)}),js=a$({slug:aJ()});async function jt(a,b,c){let d=ct(b,a=>Y(js,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={slug:bx("slug",d.value.slug,{explode:!1,charEncoding:"percent"})},g=f("/v1/customer-portal/organizations/{slug}")(e),h=new Headers(cs({Accept:"application/json"})),i={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer_portal:organizations:get",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},j=a._createRequest(i,{method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!j.ok)return[j,{status:"invalid"}];let k=j.value,l=await a._do(k,{context:i,errorCodes:["404","422","4XX","5XX"],retryConfig:i.retryConfig,retryCodes:i.retryCodes});if(!l.ok)return[l,{status:"request-error",request:k}];let m=l.value,[n]=await cn(ck(200,jr),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(m,k,{extraFields:{HttpMeta:{Response:m,Request:k}}});return!n.ok,[n,{status:"complete",request:k,response:m}]}class ju extends b8{async get(a,b){return s(new dy(jt(this,a,b)))}}let jv=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),name:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt"}))),jw=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),consumed_units:aM(),credited_units:aO(),amount:aO(),meter_id:aJ(),meter:jv}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",consumed_units:"consumedUnits",credited_units:"creditedUnits",meter_id:"meterId"})));a0([et,eO]);let jx=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_interval:be(eQ),trial_interval_count:be(aO()),name:aJ(),description:be(aJ()),recurring_interval:be(em),recurring_interval_count:be(aO()),is_recurring:aQ(),is_archived:aQ(),organization_id:aJ(),prices:aY(a0([et,eO])),benefits:aY(ej),medias:aY(ev),organization:i$}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",trial_interval:"trialInterval",trial_interval_count:"trialIntervalCount",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",is_recurring:"isRecurring",is_archived:"isArchived",organization_id:"organizationId"})));a0([et,eO]);let jy=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),amount:aO(),currency:aJ(),recurring_interval:em,recurring_interval_count:aO(),status:i1,current_period_start:bi(cE({offset:!0}),ba(a=>new Date(a))),current_period_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_start:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),cancel_at_period_end:aQ(),canceled_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),started_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ended_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),product_id:aJ(),discount_id:be(aJ()),checkout_id:be(aJ()),seats:bc(be(aO())),customer_cancellation_reason:be(i0),customer_cancellation_comment:be(aJ()),product:jx,prices:aY(a0([et,eO])),meters:aY(jw),is_polar_managed:aQ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",current_period_start:"currentPeriodStart",current_period_end:"currentPeriodEnd",trial_start:"trialStart",trial_end:"trialEnd",cancel_at_period_end:"cancelAtPeriodEnd",canceled_at:"canceledAt",started_at:"startedAt",ends_at:"endsAt",ended_at:"endedAt",customer_id:"customerId",product_id:"productId",discount_id:"discountId",checkout_id:"checkoutId",customer_cancellation_reason:"customerCancellationReason",customer_cancellation_comment:"customerCancellationComment",is_polar_managed:"isPolarManaged"})));class jz extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="AlreadyCanceledSubscription"}}let jA=bi(a$({error:a8("AlreadyCanceledSubscription"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new jz(a,{request:a.request$,response:a.response$,body:a.body$})));bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let jB=a$({id:aJ()});async function jC(a,b,c,d){let e=ct(c,a=>Y(jB,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/subscriptions/{id}")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:subscriptions:cancel",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["403","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,jy),cj(403,jA),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let jD=a$({id:aJ()});async function jE(a,b,c,d){let e=ct(c,a=>Y(jD,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/subscriptions/{id}")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:subscriptions:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,jy),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let jF=a6({StartedAt:"started_at",MinusStartedAt:"-started_at",Amount:"amount",MinusAmount:"-amount",Status:"status",MinusStatus:"-status",Organization:"organization",MinusOrganization:"-organization",Product:"product",MinusProduct:"-product"}),jG=a$({items:aY(jy),pagination:ds});bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"}))),a0([aJ(),aY(aJ())]);let jH=bi(a$({productId:bc(be(a0([aJ(),aY(aJ())]))),active:bc(be(aQ())),query:bc(be(aJ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(jF)))}),ba(a=>cr(a,{productId:"product_id"}))),jI=bi(a$({Result:jG}),ba(a=>cr(a,{Result:"result"})));async function jJ(a,b,c,d){let e=ct(c,a=>Y(jH,a),"Input validation failed");if(!e.ok)return[dA(e),{status:"invalid"}];let g=e.value,h=f("/v1/customer-portal/subscriptions/")(),i=bF({active:g.active,limit:g.limit,page:g.page,product_id:g.product_id,query:g.query,sorting:g.sorting}),j=new Headers(cs({Accept:"application/json"})),k=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),l={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:subscriptions:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:d?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,jI,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(e=>{let f=c?.page??1,g=f+1,h=bH(e,"pagination.max_page");if("number"!=typeof h||h<=f||!e)return{next:()=>null};let i=bH(e,"items");if(!Array.isArray(i)||!i.length)return{next:()=>null};let j=c?.limit??10;return i.length<j?{next:()=>null}:{next:()=>new dy(jJ(a,b,{...c,page:g},d)),"~next":{page:g}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let jK=bi(a$({cancelAtPeriodEnd:bc(be(aQ())),cancellationReason:bc(be(i0)),cancellationComment:bc(be(aJ()))}),ba(a=>cr(a,{cancelAtPeriodEnd:"cancel_at_period_end",cancellationReason:"cancellation_reason",cancellationComment:"cancellation_comment"}))),jL=a0([bi(a$({productId:aJ()}),ba(a=>cr(a,{productId:"product_id"}))),bi(a$({seats:aO(),prorationBehavior:bc(be(fV))}),ba(a=>cr(a,{prorationBehavior:"proration_behavior"}))),jK]);bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let jM=bi(a$({id:aJ(),customerSubscriptionUpdate:jL}),ba(a=>cr(a,{customerSubscriptionUpdate:"CustomerSubscriptionUpdate"})));async function jN(a,b,c,d){let e=ct(c,a=>Y(jM,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g=e.value,h=bw("body",g.CustomerSubscriptionUpdate,{explode:!0}),i={id:bx("id",g.id,{explode:!1,charEncoding:"percent"})},j=f("/v1/customer-portal/subscriptions/{id}")(i),k=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),l=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),m={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:subscriptions:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:d?.serverURL,path:j,headers:k,body:h,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["403","404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,jy),cj(403,jA),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class jO extends b8{async list(a,b,c){return dB(new dy(jJ(this,a,b,c)))}async get(a,b,c){return s(new dy(jE(this,a,b,c)))}async update(a,b,c){return s(new dy(jN(this,a,b,c)))}async cancel(a,b,c){return s(new dy(jC(this,a,b,c)))}}let jP=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),balance:aO(),currency:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",customer_id:"customerId"})));bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let jQ=a$({id:aJ()});async function jR(a,b,c,d){let e=ct(c,a=>Y(jQ,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={id:bx("id",e.value.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/wallets/{id}")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:wallets:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,jP),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let jS=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Balance:"balance",MinusBalance:"-balance"}),jT=a$({items:aY(jP),pagination:ds});bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let jU=a$({page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(jS)))}),jV=bi(a$({Result:jT}),ba(a=>cr(a,{Result:"result"})));async function jW(a,b,c,d){let e=ct(c,a=>Y(jU,a),"Input validation failed");if(!e.ok)return[dA(e),{status:"invalid"}];let g=e.value,h=f("/v1/customer-portal/wallets/")(),i=bF({limit:g.limit,page:g.page,sorting:g.sorting}),j=new Headers(cs({Accept:"application/json"})),k=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),l={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:wallets:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:d?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,jV,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(e=>{let f=c?.page??1,g=f+1,h=bH(e,"pagination.max_page");if("number"!=typeof h||h<=f||!e)return{next:()=>null};let i=bH(e,"items");if(!Array.isArray(i)||!i.length)return{next:()=>null};let j=c?.limit??10;return i.length<j?{next:()=>null}:{next:()=>new dy(jW(a,b,{...c,page:g},d)),"~next":{page:g}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}class jX extends b8{async list(a,b,c){return dB(new dy(jW(this,a,b,c)))}async get(a,b,c){return s(new dy(jR(this,a,b,c)))}}let jY=a6({Pending:"pending",Claimed:"claimed",Revoked:"revoked"}),jZ=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),subscription_id:bc(be(aJ())),order_id:bc(be(aJ())),status:jY,customer_id:bc(be(aJ())),customer_email:bc(be(aJ())),invitation_token_expires_at:bc(be(bi(cE({offset:!0}),ba(a=>new Date(a))))),claimed_at:bc(be(bi(cE({offset:!0}),ba(a=>new Date(a))))),revoked_at:bc(be(bi(cE({offset:!0}),ba(a=>new Date(a))))),seat_metadata:bc(be(a4(aJ(),aS())))}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",subscription_id:"subscriptionId",order_id:"orderId",customer_id:"customerId",customer_email:"customerEmail",invitation_token_expires_at:"invitationTokenExpiresAt",claimed_at:"claimedAt",revoked_at:"revokedAt",seat_metadata:"seatMetadata"})));bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),subscriptionId:bc(be(aJ())),orderId:bc(be(aJ())),status:jY,customerId:bc(be(aJ())),customerEmail:bc(be(aJ())),invitationTokenExpiresAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),claimedAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),revokedAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),seatMetadata:bc(be(a4(aJ(),aS())))}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",subscriptionId:"subscription_id",orderId:"order_id",customerId:"customer_id",customerEmail:"customer_email",invitationTokenExpiresAt:"invitation_token_expires_at",claimedAt:"claimed_at",revokedAt:"revoked_at",seatMetadata:"seat_metadata"})));let j$=bi(a$({subscriptionId:bc(be(aJ())),checkoutId:bc(be(aJ())),orderId:bc(be(aJ())),email:bc(be(aJ())),externalCustomerId:bc(be(aJ())),customerId:bc(be(aJ())),metadata:bc(be(a4(aJ(),aS()))),immediateClaim:bg(aQ(),!1)}),ba(a=>cr(a,{subscriptionId:"subscription_id",checkoutId:"checkout_id",orderId:"order_id",externalCustomerId:"external_customer_id",customerId:"customer_id",immediateClaim:"immediate_claim"})));async function j_(a,b,c,d){let e=ct(c,a=>Y(j$,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g=bw("body",e.value,{explode:!0}),h=f("/v1/customer-portal/seats")(),i=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:seats:assign_seat",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:d?.serverURL,path:h,headers:i,body:g,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["400","401","403","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,jZ),cj(422,cB),cm([400,401,403,404,"4XX"]),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}async function j0(a,b,c){let d=f("/v1/customer-portal/seats/subscriptions")(),e=new Headers(cs({Accept:"application/json"})),g=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),h={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer_portal:seats:list_claimed_subscriptions",oAuth2Scopes:null,resolvedSecurity:g,securitySource:b,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},i=a._createRequest(h,{security:g,method:"GET",baseURL:c?.serverURL,path:d,headers:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!i.ok)return[i,{status:"invalid"}];let j=i.value,k=await a._do(j,{context:h,errorCodes:["401","4XX","5XX"],retryConfig:h.retryConfig,retryCodes:h.retryCodes});if(!k.ok)return[k,{status:"request-error",request:j}];let l=k.value,[m]=await cn(ck(200,aY(jy)),cm([401,"4XX"]),cm("5XX"))(l,j);return!m.ok,[m,{status:"complete",request:j,response:l}]}let j1=bi(a$({seats:aY(jZ),available_seats:aO(),total_seats:aO()}),ba(a=>cr(a,{available_seats:"availableSeats",total_seats:"totalSeats"})));bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let j2=bi(a$({subscriptionId:bc(be(aJ())),orderId:bc(be(aJ()))}),ba(a=>cr(a,{subscriptionId:"subscription_id",orderId:"order_id"})));async function j3(a,b,c,d){let e=ct(c,a=>Y(j2,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g=e.value,h=f("/v1/customer-portal/seats")(),i=bF({order_id:g.order_id,subscription_id:g.subscription_id}),j=new Headers(cs({Accept:"application/json"})),k=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),l={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:seats:list_seats",oAuth2Scopes:null,resolvedSecurity:k,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:d?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!m.ok)return[m,{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["401","403","404","422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[o,{status:"request-error",request:n}];let p=o.value,[q]=await cn(ck(200,j1),cj(422,cB),cm([401,403,404,"4XX"]),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});return!q.ok,[q,{status:"complete",request:n,response:p}]}bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let j4=bi(a$({seatId:aJ()}),ba(a=>cr(a,{seatId:"seat_id"})));async function j5(a,b,c,d){let e=ct(c,a=>Y(j4,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={seat_id:bx("seat_id",e.value.seat_id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/seats/{seat_id}/resend")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:seats:resend_invitation",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["400","401","403","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,jZ),cj(422,cB),cm([400,401,403,404,"4XX"]),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}bi(a$({customerSession:aJ()}),ba(a=>cr(a,{customerSession:"customer_session"})));let j6=bi(a$({seatId:aJ()}),ba(a=>cr(a,{seatId:"seat_id"})));async function j7(a,b,c,d){let e=ct(c,a=>Y(j6,a),"Input validation failed");if(!e.ok)return[e,{status:"invalid"}];let g={seat_id:bx("seat_id",e.value.seat_id,{explode:!1,charEncoding:"percent"})},h=f("/v1/customer-portal/seats/{seat_id}")(g),i=new Headers(cs({Accept:"application/json"})),j=cv([{fieldName:"Authorization",type:"http:bearer",value:b?.customerSession}]),k={options:a._options,baseURL:d?.serverURL??a._baseURL??"",operationID:"customer_portal:seats:revoke_seat",oAuth2Scopes:null,resolvedSecurity:j,securitySource:b,retryConfig:d?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:d?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:d?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:d?.timeoutMs||a._options.timeoutMs||-1},d);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["401","403","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,jZ),cj(422,cB),cm([401,403,404,"4XX"]),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}class j8 extends b8{async listSeats(a,b,c){return s(new dy(j3(this,a,b,c)))}async assignSeat(a,b,c){return s(new dy(j_(this,a,b,c)))}async revokeSeat(a,b,c){return s(new dy(j7(this,a,b,c)))}async resendInvitation(a,b,c){return s(new dy(j5(this,a,b,c)))}async listClaimedSubscriptions(a,b){return s(new dy(j0(this,a,b)))}}class j9 extends b8{get benefitGrants(){return this._benefitGrants??(this._benefitGrants=new hR(this._options))}get customers(){return this._customers??(this._customers=new io(this._options))}get customerMeters(){return this._customerMeters??(this._customerMeters=new h_(this._options))}get seats(){return this._seats??(this._seats=new j8(this._options))}get customerSession(){return this._customerSession??(this._customerSession=new g3(this._options))}get downloadables(){return this._downloadables??(this._downloadables=new hc(this._options))}get licenseKeys(){return this._licenseKeys??(this._licenseKeys=new iK(this._options))}get orders(){return this._orders??(this._orders=new jp(this._options))}get organizations(){return this._organizations??(this._organizations=new ju(this._options))}get subscriptions(){return this._subscriptions??(this._subscriptions=new jO(this._options))}get wallets(){return this._wallets??(this._wallets=new jX(this._options))}}a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),dp]);let ka=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),externalId:bc(be(aJ())),email:aJ(),name:bc(be(aJ())),billingAddress:bc(be(gb)),taxId:bc(be(aY(be(a0([aJ(),dp]))))),organizationId:bc(be(aJ()))}),ba(a=>cr(a,{externalId:"external_id",billingAddress:"billing_address",taxId:"tax_id",organizationId:"organization_id"})));async function kb(a,b,c){let d=ct(b,a=>Y(ka,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/customers/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,dq),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let kc=a$({id:aJ()});async function kd(a,b,c){let d=ct(b,a=>Y(kc,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/customers/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:delete",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(cl(204,aU()),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let ke=bi(a$({externalId:aJ()}),ba(a=>cr(a,{externalId:"external_id"})));async function kf(a,b,c){let d=ct(b,a=>Y(ke,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={external_id:bx("external_id",d.value.external_id,{explode:!1,charEncoding:"percent"})},g=f("/v1/customers/external/{external_id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:delete_external",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(cl(204,aU()),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}a0([aJ(),aY(aJ())]);let kg=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())])))}),ba(a=>cr(a,{organizationId:"organization_id"})));async function kh(a,b,c){let d=ct(b,a=>Y(kg,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=f("/v1/customers/export")(),h=bF({organization_id:e.organization_id}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:export",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[m,{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[o,{status:"request-error",request:n}];let p=o.value,[q]=await cn(ck(200,aS()),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});return!q.ok,[q,{status:"complete",request:n,response:p}]}let ki=a$({id:aJ()});async function kj(a,b,c){let d=ct(b,a=>Y(ki,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/customers/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,dq),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let kk=a$({balance:aO(),currency:aJ()}),kl=a$({id:aJ()});async function km(a,b,c){let d=ct(b,a=>Y(kl,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/customers/{id}/balance")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:get_balance",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,kk),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let kn=bi(a$({externalId:aJ()}),ba(a=>cr(a,{externalId:"external_id"})));async function ko(a,b,c){let d=ct(b,a=>Y(kn,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={external_id:bx("external_id",d.value.external_id,{explode:!1,charEncoding:"percent"})},g=f("/v1/customers/external/{external_id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:get_external",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,dq),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]),a0([db,dh,dd,dj,c9]),a0([dc,di,de,dk,da]);let kp=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),granted_at:bi(cE({offset:!0}),ba(a=>new Date(a))),benefit_id:aJ(),benefit_type:d4,benefit_metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:a0([db,dh,dd,dj,c9])}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",granted_at:"grantedAt",benefit_id:"benefitId",benefit_type:"benefitType",benefit_metadata:"benefitMetadata"}))),kq=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),grantedAt:bi(aW(),ba(a=>a.toISOString())),benefitId:aJ(),benefitType:d4,benefitMetadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),properties:a0([dc,di,de,dk,da])}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",grantedAt:"granted_at",benefitId:"benefit_id",benefitType:"benefit_type",benefitMetadata:"benefit_metadata"}))),kr=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),meter_id:aJ(),consumed_units:aM(),credited_units:aO(),balance:aM()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",meter_id:"meterId",consumed_units:"consumedUnits",credited_units:"creditedUnits"}))),ks=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),meterId:aJ(),consumedUnits:aM(),creditedUnits:aO(),balance:aM()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",meterId:"meter_id",consumedUnits:"consumed_units",creditedUnits:"credited_units"}))),kt=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),consumed_units:aM(),credited_units:aO(),amount:aO(),meter_id:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",consumed_units:"consumedUnits",credited_units:"creditedUnits",meter_id:"meterId"}))),ku=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),consumedUnits:aM(),creditedUnits:aO(),amount:aO(),meterId:aJ()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",consumedUnits:"consumed_units",creditedUnits:"credited_units",meterId:"meter_id"})));a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))]),a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))]),a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let kv=a6({Active:"active",Trialing:"trialing"}),kw=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),custom_field_data:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))])))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),status:kv,amount:aO(),currency:aJ(),recurring_interval:em,current_period_start:bi(cE({offset:!0}),ba(a=>new Date(a))),current_period_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_start:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),cancel_at_period_end:aQ(),canceled_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),started_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),product_id:aJ(),discount_id:be(aJ()),meters:aY(kt)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",custom_field_data:"customFieldData",recurring_interval:"recurringInterval",current_period_start:"currentPeriodStart",current_period_end:"currentPeriodEnd",trial_start:"trialStart",trial_end:"trialEnd",cancel_at_period_end:"cancelAtPeriodEnd",canceled_at:"canceledAt",started_at:"startedAt",ends_at:"endsAt",product_id:"productId",discount_id:"discountId"}))),kx=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),customFieldData:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))])))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),status:kv,amount:aO(),currency:aJ(),recurringInterval:em,currentPeriodStart:bi(aW(),ba(a=>a.toISOString())),currentPeriodEnd:be(bi(aW(),ba(a=>a.toISOString()))),trialStart:be(bi(aW(),ba(a=>a.toISOString()))),trialEnd:be(bi(aW(),ba(a=>a.toISOString()))),cancelAtPeriodEnd:aQ(),canceledAt:be(bi(aW(),ba(a=>a.toISOString()))),startedAt:be(bi(aW(),ba(a=>a.toISOString()))),endsAt:be(bi(aW(),ba(a=>a.toISOString()))),productId:aJ(),discountId:be(aJ()),meters:aY(ku)}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",customFieldData:"custom_field_data",recurringInterval:"recurring_interval",currentPeriodStart:"current_period_start",currentPeriodEnd:"current_period_end",trialStart:"trial_start",trialEnd:"trial_end",cancelAtPeriodEnd:"cancel_at_period_end",canceledAt:"canceled_at",startedAt:"started_at",endsAt:"ends_at",productId:"product_id",discountId:"discount_id"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),dp]),a0([aJ(),dp]);let ky=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),external_id:be(aJ()),email:aJ(),email_verified:aQ(),name:be(aJ()),billing_address:be(dm),tax_id:be(aY(be(a0([aJ(),dp])))),organization_id:aJ(),deleted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),active_subscriptions:aY(kw),granted_benefits:aY(kp),active_meters:aY(kr),avatar_url:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",external_id:"externalId",email_verified:"emailVerified",billing_address:"billingAddress",tax_id:"taxId",organization_id:"organizationId",deleted_at:"deletedAt",active_subscriptions:"activeSubscriptions",granted_benefits:"grantedBenefits",active_meters:"activeMeters",avatar_url:"avatarUrl"})));bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),externalId:be(aJ()),email:aJ(),emailVerified:aQ(),name:be(aJ()),billingAddress:be(dn),taxId:be(aY(be(a0([aJ(),dp])))),organizationId:aJ(),deletedAt:be(bi(aW(),ba(a=>a.toISOString()))),activeSubscriptions:aY(kx),grantedBenefits:aY(kq),activeMeters:aY(ks),avatarUrl:aJ()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",externalId:"external_id",emailVerified:"email_verified",billingAddress:"billing_address",taxId:"tax_id",organizationId:"organization_id",deletedAt:"deleted_at",activeSubscriptions:"active_subscriptions",grantedBenefits:"granted_benefits",activeMeters:"active_meters",avatarUrl:"avatar_url"})));let kz=a$({id:aJ()});async function kA(a,b,c){let d=ct(b,a=>Y(kz,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/customers/{id}/state")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:get_state",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,ky),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let kB=bi(a$({externalId:aJ()}),ba(a=>cr(a,{externalId:"external_id"})));async function kC(a,b,c){let d=ct(b,a=>Y(kB,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={external_id:bx("external_id",d.value.external_id,{explode:!1,charEncoding:"percent"})},g=f("/v1/customers/external/{external_id}/state")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:get_state_external",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,ky),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let kD=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Email:"email",MinusEmail:"-email",Name:"name",MinusName:"-name"}),kE=a$({items:aY(dq),pagination:ds});a0([aJ(),aY(aJ())]);let kF=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),email:bc(be(aJ())),query:bc(be(aJ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(kD))),metadata:bc(be(a4(aJ(),d6)))}),ba(a=>cr(a,{organizationId:"organization_id"}))),kG=bi(a$({Result:kE}),ba(a=>cr(a,{Result:"result"})));async function kH(a,b,c){let d=ct(b,a=>Y(kF,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/customers/")(),h=bD(bG({metadata:e.metadata}),bF({email:e.email,limit:e.limit,organization_id:e.organization_id,page:e.page,query:e.query,sorting:e.sorting})),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,kG,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(kH(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),dp]);let kI=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),email:bc(be(aJ())),name:bc(be(aJ())),billingAddress:bc(be(gb)),taxId:bc(be(aY(be(a0([aJ(),dp]))))),externalId:bc(be(aJ()))}),ba(a=>cr(a,{billingAddress:"billing_address",taxId:"tax_id",externalId:"external_id"}))),kJ=bi(a$({id:aJ(),customerUpdate:kI}),ba(a=>cr(a,{customerUpdate:"CustomerUpdate"})));async function kK(a,b,c){let d=ct(b,a=>Y(kJ,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.CustomerUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/customers/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,dq),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),dp]);let kL=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),email:bc(be(aJ())),name:bc(be(aJ())),billingAddress:bc(be(gb)),taxId:bc(be(aY(be(a0([aJ(),dp])))))}),ba(a=>cr(a,{billingAddress:"billing_address",taxId:"tax_id"}))),kM=bi(a$({externalId:aJ(),customerUpdateExternalID:kL}),ba(a=>cr(a,{externalId:"external_id",customerUpdateExternalID:"CustomerUpdateExternalID"})));async function kN(a,b,c){let d=ct(b,a=>Y(kM,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.CustomerUpdateExternalID,{explode:!0}),h={external_id:bx("external_id",e.external_id,{explode:!1,charEncoding:"percent"})},i=f("/v1/customers/external/{external_id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customers:update_external",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,dq),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class kO extends b8{async list(a,b){return dB(new dy(kH(this,a,b)))}async create(a,b){return s(new dy(kb(this,a,b)))}async export(a,b){return s(new dy(kh(this,a,b)))}async get(a,b){return s(new dy(kj(this,a,b)))}async update(a,b){return s(new dy(kK(this,a,b)))}async delete(a,b){return s(new dy(kd(this,a,b)))}async getExternal(a,b){return s(new dy(ko(this,a,b)))}async updateExternal(a,b){return s(new dy(kN(this,a,b)))}async deleteExternal(a,b){return s(new dy(kf(this,a,b)))}async getState(a,b){return s(new dy(kA(this,a,b)))}async getStateExternal(a,b){return s(new dy(kC(this,a,b)))}async getBalance(a,b){return s(new dy(km(this,a,b)))}}async function kP(a,b,c){let d=ct(b,a=>Y(j$,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/customer-seats")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer-seats:assign_seat",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["400","401","403","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,jZ),cj(422,cB),cm([400,401,403,404,"4XX"]),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let kQ=bi(a$({seat:jZ,customer_session_token:aJ()}),ba(a=>cr(a,{customer_session_token:"customerSessionToken"}))),kR=bi(a$({invitationToken:aJ()}),ba(a=>cr(a,{invitationToken:"invitation_token"})));async function kS(a,b,c){let d=ct(b,a=>Y(kR,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/customer-seats/claim")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer-seats:claim_seat",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},j=a._createRequest(i,{method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!j.ok)return[j,{status:"invalid"}];let k=j.value,l=await a._do(k,{context:i,errorCodes:["400","403","422","4XX","5XX"],retryConfig:i.retryConfig,retryCodes:i.retryCodes});if(!l.ok)return[l,{status:"request-error",request:k}];let m=l.value,[n]=await cn(ck(200,kQ),cj(422,cB),cm([400,403,"4XX"]),cm("5XX"))(m,k,{extraFields:{HttpMeta:{Response:m,Request:k}}});return!n.ok,[n,{status:"complete",request:k,response:m}]}let kT=bi(a$({product_name:aJ(),product_id:aJ(),organization_name:aJ(),organization_slug:aJ(),customer_email:aJ(),can_claim:aQ()}),ba(a=>cr(a,{product_name:"productName",product_id:"productId",organization_name:"organizationName",organization_slug:"organizationSlug",customer_email:"customerEmail",can_claim:"canClaim"}))),kU=bi(a$({invitationToken:aJ()}),ba(a=>cr(a,{invitationToken:"invitation_token"})));async function kV(a,b,c){let d=ct(b,a=>Y(kU,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={invitation_token:bx("invitation_token",d.value.invitation_token,{explode:!1,charEncoding:"percent"})},g=f("/v1/customer-seats/claim/{invitation_token}")(e),h=new Headers(cs({Accept:"application/json"})),i={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer-seats:get_claim_info",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},j=a._createRequest(i,{method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!j.ok)return[j,{status:"invalid"}];let k=j.value,l=await a._do(k,{context:i,errorCodes:["400","403","404","422","4XX","5XX"],retryConfig:i.retryConfig,retryCodes:i.retryCodes});if(!l.ok)return[l,{status:"request-error",request:k}];let m=l.value,[n]=await cn(ck(200,kT),cj(422,cB),cm([400,403,404,"4XX"]),cm("5XX"))(m,k,{extraFields:{HttpMeta:{Response:m,Request:k}}});return!n.ok,[n,{status:"complete",request:k,response:m}]}let kW=bi(a$({subscriptionId:bc(be(aJ())),orderId:bc(be(aJ()))}),ba(a=>cr(a,{subscriptionId:"subscription_id",orderId:"order_id"})));async function kX(a,b,c){let d=ct(b,a=>Y(kW,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=f("/v1/customer-seats")(),h=bF({order_id:e.order_id,subscription_id:e.subscription_id}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer-seats:list_seats",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[m,{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["401","403","404","422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[o,{status:"request-error",request:n}];let p=o.value,[q]=await cn(ck(200,j1),cj(422,cB),cm([401,403,404,"4XX"]),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});return!q.ok,[q,{status:"complete",request:n,response:p}]}let kY=bi(a$({seatId:aJ()}),ba(a=>cr(a,{seatId:"seat_id"})));async function kZ(a,b,c){let d=ct(b,a=>Y(kY,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={seat_id:bx("seat_id",d.value.seat_id,{explode:!1,charEncoding:"percent"})},g=f("/v1/customer-seats/{seat_id}/resend")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer-seats:resend_invitation",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["400","401","403","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,jZ),cj(422,cB),cm([400,401,403,404,"4XX"]),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let k$=bi(a$({seatId:aJ()}),ba(a=>cr(a,{seatId:"seat_id"})));async function k_(a,b,c){let d=ct(b,a=>Y(k$,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={seat_id:bx("seat_id",d.value.seat_id,{explode:!1,charEncoding:"percent"})},g=f("/v1/customer-seats/{seat_id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer-seats:revoke_seat",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["401","403","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,jZ),cj(422,cB),cm([401,403,404,"4XX"]),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}class k0 extends b8{async assignSeat(a,b){return s(new dy(kP(this,a,b)))}async listSeats(a,b){return s(new dy(kX(this,a,b)))}async revokeSeat(a,b){return s(new dy(k_(this,a,b)))}async resendInvitation(a,b){return s(new dy(kZ(this,a,b)))}async getClaimInfo(a,b){return s(new dy(kV(this,a,b)))}async claimSeat(a,b){return s(new dy(kS(this,a,b)))}}let k1=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),token:aJ(),expires_at:bi(cE({offset:!0}),ba(a=>new Date(a))),return_url:be(aJ()),customer_portal_url:aJ(),customer_id:aJ(),customer:dq}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",expires_at:"expiresAt",return_url:"returnUrl",customer_portal_url:"customerPortalUrl",customer_id:"customerId"}))),k2=bi(a$({returnUrl:bc(be(aJ())),externalCustomerId:aJ()}),ba(a=>cr(a,{returnUrl:"return_url",externalCustomerId:"external_customer_id"}))),k3=a0([bi(a$({returnUrl:bc(be(aJ())),customerId:aJ()}),ba(a=>cr(a,{returnUrl:"return_url",customerId:"customer_id"}))),k2]);async function k4(a,b,c){let d=ct(b,a=>Y(k3,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/customer-sessions/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"customer-sessions:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,k1),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}class k5 extends b8{async create(a,b){return s(new dy(k4(this,a,b)))}}a0([aJ(),aO(),aM(),aQ()]);let k6=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("checkbox"),slug:aJ(),name:aJ(),organizationId:bc(be(aJ())),properties:fl}),ba(a=>cr(a,{organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]);let k7=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("date"),slug:aJ(),name:aJ(),organizationId:bc(be(aJ())),properties:fp}),ba(a=>cr(a,{organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]);let k8=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("number"),slug:aJ(),name:aJ(),organizationId:bc(be(aJ())),properties:ft}),ba(a=>cr(a,{organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]);let k9=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("select"),slug:aJ(),name:aJ(),organizationId:bc(be(aJ())),properties:fz}),ba(a=>cr(a,{organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]);let la=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),type:a8("text"),slug:aJ(),name:aJ(),organizationId:bc(be(aJ())),properties:fD}),ba(a=>cr(a,{organizationId:"organization_id"}))),lb=a0([a2(k6,a$({type:a8("checkbox")})),a2(k7,a$({type:a8("date")})),a2(k8,a$({type:a8("number")})),a2(k9,a$({type:a8("select")})),a2(la,a$({type:a8("text")}))]);async function lc(a,b,c){let d=ct(b,a=>Y(lb,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/custom-fields/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"custom-fields:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,fG),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let ld=a$({id:aJ()});async function le(a,b,c){let d=ct(b,a=>Y(ld,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/custom-fields/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"custom-fields:delete",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(cl(204,aU()),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let lf=a$({id:aJ()});async function lg(a,b,c){let d=ct(b,a=>Y(lf,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/custom-fields/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"custom-fields:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,fG),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let lh=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Slug:"slug",MinusSlug:"-slug",Name:"name",MinusName:"-name",Type:"type",MinusType:"-type"}),li=a6({Text:"text",Number:"number",Date:"date",Checkbox:"checkbox",Select:"select"}),lj=a$({items:aY(fG),pagination:ds});a0([aJ(),aY(aJ())]),a0([li,aY(li)]);let lk=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),query:bc(be(aJ())),typeFilter:bc(be(a0([li,aY(li)]))),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(lh)))}),ba(a=>cr(a,{organizationId:"organization_id",typeFilter:"type_filter"}))),ll=bi(a$({Result:lj}),ba(a=>cr(a,{Result:"result"})));async function lm(a,b,c){let d=ct(b,a=>Y(lk,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/custom-fields/")(),h=bF({limit:e.limit,organization_id:e.organization_id,page:e.page,query:e.query,sorting:e.sorting,type:e.type_filter}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"custom-fields:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,ll,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(lm(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}a0([aJ(),aO(),aM(),aQ()]);let ln=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:bc(be(aJ())),slug:bc(be(aJ())),type:a8("checkbox"),properties:bc(be(fl))});a0([aJ(),aO(),aM(),aQ()]);let lo=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:bc(be(aJ())),slug:bc(be(aJ())),type:a8("date"),properties:bc(be(fp))});a0([aJ(),aO(),aM(),aQ()]);let lp=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:bc(be(aJ())),slug:bc(be(aJ())),type:a8("number"),properties:bc(be(ft))});a0([aJ(),aO(),aM(),aQ()]);let lq=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:bc(be(aJ())),slug:bc(be(aJ())),type:a8("select"),properties:bc(be(fz))});a0([aJ(),aO(),aM(),aQ()]);let lr=a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:bc(be(aJ())),slug:bc(be(aJ())),type:a8("text"),properties:bc(be(fD))}),ls=a0([a2(ln,a$({type:a8("checkbox")})),a2(lo,a$({type:a8("date")})),a2(lp,a$({type:a8("number")})),a2(lq,a$({type:a8("select")})),a2(lr,a$({type:a8("text")}))]),lt=bi(a$({id:aJ(),customFieldUpdate:ls}),ba(a=>cr(a,{customFieldUpdate:"CustomFieldUpdate"})));async function lu(a,b,c){let d=ct(b,a=>Y(lt,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.CustomFieldUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/custom-fields/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"custom-fields:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,fG),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class lv extends b8{async list(a,b){return dB(new dy(lm(this,a,b)))}async create(a,b){return s(new dy(lc(this,a,b)))}async get(a,b){return s(new dy(lg(this,a,b)))}async update(a,b){return s(new dy(lu(this,a,b)))}async delete(a,b){return s(new dy(le(this,a,b)))}}a0([aJ(),aO(),aM(),aQ()]);let lw=bi(a$({metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_interval:be(eQ),trial_interval_count:be(aO()),name:aJ(),description:be(aJ()),recurring_interval:be(em),recurring_interval_count:be(aO()),is_recurring:aQ(),is_archived:aQ(),organization_id:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",trial_interval:"trialInterval",trial_interval_count:"trialIntervalCount",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",is_recurring:"isRecurring",is_archived:"isArchived",organization_id:"organizationId"})));a0([aJ(),aO(),aM(),aQ()]);let lx=bi(a$({duration:eS,type:eT,amount:aO(),currency:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),starts_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),max_redemptions:be(aO()),redemptions_count:aO(),organization_id:aJ(),products:aY(lw)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",starts_at:"startsAt",ends_at:"endsAt",max_redemptions:"maxRedemptions",redemptions_count:"redemptionsCount",organization_id:"organizationId"})));a0([aJ(),aO(),aM(),aQ()]);let ly=bi(a$({duration:eS,duration_in_months:aO(),type:eT,amount:aO(),currency:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),starts_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),max_redemptions:be(aO()),redemptions_count:aO(),organization_id:aJ(),products:aY(lw)}),ba(a=>cr(a,{duration_in_months:"durationInMonths",created_at:"createdAt",modified_at:"modifiedAt",starts_at:"startsAt",ends_at:"endsAt",max_redemptions:"maxRedemptions",redemptions_count:"redemptionsCount",organization_id:"organizationId"})));a0([aJ(),aO(),aM(),aQ()]);let lz=bi(a$({duration:eS,type:eT,basis_points:aO(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),starts_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),max_redemptions:be(aO()),redemptions_count:aO(),organization_id:aJ(),products:aY(lw)}),ba(a=>cr(a,{basis_points:"basisPoints",created_at:"createdAt",modified_at:"modifiedAt",starts_at:"startsAt",ends_at:"endsAt",max_redemptions:"maxRedemptions",redemptions_count:"redemptionsCount",organization_id:"organizationId"})));a0([aJ(),aO(),aM(),aQ()]);let lA=bi(a$({duration:eS,duration_in_months:aO(),type:eT,basis_points:aO(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),name:aJ(),code:be(aJ()),starts_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),max_redemptions:be(aO()),redemptions_count:aO(),organization_id:aJ(),products:aY(lw)}),ba(a=>cr(a,{duration_in_months:"durationInMonths",basis_points:"basisPoints",created_at:"createdAt",modified_at:"modifiedAt",starts_at:"startsAt",ends_at:"endsAt",max_redemptions:"maxRedemptions",redemptions_count:"redemptionsCount",organization_id:"organizationId"}))),lB=a0([ly,lx,lA,lz]);a0([aJ(),aO(),aM(),aQ()]);let lC=bi(a$({duration:eS,type:eT,amount:aO(),currency:bg(aJ(),"usd"),metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:aJ(),code:bc(be(aJ())),startsAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),endsAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),maxRedemptions:bc(be(aO())),products:bc(be(aY(aJ()))),organizationId:bc(be(aJ()))}),ba(a=>cr(a,{startsAt:"starts_at",endsAt:"ends_at",maxRedemptions:"max_redemptions",organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]);let lD=bi(a$({duration:eS,durationInMonths:aO(),type:eT,amount:aO(),currency:bg(aJ(),"usd"),metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:aJ(),code:bc(be(aJ())),startsAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),endsAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),maxRedemptions:bc(be(aO())),products:bc(be(aY(aJ()))),organizationId:bc(be(aJ()))}),ba(a=>cr(a,{durationInMonths:"duration_in_months",startsAt:"starts_at",endsAt:"ends_at",maxRedemptions:"max_redemptions",organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]);let lE=bi(a$({duration:eS,type:eT,basisPoints:aO(),metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:aJ(),code:bc(be(aJ())),startsAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),endsAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),maxRedemptions:bc(be(aO())),products:bc(be(aY(aJ()))),organizationId:bc(be(aJ()))}),ba(a=>cr(a,{basisPoints:"basis_points",startsAt:"starts_at",endsAt:"ends_at",maxRedemptions:"max_redemptions",organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]);let lF=bi(a$({duration:eS,durationInMonths:aO(),type:eT,basisPoints:aO(),metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:aJ(),code:bc(be(aJ())),startsAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),endsAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),maxRedemptions:bc(be(aO())),products:bc(be(aY(aJ()))),organizationId:bc(be(aJ()))}),ba(a=>cr(a,{durationInMonths:"duration_in_months",basisPoints:"basis_points",startsAt:"starts_at",endsAt:"ends_at",maxRedemptions:"max_redemptions",organizationId:"organization_id"}))),lG=a0([lD,lF,lC,lE]);async function lH(a,b,c){let d=ct(b,a=>Y(lG,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/discounts/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"discounts:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,lB),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let lI=a$({id:aJ()});async function lJ(a,b,c){let d=ct(b,a=>Y(lI,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/discounts/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"discounts:delete",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(cl(204,aU()),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let lK=a$({id:aJ()});async function lL(a,b,c){let d=ct(b,a=>Y(lK,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/discounts/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"discounts:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,lB),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let lM=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Name:"name",MinusName:"-name",Code:"code",MinusCode:"-code",RedemptionsCount:"redemptions_count",MinusRedemptionsCount:"-redemptions_count"}),lN=a$({items:aY(lB),pagination:ds});a0([aJ(),aY(aJ())]);let lO=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),query:bc(be(aJ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(lM)))}),ba(a=>cr(a,{organizationId:"organization_id"}))),lP=bi(a$({Result:lN}),ba(a=>cr(a,{Result:"result"})));async function lQ(a,b,c){let d=ct(b,a=>Y(lO,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/discounts/")(),h=bF({limit:e.limit,organization_id:e.organization_id,page:e.page,query:e.query,sorting:e.sorting}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"discounts:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,lP,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(lQ(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}a0([aJ(),aO(),aM(),aQ()]);let lR=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:bc(be(aJ())),code:bc(be(aJ())),startsAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),endsAt:bc(be(bi(aW(),ba(a=>a.toISOString())))),maxRedemptions:bc(be(aO())),duration:bc(be(eS)),durationInMonths:bc(be(aO())),type:bc(be(eT)),amount:bc(be(aO())),currency:bc(be(aJ())),basisPoints:bc(be(aO())),products:bc(be(aY(aJ())))}),ba(a=>cr(a,{startsAt:"starts_at",endsAt:"ends_at",maxRedemptions:"max_redemptions",durationInMonths:"duration_in_months",basisPoints:"basis_points"}))),lS=bi(a$({id:aJ(),discountUpdate:lR}),ba(a=>cr(a,{discountUpdate:"DiscountUpdate"})));async function lT(a,b,c){let d=ct(b,a=>Y(lS,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.DiscountUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/discounts/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"discounts:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,lB),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class lU extends b8{async list(a,b){return dB(new dy(lQ(this,a,b)))}async create(a,b){return s(new dy(lH(this,a,b)))}async get(a,b){return s(new dy(lL(this,a,b)))}async update(a,b){return s(new dy(lT(this,a,b)))}async delete(a,b){return s(new dy(lJ(this,a,b)))}}let lV=bi(a$({benefit_id:aJ(),benefit_grant_id:aJ(),benefit_type:d4}),ba(a=>cr(a,{benefit_id:"benefitId",benefit_grant_id:"benefitGrantId",benefit_type:"benefitType"}))),lW=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("benefit.cycled"),metadata:lV}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),lX=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("benefit.granted"),metadata:lV}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),lY=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("benefit.revoked"),metadata:lV}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),lZ=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("benefit.updated"),metadata:lV}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),l$=bi(a$({customer_id:aJ(),customer_email:aJ(),customer_name:be(aJ()),customer_external_id:be(aJ())}),ba(a=>cr(a,{customer_id:"customerId",customer_email:"customerEmail",customer_name:"customerName",customer_external_id:"customerExternalId"}))),l_=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("customer.created"),metadata:l$}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),l0=bi(a$({customer_id:aJ(),customer_email:aJ(),customer_name:be(aJ()),customer_external_id:be(aJ())}),ba(a=>cr(a,{customer_id:"customerId",customer_email:"customerEmail",customer_name:"customerName",customer_external_id:"customerExternalId"}))),l1=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("customer.deleted"),metadata:l0}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),l2=bi(a$({line1:bc(aJ()),line2:bc(aJ()),postal_code:bc(aJ()),city:bc(aJ()),state:bc(aJ()),country:aJ()}),ba(a=>cr(a,{postal_code:"postalCode"})));a0([aJ(),aO(),aQ()]);let l3=bi(a$({name:bc(be(aJ())),email:bc(be(aJ())),billing_address:bc(be(l2)),tax_id:bc(be(aJ())),metadata:bc(be(a4(aJ(),a0([aJ(),aO(),aQ()]))))}),ba(a=>cr(a,{billing_address:"billingAddress",tax_id:"taxId"}))),l4=bi(a$({customer_id:aJ(),customer_email:aJ(),customer_name:be(aJ()),customer_external_id:be(aJ()),updated_fields:l3}),ba(a=>cr(a,{customer_id:"customerId",customer_email:"customerEmail",customer_name:"customerName",customer_external_id:"customerExternalId",updated_fields:"updatedFields"}))),l5=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("customer.updated"),metadata:l4}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),l6=bi(a$({meter_id:aJ(),units:aO(),rollover:aQ()}),ba(a=>cr(a,{meter_id:"meterId"}))),l7=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("meter.credited"),metadata:l6}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),l8=bi(a$({meter_id:aJ()}),ba(a=>cr(a,{meter_id:"meterId"}))),l9=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("meter.reset"),metadata:l8}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),ma=bi(a$({order_id:aJ(),amount:aO(),currency:aJ(),backfilled:bc(aQ())}),ba(a=>cr(a,{order_id:"orderId"}))),mb=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("order.paid"),metadata:ma}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),mc=bi(a$({order_id:aJ(),refunded_amount:aO(),currency:aJ(),backfilled:bc(aQ())}),ba(a=>cr(a,{order_id:"orderId",refunded_amount:"refundedAmount"}))),md=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("order.refunded"),metadata:mc}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),me=bi(a$({subscription_id:aJ()}),ba(a=>cr(a,{subscription_id:"subscriptionId"}))),mf=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("subscription.cycled"),metadata:me}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),mg=bi(a$({subscription_id:aJ(),old_product_id:aJ(),new_product_id:aJ()}),ba(a=>cr(a,{subscription_id:"subscriptionId",old_product_id:"oldProductId",new_product_id:"newProductId"}))),mh=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("subscription.product_updated"),metadata:mg}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),mi=bi(a$({subscription_id:aJ()}),ba(a=>cr(a,{subscription_id:"subscriptionId"}))),mj=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("subscription.revoked"),metadata:mi}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),mk=bi(a$({subscription_id:aJ(),old_seats:aO(),new_seats:aO(),proration_behavior:aJ()}),ba(a=>cr(a,{subscription_id:"subscriptionId",old_seats:"oldSeats",new_seats:"newSeats",proration_behavior:"prorationBehavior"}))),ml=bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),source:a8("system"),name:a8("subscription.seats_updated"),metadata:mk}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),mm=a0([a2(lW,a$({name:a8("benefit.cycled")})),a2(lX,a$({name:a8("benefit.granted")})),a2(lY,a$({name:a8("benefit.revoked")})),a2(lZ,a$({name:a8("benefit.updated")})),a2(l_,a$({name:a8("customer.created")})),a2(l1,a$({name:a8("customer.deleted")})),a2(l5,a$({name:a8("customer.updated")})),a2(l7,a$({name:a8("meter.credited")})),a2(l9,a$({name:a8("meter.reset")})),a2(mb,a$({name:a8("order.paid")})),a2(md,a$({name:a8("order.refunded")})),a2(mf,a$({name:a8("subscription.cycled")})),a2(mh,a$({name:a8("subscription.product_updated")})),a2(mj,a$({name:a8("subscription.revoked")})),a2(ml,a$({name:a8("subscription.seats_updated")}))]),mn=a$({amount:aJ(),currency:aJ()}),mo=bi(a$({vendor:aJ(),model:aJ(),prompt:bc(be(aJ())),response:bc(be(aJ())),input_tokens:aO(),cached_input_tokens:bc(aO()),output_tokens:aO(),total_tokens:aO()}),ba(a=>cr(a,{input_tokens:"inputTokens",cached_input_tokens:"cachedInputTokens",output_tokens:"outputTokens",total_tokens:"totalTokens"}))),mp=bi(a$({vendor:aJ(),model:aJ(),prompt:bc(be(aJ())),response:bc(be(aJ())),inputTokens:aO(),cachedInputTokens:bc(aO()),outputTokens:aO(),totalTokens:aO()}),ba(a=>cr(a,{inputTokens:"input_tokens",cachedInputTokens:"cached_input_tokens",outputTokens:"output_tokens",totalTokens:"total_tokens"}))),mq=a0([mo,mn,aJ(),aO(),aM(),aQ()]),mr=a0([bi(a$({id:aJ(),timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),organization_id:aJ(),customer_id:be(aJ()),customer:be(dq),external_customer_id:be(aJ()),child_count:bg(aO(),0),parent_id:bc(be(aJ())),name:aJ(),source:a8("user"),metadata:a4(aJ(),mq)}),ba(a=>cr(a,{organization_id:"organizationId",customer_id:"customerId",external_customer_id:"externalCustomerId",child_count:"childCount",parent_id:"parentId"}))),mm]),ms=a$({id:aJ()});async function mt(a,b,c){let d=ct(b,a=>Y(ms,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/events/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"events:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,mr),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}a0([aM(),aJ()]);let mu=a$({amount:a0([aM(),aJ()]),currency:aJ()}),mv=a0([mp,mu,aJ(),aO(),aM(),aQ()]),mw=bi(a$({timestamp:bc(bi(aW(),ba(a=>a.toISOString()))),name:aJ(),organizationId:bc(be(aJ())),externalId:bc(be(aJ())),parentId:bc(be(aJ())),metadata:bc(a4(aJ(),mv)),customerId:aJ()}),ba(a=>cr(a,{organizationId:"organization_id",externalId:"external_id",parentId:"parent_id",customerId:"customer_id"}))),mx=bi(a$({timestamp:bc(bi(aW(),ba(a=>a.toISOString()))),name:aJ(),organizationId:bc(be(aJ())),externalId:bc(be(aJ())),parentId:bc(be(aJ())),metadata:bc(a4(aJ(),mv)),externalCustomerId:aJ()}),ba(a=>cr(a,{organizationId:"organization_id",externalId:"external_id",parentId:"parent_id",externalCustomerId:"external_customer_id"})));a0([mw,mx]);let my=a$({events:aY(a0([mw,mx]))}),mz=a$({inserted:aO(),duplicates:bg(aO(),0)});async function mA(a,b,c){let d=ct(b,a=>Y(my,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/events/ingest")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"events:ingest",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,mz),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let mB=a6({Timestamp:"timestamp",MinusTimestamp:"-timestamp"}),mC=a6({System:"system",User:"user"}),mD=a$({items:aY(mr),pagination:ds});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([mC,aY(mC)]);let mE=bi(a$({filter:bc(be(aJ())),startTimestamp:bc(be(bi(aW(),ba(a=>a.toISOString())))),endTimestamp:bc(be(bi(aW(),ba(a=>a.toISOString())))),organizationId:bc(be(a0([aJ(),aY(aJ())]))),customerId:bc(be(a0([aJ(),aY(aJ())]))),externalCustomerId:bc(be(a0([aJ(),aY(aJ())]))),meterId:bc(be(aJ())),name:bc(be(a0([aJ(),aY(aJ())]))),source:bc(be(a0([mC,aY(mC)]))),query:bc(be(aJ())),parentId:bc(be(aJ())),hierarchical:bg(aQ(),!1),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(mB))),metadata:bc(be(a4(aJ(),d6)))}),ba(a=>cr(a,{startTimestamp:"start_timestamp",endTimestamp:"end_timestamp",organizationId:"organization_id",customerId:"customer_id",externalCustomerId:"external_customer_id",meterId:"meter_id",parentId:"parent_id"}))),mF=bi(a$({Result:mD}),ba(a=>cr(a,{Result:"result"})));async function mG(a,b,c){let d=ct(b,a=>Y(mE,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/events/")(),h=bD(bG({metadata:e.metadata}),bF({customer_id:e.customer_id,end_timestamp:e.end_timestamp,external_customer_id:e.external_customer_id,filter:e.filter,hierarchical:e.hierarchical,limit:e.limit,meter_id:e.meter_id,name:e.name,organization_id:e.organization_id,page:e.page,parent_id:e.parent_id,query:e.query,sorting:e.sorting,source:e.source,start_timestamp:e.start_timestamp})),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"events:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,mF,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(mG(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let mH=a6({Name:"name",MinusName:"-name",Occurrences:"occurrences",MinusOccurrences:"-occurrences",FirstSeen:"first_seen",MinusFirstSeen:"-first_seen",LastSeen:"last_seen",MinusLastSeen:"-last_seen"}),mI=bi(a$({name:aJ(),source:mC,occurrences:aO(),first_seen:bi(cE({offset:!0}),ba(a=>new Date(a))),last_seen:bi(cE({offset:!0}),ba(a=>new Date(a)))}),ba(a=>cr(a,{first_seen:"firstSeen",last_seen:"lastSeen"}))),mJ=a$({items:aY(mI),pagination:ds});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([mC,aY(mC)]);let mK=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),customerId:bc(be(a0([aJ(),aY(aJ())]))),externalCustomerId:bc(be(a0([aJ(),aY(aJ())]))),source:bc(be(a0([mC,aY(mC)]))),query:bc(be(aJ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(mH)))}),ba(a=>cr(a,{organizationId:"organization_id",customerId:"customer_id",externalCustomerId:"external_customer_id"}))),mL=bi(a$({Result:mJ}),ba(a=>cr(a,{Result:"result"})));async function mM(a,b,c){let d=ct(b,a=>Y(mK,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/events/names")(),h=bF({customer_id:e.customer_id,external_customer_id:e.external_customer_id,limit:e.limit,organization_id:e.organization_id,page:e.page,query:e.query,sorting:e.sorting,source:e.source}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"events:list_names",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,mL,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(mM(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}class mN extends b8{async list(a,b){return dB(new dy(mG(this,a,b)))}async listNames(a,b){return dB(new dy(mM(this,a,b)))}async get(a,b){return s(new dy(mt(this,a,b)))}async ingest(a,b){return s(new dy(mA(this,a,b)))}}let mO=bi(a$({number:aO(),chunkStart:aO(),chunkEnd:aO(),checksumSha256Base64:bc(be(aJ()))}),ba(a=>cr(a,{chunkStart:"chunk_start",chunkEnd:"chunk_end",checksumSha256Base64:"checksum_sha256_base64"}))),mP=a$({parts:aY(mO)}),mQ=bi(a$({organizationId:bc(be(aJ())),name:aJ(),mimeType:aJ(),size:aO(),checksumSha256Base64:bc(be(aJ())),upload:mP,service:a8("downloadable"),version:bc(be(aJ()))}),ba(a=>cr(a,{organizationId:"organization_id",mimeType:"mime_type",checksumSha256Base64:"checksum_sha256_base64"}))),mR=bi(a$({organizationId:bc(be(aJ())),name:aJ(),mimeType:aJ(),size:aO(),checksumSha256Base64:bc(be(aJ())),upload:mP,service:a8("organization_avatar"),version:bc(be(aJ()))}),ba(a=>cr(a,{organizationId:"organization_id",mimeType:"mime_type",checksumSha256Base64:"checksum_sha256_base64"}))),mS=bi(a$({organizationId:bc(be(aJ())),name:aJ(),mimeType:aJ(),size:aO(),checksumSha256Base64:bc(be(aJ())),upload:mP,service:a8("product_media"),version:bc(be(aJ()))}),ba(a=>cr(a,{organizationId:"organization_id",mimeType:"mime_type",checksumSha256Base64:"checksum_sha256_base64"}))),mT=a0([a2(mQ,a$({service:a8("downloadable")})),a2(mR,a$({service:a8("organization_avatar")})),a2(mS,a$({service:a8("product_media")}))]),mU=bi(a$({number:aO(),chunk_start:aO(),chunk_end:aO(),checksum_sha256_base64:bc(be(aJ())),url:aJ(),expires_at:bi(cE({offset:!0}),ba(a=>new Date(a))),headers:bc(a4(aJ(),aJ()))}),ba(a=>cr(a,{chunk_start:"chunkStart",chunk_end:"chunkEnd",checksum_sha256_base64:"checksumSha256Base64",expires_at:"expiresAt"}))),mV=a$({id:aJ(),path:aJ(),parts:aY(mU)}),mW=bi(a$({id:aJ(),organization_id:aJ(),name:aJ(),path:aJ(),mime_type:aJ(),size:aO(),storage_version:be(aJ()),checksum_etag:be(aJ()),checksum_sha256_base64:be(aJ()),checksum_sha256_hex:be(aJ()),last_modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),upload:mV,version:be(aJ()),is_uploaded:bg(aQ(),!1),service:g4,size_readable:aJ()}),ba(a=>cr(a,{organization_id:"organizationId",mime_type:"mimeType",storage_version:"storageVersion",checksum_etag:"checksumEtag",checksum_sha256_base64:"checksumSha256Base64",checksum_sha256_hex:"checksumSha256Hex",last_modified_at:"lastModifiedAt",is_uploaded:"isUploaded",size_readable:"sizeReadable"})));async function mX(a,b,c){let d=ct(b,a=>Y(mT,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/files/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"files:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,mW),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let mY=a$({id:aJ()});async function mZ(a,b,c){let d=ct(b,a=>Y(mY,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/files/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"files:delete",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["403","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(cl(204,aU()),cj(403,dV),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let m$=bi(a$({id:aJ(),organization_id:aJ(),name:aJ(),path:aJ(),mime_type:aJ(),size:aO(),storage_version:be(aJ()),checksum_etag:be(aJ()),checksum_sha256_base64:be(aJ()),checksum_sha256_hex:be(aJ()),last_modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),version:be(aJ()),service:a8("downloadable"),is_uploaded:aQ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),size_readable:aJ()}),ba(a=>cr(a,{organization_id:"organizationId",mime_type:"mimeType",storage_version:"storageVersion",checksum_etag:"checksumEtag",checksum_sha256_base64:"checksumSha256Base64",checksum_sha256_hex:"checksumSha256Hex",last_modified_at:"lastModifiedAt",is_uploaded:"isUploaded",created_at:"createdAt",size_readable:"sizeReadable"}))),m_=bi(a$({id:aJ(),organization_id:aJ(),name:aJ(),path:aJ(),mime_type:aJ(),size:aO(),storage_version:be(aJ()),checksum_etag:be(aJ()),checksum_sha256_base64:be(aJ()),checksum_sha256_hex:be(aJ()),last_modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),version:be(aJ()),service:a8("organization_avatar"),is_uploaded:aQ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),size_readable:aJ(),public_url:aJ()}),ba(a=>cr(a,{organization_id:"organizationId",mime_type:"mimeType",storage_version:"storageVersion",checksum_etag:"checksumEtag",checksum_sha256_base64:"checksumSha256Base64",checksum_sha256_hex:"checksumSha256Hex",last_modified_at:"lastModifiedAt",is_uploaded:"isUploaded",created_at:"createdAt",size_readable:"sizeReadable",public_url:"publicUrl"})));a0([a2(m_,a$({service:a8("organization_avatar")})),a2(ev,a$({service:a8("product_media")})),a2(m$,a$({service:a8("downloadable")}))]);let m0=a$({items:aY(a0([a2(m_,a$({service:a8("organization_avatar")})),a2(ev,a$({service:a8("product_media")})),a2(m$,a$({service:a8("downloadable")}))])),pagination:ds});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let m1=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),ids:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10)}),ba(a=>cr(a,{organizationId:"organization_id"}))),m2=bi(a$({Result:m0}),ba(a=>cr(a,{Result:"result"})));async function m3(a,b,c){let d=ct(b,a=>Y(m1,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/files/")(),h=bF({ids:e.ids,limit:e.limit,organization_id:e.organization_id,page:e.page}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"files:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,m2,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(m3(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let m4=a$({name:bc(be(aJ())),version:bc(be(aJ()))}),m5=bi(a$({id:aJ(),filePatch:m4}),ba(a=>cr(a,{filePatch:"FilePatch"}))),m6=a0([a2(ev,a$({service:a8("product_media")})),a2(m_,a$({service:a8("organization_avatar")})),a2(m$,a$({service:a8("downloadable")}))]);async function m7(a,b,c){let d=ct(b,a=>Y(m5,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.FilePatch,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/files/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"files:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["403","404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,m6),cj(403,dV),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}let m8=bi(a$({number:aO(),checksumEtag:aJ(),checksumSha256Base64:be(aJ())}),ba(a=>cr(a,{checksumEtag:"checksum_etag",checksumSha256Base64:"checksum_sha256_base64"}))),m9=a$({id:aJ(),path:aJ(),parts:aY(m8)}),na=bi(a$({id:aJ(),fileUploadCompleted:m9}),ba(a=>cr(a,{fileUploadCompleted:"FileUploadCompleted"}))),nb=a0([a2(ev,a$({service:a8("product_media")})),a2(m_,a$({service:a8("organization_avatar")})),a2(m$,a$({service:a8("downloadable")}))]);async function nc(a,b,c){let d=ct(b,a=>Y(na,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.FileUploadCompleted,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/files/{id}/uploaded")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"files:uploaded",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"POST",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["403","404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,nb),cj(403,dV),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class nd extends b8{async list(a,b){return dB(new dy(m3(this,a,b)))}async create(a,b){return s(new dy(mX(this,a,b)))}async uploaded(a,b){return s(new dy(nc(this,a,b)))}async update(a,b){return s(new dy(m7(this,a,b)))}async delete(a,b){return s(new dy(mZ(this,a,b)))}}async function ne(a,b,c){let d=ct(b,a=>Y(ip,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/license-keys/activate")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"license_keys:activate",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["403","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,it),cj(403,dV),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}async function nf(a,b,c){let d=ct(b,a=>Y(iv,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/license-keys/deactivate")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"license_keys:deactivate",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(cl(204,aU()),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let ng=a$({id:aJ()});async function nh(a,b,c){let d=ct(b,a=>Y(ng,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/license-keys/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"license_keys:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["401","404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,iy),cj(401,iC),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let ni=bi(a$({id:aJ(),activationId:aJ()}),ba(a=>cr(a,{activationId:"activation_id"})));async function nj(a,b,c){let d=ct(b,a=>Y(ni,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g={activation_id:bx("activation_id",e.activation_id,{explode:!1,charEncoding:"percent"}),id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/license-keys/{id}/activations/{activation_id}")(g),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"license_keys:get_activation",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:h,headers:i,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[m,{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["401","404","422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[o,{status:"request-error",request:n}];let p=o.value,[q]=await cn(ck(200,it),cj(401,iC),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});return!q.ok,[q,{status:"complete",request:n,response:p}]}a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let nk=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),benefitId:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10)}),ba(a=>cr(a,{organizationId:"organization_id",benefitId:"benefit_id"}))),nl=bi(a$({Result:iD}),ba(a=>cr(a,{Result:"result"})));async function nm(a,b,c){let d=ct(b,a=>Y(nk,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/license-keys/")(),h=bF({benefit_id:e.benefit_id,limit:e.limit,organization_id:e.organization_id,page:e.page}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"license_keys:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["401","404","422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,nl,{key:"Result"}),cj(401,iC),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(nm(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let nn=bi(a$({status:bc(be(ir)),usage:bg(aO(),0),limitActivations:bc(be(aO())),limitUsage:bc(be(aO())),expiresAt:bc(be(bi(aW(),ba(a=>a.toISOString()))))}),ba(a=>cr(a,{limitActivations:"limit_activations",limitUsage:"limit_usage",expiresAt:"expires_at"}))),no=bi(a$({id:aJ(),licenseKeyUpdate:nn}),ba(a=>cr(a,{licenseKeyUpdate:"LicenseKeyUpdate"})));async function np(a,b,c){let d=ct(b,a=>Y(no,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.LicenseKeyUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/license-keys/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"license_keys:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["401","404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,is),cj(401,iC),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}async function nq(a,b,c){let d=ct(b,a=>Y(iH,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/license-keys/validate")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"license_keys:validate",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,iI),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}class nr extends b8{async list(a,b){return dB(new dy(nm(this,a,b)))}async get(a,b){return s(new dy(nh(this,a,b)))}async update(a,b){return s(new dy(np(this,a,b)))}async getActivation(a,b){return s(new dy(nj(this,a,b)))}async validate(a,b){return s(new dy(nq(this,a,b)))}async activate(a,b){return s(new dy(ne(this,a,b)))}async deactivate(a,b){return s(new dy(nf(this,a,b)))}}a0([aJ(),aO(),aM(),aQ()]),a0([a2(gP,a$({func:a8("avg")})),a2(gP,a$({func:a8("max")})),a2(gP,a$({func:a8("min")})),a2(gP,a$({func:a8("sum")})),a2(gR,a$({func:a8("unique")})),a2(gG,a$({func:a8("count")}))]);let ns=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:aJ(),filter:gM,aggregation:a0([a2(gP,a$({func:a8("avg")})),a2(gP,a$({func:a8("max")})),a2(gP,a$({func:a8("min")})),a2(gP,a$({func:a8("sum")})),a2(gR,a$({func:a8("unique")})),a2(gG,a$({func:a8("count")}))]),organizationId:bc(be(aJ()))}),ba(a=>cr(a,{organizationId:"organization_id"})));async function nt(a,b,c){let d=ct(b,a=>Y(ns,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/meters/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"meters:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,gS),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let nu=a$({id:aJ()});async function nv(a,b,c){let d=ct(b,a=>Y(nu,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/meters/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"meters:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,gS),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let nw=a$({items:aY(gS),pagination:ds}),nx=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Name:"name",MinusName:"-name"});a0([aJ(),aY(aJ())]);let ny=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),query:bc(be(aJ())),isArchived:bc(be(aQ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(nx))),metadata:bc(be(a4(aJ(),d6)))}),ba(a=>cr(a,{organizationId:"organization_id",isArchived:"is_archived"}))),nz=bi(a$({Result:nw}),ba(a=>cr(a,{Result:"result"})));async function nA(a,b,c){let d=ct(b,a=>Y(ny,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/meters/")(),h=bD(bG({metadata:e.metadata}),bF({is_archived:e.is_archived,limit:e.limit,organization_id:e.organization_id,page:e.page,query:e.query,sorting:e.sorting})),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"meters:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,nz,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(nA(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let nB=a$({timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),quantity:aM()}),nC=a$({quantities:aY(nB),total:aM()}),nD=a6({Count:"count",Sum:"sum",Max:"max",Min:"min",Avg:"avg",Unique:"unique"}),nE=a6({Year:"year",Month:"month",Week:"week",Day:"day",Hour:"hour"});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let nF=bi(a$({id:aJ(),startTimestamp:bi(aW(),ba(a=>a.toISOString())),endTimestamp:bi(aW(),ba(a=>a.toISOString())),interval:nE,customerId:bc(be(a0([aJ(),aY(aJ())]))),externalCustomerId:bc(be(a0([aJ(),aY(aJ())]))),customerAggregationFunction:bc(be(nD)),metadata:bc(be(a4(aJ(),d6)))}),ba(a=>cr(a,{startTimestamp:"start_timestamp",endTimestamp:"end_timestamp",customerId:"customer_id",externalCustomerId:"external_customer_id",customerAggregationFunction:"customer_aggregation_function"})));async function nG(a,b,c){let d=ct(b,a=>Y(nF,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},h=f("/v1/meters/{id}/quantities")(g),i=bD(bG({metadata:e.metadata}),bF({customer_aggregation_function:e.customer_aggregation_function,customer_id:e.customer_id,end_timestamp:e.end_timestamp,external_customer_id:e.external_customer_id,interval:e.interval,start_timestamp:e.start_timestamp})),j=new Headers(cs({Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"meters:quantities",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"GET",baseURL:c?.serverURL,path:h,headers:j,query:i,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,nC),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}a0([aJ(),aO(),aM(),aQ()]),a0([a2(gP,a$({func:a8("avg")})),a2(gP,a$({func:a8("max")})),a2(gP,a$({func:a8("min")})),a2(gP,a$({func:a8("sum")})),a2(gR,a$({func:a8("unique")})),a2(gG,a$({func:a8("count")}))]);let nH=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:bc(be(aJ())),filter:bc(be(gM)),aggregation:bc(be(a0([a2(gP,a$({func:a8("avg")})),a2(gP,a$({func:a8("max")})),a2(gP,a$({func:a8("min")})),a2(gP,a$({func:a8("sum")})),a2(gR,a$({func:a8("unique")})),a2(gG,a$({func:a8("count")}))]))),isArchived:bc(be(aQ()))}),ba(a=>cr(a,{isArchived:"is_archived"}))),nI=bi(a$({id:aJ(),meterUpdate:nH}),ba(a=>cr(a,{meterUpdate:"MeterUpdate"})));async function nJ(a,b,c){let d=ct(b,a=>Y(nI,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.MeterUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/meters/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"meters:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,gS),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class nK extends b8{async list(a,b){return dB(new dy(nA(this,a,b)))}async create(a,b){return s(new dy(nt(this,a,b)))}async get(a,b){return s(new dy(nv(this,a,b)))}async update(a,b){return s(new dy(nJ(this,a,b)))}async quantities(a,b){return s(new dy(nG(this,a,b)))}}a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]);let nL=bi(a$({timestamp:bi(cE({offset:!0}),ba(a=>new Date(a))),orders:a0([aO(),aM()]),revenue:a0([aO(),aM()]),net_revenue:a0([aO(),aM()]),cumulative_revenue:a0([aO(),aM()]),net_cumulative_revenue:a0([aO(),aM()]),costs:a0([aO(),aM()]),cumulative_costs:a0([aO(),aM()]),average_order_value:a0([aO(),aM()]),net_average_order_value:a0([aO(),aM()]),average_revenue_per_user:a0([aO(),aM()]),cost_per_user:a0([aO(),aM()]),active_user_by_event:a0([aO(),aM()]),one_time_products:a0([aO(),aM()]),one_time_products_revenue:a0([aO(),aM()]),one_time_products_net_revenue:a0([aO(),aM()]),new_subscriptions:a0([aO(),aM()]),new_subscriptions_revenue:a0([aO(),aM()]),new_subscriptions_net_revenue:a0([aO(),aM()]),renewed_subscriptions:a0([aO(),aM()]),renewed_subscriptions_revenue:a0([aO(),aM()]),renewed_subscriptions_net_revenue:a0([aO(),aM()]),active_subscriptions:a0([aO(),aM()]),monthly_recurring_revenue:a0([aO(),aM()]),committed_monthly_recurring_revenue:a0([aO(),aM()]),checkouts:a0([aO(),aM()]),succeeded_checkouts:a0([aO(),aM()]),checkouts_conversion:a0([aO(),aM()]),canceled_subscriptions:a0([aO(),aM()]),canceled_subscriptions_customer_service:a0([aO(),aM()]),canceled_subscriptions_low_quality:a0([aO(),aM()]),canceled_subscriptions_missing_features:a0([aO(),aM()]),canceled_subscriptions_switched_service:a0([aO(),aM()]),canceled_subscriptions_too_complex:a0([aO(),aM()]),canceled_subscriptions_too_expensive:a0([aO(),aM()]),canceled_subscriptions_unused:a0([aO(),aM()]),canceled_subscriptions_other:a0([aO(),aM()]),gross_margin:a0([aO(),aM()]),gross_margin_percentage:a0([aO(),aM()]),cashflow:a0([aO(),aM()])}),ba(a=>cr(a,{net_revenue:"netRevenue",cumulative_revenue:"cumulativeRevenue",net_cumulative_revenue:"netCumulativeRevenue",cumulative_costs:"cumulativeCosts",average_order_value:"averageOrderValue",net_average_order_value:"netAverageOrderValue",average_revenue_per_user:"averageRevenuePerUser",cost_per_user:"costPerUser",active_user_by_event:"activeUserByEvent",one_time_products:"oneTimeProducts",one_time_products_revenue:"oneTimeProductsRevenue",one_time_products_net_revenue:"oneTimeProductsNetRevenue",new_subscriptions:"newSubscriptions",new_subscriptions_revenue:"newSubscriptionsRevenue",new_subscriptions_net_revenue:"newSubscriptionsNetRevenue",renewed_subscriptions:"renewedSubscriptions",renewed_subscriptions_revenue:"renewedSubscriptionsRevenue",renewed_subscriptions_net_revenue:"renewedSubscriptionsNetRevenue",active_subscriptions:"activeSubscriptions",monthly_recurring_revenue:"monthlyRecurringRevenue",committed_monthly_recurring_revenue:"committedMonthlyRecurringRevenue",succeeded_checkouts:"succeededCheckouts",checkouts_conversion:"checkoutsConversion",canceled_subscriptions:"canceledSubscriptions",canceled_subscriptions_customer_service:"canceledSubscriptionsCustomerService",canceled_subscriptions_low_quality:"canceledSubscriptionsLowQuality",canceled_subscriptions_missing_features:"canceledSubscriptionsMissingFeatures",canceled_subscriptions_switched_service:"canceledSubscriptionsSwitchedService",canceled_subscriptions_too_complex:"canceledSubscriptionsTooComplex",canceled_subscriptions_too_expensive:"canceledSubscriptionsTooExpensive",canceled_subscriptions_unused:"canceledSubscriptionsUnused",canceled_subscriptions_other:"canceledSubscriptionsOther",gross_margin:"grossMargin",gross_margin_percentage:"grossMarginPercentage"}))),nM=a6({Scalar:"scalar",Currency:"currency",CurrencySubCent:"currency_sub_cent",Percentage:"percentage"}),nN=bi(a$({slug:aJ(),display_name:aJ(),type:nM}),ba(a=>cr(a,{display_name:"displayName"}))),nO=bi(a$({orders:nN,revenue:nN,net_revenue:nN,cumulative_revenue:nN,net_cumulative_revenue:nN,costs:nN,cumulative_costs:nN,average_order_value:nN,net_average_order_value:nN,average_revenue_per_user:nN,cost_per_user:nN,active_user_by_event:nN,one_time_products:nN,one_time_products_revenue:nN,one_time_products_net_revenue:nN,new_subscriptions:nN,new_subscriptions_revenue:nN,new_subscriptions_net_revenue:nN,renewed_subscriptions:nN,renewed_subscriptions_revenue:nN,renewed_subscriptions_net_revenue:nN,active_subscriptions:nN,monthly_recurring_revenue:nN,committed_monthly_recurring_revenue:nN,checkouts:nN,succeeded_checkouts:nN,checkouts_conversion:nN,canceled_subscriptions:nN,canceled_subscriptions_customer_service:nN,canceled_subscriptions_low_quality:nN,canceled_subscriptions_missing_features:nN,canceled_subscriptions_switched_service:nN,canceled_subscriptions_too_complex:nN,canceled_subscriptions_too_expensive:nN,canceled_subscriptions_unused:nN,canceled_subscriptions_other:nN,gross_margin:nN,gross_margin_percentage:nN,cashflow:nN}),ba(a=>cr(a,{net_revenue:"netRevenue",cumulative_revenue:"cumulativeRevenue",net_cumulative_revenue:"netCumulativeRevenue",cumulative_costs:"cumulativeCosts",average_order_value:"averageOrderValue",net_average_order_value:"netAverageOrderValue",average_revenue_per_user:"averageRevenuePerUser",cost_per_user:"costPerUser",active_user_by_event:"activeUserByEvent",one_time_products:"oneTimeProducts",one_time_products_revenue:"oneTimeProductsRevenue",one_time_products_net_revenue:"oneTimeProductsNetRevenue",new_subscriptions:"newSubscriptions",new_subscriptions_revenue:"newSubscriptionsRevenue",new_subscriptions_net_revenue:"newSubscriptionsNetRevenue",renewed_subscriptions:"renewedSubscriptions",renewed_subscriptions_revenue:"renewedSubscriptionsRevenue",renewed_subscriptions_net_revenue:"renewedSubscriptionsNetRevenue",active_subscriptions:"activeSubscriptions",monthly_recurring_revenue:"monthlyRecurringRevenue",committed_monthly_recurring_revenue:"committedMonthlyRecurringRevenue",succeeded_checkouts:"succeededCheckouts",checkouts_conversion:"checkoutsConversion",canceled_subscriptions:"canceledSubscriptions",canceled_subscriptions_customer_service:"canceledSubscriptionsCustomerService",canceled_subscriptions_low_quality:"canceledSubscriptionsLowQuality",canceled_subscriptions_missing_features:"canceledSubscriptionsMissingFeatures",canceled_subscriptions_switched_service:"canceledSubscriptionsSwitchedService",canceled_subscriptions_too_complex:"canceledSubscriptionsTooComplex",canceled_subscriptions_too_expensive:"canceledSubscriptionsTooExpensive",canceled_subscriptions_unused:"canceledSubscriptionsUnused",canceled_subscriptions_other:"canceledSubscriptionsOther",gross_margin:"grossMargin",gross_margin_percentage:"grossMarginPercentage"})));a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]),a0([aO(),aM()]);let nP=bi(a$({orders:a0([aO(),aM()]),revenue:a0([aO(),aM()]),net_revenue:a0([aO(),aM()]),cumulative_revenue:a0([aO(),aM()]),net_cumulative_revenue:a0([aO(),aM()]),costs:a0([aO(),aM()]),cumulative_costs:a0([aO(),aM()]),average_order_value:a0([aO(),aM()]),net_average_order_value:a0([aO(),aM()]),average_revenue_per_user:a0([aO(),aM()]),cost_per_user:a0([aO(),aM()]),active_user_by_event:a0([aO(),aM()]),one_time_products:a0([aO(),aM()]),one_time_products_revenue:a0([aO(),aM()]),one_time_products_net_revenue:a0([aO(),aM()]),new_subscriptions:a0([aO(),aM()]),new_subscriptions_revenue:a0([aO(),aM()]),new_subscriptions_net_revenue:a0([aO(),aM()]),renewed_subscriptions:a0([aO(),aM()]),renewed_subscriptions_revenue:a0([aO(),aM()]),renewed_subscriptions_net_revenue:a0([aO(),aM()]),active_subscriptions:a0([aO(),aM()]),monthly_recurring_revenue:a0([aO(),aM()]),committed_monthly_recurring_revenue:a0([aO(),aM()]),checkouts:a0([aO(),aM()]),succeeded_checkouts:a0([aO(),aM()]),checkouts_conversion:a0([aO(),aM()]),canceled_subscriptions:a0([aO(),aM()]),canceled_subscriptions_customer_service:a0([aO(),aM()]),canceled_subscriptions_low_quality:a0([aO(),aM()]),canceled_subscriptions_missing_features:a0([aO(),aM()]),canceled_subscriptions_switched_service:a0([aO(),aM()]),canceled_subscriptions_too_complex:a0([aO(),aM()]),canceled_subscriptions_too_expensive:a0([aO(),aM()]),canceled_subscriptions_unused:a0([aO(),aM()]),canceled_subscriptions_other:a0([aO(),aM()]),gross_margin:a0([aO(),aM()]),gross_margin_percentage:a0([aO(),aM()]),cashflow:a0([aO(),aM()])}),ba(a=>cr(a,{net_revenue:"netRevenue",cumulative_revenue:"cumulativeRevenue",net_cumulative_revenue:"netCumulativeRevenue",cumulative_costs:"cumulativeCosts",average_order_value:"averageOrderValue",net_average_order_value:"netAverageOrderValue",average_revenue_per_user:"averageRevenuePerUser",cost_per_user:"costPerUser",active_user_by_event:"activeUserByEvent",one_time_products:"oneTimeProducts",one_time_products_revenue:"oneTimeProductsRevenue",one_time_products_net_revenue:"oneTimeProductsNetRevenue",new_subscriptions:"newSubscriptions",new_subscriptions_revenue:"newSubscriptionsRevenue",new_subscriptions_net_revenue:"newSubscriptionsNetRevenue",renewed_subscriptions:"renewedSubscriptions",renewed_subscriptions_revenue:"renewedSubscriptionsRevenue",renewed_subscriptions_net_revenue:"renewedSubscriptionsNetRevenue",active_subscriptions:"activeSubscriptions",monthly_recurring_revenue:"monthlyRecurringRevenue",committed_monthly_recurring_revenue:"committedMonthlyRecurringRevenue",succeeded_checkouts:"succeededCheckouts",checkouts_conversion:"checkoutsConversion",canceled_subscriptions:"canceledSubscriptions",canceled_subscriptions_customer_service:"canceledSubscriptionsCustomerService",canceled_subscriptions_low_quality:"canceledSubscriptionsLowQuality",canceled_subscriptions_missing_features:"canceledSubscriptionsMissingFeatures",canceled_subscriptions_switched_service:"canceledSubscriptionsSwitchedService",canceled_subscriptions_too_complex:"canceledSubscriptionsTooComplex",canceled_subscriptions_too_expensive:"canceledSubscriptionsTooExpensive",canceled_subscriptions_unused:"canceledSubscriptionsUnused",canceled_subscriptions_other:"canceledSubscriptionsOther",gross_margin:"grossMargin",gross_margin_percentage:"grossMarginPercentage"}))),nQ=a$({periods:aY(nL),totals:nP,metrics:nO}),nR=/^\d{4}-\d{2}-\d{2}$/;class nS{static today(){return new nS(new Date)}constructor(a){if("string"==typeof a&&!nR.test(a))throw RangeError("RFCDate: date strings must be in the format YYYY-MM-DD: "+a);let b=new Date(a);if(isNaN(+b))throw RangeError("RFCDate: invalid date provided: "+a);if(this.serialized=b.toISOString().slice(0,10),!nR.test(this.serialized))throw TypeError(`RFCDate: failed to build valid date with given value: ${a} serialized to ${this.serialized}`)}toJSON(){return this.toString()}toString(){return this.serialized}}a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([ji,aY(ji)]),a0([aJ(),aY(aJ())]);let nT=bi(a$({startDate:bi(bm(a=>a instanceof nS),ba(a=>a.toString())),endDate:bi(bm(a=>a instanceof nS),ba(a=>a.toString())),timezone:bg(aJ(),"UTC"),interval:nE,organizationId:bc(be(a0([aJ(),aY(aJ())]))),productId:bc(be(a0([aJ(),aY(aJ())]))),billingType:bc(be(a0([ji,aY(ji)]))),customerId:bc(be(a0([aJ(),aY(aJ())])))}),ba(a=>cr(a,{startDate:"start_date",endDate:"end_date",organizationId:"organization_id",productId:"product_id",billingType:"billing_type",customerId:"customer_id"})));async function nU(a,b,c){let d=ct(b,a=>Y(nT,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=f("/v1/metrics/")(),h=bF({billing_type:e.billing_type,customer_id:e.customer_id,end_date:e.end_date,interval:e.interval,organization_id:e.organization_id,product_id:e.product_id,start_date:e.start_date,timezone:e.timezone}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"metrics:get",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[m,{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[o,{status:"request-error",request:n}];let p=o.value,[q]=await cn(ck(200,nQ),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});return!q.ok,[q,{status:"complete",request:n,response:p}]}let nV=bi(a$({max_days:aO()}),ba(a=>cr(a,{max_days:"maxDays"}))),nW=a$({hour:nV,day:nV,week:nV,month:nV,year:nV}),nX=bi(a$({min_date:bi(aJ(),ba(a=>new nS(a))),intervals:nW}),ba(a=>cr(a,{min_date:"minDate"})));async function nY(a,b){let c=f("/v1/metrics/limits")(),d=new Headers(cs({Accept:"application/json"})),e=await cx(a._options.accessToken),g=cw(null==e?{}:{accessToken:e}),h={options:a._options,baseURL:b?.serverURL??a._baseURL??"",operationID:"metrics:limits",oAuth2Scopes:null,resolvedSecurity:g,securitySource:a._options.accessToken,retryConfig:b?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:b?.retryCodes||["429","500","502","503","504"]},i=a._createRequest(h,{security:g,method:"GET",baseURL:b?.serverURL,path:c,headers:d,userAgent:a._options.userAgent,timeoutMs:b?.timeoutMs||a._options.timeoutMs||-1},b);if(!i.ok)return[i,{status:"invalid"}];let j=i.value,k=await a._do(j,{context:h,errorCodes:["4XX","5XX"],retryConfig:h.retryConfig,retryCodes:h.retryCodes});if(!k.ok)return[k,{status:"request-error",request:j}];let l=k.value,[m]=await cn(ck(200,nX),cm("4XX"),cm("5XX"))(l,j);return!m.ok,[m,{status:"complete",request:j,response:l}]}class nZ extends b8{async get(a,b){return s(new dy(nU(this,a,b)))}async limits(a){return s(new dy(nY(this,a)))}}let n$=bi(a$({id:aJ(),slug:aJ(),avatar_url:be(aJ())}),ba(a=>cr(a,{avatar_url:"avatarUrl"}))),n_=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),client_id:aJ(),client_name:be(aJ()),client_uri:be(aJ()),logo_uri:be(aJ()),tos_uri:be(aJ()),policy_uri:be(aJ())}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",client_id:"clientId",client_name:"clientName",client_uri:"clientUri",logo_uri:"logoUri",tos_uri:"tosUri",policy_uri:"policyUri"}))),n0=a6({Openid:"openid",Profile:"profile",Email:"email",UserRead:"user:read",WebRead:"web:read",WebWrite:"web:write",OrganizationsRead:"organizations:read",OrganizationsWrite:"organizations:write",CustomFieldsRead:"custom_fields:read",CustomFieldsWrite:"custom_fields:write",DiscountsRead:"discounts:read",DiscountsWrite:"discounts:write",CheckoutLinksRead:"checkout_links:read",CheckoutLinksWrite:"checkout_links:write",CheckoutsRead:"checkouts:read",CheckoutsWrite:"checkouts:write",TransactionsRead:"transactions:read",TransactionsWrite:"transactions:write",PayoutsRead:"payouts:read",PayoutsWrite:"payouts:write",ProductsRead:"products:read",ProductsWrite:"products:write",BenefitsRead:"benefits:read",BenefitsWrite:"benefits:write",EventsRead:"events:read",EventsWrite:"events:write",MetersRead:"meters:read",MetersWrite:"meters:write",FilesRead:"files:read",FilesWrite:"files:write",SubscriptionsRead:"subscriptions:read",SubscriptionsWrite:"subscriptions:write",CustomersRead:"customers:read",CustomersWrite:"customers:write",WalletsRead:"wallets:read",WalletsWrite:"wallets:write",CustomerMetersRead:"customer_meters:read",CustomerSessionsWrite:"customer_sessions:write",CustomerSeatsRead:"customer_seats:read",CustomerSeatsWrite:"customer_seats:write",OrdersRead:"orders:read",OrdersWrite:"orders:write",RefundsRead:"refunds:read",RefundsWrite:"refunds:write",PaymentsRead:"payments:read",MetricsRead:"metrics:read",WebhooksRead:"webhooks:read",WebhooksWrite:"webhooks:write",ExternalOrganizationsRead:"external_organizations:read",LicenseKeysRead:"license_keys:read",LicenseKeysWrite:"license_keys:write",RepositoriesRead:"repositories:read",RepositoriesWrite:"repositories:write",IssuesRead:"issues:read",IssuesWrite:"issues:write",CustomerPortalRead:"customer_portal:read",CustomerPortalWrite:"customer_portal:write",NotificationsRead:"notifications:read",NotificationsWrite:"notifications:write",NotificationRecipientsRead:"notification_recipients:read",NotificationRecipientsWrite:"notification_recipients:write"}),n1=bi(a$({client:n_,sub_type:a8("organization"),sub:be(n$),scopes:aY(n0),organizations:aY(n$)}),ba(a=>cr(a,{sub_type:"subType"}))),n2=bi(a$({id:aJ(),email:aJ(),avatar_url:be(aJ())}),ba(a=>cr(a,{avatar_url:"avatarUrl"}))),n3=bi(a$({client:n_,sub_type:a8("user"),sub:be(n2),scopes:aY(n0)}),ba(a=>cr(a,{sub_type:"subType"}))),n4=a0([a2(n1,bi(a$({sub_type:a8("organization")}),ba(a=>({subType:a.sub_type})))),a2(n3,bi(a$({sub_type:a8("user")}),ba(a=>({subType:a.sub_type}))))]);async function n5(a,b){let c=f("/v1/oauth2/authorize")(),d=new Headers(cs({Accept:"application/json"})),e=await cx(a._options.accessToken),g=cw(null==e?{}:{accessToken:e}),h={options:a._options,baseURL:b?.serverURL??a._baseURL??"",operationID:"oauth2:authorize",oAuth2Scopes:null,resolvedSecurity:g,securitySource:a._options.accessToken,retryConfig:b?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:b?.retryCodes||["429","500","502","503","504"]},i=a._createRequest(h,{security:g,method:"GET",baseURL:b?.serverURL,path:c,headers:d,userAgent:a._options.userAgent,timeoutMs:b?.timeoutMs||a._options.timeoutMs||-1},b);if(!i.ok)return[i,{status:"invalid"}];let j=i.value,k=await a._do(j,{context:h,errorCodes:["4XX","5XX"],retryConfig:h.retryConfig,retryCodes:h.retryCodes});if(!k.ok)return[k,{status:"request-error",request:j}];let l=k.value,[m]=await cn(ck(200,n4),cm("4XX"),cm("5XX"))(l,j);return!m.ok,[m,{status:"complete",request:j,response:l}]}let n6=a6({AccessToken:"access_token",RefreshToken:"refresh_token"}),n7=bi(a$({token:aJ(),tokenTypeHint:bc(be(n6)),clientId:aJ(),clientSecret:aJ()}),ba(a=>cr(a,{tokenTypeHint:"token_type_hint",clientId:"client_id",clientSecret:"client_secret"}))),n8=a6({User:"user",Organization:"organization"}),n9=a6({AccessToken:"access_token",RefreshToken:"refresh_token"}),oa=bi(a$({active:aQ(),client_id:aJ(),token_type:n9,scope:aJ(),sub_type:n8,sub:aJ(),aud:aJ(),iss:aJ(),exp:aO(),iat:aO()}),ba(a=>cr(a,{client_id:"clientId",token_type:"tokenType",sub_type:"subType"})));async function ob(a,b,c){let d=ct(b,a=>Y(n7,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=Object.entries(d.value||{}).map(([a,b])=>bv(a,b,{charEncoding:"percent"})).join("&"),g=f("/v1/oauth2/introspect")(),h=new Headers(cs({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"})),i={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"oauth2:introspect_token",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},j=a._createRequest(i,{method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!j.ok)return[j,{status:"invalid"}];let k=j.value,l=await a._do(k,{context:i,errorCodes:["4XX","5XX"],retryConfig:i.retryConfig,retryCodes:i.retryCodes});if(!l.ok)return[l,{status:"request-error",request:k}];let m=l.value,[n]=await cn(ck(200,oa),cm("4XX"),cm("5XX"))(m,k);return!n.ok,[n,{status:"complete",request:k,response:m}]}let oc=a6({AccessToken:"access_token",RefreshToken:"refresh_token"}),od=bi(a$({token:aJ(),tokenTypeHint:bc(be(oc)),clientId:aJ(),clientSecret:aJ()}),ba(a=>cr(a,{tokenTypeHint:"token_type_hint",clientId:"client_id",clientSecret:"client_secret"}))),oe=a$({});async function of(a,b,c){let d=ct(b,a=>Y(od,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=Object.entries(d.value||{}).map(([a,b])=>bv(a,b,{charEncoding:"percent"})).join("&"),g=f("/v1/oauth2/revoke")(),h=new Headers(cs({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"})),i={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"oauth2:revoke_token",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},j=a._createRequest(i,{method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!j.ok)return[j,{status:"invalid"}];let k=j.value,l=await a._do(k,{context:i,errorCodes:["4XX","5XX"],retryConfig:i.retryConfig,retryCodes:i.retryCodes});if(!l.ok)return[l,{status:"request-error",request:k}];let m=l.value,[n]=await cn(ck(200,oe),cm("4XX"),cm("5XX"))(m,k);return!n.ok,[n,{status:"complete",request:k,response:m}]}let og=bi(a$({access_token:aJ(),token_type:a8("Bearer"),expires_in:aO(),refresh_token:be(aJ()),scope:aJ(),id_token:aJ()}),ba(a=>cr(a,{access_token:"accessToken",token_type:"tokenType",expires_in:"expiresIn",refresh_token:"refreshToken",id_token:"idToken"}))),oh=bi(a$({grantType:a8("authorization_code"),clientId:aJ(),clientSecret:aJ(),code:aJ(),redirectUri:aJ()}),ba(a=>cr(a,{grantType:"grant_type",clientId:"client_id",clientSecret:"client_secret",redirectUri:"redirect_uri"}))),oi=bi(a$({grantType:a8("refresh_token"),clientId:aJ(),clientSecret:aJ(),refreshToken:aJ()}),ba(a=>cr(a,{grantType:"grant_type",clientId:"client_id",clientSecret:"client_secret",refreshToken:"refresh_token"}))),oj=a6({User:"user",Organization:"organization"}),ok=a0([oh,oi,bi(a$({grantType:a8("web"),clientId:aJ(),clientSecret:aJ(),sessionToken:aJ(),subType:bg(oj,"user"),sub:bc(be(aJ())),scope:bc(be(aJ()))}),ba(a=>cr(a,{grantType:"grant_type",clientId:"client_id",clientSecret:"client_secret",sessionToken:"session_token",subType:"sub_type"})))]);async function ol(a,b,c){let d=ct(b,a=>Y(ok,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=Object.entries(d.value||{}).map(([a,b])=>bv(a,b,{charEncoding:"percent"})).join("&"),g=f("/v1/oauth2/token")(),h=new Headers(cs({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"})),i={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"oauth2:request_token",oAuth2Scopes:null,resolvedSecurity:null,securitySource:null,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},j=a._createRequest(i,{method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!j.ok)return[j,{status:"invalid"}];let k=j.value,l=await a._do(k,{context:i,errorCodes:["4XX","5XX"],retryConfig:i.retryConfig,retryCodes:i.retryCodes});if(!l.ok)return[l,{status:"request-error",request:k}];let m=l.value,[n]=await cn(ck(200,og),cm("4XX"),cm("5XX"))(m,k);return!n.ok,[n,{status:"complete",request:k,response:m}]}let om=a$({sub:aJ(),name:bc(be(aJ()))}),on=a0([bi(a$({sub:aJ(),name:bc(be(aJ())),email:bc(be(aJ())),email_verified:bc(be(aQ()))}),ba(a=>cr(a,{email_verified:"emailVerified"}))),om]);async function oo(a,b){let c=f("/v1/oauth2/userinfo")(),d=new Headers(cs({Accept:"application/json"})),e=await cx(a._options.accessToken),g=cw(null==e?{}:{accessToken:e}),h={options:a._options,baseURL:b?.serverURL??a._baseURL??"",operationID:"oauth2:userinfo",oAuth2Scopes:null,resolvedSecurity:g,securitySource:a._options.accessToken,retryConfig:b?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:b?.retryCodes||["429","500","502","503","504"]},i=a._createRequest(h,{security:g,method:"GET",baseURL:b?.serverURL,path:c,headers:d,userAgent:a._options.userAgent,timeoutMs:b?.timeoutMs||a._options.timeoutMs||-1},b);if(!i.ok)return[i,{status:"invalid"}];let j=i.value,k=await a._do(j,{context:h,errorCodes:["4XX","5XX"],retryConfig:h.retryConfig,retryCodes:h.retryCodes});if(!k.ok)return[k,{status:"request-error",request:j}];let l=k.value,[m]=await cn(ck(200,on),cm("4XX"),cm("5XX"))(l,j);return!m.ok,[m,{status:"complete",request:j,response:l}]}let op=a6({ClientSecretBasic:"client_secret_basic",ClientSecretPost:"client_secret_post",None:"none"}),oq=a6({AuthorizationCode:"authorization_code",RefreshToken:"refresh_token"}),or=bi(a$({redirectUris:aY(aJ()),tokenEndpointAuthMethod:bg(op,"client_secret_post"),grantTypes:bc(aY(oq)),responseTypes:bc(aY(aJ())),scope:bg(aJ(),"openid profile email user:read organizations:read organizations:write custom_fields:read custom_fields:write discounts:read discounts:write checkout_links:read checkout_links:write checkouts:read checkouts:write transactions:read transactions:write payouts:read payouts:write products:read products:write benefits:read benefits:write events:read events:write meters:read meters:write files:read files:write subscriptions:read subscriptions:write customers:read customers:write wallets:read wallets:write customer_meters:read customer_sessions:write customer_seats:read customer_seats:write orders:read orders:write refunds:read refunds:write payments:read metrics:read webhooks:read webhooks:write external_organizations:read license_keys:read license_keys:write repositories:read repositories:write issues:read issues:write customer_portal:read customer_portal:write notifications:read notifications:write notification_recipients:read notification_recipients:write"),clientName:aJ(),clientUri:bc(be(aJ())),logoUri:bc(be(aJ())),tosUri:bc(be(aJ())),policyUri:bc(be(aJ())),defaultSubType:bc(n8)}),ba(a=>cr(a,{redirectUris:"redirect_uris",tokenEndpointAuthMethod:"token_endpoint_auth_method",grantTypes:"grant_types",responseTypes:"response_types",clientName:"client_name",clientUri:"client_uri",logoUri:"logo_uri",tosUri:"tos_uri",policyUri:"policy_uri",defaultSubType:"default_sub_type"})));async function os(a,b,c){let d=ct(b,a=>Y(or,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/oauth2/register")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"oauth2:clients:oauth2:create_client",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,aS()),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let ot=bi(a$({clientId:aJ()}),ba(a=>cr(a,{clientId:"client_id"})));async function ou(a,b,c){let d=ct(b,a=>Y(ot,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={client_id:bx("client_id",d.value.client_id,{explode:!1,charEncoding:"percent"})},g=f("/v1/oauth2/register/{client_id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"oauth2:clients:oauth2:delete_client",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,aS()),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let ov=bi(a$({clientId:aJ()}),ba(a=>cr(a,{clientId:"client_id"})));async function ow(a,b,c){let d=ct(b,a=>Y(ov,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={client_id:bx("client_id",d.value.client_id,{explode:!1,charEncoding:"percent"})},g=f("/v1/oauth2/register/{client_id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"oauth2:clients:oauth2:get_client",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,aS()),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let ox=a6({ClientSecretBasic:"client_secret_basic",ClientSecretPost:"client_secret_post",None:"none"}),oy=a6({AuthorizationCode:"authorization_code",RefreshToken:"refresh_token"}),oz=bi(a$({redirectUris:aY(aJ()),tokenEndpointAuthMethod:bg(ox,"client_secret_post"),grantTypes:bc(aY(oy)),responseTypes:bc(aY(aJ())),scope:bg(aJ(),"openid profile email user:read organizations:read organizations:write custom_fields:read custom_fields:write discounts:read discounts:write checkout_links:read checkout_links:write checkouts:read checkouts:write transactions:read transactions:write payouts:read payouts:write products:read products:write benefits:read benefits:write events:read events:write meters:read meters:write files:read files:write subscriptions:read subscriptions:write customers:read customers:write wallets:read wallets:write customer_meters:read customer_sessions:write customer_seats:read customer_seats:write orders:read orders:write refunds:read refunds:write payments:read metrics:read webhooks:read webhooks:write external_organizations:read license_keys:read license_keys:write repositories:read repositories:write issues:read issues:write customer_portal:read customer_portal:write notifications:read notifications:write notification_recipients:read notification_recipients:write"),clientName:aJ(),clientUri:bc(be(aJ())),logoUri:bc(be(aJ())),tosUri:bc(be(aJ())),policyUri:bc(be(aJ())),defaultSubType:bc(n8),clientId:aJ()}),ba(a=>cr(a,{redirectUris:"redirect_uris",tokenEndpointAuthMethod:"token_endpoint_auth_method",grantTypes:"grant_types",responseTypes:"response_types",clientName:"client_name",clientUri:"client_uri",logoUri:"logo_uri",tosUri:"tos_uri",policyUri:"policy_uri",defaultSubType:"default_sub_type",clientId:"client_id"}))),oA=bi(a$({clientId:aJ(),oAuth2ClientConfigurationUpdate:oz}),ba(a=>cr(a,{clientId:"client_id",oAuth2ClientConfigurationUpdate:"OAuth2ClientConfigurationUpdate"})));async function oB(a,b,c){let d=ct(b,a=>Y(oA,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.OAuth2ClientConfigurationUpdate,{explode:!0}),h={client_id:bx("client_id",e.client_id,{explode:!1,charEncoding:"percent"})},i=f("/v1/oauth2/register/{client_id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"oauth2:clients:oauth2:update_client",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PUT",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,aS()),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class oC extends b8{async create(a,b){return s(new dy(os(this,a,b)))}async get(a,b){return s(new dy(ow(this,a,b)))}async update(a,b){return s(new dy(oB(this,a,b)))}async delete(a,b){return s(new dy(ou(this,a,b)))}}class oD extends b8{get clients(){return this._clients??(this._clients=new oC(this._options))}async authorize(a){return s(new dy(n5(this,a)))}async token(a,b){return s(new dy(ol(this,a,b)))}async revoke(a,b){return s(new dy(of(this,a,b)))}async introspect(a,b){return s(new dy(ob(this,a,b)))}async userinfo(a){return s(new dy(oo(this,a)))}}a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let oE=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),productId:bc(be(a0([aJ(),aY(aJ())])))}),ba(a=>cr(a,{organizationId:"organization_id",productId:"product_id"})));async function oF(a,b,c){let d=ct(b,a=>Y(oE,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=f("/v1/orders/export")(),h=bF({organization_id:e.organization_id,product_id:e.product_id}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"orders:export",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[m,{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[o,{status:"request-error",request:n}];let p=o.value,[q]=await cn(ck(200,aS()),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});return!q.ok,[q,{status:"complete",request:n,response:p}]}let oG=a0([iU,iW]),oH=a$({id:aJ()});async function oI(a,b,c){let d=ct(b,a=>Y(oH,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/orders/{id}/invoice")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"orders:generate_invoice",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(202,aS()),cj(422,oG),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),dp]),a0([aJ(),dp]);let oJ=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),external_id:be(aJ()),email:aJ(),email_verified:aQ(),name:be(aJ()),billing_address:be(dm),tax_id:be(aY(be(a0([aJ(),dp])))),organization_id:aJ(),deleted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),avatar_url:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",external_id:"externalId",email_verified:"emailVerified",billing_address:"billingAddress",tax_id:"taxId",organization_id:"organizationId",deleted_at:"deletedAt",avatar_url:"avatarUrl"}))),oK=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),externalId:be(aJ()),email:aJ(),emailVerified:aQ(),name:be(aJ()),billingAddress:be(dn),taxId:be(aY(be(a0([aJ(),dp])))),organizationId:aJ(),deletedAt:be(bi(aW(),ba(a=>a.toISOString()))),avatarUrl:aJ()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",externalId:"external_id",emailVerified:"email_verified",billingAddress:"billing_address",taxId:"tax_id",organizationId:"organization_id",deletedAt:"deleted_at",avatarUrl:"avatar_url"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let oL=bi(a$({metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_interval:be(eQ),trial_interval_count:be(aO()),name:aJ(),description:be(aJ()),recurring_interval:be(em),recurring_interval_count:be(aO()),is_recurring:aQ(),is_archived:aQ(),organization_id:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",trial_interval:"trialInterval",trial_interval_count:"trialIntervalCount",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",is_recurring:"isRecurring",is_archived:"isArchived",organization_id:"organizationId"}))),oM=bi(a$({metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),trialInterval:be(eQ),trialIntervalCount:be(aO()),name:aJ(),description:be(aJ()),recurringInterval:be(em),recurringIntervalCount:be(aO()),isRecurring:aQ(),isArchived:aQ(),organizationId:aJ()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",recurringInterval:"recurring_interval",recurringIntervalCount:"recurring_interval_count",isRecurring:"is_recurring",isArchived:"is_archived",organizationId:"organization_id"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let oN=bi(a$({metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),amount:aO(),currency:aJ(),recurring_interval:em,recurring_interval_count:aO(),status:i1,current_period_start:bi(cE({offset:!0}),ba(a=>new Date(a))),current_period_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_start:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),cancel_at_period_end:aQ(),canceled_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),started_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ended_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),product_id:aJ(),discount_id:be(aJ()),checkout_id:be(aJ()),seats:bc(be(aO())),customer_cancellation_reason:be(i0),customer_cancellation_comment:be(aJ())}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",current_period_start:"currentPeriodStart",current_period_end:"currentPeriodEnd",trial_start:"trialStart",trial_end:"trialEnd",cancel_at_period_end:"cancelAtPeriodEnd",canceled_at:"canceledAt",started_at:"startedAt",ends_at:"endsAt",ended_at:"endedAt",customer_id:"customerId",product_id:"productId",discount_id:"discountId",checkout_id:"checkoutId",customer_cancellation_reason:"customerCancellationReason",customer_cancellation_comment:"customerCancellationComment"}))),oO=bi(a$({metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),amount:aO(),currency:aJ(),recurringInterval:em,recurringIntervalCount:aO(),status:i1,currentPeriodStart:bi(aW(),ba(a=>a.toISOString())),currentPeriodEnd:be(bi(aW(),ba(a=>a.toISOString()))),trialStart:be(bi(aW(),ba(a=>a.toISOString()))),trialEnd:be(bi(aW(),ba(a=>a.toISOString()))),cancelAtPeriodEnd:aQ(),canceledAt:be(bi(aW(),ba(a=>a.toISOString()))),startedAt:be(bi(aW(),ba(a=>a.toISOString()))),endsAt:be(bi(aW(),ba(a=>a.toISOString()))),endedAt:be(bi(aW(),ba(a=>a.toISOString()))),customerId:aJ(),productId:aJ(),discountId:be(aJ()),checkoutId:be(aJ()),seats:bc(be(aO())),customerCancellationReason:be(i0),customerCancellationComment:be(aJ())}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",recurringInterval:"recurring_interval",recurringIntervalCount:"recurring_interval_count",currentPeriodStart:"current_period_start",currentPeriodEnd:"current_period_end",trialStart:"trial_start",trialEnd:"trial_end",cancelAtPeriodEnd:"cancel_at_period_end",canceledAt:"canceled_at",startedAt:"started_at",endsAt:"ends_at",endedAt:"ended_at",customerId:"customer_id",productId:"product_id",discountId:"discount_id",checkoutId:"checkout_id",customerCancellationReason:"customer_cancellation_reason",customerCancellationComment:"customer_cancellation_comment"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))]),a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))]),a0([eW,eU,e$,eY]),a0([eX,eV,e_,eZ]);let oP=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),status:i6,paid:aQ(),subtotal_amount:aO(),discount_amount:aO(),net_amount:aO(),tax_amount:aO(),total_amount:aO(),applied_balance_amount:aO(),due_amount:aO(),refunded_amount:aO(),refunded_tax_amount:aO(),currency:aJ(),billing_reason:i3,billing_name:be(aJ()),billing_address:be(dm),invoice_number:aJ(),is_invoice_generated:aQ(),seats:bc(be(aO())),customer_id:aJ(),product_id:be(aJ()),discount_id:be(aJ()),subscription_id:be(aJ()),checkout_id:be(aJ()),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),custom_field_data:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))])))),platform_fee_amount:aO(),customer:oJ,user_id:aJ(),product:be(oL),discount:be(a0([eW,eU,e$,eY])),subscription:be(oN),items:aY(i4),description:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",subtotal_amount:"subtotalAmount",discount_amount:"discountAmount",net_amount:"netAmount",tax_amount:"taxAmount",total_amount:"totalAmount",applied_balance_amount:"appliedBalanceAmount",due_amount:"dueAmount",refunded_amount:"refundedAmount",refunded_tax_amount:"refundedTaxAmount",billing_reason:"billingReason",billing_name:"billingName",billing_address:"billingAddress",invoice_number:"invoiceNumber",is_invoice_generated:"isInvoiceGenerated",customer_id:"customerId",product_id:"productId",discount_id:"discountId",subscription_id:"subscriptionId",checkout_id:"checkoutId",custom_field_data:"customFieldData",platform_fee_amount:"platformFeeAmount",user_id:"userId"})));bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),status:i6,paid:aQ(),subtotalAmount:aO(),discountAmount:aO(),netAmount:aO(),taxAmount:aO(),totalAmount:aO(),appliedBalanceAmount:aO(),dueAmount:aO(),refundedAmount:aO(),refundedTaxAmount:aO(),currency:aJ(),billingReason:i3,billingName:be(aJ()),billingAddress:be(dn),invoiceNumber:aJ(),isInvoiceGenerated:aQ(),seats:bc(be(aO())),customerId:aJ(),productId:be(aJ()),discountId:be(aJ()),subscriptionId:be(aJ()),checkoutId:be(aJ()),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),customFieldData:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))])))),platformFeeAmount:aO(),customer:oK,userId:aJ(),product:be(oM),discount:be(a0([eX,eV,e_,eZ])),subscription:be(oO),items:aY(i5),description:aJ()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",subtotalAmount:"subtotal_amount",discountAmount:"discount_amount",netAmount:"net_amount",taxAmount:"tax_amount",totalAmount:"total_amount",appliedBalanceAmount:"applied_balance_amount",dueAmount:"due_amount",refundedAmount:"refunded_amount",refundedTaxAmount:"refunded_tax_amount",billingReason:"billing_reason",billingName:"billing_name",billingAddress:"billing_address",invoiceNumber:"invoice_number",isInvoiceGenerated:"is_invoice_generated",customerId:"customer_id",productId:"product_id",discountId:"discount_id",subscriptionId:"subscription_id",checkoutId:"checkout_id",customFieldData:"custom_field_data",platformFeeAmount:"platform_fee_amount",userId:"user_id"})));let oQ=a$({id:aJ()});async function oR(a,b,c){let d=ct(b,a=>Y(oQ,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/orders/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"orders:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,oP),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let oS=a$({url:aJ()}),oT=a$({id:aJ()});async function oU(a,b,c){let d=ct(b,a=>Y(oT,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/orders/{id}/invoice")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"orders:invoice",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,oS),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let oV=a$({items:aY(oP),pagination:ds}),oW=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Status:"status",MinusStatus:"-status",InvoiceNumber:"invoice_number",MinusInvoiceNumber:"-invoice_number",Amount:"amount",MinusAmount:"-amount",NetAmount:"net_amount",MinusNetAmount:"-net_amount",Customer:"customer",MinusCustomer:"-customer",Product:"product",MinusProduct:"-product",Discount:"discount",MinusDiscount:"-discount",Subscription:"subscription",MinusSubscription:"-subscription"});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([ji,aY(ji)]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let oX=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),productId:bc(be(a0([aJ(),aY(aJ())]))),productBillingType:bc(be(a0([ji,aY(ji)]))),discountId:bc(be(a0([aJ(),aY(aJ())]))),customerId:bc(be(a0([aJ(),aY(aJ())]))),checkoutId:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(oW))),metadata:bc(be(a4(aJ(),d6)))}),ba(a=>cr(a,{organizationId:"organization_id",productId:"product_id",productBillingType:"product_billing_type",discountId:"discount_id",customerId:"customer_id",checkoutId:"checkout_id"}))),oY=bi(a$({Result:oV}),ba(a=>cr(a,{Result:"result"})));async function oZ(a,b,c){let d=ct(b,a=>Y(oX,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/orders/")(),h=bD(bG({metadata:e.metadata}),bF({checkout_id:e.checkout_id,customer_id:e.customer_id,discount_id:e.discount_id,limit:e.limit,organization_id:e.organization_id,page:e.page,product_billing_type:e.product_billing_type,product_id:e.product_id,sorting:e.sorting})),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"orders:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,oY,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(oZ(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let o$=bi(a$({billingName:be(aJ()),billingAddress:be(gb)}),ba(a=>cr(a,{billingName:"billing_name",billingAddress:"billing_address"}))),o_=bi(a$({id:aJ(),orderUpdate:o$}),ba(a=>cr(a,{orderUpdate:"OrderUpdate"})));async function o0(a,b,c){let d=ct(b,a=>Y(o_,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.OrderUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/orders/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"orders:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,oP),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class o1 extends b8{async list(a,b){return dB(new dy(oZ(this,a,b)))}async export(a,b){return s(new dy(oF(this,a,b)))}async get(a,b){return s(new dy(oR(this,a,b)))}async update(a,b){return s(new dy(o0(this,a,b)))}async generateInvoice(a,b){return s(new dy(oI(this,a,b)))}async invoice(a,b){return s(new dy(oU(this,a,b)))}}let o2=bi(a$({order_confirmation:aQ(),subscription_cancellation:aQ(),subscription_confirmation:aQ(),subscription_cycled:aQ(),subscription_past_due:aQ(),subscription_revoked:aQ(),subscription_uncanceled:aQ(),subscription_updated:aQ()}),ba(a=>cr(a,{order_confirmation:"orderConfirmation",subscription_cancellation:"subscriptionCancellation",subscription_confirmation:"subscriptionConfirmation",subscription_cycled:"subscriptionCycled",subscription_past_due:"subscriptionPastDue",subscription_revoked:"subscriptionRevoked",subscription_uncanceled:"subscriptionUncanceled",subscription_updated:"subscriptionUpdated"}))),o3=bi(a$({orderConfirmation:aQ(),subscriptionCancellation:aQ(),subscriptionConfirmation:aQ(),subscriptionCycled:aQ(),subscriptionPastDue:aQ(),subscriptionRevoked:aQ(),subscriptionUncanceled:aQ(),subscriptionUpdated:aQ()}),ba(a=>cr(a,{orderConfirmation:"order_confirmation",subscriptionCancellation:"subscription_cancellation",subscriptionConfirmation:"subscription_confirmation",subscriptionCycled:"subscription_cycled",subscriptionPastDue:"subscription_past_due",subscriptionRevoked:"subscription_revoked",subscriptionUncanceled:"subscription_uncanceled",subscriptionUpdated:"subscription_updated"}))),o4=bi(a$({issue_funding_enabled:bg(aQ(),!1),seat_based_pricing_enabled:bg(aQ(),!1),revops_enabled:bg(aQ(),!1),wallets_enabled:bg(aQ(),!1)}),ba(a=>cr(a,{issue_funding_enabled:"issueFundingEnabled",seat_based_pricing_enabled:"seatBasedPricingEnabled",revops_enabled:"revopsEnabled",wallets_enabled:"walletsEnabled"}))),o5=bi(a$({issueFundingEnabled:bg(aQ(),!1),seatBasedPricingEnabled:bg(aQ(),!1),revopsEnabled:bg(aQ(),!1),walletsEnabled:bg(aQ(),!1)}),ba(a=>cr(a,{issueFundingEnabled:"issue_funding_enabled",seatBasedPricingEnabled:"seat_based_pricing_enabled",revopsEnabled:"revops_enabled",walletsEnabled:"wallets_enabled"}))),o6=bi(a$({new_order:aQ(),new_subscription:aQ()}),ba(a=>cr(a,{new_order:"newOrder",new_subscription:"newSubscription"}))),o7=bi(a$({newOrder:aQ(),newSubscription:aQ()}),ba(a=>cr(a,{newOrder:"new_order",newSubscription:"new_subscription"}))),o8=a6({X:"x",Github:"github",Facebook:"facebook",Instagram:"instagram",Youtube:"youtube",Tiktok:"tiktok",Linkedin:"linkedin",Other:"other"}),o9=a$({platform:o8,url:aJ()}),pa=a$({platform:o8,url:aJ()}),pb=a6({Created:"created",OnboardingStarted:"onboarding_started",InitialReview:"initial_review",OngoingReview:"ongoing_review",Denied:"denied",Active:"active"}),pc=bi(a$({allow_multiple_subscriptions:aQ(),allow_customer_updates:aQ(),proration_behavior:fV,benefit_revocation_grace_period:aO(),prevent_trial_abuse:aQ()}),ba(a=>cr(a,{allow_multiple_subscriptions:"allowMultipleSubscriptions",allow_customer_updates:"allowCustomerUpdates",proration_behavior:"prorationBehavior",benefit_revocation_grace_period:"benefitRevocationGracePeriod",prevent_trial_abuse:"preventTrialAbuse"}))),pd=bi(a$({allowMultipleSubscriptions:aQ(),allowCustomerUpdates:aQ(),prorationBehavior:fV,benefitRevocationGracePeriod:aO(),preventTrialAbuse:aQ()}),ba(a=>cr(a,{allowMultipleSubscriptions:"allow_multiple_subscriptions",allowCustomerUpdates:"allow_customer_updates",prorationBehavior:"proration_behavior",benefitRevocationGracePeriod:"benefit_revocation_grace_period",preventTrialAbuse:"prevent_trial_abuse"}))),pe=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),name:aJ(),slug:aJ(),avatar_url:be(aJ()),proration_behavior:fV,allow_customer_updates:aQ(),email:be(aJ()),website:be(aJ()),socials:aY(o9),status:pb,details_submitted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),feature_settings:be(o4),subscription_settings:pc,notification_settings:o6,customer_email_settings:o2}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",avatar_url:"avatarUrl",proration_behavior:"prorationBehavior",allow_customer_updates:"allowCustomerUpdates",details_submitted_at:"detailsSubmittedAt",feature_settings:"featureSettings",subscription_settings:"subscriptionSettings",notification_settings:"notificationSettings",customer_email_settings:"customerEmailSettings"})));bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),name:aJ(),slug:aJ(),avatarUrl:be(aJ()),prorationBehavior:fV,allowCustomerUpdates:aQ(),email:be(aJ()),website:be(aJ()),socials:aY(pa),status:pb,detailsSubmittedAt:be(bi(aW(),ba(a=>a.toISOString()))),featureSettings:be(o5),subscriptionSettings:pd,notificationSettings:o7,customerEmailSettings:o3}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",avatarUrl:"avatar_url",prorationBehavior:"proration_behavior",allowCustomerUpdates:"allow_customer_updates",detailsSubmittedAt:"details_submitted_at",featureSettings:"feature_settings",subscriptionSettings:"subscription_settings",notificationSettings:"notification_settings",customerEmailSettings:"customer_email_settings"})));let pf=a6({Paddle:"paddle",LemonSqueezy:"lemon_squeezy",Gumroad:"gumroad",Stripe:"stripe",Other:"other"}),pg=bi(a$({about:aJ(),productDescription:aJ(),intendedUse:aJ(),customerAcquisition:aY(aJ()),futureAnnualRevenue:aO(),switching:bg(aQ(),!0),switchingFrom:bc(be(pf)),previousAnnualRevenue:bg(aO(),0)}),ba(a=>cr(a,{productDescription:"product_description",intendedUse:"intended_use",customerAcquisition:"customer_acquisition",futureAnnualRevenue:"future_annual_revenue",switchingFrom:"switching_from",previousAnnualRevenue:"previous_annual_revenue"}))),ph=bi(a$({name:aJ(),slug:aJ(),avatarUrl:bc(be(aJ())),email:bc(be(aJ())),website:bc(be(aJ())),socials:bc(be(aY(pa))),details:bc(be(pg)),featureSettings:bc(be(o5)),subscriptionSettings:bc(be(pd)),notificationSettings:bc(be(o7)),customerEmailSettings:bc(be(o3))}),ba(a=>cr(a,{avatarUrl:"avatar_url",featureSettings:"feature_settings",subscriptionSettings:"subscription_settings",notificationSettings:"notification_settings",customerEmailSettings:"customer_email_settings"})));async function pi(a,b,c){let d=ct(b,a=>Y(ph,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/organizations/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"organizations:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,pe),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let pj=a$({id:aJ()});async function pk(a,b,c){let d=ct(b,a=>Y(pj,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/organizations/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"organizations:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,pe),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let pl=a$({items:aY(pe),pagination:ds}),pm=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Slug:"slug",MinusSlug:"-slug",Name:"name",MinusName:"-name",NextReviewThreshold:"next_review_threshold",MinusNextReviewThreshold:"-next_review_threshold",DaysInStatus:"days_in_status",MinusDaysInStatus:"-days_in_status"}),pn=a$({slug:bc(be(aJ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(pm)))}),po=bi(a$({Result:pl}),ba(a=>cr(a,{Result:"result"})));async function pp(a,b,c){let d=ct(b,a=>Y(pn,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/organizations/")(),h=bF({limit:e.limit,page:e.page,slug:e.slug,sorting:e.sorting}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"organizations:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,po,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(pp(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let pq=bi(a$({name:bc(be(aJ())),avatarUrl:bc(be(aJ())),email:bc(be(aJ())),website:bc(be(aJ())),socials:bc(be(aY(pa))),details:bc(be(pg)),featureSettings:bc(be(o5)),subscriptionSettings:bc(be(pd)),notificationSettings:bc(be(o7)),customerEmailSettings:bc(be(o3))}),ba(a=>cr(a,{avatarUrl:"avatar_url",featureSettings:"feature_settings",subscriptionSettings:"subscription_settings",notificationSettings:"notification_settings",customerEmailSettings:"customer_email_settings"}))),pr=bi(a$({id:aJ(),organizationUpdate:pq}),ba(a=>cr(a,{organizationUpdate:"OrganizationUpdate"})));async function ps(a,b,c){let d=ct(b,a=>Y(pr,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.OrganizationUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/organizations/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"organizations:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["403","404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,pe),cj(403,dV),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class pt extends b8{async list(a,b){return dB(new dy(pp(this,a,b)))}async create(a,b){return s(new dy(pi(this,a,b)))}async get(a,b){return s(new dy(pk(this,a,b)))}async update(a,b){return s(new dy(ps(this,a,b)))}}let pu=a$({brand:aJ(),last4:aJ()}),pv=a6({Pending:"pending",Succeeded:"succeeded",Failed:"failed"}),pw=a0([bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),processor:e0,status:pv,amount:aO(),currency:aJ(),method:a8("card"),decline_reason:be(aJ()),decline_message:be(aJ()),organization_id:aJ(),checkout_id:be(aJ()),order_id:be(aJ()),processor_metadata:bc(a4(aJ(),aS())),method_metadata:pu}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",decline_reason:"declineReason",decline_message:"declineMessage",organization_id:"organizationId",checkout_id:"checkoutId",order_id:"orderId",processor_metadata:"processorMetadata",method_metadata:"methodMetadata"}))),bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),processor:e0,status:pv,amount:aO(),currency:aJ(),method:aJ(),decline_reason:be(aJ()),decline_message:be(aJ()),organization_id:aJ(),checkout_id:be(aJ()),order_id:be(aJ()),processor_metadata:bc(a4(aJ(),aS()))}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",decline_reason:"declineReason",decline_message:"declineMessage",organization_id:"organizationId",checkout_id:"checkoutId",order_id:"orderId",processor_metadata:"processorMetadata"})))]),px=a$({id:aJ()});async function py(a,b,c){let d=ct(b,a=>Y(px,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/payments/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"payments:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,pw),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let pz=a$({items:aY(pw),pagination:ds}),pA=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Status:"status",MinusStatus:"-status",Amount:"amount",MinusAmount:"-amount",Method:"method",MinusMethod:"-method"});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([pv,aY(pv)]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let pB=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),checkoutId:bc(be(a0([aJ(),aY(aJ())]))),orderId:bc(be(a0([aJ(),aY(aJ())]))),status:bc(be(a0([pv,aY(pv)]))),method:bc(be(a0([aJ(),aY(aJ())]))),customerEmail:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(pA)))}),ba(a=>cr(a,{organizationId:"organization_id",checkoutId:"checkout_id",orderId:"order_id",customerEmail:"customer_email"}))),pC=bi(a$({Result:pz}),ba(a=>cr(a,{Result:"result"})));async function pD(a,b,c){let d=ct(b,a=>Y(pB,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/payments/")(),h=bF({checkout_id:e.checkout_id,customer_email:e.customer_email,limit:e.limit,method:e.method,order_id:e.order_id,organization_id:e.organization_id,page:e.page,sorting:e.sorting,status:e.status}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"payments:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,pC,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(pD(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}class pE extends b8{async list(a,b){return dB(new dy(pD(this,a,b)))}async get(a,b){return s(new dy(py(this,a,b)))}}a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]),a0([et,eO]),a0([eu,eP]);let pF=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_interval:be(eQ),trial_interval_count:be(aO()),name:aJ(),description:be(aJ()),recurring_interval:be(em),recurring_interval_count:be(aO()),is_recurring:aQ(),is_archived:aQ(),organization_id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),prices:aY(a0([et,eO])),benefits:aY(c7),medias:aY(ev),attached_custom_fields:aY(fI)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",trial_interval:"trialInterval",trial_interval_count:"trialIntervalCount",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",is_recurring:"isRecurring",is_archived:"isArchived",organization_id:"organizationId",attached_custom_fields:"attachedCustomFields"}))),pG=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),trialInterval:be(eQ),trialIntervalCount:be(aO()),name:aJ(),description:be(aJ()),recurringInterval:be(em),recurringIntervalCount:be(aO()),isRecurring:aQ(),isArchived:aQ(),organizationId:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),prices:aY(a0([eu,eP])),benefits:aY(c8),medias:aY(ew),attachedCustomFields:aY(fJ)}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",recurringInterval:"recurring_interval",recurringIntervalCount:"recurring_interval_count",isRecurring:"is_recurring",isArchived:"is_archived",organizationId:"organization_id",attachedCustomFields:"attached_custom_fields"}))),pH=bi(a$({customFieldId:aJ(),required:aQ()}),ba(a=>cr(a,{customFieldId:"custom_field_id"})));a0([aJ(),aO(),aM(),aQ()]),a0([a2(gq,bi(a$({amountType:a8("metered_unit")}),ba(a=>({amount_type:a.amountType})))),a2(go,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(gr,bi(a$({amountType:a8("seat_based")}),ba(a=>({amount_type:a.amountType})))),a2(gn,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(gp,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))]);let pI=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:aJ(),description:bc(be(aJ())),prices:aY(a0([a2(gq,bi(a$({amountType:a8("metered_unit")}),ba(a=>({amount_type:a.amountType})))),a2(go,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(gr,bi(a$({amountType:a8("seat_based")}),ba(a=>({amount_type:a.amountType})))),a2(gn,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(gp,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))])),medias:bc(be(aY(aJ()))),attachedCustomFields:bc(aY(pH)),organizationId:bc(be(aJ())),recurringInterval:bc(be(aS())),recurringIntervalCount:bc(be(aS()))}),ba(a=>cr(a,{attachedCustomFields:"attached_custom_fields",organizationId:"organization_id",recurringInterval:"recurring_interval",recurringIntervalCount:"recurring_interval_count"})));a0([aJ(),aO(),aM(),aQ()]),a0([a2(gq,bi(a$({amountType:a8("metered_unit")}),ba(a=>({amount_type:a.amountType})))),a2(go,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(gr,bi(a$({amountType:a8("seat_based")}),ba(a=>({amount_type:a.amountType})))),a2(gn,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(gp,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))]);let pJ=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),name:aJ(),description:bc(be(aJ())),prices:aY(a0([a2(gq,bi(a$({amountType:a8("metered_unit")}),ba(a=>({amount_type:a.amountType})))),a2(go,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(gr,bi(a$({amountType:a8("seat_based")}),ba(a=>({amount_type:a.amountType})))),a2(gn,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(gp,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))])),medias:bc(be(aY(aJ()))),attachedCustomFields:bc(aY(pH)),organizationId:bc(be(aJ())),trialInterval:bc(be(eQ)),trialIntervalCount:bc(be(aO())),recurringInterval:em,recurringIntervalCount:bg(aO(),1)}),ba(a=>cr(a,{attachedCustomFields:"attached_custom_fields",organizationId:"organization_id",trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",recurringInterval:"recurring_interval",recurringIntervalCount:"recurring_interval_count"}))),pK=a0([pJ,pI]);async function pL(a,b,c){let d=ct(b,a=>Y(pK,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/products/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"products:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,pF),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let pM=a$({id:aJ()});async function pN(a,b,c){let d=ct(b,a=>Y(pM,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/products/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"products:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,pF),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let pO=a$({items:aY(pF),pagination:ds}),pP=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Name:"name",MinusName:"-name",PriceAmountType:"price_amount_type",MinusPriceAmountType:"-price_amount_type",PriceAmount:"price_amount",MinusPriceAmount:"-price_amount"});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let pQ=bi(a$({id:bc(be(a0([aJ(),aY(aJ())]))),organizationId:bc(be(a0([aJ(),aY(aJ())]))),query:bc(be(aJ())),isArchived:bc(be(aQ())),isRecurring:bc(be(aQ())),benefitId:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(pP))),metadata:bc(be(a4(aJ(),d6)))}),ba(a=>cr(a,{organizationId:"organization_id",isArchived:"is_archived",isRecurring:"is_recurring",benefitId:"benefit_id"}))),pR=bi(a$({Result:pO}),ba(a=>cr(a,{Result:"result"})));async function pS(a,b,c){let d=ct(b,a=>Y(pQ,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/products/")(),h=bD(bG({metadata:e.metadata}),bF({benefit_id:e.benefit_id,id:e.id,is_archived:e.is_archived,is_recurring:e.is_recurring,limit:e.limit,organization_id:e.organization_id,page:e.page,query:e.query,sorting:e.sorting})),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"products:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,pR,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(pS(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let pT=a$({id:aJ()});a0([aJ(),aO(),aM(),aQ()]),a0([a2(gq,bi(a$({amountType:a8("metered_unit")}),ba(a=>({amount_type:a.amountType})))),a2(go,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(gr,bi(a$({amountType:a8("seat_based")}),ba(a=>({amount_type:a.amountType})))),a2(gn,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(gp,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))]),a0([pT,a0([a2(gq,bi(a$({amountType:a8("metered_unit")}),ba(a=>({amount_type:a.amountType})))),a2(go,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(gr,bi(a$({amountType:a8("seat_based")}),ba(a=>({amount_type:a.amountType})))),a2(gn,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(gp,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))])]);let pU=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),trialInterval:bc(be(eQ)),trialIntervalCount:bc(be(aO())),name:bc(be(aJ())),description:bc(be(aJ())),recurringInterval:bc(be(em)),recurringIntervalCount:bc(be(aO())),isArchived:bc(be(aQ())),prices:bc(be(aY(a0([pT,a0([a2(gq,bi(a$({amountType:a8("metered_unit")}),ba(a=>({amount_type:a.amountType})))),a2(go,bi(a$({amountType:a8("fixed")}),ba(a=>({amount_type:a.amountType})))),a2(gr,bi(a$({amountType:a8("seat_based")}),ba(a=>({amount_type:a.amountType})))),a2(gn,bi(a$({amountType:a8("custom")}),ba(a=>({amount_type:a.amountType})))),a2(gp,bi(a$({amountType:a8("free")}),ba(a=>({amount_type:a.amountType}))))])])))),medias:bc(be(aY(aJ()))),attachedCustomFields:bc(be(aY(pH)))}),ba(a=>cr(a,{trialInterval:"trial_interval",trialIntervalCount:"trial_interval_count",recurringInterval:"recurring_interval",recurringIntervalCount:"recurring_interval_count",isArchived:"is_archived",attachedCustomFields:"attached_custom_fields"}))),pV=bi(a$({id:aJ(),productUpdate:pU}),ba(a=>cr(a,{productUpdate:"ProductUpdate"})));async function pW(a,b,c){let d=ct(b,a=>Y(pV,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.ProductUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/products/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"products:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["403","404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,pF),cj(403,dV),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}let pX=a$({benefits:aY(aJ())}),pY=bi(a$({id:aJ(),productBenefitsUpdate:pX}),ba(a=>cr(a,{productBenefitsUpdate:"ProductBenefitsUpdate"})));async function pZ(a,b,c){let d=ct(b,a=>Y(pY,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.ProductBenefitsUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/products/{id}/benefits")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"products:update_benefits",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"POST",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["403","404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,pF),cj(403,dV),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class p$ extends b8{async list(a,b){return dB(new dy(pS(this,a,b)))}async create(a,b){return s(new dy(pL(this,a,b)))}async get(a,b){return s(new dy(pN(this,a,b)))}async update(a,b){return s(new dy(pW(this,a,b)))}async updateBenefits(a,b){return s(new dy(pZ(this,a,b)))}}let p_=a6({Duplicate:"duplicate",Fraudulent:"fraudulent",CustomerRequest:"customer_request",ServiceDisruption:"service_disruption",SatisfactionGuarantee:"satisfaction_guarantee",Other:"other"}),p0=a6({Pending:"pending",Succeeded:"succeeded",Failed:"failed",Canceled:"canceled"});a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]);let p1=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),status:p0,reason:p_,amount:aO(),tax_amount:aO(),currency:aJ(),organization_id:aJ(),order_id:aJ(),subscription_id:be(aJ()),customer_id:aJ(),revoke_benefits:aQ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",tax_amount:"taxAmount",organization_id:"organizationId",order_id:"orderId",subscription_id:"subscriptionId",customer_id:"customerId",revoke_benefits:"revokeBenefits"})));bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),status:p0,reason:p_,amount:aO(),taxAmount:aO(),currency:aJ(),organizationId:aJ(),orderId:aJ(),subscriptionId:be(aJ()),customerId:aJ(),revokeBenefits:aQ()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",taxAmount:"tax_amount",organizationId:"organization_id",orderId:"order_id",subscriptionId:"subscription_id",customerId:"customer_id",revokeBenefits:"revoke_benefits"}))),a0([aJ(),aO(),aM(),aQ()]);let p2=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),orderId:aJ(),reason:p_,amount:aO(),comment:bc(be(aJ())),revokeBenefits:bg(aQ(),!1)}),ba(a=>cr(a,{orderId:"order_id",revokeBenefits:"revoke_benefits"})));class p3 extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="RefundAmountTooHigh"}}let p4=bi(a$({error:a8("RefundAmountTooHigh"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new p3(a,{request:a.request$,response:a.response$,body:a.body$})));class p5 extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="RefundedAlready"}}let p6=bi(a$({error:a8("RefundedAlready"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new p5(a,{request:a.request$,response:a.response$,body:a.body$})));async function p7(a,b,c){let d=ct(b,a=>Y(p2,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/refunds/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"refunds:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["400","403","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,bc(p1)),cl(201,bc(p1)),cj(400,p4),cj(403,p6),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let p8=a$({items:aY(p1),pagination:ds}),p9=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Amount:"amount",MinusAmount:"-amount"});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let qa=bi(a$({id:bc(be(a0([aJ(),aY(aJ())]))),organizationId:bc(be(a0([aJ(),aY(aJ())]))),orderId:bc(be(a0([aJ(),aY(aJ())]))),subscriptionId:bc(be(a0([aJ(),aY(aJ())]))),customerId:bc(be(a0([aJ(),aY(aJ())]))),succeeded:bc(be(aQ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(p9)))}),ba(a=>cr(a,{organizationId:"organization_id",orderId:"order_id",subscriptionId:"subscription_id",customerId:"customer_id"}))),qb=bi(a$({Result:p8}),ba(a=>cr(a,{Result:"result"})));async function qc(a,b,c){let d=ct(b,a=>Y(qa,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/refunds/")(),h=bF({customer_id:e.customer_id,id:e.id,limit:e.limit,order_id:e.order_id,organization_id:e.organization_id,page:e.page,sorting:e.sorting,subscription_id:e.subscription_id,succeeded:e.succeeded}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"refunds:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,qb,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(qc(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}class qd extends b8{async list(a,b){return dB(new dy(qc(this,a,b)))}async create(a,b){return s(new dy(p7(this,a,b)))}}a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),dp]),a0([aJ(),dp]);let qe=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),external_id:be(aJ()),email:aJ(),email_verified:aQ(),name:be(aJ()),billing_address:be(dm),tax_id:be(aY(be(a0([aJ(),dp])))),organization_id:aJ(),deleted_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),avatar_url:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",external_id:"externalId",email_verified:"emailVerified",billing_address:"billingAddress",tax_id:"taxId",organization_id:"organizationId",deleted_at:"deletedAt",avatar_url:"avatarUrl"}))),qf=bi(a$({id:aJ(),createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),externalId:be(aJ()),email:aJ(),emailVerified:aQ(),name:be(aJ()),billingAddress:be(dn),taxId:be(aY(be(a0([aJ(),dp])))),organizationId:aJ(),deletedAt:be(bi(aW(),ba(a=>a.toISOString()))),avatarUrl:aJ()}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",externalId:"external_id",emailVerified:"email_verified",billingAddress:"billing_address",taxId:"tax_id",organizationId:"organization_id",deletedAt:"deleted_at",avatarUrl:"avatar_url"}))),qg=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),consumed_units:aM(),credited_units:aO(),amount:aO(),meter_id:aJ(),meter:gS}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",consumed_units:"consumedUnits",credited_units:"creditedUnits",meter_id:"meterId"}))),qh=bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),consumedUnits:aM(),creditedUnits:aO(),amount:aO(),meterId:aJ(),meter:gT}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",consumedUnits:"consumed_units",creditedUnits:"credited_units",meterId:"meter_id"})));a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aM(),aQ()]),a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))]),a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))]),a0([eW,eU,e$,eY]),a0([eX,eV,e_,eZ]),a0([et,eO]),a0([eu,eP]);let qi=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),amount:aO(),currency:aJ(),recurring_interval:em,recurring_interval_count:aO(),status:i1,current_period_start:bi(cE({offset:!0}),ba(a=>new Date(a))),current_period_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_start:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),trial_end:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),cancel_at_period_end:aQ(),canceled_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),started_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ends_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),ended_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),product_id:aJ(),discount_id:be(aJ()),checkout_id:be(aJ()),seats:bc(be(aO())),customer_cancellation_reason:be(i0),customer_cancellation_comment:be(aJ()),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),custom_field_data:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(cE({offset:!0}),ba(a=>new Date(a)))])))),customer:qe,product:pF,discount:be(a0([eW,eU,e$,eY])),prices:aY(a0([et,eO])),meters:aY(qg)}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",recurring_interval:"recurringInterval",recurring_interval_count:"recurringIntervalCount",current_period_start:"currentPeriodStart",current_period_end:"currentPeriodEnd",trial_start:"trialStart",trial_end:"trialEnd",cancel_at_period_end:"cancelAtPeriodEnd",canceled_at:"canceledAt",started_at:"startedAt",ends_at:"endsAt",ended_at:"endedAt",customer_id:"customerId",product_id:"productId",discount_id:"discountId",checkout_id:"checkoutId",customer_cancellation_reason:"customerCancellationReason",customer_cancellation_comment:"customerCancellationComment",custom_field_data:"customFieldData"})));bi(a$({createdAt:bi(aW(),ba(a=>a.toISOString())),modifiedAt:be(bi(aW(),ba(a=>a.toISOString()))),id:aJ(),amount:aO(),currency:aJ(),recurringInterval:em,recurringIntervalCount:aO(),status:i1,currentPeriodStart:bi(aW(),ba(a=>a.toISOString())),currentPeriodEnd:be(bi(aW(),ba(a=>a.toISOString()))),trialStart:be(bi(aW(),ba(a=>a.toISOString()))),trialEnd:be(bi(aW(),ba(a=>a.toISOString()))),cancelAtPeriodEnd:aQ(),canceledAt:be(bi(aW(),ba(a=>a.toISOString()))),startedAt:be(bi(aW(),ba(a=>a.toISOString()))),endsAt:be(bi(aW(),ba(a=>a.toISOString()))),endedAt:be(bi(aW(),ba(a=>a.toISOString()))),customerId:aJ(),productId:aJ(),discountId:be(aJ()),checkoutId:be(aJ()),seats:bc(be(aO())),customerCancellationReason:be(i0),customerCancellationComment:be(aJ()),metadata:a4(aJ(),a0([aJ(),aO(),aM(),aQ()])),customFieldData:bc(a4(aJ(),be(a0([aJ(),aO(),aQ(),bi(aW(),ba(a=>a.toISOString()))])))),customer:qf,product:pG,discount:be(a0([eX,eV,e_,eZ])),prices:aY(a0([eu,eP])),meters:aY(qh)}),ba(a=>cr(a,{createdAt:"created_at",modifiedAt:"modified_at",recurringInterval:"recurring_interval",recurringIntervalCount:"recurring_interval_count",currentPeriodStart:"current_period_start",currentPeriodEnd:"current_period_end",trialStart:"trial_start",trialEnd:"trial_end",cancelAtPeriodEnd:"cancel_at_period_end",canceledAt:"canceled_at",startedAt:"started_at",endsAt:"ends_at",endedAt:"ended_at",customerId:"customer_id",productId:"product_id",discountId:"discount_id",checkoutId:"checkout_id",customerCancellationReason:"customer_cancellation_reason",customerCancellationComment:"customer_cancellation_comment",customFieldData:"custom_field_data"}))),a0([aJ(),aO(),aM(),aQ()]);let qj=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),productId:aJ(),customerId:aJ()}),ba(a=>cr(a,{productId:"product_id",customerId:"customer_id"})));a0([aJ(),aO(),aM(),aQ()]);let qk=bi(a$({metadata:bc(a4(aJ(),a0([aJ(),aO(),aM(),aQ()]))),productId:aJ(),externalCustomerId:aJ()}),ba(a=>cr(a,{productId:"product_id",externalCustomerId:"external_customer_id"}))),ql=a0([qj,qk]);async function qm(a,b,c){let d=ct(b,a=>Y(ql,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/subscriptions/")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"subscriptions:create",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,qi),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}a0([aJ(),aY(aJ())]);let qn=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())])))}),ba(a=>cr(a,{organizationId:"organization_id"})));async function qo(a,b,c){let d=ct(b,a=>Y(qn,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=f("/v1/subscriptions/export")(),h=bF({organization_id:e.organization_id}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"subscriptions:export",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[m,{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[o,{status:"request-error",request:n}];let p=o.value,[q]=await cn(ck(200,aS()),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});return!q.ok,[q,{status:"complete",request:n,response:p}]}let qp=a$({id:aJ()});async function qq(a,b,c){let d=ct(b,a=>Y(qp,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/subscriptions/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"subscriptions:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,qi),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let qr=a$({items:aY(qi),pagination:ds}),qs=a6({Customer:"customer",MinusCustomer:"-customer",Status:"status",MinusStatus:"-status",StartedAt:"started_at",MinusStartedAt:"-started_at",CurrentPeriodEnd:"current_period_end",MinusCurrentPeriodEnd:"-current_period_end",Amount:"amount",MinusAmount:"-amount",Product:"product",MinusProduct:"-product",Discount:"discount",MinusDiscount:"-discount"});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let qt=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),productId:bc(be(a0([aJ(),aY(aJ())]))),customerId:bc(be(a0([aJ(),aY(aJ())]))),externalCustomerId:bc(be(a0([aJ(),aY(aJ())]))),discountId:bc(be(a0([aJ(),aY(aJ())]))),active:bc(be(aQ())),cancelAtPeriodEnd:bc(be(aQ())),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(qs))),metadata:bc(be(a4(aJ(),bk(()=>d6))))}),ba(a=>cr(a,{organizationId:"organization_id",productId:"product_id",customerId:"customer_id",externalCustomerId:"external_customer_id",discountId:"discount_id",cancelAtPeriodEnd:"cancel_at_period_end"}))),qu=bi(a$({Result:qr}),ba(a=>cr(a,{Result:"result"})));async function qv(a,b,c){let d=ct(b,a=>Y(qt,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/subscriptions/")(),h=bD(bG({metadata:e.metadata}),bF({active:e.active,cancel_at_period_end:e.cancel_at_period_end,customer_id:e.customer_id,discount_id:e.discount_id,external_customer_id:e.external_customer_id,limit:e.limit,organization_id:e.organization_id,page:e.page,product_id:e.product_id,sorting:e.sorting})),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"subscriptions:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,qu,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(qv(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}class qw extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="SubscriptionLocked"}}let qx=bi(a$({error:a8("SubscriptionLocked"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new qw(a,{request:a.request$,response:a.response$,body:a.body$}))),qy=a$({id:aJ()});async function qz(a,b,c){let d=ct(b,a=>Y(qy,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/subscriptions/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"subscriptions:revoke",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["403","404","409","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,qi),cj(403,jA),cj(404,dX),cj(409,qx),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let qA=bi(a$({customerCancellationReason:bc(be(i0)),customerCancellationComment:bc(be(aJ())),cancelAtPeriodEnd:aQ()}),ba(a=>cr(a,{customerCancellationReason:"customer_cancellation_reason",customerCancellationComment:"customer_cancellation_comment",cancelAtPeriodEnd:"cancel_at_period_end"}))),qB=bi(a$({customerCancellationReason:bc(be(i0)),customerCancellationComment:bc(be(aJ())),revoke:a8(!0)}),ba(a=>cr(a,{customerCancellationReason:"customer_cancellation_reason",customerCancellationComment:"customer_cancellation_comment"}))),qC=bi(a$({currentBillingPeriodEnd:bi(aW(),ba(a=>a.toISOString()))}),ba(a=>cr(a,{currentBillingPeriodEnd:"current_billing_period_end"}))),qD=bi(a$({discountId:be(aJ())}),ba(a=>cr(a,{discountId:"discount_id"}))),qE=bi(a$({productId:aJ(),prorationBehavior:bc(be(fV))}),ba(a=>cr(a,{productId:"product_id",prorationBehavior:"proration_behavior"}))),qF=bi(a$({seats:aO(),prorationBehavior:bc(be(fV))}),ba(a=>cr(a,{prorationBehavior:"proration_behavior"}))),qG=a0([qE,qD,bi(a$({trialEnd:bi(aW(),ba(a=>a.toISOString()))}),ba(a=>cr(a,{trialEnd:"trial_end"}))),qF,qC,qA,qB]),qH=bi(a$({id:aJ(),subscriptionUpdate:qG}),ba(a=>cr(a,{subscriptionUpdate:"SubscriptionUpdate"})));async function qI(a,b,c){let d=ct(b,a=>Y(qH,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.SubscriptionUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/subscriptions/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"subscriptions:update",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["403","404","409","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,qi),cj(403,jA),cj(404,dX),cj(409,qx),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class qJ extends b8{async list(a,b){return dB(new dy(qv(this,a,b)))}async create(a,b){return s(new dy(qm(this,a,b)))}async export(a,b){return s(new dy(qo(this,a,b)))}async get(a,b){return s(new dy(qq(this,a,b)))}async update(a,b){return s(new dy(qI(this,a,b)))}async revoke(a,b){return s(new dy(qz(this,a,b)))}}let qK=bi(a$({id:aJ(),created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),customer_id:aJ(),balance:aO(),currency:aJ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",customer_id:"customerId"}))),qL=a$({id:aJ()});async function qM(a,b,c){let d=ct(b,a=>Y(qL,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/wallets/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"wallets:get",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,qK),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let qN=a$({items:aY(qK),pagination:ds}),qO=a6({CreatedAt:"created_at",MinusCreatedAt:"-created_at",Balance:"balance",MinusBalance:"-balance"});a0([aJ(),aY(aJ())]),a0([aJ(),aY(aJ())]);let qP=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),customerId:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10),sorting:bc(be(aY(qO)))}),ba(a=>cr(a,{organizationId:"organization_id",customerId:"customer_id"}))),qQ=bi(a$({Result:qN}),ba(a=>cr(a,{Result:"result"})));async function qR(a,b,c){let d=ct(b,a=>Y(qP,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/wallets/")(),h=bF({customer_id:e.customer_id,limit:e.limit,organization_id:e.organization_id,page:e.page,sorting:e.sorting}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"wallets:list",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,qQ,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(qR(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}class qS extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="MissingPaymentMethodError"}}let qT=bi(a$({error:a8("MissingPaymentMethodError"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new qS(a,{request:a.request$,response:a.response$,body:a.body$})));class qU extends cd{constructor(a,b){super("message"in a&&"string"==typeof a.message?a.message:`API error occurred: ${JSON.stringify(a)}`,b),this.data$=a,this.error=a.error,this.detail=a.detail,this.name="PaymentIntentFailedError"}}let qV=bi(a$({error:a8("PaymentIntentFailedError"),detail:aJ(),request$:bm(a=>a instanceof Request),response$:bm(a=>a instanceof Response),body$:aJ()}),ba(a=>new qU(a,{request:a.request$,response:a.response$,body:a.body$}))),qW=a$({amount:aO(),currency:aJ()}),qX=bi(a$({id:aJ(),walletTopUpCreate:qW}),ba(a=>cr(a,{walletTopUpCreate:"WalletTopUpCreate"})));async function qY(a,b,c){let d=ct(b,a=>Y(qX,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.WalletTopUpCreate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/wallets/{id}/top-up")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"wallets:top_up",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"POST",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["400","402","404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,bc(qK)),cl(201,bc(qK)),cj(400,qV),cj(402,qT),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class qZ extends b8{async list(a,b){return dB(new dy(qR(this,a,b)))}async get(a,b){return s(new dy(qM(this,a,b)))}async topUp(a,b){return s(new dy(qY(this,a,b)))}}let q$=a6({CheckoutCreated:"checkout.created",CheckoutUpdated:"checkout.updated",CustomerCreated:"customer.created",CustomerUpdated:"customer.updated",CustomerDeleted:"customer.deleted",CustomerStateChanged:"customer.state_changed",CustomerSeatAssigned:"customer_seat.assigned",CustomerSeatClaimed:"customer_seat.claimed",CustomerSeatRevoked:"customer_seat.revoked",OrderCreated:"order.created",OrderUpdated:"order.updated",OrderPaid:"order.paid",OrderRefunded:"order.refunded",SubscriptionCreated:"subscription.created",SubscriptionUpdated:"subscription.updated",SubscriptionActive:"subscription.active",SubscriptionCanceled:"subscription.canceled",SubscriptionUncanceled:"subscription.uncanceled",SubscriptionRevoked:"subscription.revoked",RefundCreated:"refund.created",RefundUpdated:"refund.updated",ProductCreated:"product.created",ProductUpdated:"product.updated",BenefitCreated:"benefit.created",BenefitUpdated:"benefit.updated",BenefitGrantCreated:"benefit_grant.created",BenefitGrantCycled:"benefit_grant.cycled",BenefitGrantUpdated:"benefit_grant.updated",BenefitGrantRevoked:"benefit_grant.revoked",OrganizationUpdated:"organization.updated"}),q_=a6({Raw:"raw",Discord:"discord",Slack:"slack"}),q0=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),url:aJ(),format:q_,secret:aJ(),organization_id:aJ(),events:aY(q$),enabled:aQ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",organization_id:"organizationId"}))),q1=bi(a$({url:aJ(),secret:bc(be(aJ())),format:q_,events:aY(q$),organizationId:bc(be(aJ()))}),ba(a=>cr(a,{organizationId:"organization_id"})));async function q2(a,b,c){let d=ct(b,a=>Y(q1,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=bw("body",d.value,{explode:!0}),g=f("/v1/webhooks/endpoints")(),h=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"webhooks:create_webhook_endpoint",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:e,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(201,q0),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let q3=a$({id:aJ()});async function q4(a,b,c){let d=ct(b,a=>Y(q3,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/webhooks/endpoints/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"webhooks:delete_webhook_endpoint",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"DELETE",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(cl(204,aU()),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let q5=a$({id:aJ()});async function q6(a,b,c){let d=ct(b,a=>Y(q5,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/webhooks/endpoints/{id}")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"webhooks:get_webhook_endpoint",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"GET",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,q0),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let q7=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),last_http_code:bc(be(aO())),succeeded:bc(be(aQ())),skipped:aQ(),payload:be(aJ()),type:q$,is_archived:aQ()}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",last_http_code:"lastHttpCode",is_archived:"isArchived"}))),q8=bi(a$({created_at:bi(cE({offset:!0}),ba(a=>new Date(a))),modified_at:be(bi(cE({offset:!0}),ba(a=>new Date(a)))),id:aJ(),succeeded:aQ(),http_code:be(aO()),response:be(aJ()),webhook_event:q7}),ba(a=>cr(a,{created_at:"createdAt",modified_at:"modifiedAt",http_code:"httpCode",webhook_event:"webhookEvent"}))),q9=a$({items:aY(q8),pagination:ds});a0([aJ(),aY(aJ())]);let ra=bi(a$({endpointId:bc(be(a0([aJ(),aY(aJ())]))),startTimestamp:bc(be(bi(aW(),ba(a=>a.toISOString())))),endTimestamp:bc(be(bi(aW(),ba(a=>a.toISOString())))),page:bg(aO(),1),limit:bg(aO(),10)}),ba(a=>cr(a,{endpointId:"endpoint_id",startTimestamp:"start_timestamp",endTimestamp:"end_timestamp"}))),rb=bi(a$({Result:q9}),ba(a=>cr(a,{Result:"result"})));async function rc(a,b,c){let d=ct(b,a=>Y(ra,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/webhooks/deliveries")(),h=bF({end_timestamp:e.end_timestamp,endpoint_id:e.endpoint_id,limit:e.limit,page:e.page,start_timestamp:e.start_timestamp}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"webhooks:list_webhook_deliveries",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,rb,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(rc(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let rd=a$({items:aY(q0),pagination:ds});a0([aJ(),aY(aJ())]);let re=bi(a$({organizationId:bc(be(a0([aJ(),aY(aJ())]))),page:bg(aO(),1),limit:bg(aO(),10)}),ba(a=>cr(a,{organizationId:"organization_id"}))),rf=bi(a$({Result:rd}),ba(a=>cr(a,{Result:"result"})));async function rg(a,b,c){let d=ct(b,a=>Y(re,a),"Input validation failed");if(!d.ok)return[dA(d),{status:"invalid"}];let e=d.value,g=f("/v1/webhooks/endpoints")(),h=bF({limit:e.limit,organization_id:e.organization_id,page:e.page}),i=new Headers(cs({Accept:"application/json"})),j=await cx(a._options.accessToken),k=cw(null==j?{}:{accessToken:j}),l={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"webhooks:list_webhook_endpoints",oAuth2Scopes:null,resolvedSecurity:k,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},m=a._createRequest(l,{security:k,method:"GET",baseURL:c?.serverURL,path:g,headers:i,query:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!m.ok)return[dA(m),{status:"invalid"}];let n=m.value,o=await a._do(n,{context:l,errorCodes:["422","4XX","5XX"],retryConfig:l.retryConfig,retryCodes:l.retryCodes});if(!o.ok)return[dA(o),{status:"request-error",request:n}];let p=o.value,[q,r]=await cn(ck(200,rf,{key:"Result"}),cj(422,cB),cm("4XX"),cm("5XX"))(p,n,{extraFields:{HttpMeta:{Response:p,Request:n}}});if(!q.ok)return[dA(q),{status:"complete",request:n,response:p}];let s={...q,...(d=>{let e=b?.page??1,f=e+1,g=bH(d,"pagination.max_page");if("number"!=typeof g||g<=e||!d)return{next:()=>null};let h=bH(d,"items");if(!Array.isArray(h)||!h.length)return{next:()=>null};let i=b?.limit??10;return h.length<i?{next:()=>null}:{next:()=>new dy(rg(a,{...b,page:f},c)),"~next":{page:f}}})(r)};return[{...s,...dz(s,a=>!a.ok)},{status:"complete",request:n,response:p}]}let rh=a$({id:aJ()});async function ri(a,b,c){let d=ct(b,a=>Y(rh,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/webhooks/events/{id}/redeliver")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"webhooks:redeliver_webhook_event",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"POST",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(202,aS()),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let rj=a$({id:aJ()});async function rk(a,b,c){let d=ct(b,a=>Y(rj,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e={id:bx("id",d.value.id,{explode:!1,charEncoding:"percent"})},g=f("/v1/webhooks/endpoints/{id}/secret")(e),h=new Headers(cs({Accept:"application/json"})),i=await cx(a._options.accessToken),j=cw(null==i?{}:{accessToken:i}),k={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"webhooks:reset_webhook_endpoint_secret",oAuth2Scopes:null,resolvedSecurity:j,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},l=a._createRequest(k,{security:j,method:"PATCH",baseURL:c?.serverURL,path:g,headers:h,body:null,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!l.ok)return[l,{status:"invalid"}];let m=l.value,n=await a._do(m,{context:k,errorCodes:["404","422","4XX","5XX"],retryConfig:k.retryConfig,retryCodes:k.retryCodes});if(!n.ok)return[n,{status:"request-error",request:m}];let o=n.value,[p]=await cn(ck(200,q0),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(o,m,{extraFields:{HttpMeta:{Response:o,Request:m}}});return!p.ok,[p,{status:"complete",request:m,response:o}]}let rl=a$({url:bc(be(aJ())),secret:bc(be(aJ())),format:bc(be(q_)),events:bc(be(aY(q$))),enabled:bc(be(aQ()))}),rm=bi(a$({id:aJ(),webhookEndpointUpdate:rl}),ba(a=>cr(a,{webhookEndpointUpdate:"WebhookEndpointUpdate"})));async function rn(a,b,c){let d=ct(b,a=>Y(rm,a),"Input validation failed");if(!d.ok)return[d,{status:"invalid"}];let e=d.value,g=bw("body",e.WebhookEndpointUpdate,{explode:!0}),h={id:bx("id",e.id,{explode:!1,charEncoding:"percent"})},i=f("/v1/webhooks/endpoints/{id}")(h),j=new Headers(cs({"Content-Type":"application/json",Accept:"application/json"})),k=await cx(a._options.accessToken),l=cw(null==k?{}:{accessToken:k}),m={options:a._options,baseURL:c?.serverURL??a._baseURL??"",operationID:"webhooks:update_webhook_endpoint",oAuth2Scopes:null,resolvedSecurity:l,securitySource:a._options.accessToken,retryConfig:c?.retries||a._options.retryConfig||{strategy:"none"},retryCodes:c?.retryCodes||["429","500","502","503","504"]},n=a._createRequest(m,{security:l,method:"PATCH",baseURL:c?.serverURL,path:i,headers:j,body:g,userAgent:a._options.userAgent,timeoutMs:c?.timeoutMs||a._options.timeoutMs||-1},c);if(!n.ok)return[n,{status:"invalid"}];let o=n.value,p=await a._do(o,{context:m,errorCodes:["404","422","4XX","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!p.ok)return[p,{status:"request-error",request:o}];let q=p.value,[r]=await cn(ck(200,q0),cj(404,dX),cj(422,cB),cm("4XX"),cm("5XX"))(q,o,{extraFields:{HttpMeta:{Response:q,Request:o}}});return!r.ok,[r,{status:"complete",request:o,response:q}]}class ro extends b8{async listWebhookEndpoints(a,b){return dB(new dy(rg(this,a,b)))}async createWebhookEndpoint(a,b){return s(new dy(q2(this,a,b)))}async getWebhookEndpoint(a,b){return s(new dy(q6(this,a,b)))}async updateWebhookEndpoint(a,b){return s(new dy(rn(this,a,b)))}async deleteWebhookEndpoint(a,b){return s(new dy(q4(this,a,b)))}async resetWebhookEndpointSecret(a,b){return s(new dy(rk(this,a,b)))}async listWebhookDeliveries(a,b){return dB(new dy(rc(this,a,b)))}async redeliverWebhookEvent(a,b){return s(new dy(ri(this,a,b)))}}class rp extends b8{get organizations(){return this._organizations??(this._organizations=new pt(this._options))}get subscriptions(){return this._subscriptions??(this._subscriptions=new qJ(this._options))}get oauth2(){return this._oauth2??(this._oauth2=new oD(this._options))}get benefits(){return this._benefits??(this._benefits=new ei(this._options))}get benefitGrants(){return this._benefitGrants??(this._benefitGrants=new dD(this._options))}get webhooks(){return this._webhooks??(this._webhooks=new ro(this._options))}get products(){return this._products??(this._products=new p$(this._options))}get orders(){return this._orders??(this._orders=new o1(this._options))}get refunds(){return this._refunds??(this._refunds=new qd(this._options))}get checkouts(){return this._checkouts??(this._checkouts=new gE(this._options))}get files(){return this._files??(this._files=new nd(this._options))}get metrics(){return this._metrics??(this._metrics=new nZ(this._options))}get licenseKeys(){return this._licenseKeys??(this._licenseKeys=new nr(this._options))}get checkoutLinks(){return this._checkoutLinks??(this._checkoutLinks=new fj(this._options))}get customFields(){return this._customFields??(this._customFields=new lv(this._options))}get discounts(){return this._discounts??(this._discounts=new lU(this._options))}get customers(){return this._customers??(this._customers=new kO(this._options))}get customerPortal(){return this._customerPortal??(this._customerPortal=new j9(this._options))}get customerSeats(){return this._customerSeats??(this._customerSeats=new k0(this._options))}get customerSessions(){return this._customerSessions??(this._customerSessions=new k5(this._options))}get events(){return this._events??(this._events=new mN(this._options))}get meters(){return this._meters??(this._meters=new nK(this._options))}get customerMeters(){return this._customerMeters??(this._customerMeters=new g0(this._options))}get payments(){return this._payments??(this._payments=new pE(this._options))}get wallets(){return this._wallets??(this._wallets=new qZ(this._options))}}},6282:(a,b,c)=>{c.d(b,{o:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"InsertQueryNode"===a.kind,create:(a,b,c)=>(0,d.CN)({kind:"InsertQueryNode",into:a,...b&&{with:b},replace:c}),createWithoutInto:()=>(0,d.CN)({kind:"InsertQueryNode"}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},6424:(a,b,c)=>{c.d(b,{c:()=>D});var d=c(31866),e=c(17938);let f=(0,e.CN)({is:a=>"SelectModifierNode"===a.kind,create:(a,b)=>(0,e.CN)({kind:"SelectModifierNode",modifier:a,of:b}),createWithExpression:a=>(0,e.CN)({kind:"SelectModifierNode",rawModifier:a})});var g=c(18538),h=c(44228),i=c(23727),j=c(84699),k=c(83021),l=c(93229),m=c(80955),n=c(68479);let o=(0,e.CN)({is:a=>"OffsetNode"===a.kind,create:a=>(0,e.CN)({kind:"OffsetNode",offset:a})}),p=(0,e.CN)({is:a=>"GroupByItemNode"===a.kind,create:a=>(0,e.CN)({kind:"GroupByItemNode",groupBy:a})});var q=c(22066),r=c(4601),s=c(69679),t=c(97946),u=c(63860);function v(a,b,c){return(0,e.Tn)(b)&&(b=b((0,q.O)())),(0,e.MH)(b)||(b=[b]),b.map(b=>t.i.create(a,(0,u.YK)(b),c))}var w=c(16469),x=c(97791),y=c(4787),z=c(84605);let A={create:(a,b)=>({kind:"FetchNode",rowCount:z.q.create(a),modifier:b})};var B=c(25880);class C{#c;constructor(a){this.#c=(0,e.CN)(a)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...a){return new C({...this.#c,queryNode:l.L.cloneWithWhere(this.#c.queryNode,(0,w.GB)(a))})}whereRef(a,b,c){return new C({...this.#c,queryNode:l.L.cloneWithWhere(this.#c.queryNode,(0,w.vC)(a,b,c))})}having(...a){return new C({...this.#c,queryNode:k.L.cloneWithHaving(this.#c.queryNode,(0,w.GB)(a))})}havingRef(a,b,c){return new C({...this.#c,queryNode:k.L.cloneWithHaving(this.#c.queryNode,(0,w.vC)(a,b,c))})}select(a){return new C({...this.#c,queryNode:k.L.cloneWithSelections(this.#c.queryNode,(0,i.G)(a))})}distinctOn(a){return new C({...this.#c,queryNode:k.L.cloneWithDistinctOn(this.#c.queryNode,(0,j.kU)(a))})}modifyFront(a){return new C({...this.#c,queryNode:k.L.cloneWithFrontModifier(this.#c.queryNode,f.createWithExpression(a.toOperationNode()))})}modifyEnd(a){return new C({...this.#c,queryNode:l.L.cloneWithEndModifier(this.#c.queryNode,f.createWithExpression(a.toOperationNode()))})}distinct(){return new C({...this.#c,queryNode:k.L.cloneWithFrontModifier(this.#c.queryNode,f.create("Distinct"))})}forUpdate(a){return new C({...this.#c,queryNode:l.L.cloneWithEndModifier(this.#c.queryNode,f.create("ForUpdate",a?(0,e._j)(a).map(h.M$):void 0))})}forShare(a){return new C({...this.#c,queryNode:l.L.cloneWithEndModifier(this.#c.queryNode,f.create("ForShare",a?(0,e._j)(a).map(h.M$):void 0))})}forKeyShare(a){return new C({...this.#c,queryNode:l.L.cloneWithEndModifier(this.#c.queryNode,f.create("ForKeyShare",a?(0,e._j)(a).map(h.M$):void 0))})}forNoKeyUpdate(a){return new C({...this.#c,queryNode:l.L.cloneWithEndModifier(this.#c.queryNode,f.create("ForNoKeyUpdate",a?(0,e._j)(a).map(h.M$):void 0))})}skipLocked(){return new C({...this.#c,queryNode:l.L.cloneWithEndModifier(this.#c.queryNode,f.create("SkipLocked"))})}noWait(){return new C({...this.#c,queryNode:l.L.cloneWithEndModifier(this.#c.queryNode,f.create("NoWait"))})}selectAll(a){return new C({...this.#c,queryNode:k.L.cloneWithSelections(this.#c.queryNode,(0,i.J)(a))})}innerJoin(...a){return this.#d("InnerJoin",a)}leftJoin(...a){return this.#d("LeftJoin",a)}rightJoin(...a){return this.#d("RightJoin",a)}fullJoin(...a){return this.#d("FullJoin",a)}crossJoin(...a){return this.#d("CrossJoin",a)}innerJoinLateral(...a){return this.#d("LateralInnerJoin",a)}leftJoinLateral(...a){return this.#d("LateralLeftJoin",a)}crossJoinLateral(...a){return this.#d("LateralCrossJoin",a)}crossApply(...a){return this.#d("CrossApply",a)}outerApply(...a){return this.#d("OuterApply",a)}#d(a,b){return new C({...this.#c,queryNode:l.L.cloneWithJoin(this.#c.queryNode,(0,g.a)(a,b))})}orderBy(...a){return new C({...this.#c,queryNode:l.L.cloneWithOrderByItems(this.#c.queryNode,(0,m.xk)(a))})}groupBy(a){var b;return new C({...this.#c,queryNode:k.L.cloneWithGroupByItems(this.#c.queryNode,(b=a,b=(0,e.Tn)(b)?b((0,q.A)()):b,(0,j.kU)(b).map(p.create)))})}limit(a){return new C({...this.#c,queryNode:k.L.cloneWithLimit(this.#c.queryNode,n.a.create((0,y.$s)(a)))})}offset(a){return new C({...this.#c,queryNode:k.L.cloneWithOffset(this.#c.queryNode,o.create((0,y.$s)(a)))})}fetch(a,b="only"){return new C({...this.#c,queryNode:k.L.cloneWithFetch(this.#c.queryNode,function(a,b){var c;if(!(0,e.Et)(a)&&!(0,e.sI)(a))throw Error(`Invalid fetch row count: ${a}`);if("only"!==(c=b)&&"with ties"!==c)throw Error(`Invalid fetch modifier: ${b}`);return A.create(a,b)}(a,b))})}top(a,b){return new C({...this.#c,queryNode:l.L.cloneWithTop(this.#c.queryNode,(0,B.f)(a,b))})}union(a){return new C({...this.#c,queryNode:k.L.cloneWithSetOperations(this.#c.queryNode,v("union",a,!1))})}unionAll(a){return new C({...this.#c,queryNode:k.L.cloneWithSetOperations(this.#c.queryNode,v("union",a,!0))})}intersect(a){return new C({...this.#c,queryNode:k.L.cloneWithSetOperations(this.#c.queryNode,v("intersect",a,!1))})}intersectAll(a){return new C({...this.#c,queryNode:k.L.cloneWithSetOperations(this.#c.queryNode,v("intersect",a,!0))})}except(a){return new C({...this.#c,queryNode:k.L.cloneWithSetOperations(this.#c.queryNode,v("except",a,!1))})}exceptAll(a){return new C({...this.#c,queryNode:k.L.cloneWithSetOperations(this.#c.queryNode,v("except",a,!0))})}as(a){return new E(this,a)}clearSelect(){return new C({...this.#c,queryNode:k.L.cloneWithoutSelections(this.#c.queryNode)})}clearWhere(){return new C({...this.#c,queryNode:l.L.cloneWithoutWhere(this.#c.queryNode)})}clearLimit(){return new C({...this.#c,queryNode:k.L.cloneWithoutLimit(this.#c.queryNode)})}clearOffset(){return new C({...this.#c,queryNode:k.L.cloneWithoutOffset(this.#c.queryNode)})}clearOrderBy(){return new C({...this.#c,queryNode:l.L.cloneWithoutOrderBy(this.#c.queryNode)})}clearGroupBy(){return new C({...this.#c,queryNode:k.L.cloneWithoutGroupBy(this.#c.queryNode)})}$call(a){return a(this)}$if(a,b){return a?b(this):new C({...this.#c})}$castTo(){return new C(this.#c)}$narrowType(){return new C(this.#c)}$assertType(){return new C(this.#c)}$asTuple(){return new x.Is(this.toOperationNode())}$asScalar(){return new x.Is(this.toOperationNode())}withPlugin(a){return new C({...this.#c,executor:this.#c.executor.withPlugin(a)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let a=this.compile();return(await this.#c.executor.executeQuery(a)).rows}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=r.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,r.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#c.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new C({...this.#c,queryNode:l.L.cloneWithExplain(this.#c.queryNode,a,b)});return await c.execute()}}function D(a){return new C(a)}class E{#e;#b;constructor(a,b){this.#e=a,this.#b=b}get expression(){return this.#e}get alias(){return this.#b}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return d.N.create(this.#e.toOperationNode(),s.O.create(this.#b))}}},6852:(a,b,c)=>{c.d(b,{KM:()=>i,vE:()=>l,xQ:()=>k});var d=c(94329),e=c(58941),f=c(90091),g=c(3763);class h extends g.u{static [d.i]="PgTimestampBuilder";constructor(a,b,c){super(a,"date","PgTimestamp"),this.config.withTimezone=b,this.config.precision=c}build(a){return new i(a,this.config)}}class i extends f.Kl{static [d.i]="PgTimestamp";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":` (${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=a=>new Date(this.withTimezone?a:a+"+0000");mapToDriverValue=a=>a.toISOString()}class j extends g.u{static [d.i]="PgTimestampStringBuilder";constructor(a,b,c){super(a,"string","PgTimestampString"),this.config.withTimezone=b,this.config.precision=c}build(a){return new k(a,this.config)}}class k extends f.Kl{static [d.i]="PgTimestampString";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}}function l(a,b={}){let{name:c,config:d}=(0,e.Ll)(a,b);return d?.mode==="string"?new j(c,d.withTimezone??!1,d.precision):new h(c,d?.withTimezone??!1,d?.precision)}},8997:(a,b,c)=>{c.d(b,{r:()=>f});var d=c(17938),e=c(90998);let f=(0,d.CN)({is:a=>"MergeQueryNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"MergeQueryNode",into:a,...b&&{with:b}}),cloneWithUsing:(a,b)=>(0,d.CN)({...a,using:b}),cloneWithWhen:(a,b)=>(0,d.CN)({...a,whens:a.whens?(0,d.CN)([...a.whens,b]):(0,d.CN)([b])}),cloneWithThen:(a,b)=>(0,d.CN)({...a,whens:a.whens?(0,d.CN)([...a.whens.slice(0,-1),e.t.cloneWithResult(a.whens[a.whens.length-1],b)]):void 0})})},9263:(a,b,c)=>{c.d(b,{R:()=>h});var d=c(17938),e=c(67260),f=c(91561);let g=(0,d.CN)([]);class h{#f;constructor(a=g){this.#f=a}get plugins(){return this.#f}transformQuery(a,b){for(let c of this.#f){let d=c.transformQuery({node:a,queryId:b});if(d.kind===a.kind)a=d;else throw Error(`KyselyPlugin.transformQuery must return a node of the same kind that was given to it. The plugin was given a ${a.kind} but it returned a ${d.kind}`)}return a}async executeQuery(a){return await this.provideConnection(async b=>{let c=await b.executeQuery(a);return"numUpdatedOrDeletedRows"in c&&(0,f.u)("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`."),await this.#g(c,a.queryId)})}async *stream(a,b){let{connection:c,release:d}=await (0,e.G)(this);try{for await(let d of c.streamQuery(a,b))yield await this.#g(d,a.queryId)}finally{d()}}async #g(a,b){for(let c of this.#f)a=await c.transformResult({result:a,queryId:b});return a}}},9400:(a,b,c)=>{function d(a){if(!e(a))throw Error("CryptoKey instance expected")}c.d(b,{D2:()=>f,P2:()=>g,R7:()=>e,Tz:()=>d});let e=a=>{if(a?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return a instanceof CryptoKey}catch{return!1}},f=a=>a?.[Symbol.toStringTag]==="KeyObject",g=a=>e(a)||f(a)},9732:(a,b,c)=>{c.d(b,{N:()=>d});function d(){let a="undefined"!=typeof globalThis&&globalThis.crypto;if(a&&"object"==typeof a.subtle&&null!=a.subtle)return a.subtle;throw Error("crypto.subtle must be defined")}},10009:(a,b,c)=>{c.d(b,{E:()=>g});var d=c(53460),e=c(17938),f=c(35467);let g=(0,e.CN)({raw:(a,b=[])=>(0,e.CN)({sql:a,query:d.z.createWithSql(a),parameters:(0,e.CN)(b),queryId:(0,f.a)()})})},11980:(a,b,c)=>{c.d(b,{D0:()=>e,Rd:()=>d,VS:()=>i,lF:()=>j,mx:()=>h,xW:()=>f});let d=new TextEncoder,e=new TextDecoder;function f(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}function g(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function h(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return g(c,b,0),g(c,a%0x100000000,4),c}function i(a){let b=new Uint8Array(4);return g(b,a),b}function j(a){let b=new Uint8Array(a.length);for(let c=0;c<a.length;c++){let d=a.charCodeAt(c);if(d>127)throw TypeError("non-ASCII string encountered in encode()");b[c]=d}return b}},12204:(a,b,c)=>{c.d(b,{w:()=>d});function d(a){let b="object"==typeof a.client?a.client:{},c="object"==typeof a.server?a.server:{},d=a.shared,e=a.runtimeEnv?a.runtimeEnv:{...process.env,...a.experimental__runtimeEnv};return function(a){let b=a.runtimeEnvStrict??a.runtimeEnv??process.env;if(a.emptyStringAsUndefined)for(let[a,c]of Object.entries(b))""===c&&delete b[a];if(a.skipValidation)return b;let c="object"==typeof a.client?a.client:{},d="object"==typeof a.server?a.server:{},e="object"==typeof a.shared?a.shared:{},f=a.isServer??("undefined"==typeof window||"Deno"in window),g=function(a,b){let c={},d=[];for(let e in a){let f=a[e],g=b[e],h=f["~standard"].validate(g);if(h instanceof Promise)throw Error(`Validation must be synchronous, but ${e} returned a Promise.`);if(h.issues){d.push(...h.issues.map(a=>({...a,path:[e,...a.path??[]]})));continue}c[e]=h.value}return d.length?{issues:d}:{value:c}}(f?{...d,...e,...c}:{...c,...e},b),h=a.onValidationError??(a=>{throw console.error(" Invalid environment variables:",a),Error("Invalid environment variables")}),i=a.onInvalidAccess??(()=>{throw Error(" Attempted to access a server-side environment variable on the client")});if(g.issues)return h(g.issues);let j=(a.extends??[]).reduce((a,b)=>Object.assign(a,b),{});return new Proxy(Object.assign(g.value,j),{get(b,c){if("string"==typeof c&&"__esModule"!==c&&"$$typeof"!==c)return f||a.clientPrefix&&(c.startsWith(a.clientPrefix)||c in e)?Reflect.get(b,c):i(c)}})}({...a,shared:d,client:b,server:c,clientPrefix:"NEXT_PUBLIC_",runtimeEnv:e})}},12458:(a,b,c)=>{c.d(b,{U:()=>g});var d=c(17938),e=c(46866),f=c(57850);let g=(0,d.CN)({is:a=>"UpdateQueryNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"UpdateQueryNode",table:1===a.length?a[0]:f.v.create(a),...b&&{with:b}}),createWithoutTable:()=>(0,d.CN)({kind:"UpdateQueryNode"}),cloneWithFromItems:(a,b)=>(0,d.CN)({...a,from:a.from?e.N.cloneWithFroms(a.from,b):e.N.create(b)}),cloneWithUpdates:(a,b)=>(0,d.CN)({...a,updates:a.updates?(0,d.CN)([...a.updates,...b]):b}),cloneWithLimit:(a,b)=>(0,d.CN)({...a,limit:b})})},13189:(a,b,c)=>{c.d(b,{f:()=>av});var d=c(1045),e=c(94329);class f{static [e.i]="ConsoleLogWriter";write(a){console.log(a)}}class g{static [e.i]="DefaultLogger";writer;constructor(a){this.writer=a?.writer??new f}logQuery(a,b){let c=b.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),d=c.length?` -- params: [${c.join(", ")}]`:"";this.writer.write(`Query: ${a}${d}`)}}class h{static [e.i]="NoopLogger";logQuery(){}}var i=c(79928),j=c(37175),k=c(75872),l=c(21029);class m{constructor(a){this.table=a}static [e.i]="ColumnAliasProxyHandler";get(a,b){return"table"===b?this.table:a[b]}}class n{constructor(a,b){this.alias=a,this.replaceOriginalName=b}static [e.i]="TableAliasProxyHandler";get(a,b){if(b===k.XI.Symbol.IsAlias)return!0;if(b===k.XI.Symbol.Name||this.replaceOriginalName&&b===k.XI.Symbol.OriginalName)return this.alias;if(b===l.n)return{...a[l.n],name:this.alias,isAlias:!0};if(b===k.XI.Symbol.Columns){let b=a[k.XI.Symbol.Columns];if(!b)return b;let c={};return Object.keys(b).map(d=>{c[d]=new Proxy(b[d],new m(new Proxy(a,this)))}),c}let c=a[b];return(0,e.is)(c,i.V)?new Proxy(c,new m(new Proxy(a,this))):c}}class o{constructor(a){this.alias=a}static [e.i]=null;get(a,b){return"sourceTable"===b?p(a.sourceTable,this.alias):a[b]}}function p(a,b){return new Proxy(a,new n(b,!1))}function q(a,b){return new Proxy(a,new m(new Proxy(a.table,new n(b,!1))))}function r(a,b){return new j.Xs.Aliased(s(a.sql,b),a.fieldAlias)}function s(a,b){return j.ll.join(a.queryChunks.map(a=>(0,e.is)(a,i.V)?q(a,b):(0,e.is)(a,j.Xs)?s(a,b):(0,e.is)(a,j.Xs.Aliased)?r(a,b):a))}function t(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(a=>a.toLowerCase()).join("_")}function u(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((a,b,c)=>a+(0===c?b.toLowerCase():`${b[0].toUpperCase()}${b.slice(1)}`),"")}function v(a){return a}class w{static [e.i]="CasingCache";cache={};cachedTables={};convert;constructor(a){this.convert="snake_case"===a?t:"camelCase"===a?u:v}getColumnCasing(a){if(!a.keyAsName)return a.name;let b=a.table[k.XI.Symbol.Schema]??"public",c=a.table[k.XI.Symbol.OriginalName],d=`${b}.${c}.${a.name}`;return this.cache[d]||this.cacheTable(a.table),this.cache[d]}cacheTable(a){let b=a[k.XI.Symbol.Schema]??"public",c=a[k.XI.Symbol.OriginalName],d=`${b}.${c}`;if(!this.cachedTables[d]){for(let b of Object.values(a[k.XI.Symbol.Columns])){let a=`${d}.${b.name}`;this.cache[a]=this.convert(b.name)}this.cachedTables[d]=!0}}clearCache(){this.cache={},this.cachedTables={}}}class x extends Error{static [e.i]="DrizzleError";constructor({message:a,cause:b}){super(a),this.name="DrizzleError",this.cause=b}}class y extends x{static [e.i]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}var z=c(90091),A=c(63988),B=c(51060),C=c(67351),D=c(35235),E=c(6852),F=c(4642),G=c(76993),H=c(54144),I=c(59720),J=c(50885),K=c(83940),L=c(58941);class M extends j.Ss{static [e.i]="PgViewBase"}class N{static [e.i]="PgDialect";casing;constructor(a){this.casing=new w(a?.casing)}async migrate(a,b,c){let d="string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",e="string"==typeof c?"drizzle":c.migrationsSchema??"drizzle",f=(0,j.ll)`
			CREATE TABLE IF NOT EXISTS ${j.ll.identifier(e)}.${j.ll.identifier(d)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await b.execute((0,j.ll)`CREATE SCHEMA IF NOT EXISTS ${j.ll.identifier(e)}`),await b.execute(f);let g=(await b.all((0,j.ll)`select id, hash, created_at from ${j.ll.identifier(e)}.${j.ll.identifier(d)} order by created_at desc limit 1`))[0];await b.transaction(async b=>{for await(let c of a)if(!g||Number(g.created_at)<c.folderMillis){for(let a of c.sql)await b.execute(j.ll.raw(a));await b.execute((0,j.ll)`insert into ${j.ll.identifier(e)}.${j.ll.identifier(d)} ("hash", "created_at") values(${c.hash}, ${c.folderMillis})`)}})}escapeName(a){return`"${a}"`}escapeParam(a){return`$${a+1}`}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[(0,j.ll)`with `];for(let[c,d]of a.entries())b.push((0,j.ll)`${j.ll.identifier(d._.alias)} as (${d._.sql})`),c<a.length-1&&b.push((0,j.ll)`, `);return b.push((0,j.ll)` `),j.ll.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:d}){let e=this.buildWithCTE(d),f=c?(0,j.ll)` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,g=b?(0,j.ll)` where ${b}`:void 0;return(0,j.ll)`${e}delete from ${a}${g}${f}`}buildUpdateSet(a,b){let c=a[k.XI.Symbol.Columns],d=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),e=d.length;return j.ll.join(d.flatMap((a,d)=>{let f=c[a],g=b[a]??j.ll.param(f.onUpdateFn(),f),h=(0,j.ll)`${j.ll.identifier(this.casing.getColumnCasing(f))} = ${g}`;return d<e-1?[h,j.ll.raw(", ")]:[h]}))}buildUpdateQuery({table:a,set:b,where:c,returning:d,withList:e,from:f,joins:g}){let h=this.buildWithCTE(e),i=a[H.mu.Symbol.Name],k=a[H.mu.Symbol.Schema],l=a[H.mu.Symbol.OriginalName],m=i===l?void 0:i,n=(0,j.ll)`${k?(0,j.ll)`${j.ll.identifier(k)}.`:void 0}${j.ll.identifier(l)}${m&&(0,j.ll)` ${j.ll.identifier(m)}`}`,o=this.buildUpdateSet(a,b),p=f&&j.ll.join([j.ll.raw(" from "),this.buildFromTable(f)]),q=this.buildJoins(g),r=d?(0,j.ll)` returning ${this.buildSelection(d,{isSingleTable:!f})}`:void 0,s=c?(0,j.ll)` where ${c}`:void 0;return(0,j.ll)`${h}update ${n} set ${o}${p}${q}${s}${r}`}buildSelection(a,{isSingleTable:b=!1}={}){let c=a.length,d=a.flatMap(({field:a},d)=>{let f=[];if((0,e.is)(a,j.Xs.Aliased)&&a.isSelectionField)f.push(j.ll.identifier(a.fieldAlias));else if((0,e.is)(a,j.Xs.Aliased)||(0,e.is)(a,j.Xs)){let c=(0,e.is)(a,j.Xs.Aliased)?a.sql:a;b?f.push(new j.Xs(c.queryChunks.map(a=>(0,e.is)(a,z.Kl)?j.ll.identifier(this.casing.getColumnCasing(a)):a))):f.push(c),(0,e.is)(a,j.Xs.Aliased)&&f.push((0,j.ll)` as ${j.ll.identifier(a.fieldAlias)}`)}else(0,e.is)(a,i.V)&&(b?f.push(j.ll.identifier(this.casing.getColumnCasing(a))):f.push(a));return d<c-1&&f.push((0,j.ll)`, `),f});return j.ll.join(d)}buildJoins(a){if(!a||0===a.length)return;let b=[];for(let[c,d]of a.entries()){0===c&&b.push((0,j.ll)` `);let f=d.table,g=d.lateral?(0,j.ll)` lateral`:void 0;if((0,e.is)(f,H.mu)){let a=f[H.mu.Symbol.Name],c=f[H.mu.Symbol.Schema],e=f[H.mu.Symbol.OriginalName],h=a===e?void 0:d.alias;b.push((0,j.ll)`${j.ll.raw(d.joinType)} join${g} ${c?(0,j.ll)`${j.ll.identifier(c)}.`:void 0}${j.ll.identifier(e)}${h&&(0,j.ll)` ${j.ll.identifier(h)}`} on ${d.on}`)}else if((0,e.is)(f,j.Ss)){let a=f[l.n].name,c=f[l.n].schema,e=f[l.n].originalName,h=a===e?void 0:d.alias;b.push((0,j.ll)`${j.ll.raw(d.joinType)} join${g} ${c?(0,j.ll)`${j.ll.identifier(c)}.`:void 0}${j.ll.identifier(e)}${h&&(0,j.ll)` ${j.ll.identifier(h)}`} on ${d.on}`)}else b.push((0,j.ll)`${j.ll.raw(d.joinType)} join${g} ${f} on ${d.on}`);c<a.length-1&&b.push((0,j.ll)` `)}return j.ll.join(b)}buildFromTable(a){if((0,e.is)(a,k.XI)&&a[k.XI.Symbol.IsAlias]){let b=(0,j.ll)`${j.ll.identifier(a[k.XI.Symbol.OriginalName])}`;return a[k.XI.Symbol.Schema]&&(b=(0,j.ll)`${j.ll.identifier(a[k.XI.Symbol.Schema])}.${b}`),(0,j.ll)`${b} ${j.ll.identifier(a[k.XI.Symbol.Name])}`}return a}buildSelectQuery({withList:a,fields:b,fieldsFlat:c,where:d,having:f,table:g,joins:h,orderBy:m,groupBy:n,limit:o,offset:p,lockingClause:q,distinct:r,setOperators:s}){let t,u,v,w=c??(0,L.He)(b);for(let a of w){let b;if((0,e.is)(a.field,i.V)&&(0,k.Io)(a.field.table)!==((0,e.is)(g,K.n)?g._.alias:(0,e.is)(g,M)?g[l.n].name:(0,e.is)(g,j.Xs)?void 0:(0,k.Io)(g))&&(b=a.field.table,!h?.some(({alias:a})=>a===(b[k.XI.Symbol.IsAlias]?(0,k.Io)(b):b[k.XI.Symbol.BaseName])))){let b=(0,k.Io)(a.field.table);throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let x=!h||0===h.length,y=this.buildWithCTE(a);r&&(t=!0===r?(0,j.ll)` distinct`:(0,j.ll)` distinct on (${j.ll.join(r.on,(0,j.ll)`, `)})`);let z=this.buildSelection(w,{isSingleTable:x}),A=this.buildFromTable(g),B=this.buildJoins(h),C=d?(0,j.ll)` where ${d}`:void 0,D=f?(0,j.ll)` having ${f}`:void 0;m&&m.length>0&&(u=(0,j.ll)` order by ${j.ll.join(m,(0,j.ll)`, `)}`),n&&n.length>0&&(v=(0,j.ll)` group by ${j.ll.join(n,(0,j.ll)`, `)}`);let E="object"==typeof o||"number"==typeof o&&o>=0?(0,j.ll)` limit ${o}`:void 0,F=p?(0,j.ll)` offset ${p}`:void 0,G=j.ll.empty();if(q){let a=(0,j.ll)` for ${j.ll.raw(q.strength)}`;q.config.of&&a.append((0,j.ll)` of ${j.ll.join(Array.isArray(q.config.of)?q.config.of:[q.config.of],(0,j.ll)`, `)}`),q.config.noWait?a.append((0,j.ll)` no wait`):q.config.skipLocked&&a.append((0,j.ll)` skip locked`),G.append(a)}let H=(0,j.ll)`${y}select${t} ${z} from ${A}${B}${C}${v}${D}${u}${E}${F}${G}`;return s.length>0?this.buildSetOperations(H,s):H}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:c,rightSelect:d,limit:f,orderBy:g,offset:h}}){let i,k=(0,j.ll)`(${a.getSQL()}) `,l=(0,j.ll)`(${d.getSQL()})`;if(g&&g.length>0){let a=[];for(let b of g)if((0,e.is)(b,z.Kl))a.push(j.ll.identifier(b.name));else if((0,e.is)(b,j.Xs)){for(let a=0;a<b.queryChunks.length;a++){let c=b.queryChunks[a];(0,e.is)(c,z.Kl)&&(b.queryChunks[a]=j.ll.identifier(c.name))}a.push((0,j.ll)`${b}`)}else a.push((0,j.ll)`${b}`);i=(0,j.ll)` order by ${j.ll.join(a,(0,j.ll)`, `)} `}let m="object"==typeof f||"number"==typeof f&&f>=0?(0,j.ll)` limit ${f}`:void 0,n=j.ll.raw(`${b} ${c?"all ":""}`),o=h?(0,j.ll)` offset ${h}`:void 0;return(0,j.ll)`${k}${n}${l}${i}${m}${o}`}buildInsertQuery({table:a,values:b,onConflict:c,returning:d,withList:f,select:g,overridingSystemValue_:h}){let i=[],l=Object.entries(a[k.XI.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),m=l.map(([,a])=>j.ll.identifier(this.casing.getColumnCasing(a)));if(g)(0,e.is)(b,j.Xs)?i.push(b):i.push(b.getSQL());else for(let[a,c]of(i.push(j.ll.raw("values ")),b.entries())){let d=[];for(let[a,b]of l){let f=c[a];if(void 0===f||(0,e.is)(f,j.Iw)&&void 0===f.value)if(void 0!==b.defaultFn){let a=b.defaultFn(),c=(0,e.is)(a,j.Xs)?a:j.ll.param(a,b);d.push(c)}else if(b.default||void 0===b.onUpdateFn)d.push((0,j.ll)`default`);else{let a=b.onUpdateFn(),c=(0,e.is)(a,j.Xs)?a:j.ll.param(a,b);d.push(c)}else d.push(f)}i.push(d),a<b.length-1&&i.push((0,j.ll)`, `)}let n=this.buildWithCTE(f),o=j.ll.join(i),p=d?(0,j.ll)` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,q=c?(0,j.ll)` on conflict ${c}`:void 0,r=!0===h?(0,j.ll)`overriding system value `:void 0;return(0,j.ll)`${n}insert into ${a} ${m} ${r}${o}${q}${p}`}buildRefreshMaterializedViewQuery({view:a,concurrently:b,withNoData:c}){let d=b?(0,j.ll)` concurrently`:void 0,e=c?(0,j.ll)` with no data`:void 0;return(0,j.ll)`refresh materialized view${d} ${a}${e}`}prepareTyping(a){if((0,e.is)(a,A.kn)||(0,e.is)(a,B.iX))return"json";if((0,e.is)(a,C.Z5))return"decimal";if((0,e.is)(a,D.Xd))return"time";if((0,e.is)(a,E.KM)||(0,e.is)(a,E.xQ))return"timestamp";if((0,e.is)(a,F.qw)||(0,e.is)(a,F.dw))return"date";else if((0,e.is)(a,G.dL))return"uuid";else return"none"}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:b})}buildRelationalQueryWithoutPK({fullSchema:a,schema:b,tableNamesMap:c,table:d,tableConfig:f,queryConfig:g,tableAlias:h,nestedQueryRelation:l,joinOn:m}){let n,o=[],t,u,v=[],w,y=[];if(!0===g)o=Object.entries(f.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:q(b,h),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let d=Object.fromEntries(Object.entries(f.columns).map(([a,b])=>[a,q(b,h)]));if(g.where){let a="function"==typeof g.where?g.where(d,(0,I.mm)()):g.where;w=a&&s(a,h)}let l=[],m=[];if(g.columns){let a=!1;for(let[b,c]of Object.entries(g.columns))void 0!==c&&b in f.columns&&(a||!0!==c||(a=!0),m.push(b));m.length>0&&(m=a?m.filter(a=>g.columns?.[a]===!0):Object.keys(f.columns).filter(a=>!m.includes(a)))}else m=Object.keys(f.columns);for(let a of m){let b=f.columns[a];l.push({tsKey:a,value:b})}let n=[];if(g.with&&(n=Object.entries(g.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:f.relations[a]}))),g.extras)for(let[a,b]of Object.entries("function"==typeof g.extras?g.extras(d,{sql:j.ll}):g.extras))l.push({tsKey:a,value:r(b,h)});for(let{tsKey:a,value:b}of l)o.push({dbKey:(0,e.is)(b,j.Xs.Aliased)?b.fieldAlias:f.columns[a].name,tsKey:a,field:(0,e.is)(b,i.V)?q(b,h):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let p="function"==typeof g.orderBy?g.orderBy(d,(0,I.rl)()):g.orderBy??[];for(let{tsKey:d,queryConfig:f,relation:l}of(Array.isArray(p)||(p=[p]),v=p.map(a=>(0,e.is)(a,i.V)?q(a,h):s(a,h)),t=g.limit,u=g.offset,n)){let g=(0,I.W0)(b,c,l),i=c[(0,k.Lf)(l.referencedTable)],m=`${h}_${d}`,n=(0,J.Uo)(...g.fields.map((a,b)=>(0,J.eq)(q(g.references[b],m),q(a,h)))),p=this.buildRelationalQueryWithoutPK({fullSchema:a,schema:b,tableNamesMap:c,table:a[i],tableConfig:b[i],queryConfig:(0,e.is)(l,I.pD)?!0===f?{limit:1}:{...f,limit:1}:f,tableAlias:m,joinOn:n,nestedQueryRelation:l}),r=(0,j.ll)`${j.ll.identifier(m)}.${j.ll.identifier("data")}`.as(d);y.push({on:(0,j.ll)`true`,table:new K.n(p.sql,{},m),alias:m,joinType:"left",lateral:!0}),o.push({dbKey:d,tsKey:d,field:r,relationTableTsKey:i,isJson:!0,selection:p.selection})}}if(0===o.length)throw new x({message:`No fields selected for table "${f.tsName}" ("${h}")`});if(w=(0,J.Uo)(m,w),l){let a=(0,j.ll)`json_build_array(${j.ll.join(o.map(({field:a,tsKey:b,isJson:c})=>c?(0,j.ll)`${j.ll.identifier(`${h}_${b}`)}.${j.ll.identifier("data")}`:(0,e.is)(a,j.Xs.Aliased)?a.sql:a),(0,j.ll)`, `)})`;(0,e.is)(l,I.iv)&&(a=(0,j.ll)`coalesce(json_agg(${a}${v.length>0?(0,j.ll)` order by ${j.ll.join(v,(0,j.ll)`, `)}`:void 0}), '[]'::json)`);let b=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:f.tsName,selection:o}];void 0!==t||void 0!==u||v.length>0?(n=this.buildSelectQuery({table:p(d,h),fields:{},fieldsFlat:[{path:[],field:j.ll.raw("*")}],where:w,limit:t,offset:u,orderBy:v,setOperators:[]}),w=void 0,t=void 0,u=void 0,v=[]):n=p(d,h),n=this.buildSelectQuery({table:(0,e.is)(n,H.mu)?n:new K.n(n,{},h),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:(0,e.is)(a,i.V)?q(a,h):a})),joins:y,where:w,limit:t,offset:u,orderBy:v,setOperators:[]})}else n=this.buildSelectQuery({table:p(d,h),fields:{},fieldsFlat:o.map(({field:a})=>({path:[],field:(0,e.is)(a,i.V)?q(a,h):a})),joins:y,where:w,limit:t,offset:u,orderBy:v,setOperators:[]});return{tableTsKey:f.tsName,sql:n,selection:o}}}class O{static [e.i]="SelectionProxyHandler";config;constructor(a){this.config={...a}}get(a,b){if("_"===b)return{...a._,selectedFields:new Proxy(a._.selectedFields,this)};if(b===l.n)return{...a[l.n],selectedFields:new Proxy(a[l.n].selectedFields,this)};if("symbol"==typeof b)return a[b];let c=((0,e.is)(a,K.n)?a._.selectedFields:(0,e.is)(a,j.Ss)?a[l.n].selectedFields:a)[b];if((0,e.is)(c,j.Xs.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!c.isSelectionField)return c.sql;let a=c.clone();return a.isSelectionField=!0,a}if((0,e.is)(c,j.Xs)){if("sql"===this.config.sqlBehavior)return c;throw Error(`You tried to reference "${b}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return(0,e.is)(c,i.V)?this.config.alias?new Proxy(c,new m(new Proxy(c.table,new n(this.config.alias,this.config.replaceOriginalName??!1)))):c:"object"!=typeof c||null===c?c:new Proxy(c,new O(this.config))}}class P{static [e.i]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class Q{static [e.i]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}then(a,b){return this.execute().then(a,b)}}var R=c(77883);class S{static [e.i]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,a.withList&&(this.withList=a.withList),this.distinct=a.distinct}authToken;setToken(a){return this.authToken=a,this}from(a){let b,c=!!this.fields;return b=this.fields?this.fields:(0,e.is)(a,K.n)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):(0,e.is)(a,M)?a[l.n].selectedFields:(0,e.is)(a,j.Xs)?{}:(0,L.YD)(a),new U({table:a,fields:b,isPartialSelect:c,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class T extends P{static [e.i]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b},this.tableName=(0,L.zN)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(a){return(b,c)=>{let d=this.tableName,f=(0,L.zN)(b);if("string"==typeof f&&this.config.joins?.some(a=>a.alias===f))throw Error(`Alias "${f}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof d&&(this.config.fields={[d]:this.config.fields}),"string"==typeof f&&!(0,e.is)(b,j.Xs))){let a=(0,e.is)(b,K.n)?b._.selectedFields:(0,e.is)(b,j.Ss)?b[l.n].selectedFields:b[k.XI.Symbol.Columns];this.config.fields[f]=a}if("function"==typeof c&&(c=c(new Proxy(this.config.fields,new O({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:c,table:b,joinType:a,alias:f}),"string"==typeof f)switch(a){case"left":this.joinsNotNullableMap[f]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[f]=!0;break;case"inner":this.joinsNotNullableMap[f]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[f]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(a,b){return c=>{let d="function"==typeof c?c(W()):c;if(!(0,L.DV)(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new O({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new O({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new O({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new O({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}for(a,b={}){return this.config.lockingClause={strength:a,config:b},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){return new Proxy(new K.n(this.getSQL(),this.config.fields,a),new O({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new O({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class U extends T{static [e.i]="PgSelect";_prepare(a){let{session:b,config:c,dialect:d,joinsNotNullableMap:e,authToken:f}=this;if(!b)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");return R.k.startActiveSpan("drizzle.prepareQuery",()=>{let g=(0,L.He)(c.fields),h=b.prepareQuery(d.sqlToQuery(this.getSQL()),g,a,!0);return h.joinsNotNullableMap=e,h.setToken(f)})}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>R.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}function V(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!(0,L.DV)(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}(0,L.XJ)(U,[Q]);let W=()=>({union:X,unionAll:Y,intersect:Z,intersectAll:$,except:_,exceptAll:aa}),X=V("union",!1),Y=V("union",!0),Z=V("intersect",!1),$=V("intersect",!0),_=V("except",!1),aa=V("except",!0);class ab{static [e.i]="PgQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=(0,e.is)(a,N)?a:void 0,this.dialectConfig=(0,e.is)(a,N)?void 0:a}$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(c)),new Proxy(new K.J(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new O({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...a){let b=this;return{select:function(c){return new S({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(a){return new S({fields:a??void 0,session:void 0,dialect:b.getDialect(),distinct:!0})},selectDistinctOn:function(a,c){return new S({fields:c??void 0,session:void 0,dialect:b.getDialect(),distinct:{on:a}})}}}select(a){return new S({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new S({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(a,b){return new S({fields:b??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:a}})}getDialect(){return this.dialect||(this.dialect=new N(this.dialectConfig)),this.dialect}}class ac{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [e.i]="PgUpdateBuilder";authToken;setToken(a){return this.authToken=a,this}set(a){return new ad(this.table,(0,L.q)(this.table,a),this.session,this.dialect,this.withList).setToken(this.authToken)}}class ad extends Q{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e,joins:[]},this.tableName=(0,L.zN)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static [e.i]="PgUpdate";config;tableName;joinsNotNullableMap;from(a){let b=(0,L.zN)(a);return"string"==typeof b&&(this.joinsNotNullableMap[b]=!0),this.config.from=a,this}getTableLikeFields(a){return(0,e.is)(a,H.mu)?a[k.XI.Symbol.Columns]:(0,e.is)(a,K.n)?a._.selectedFields:a[l.n].selectedFields}createJoin(a){return(b,c)=>{let d=(0,L.zN)(b);if("string"==typeof d&&this.config.joins.some(a=>a.alias===d))throw Error(`Alias "${d}" is already used in this query`);if("function"==typeof c){let a=this.config.from&&!(0,e.is)(this.config.from,j.Xs)?this.getTableLikeFields(this.config.from):void 0;c=c(new Proxy(this.config.table[k.XI.Symbol.Columns],new O({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new O({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:c,table:b,joinType:a,alias:d}),"string"==typeof d)switch(a){case"left":this.joinsNotNullableMap[d]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[d]=!0;break;case"inner":this.joinsNotNullableMap[d]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[d]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(a){return this.config.where=a,this}returning(a){if(!a&&(a=Object.assign({},this.config.table[k.XI.Symbol.Columns]),this.config.from)){let b=(0,L.zN)(this.config.from);if("string"==typeof b&&this.config.from&&!(0,e.is)(this.config.from,j.Xs)){let c=this.getTableLikeFields(this.config.from);a[b]=c}for(let b of this.config.joins){let c=(0,L.zN)(b.table);if("string"==typeof c&&!(0,e.is)(b.table,j.Xs)){let d=this.getTableLikeFields(b.table);a[c]=d}}}return this.config.returningFields=a,this.config.returning=(0,L.He)(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){let b=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0);return b.joinsNotNullableMap=this.joinsNotNullableMap,b}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>this._prepare().execute(a,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new O({alias:(0,k.Io)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class ae{constructor(a,b,c,d,e){this.table=a,this.session=b,this.dialect=c,this.withList=d,this.overridingSystemValue_=e}static [e.i]="PgInsertBuilder";authToken;setToken(a){return this.authToken=a,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let b=a.map(a=>{let b={},c=this.table[k.XI.Symbol.Columns];for(let d of Object.keys(a)){let f=a[d];b[d]=(0,e.is)(f,j.Xs)?f:new j.Iw(f,c[d])}return b});return new af(this.table,b,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(a){let b="function"==typeof a?a(new ab):a;if(!(0,e.is)(b,j.Xs)&&!(0,L.DV)(this.table[k.e],b._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new af(this.table,b,this.session,this.dialect,this.withList,!0)}}class af extends Q{constructor(a,b,c,d,e,f,g){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e,select:f,overridingSystemValue_:g}}static [e.i]="PgInsert";config;returning(a=this.config.table[k.XI.Symbol.Columns]){return this.config.returningFields=a,this.config.returning=(0,L.He)(a),this}onConflictDoNothing(a={}){if(void 0===a.target)this.config.onConflict=(0,j.ll)`do nothing`;else{let b="";b=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target));let c=a.where?(0,j.ll)` where ${a.where}`:void 0;this.config.onConflict=(0,j.ll)`(${j.ll.raw(b)})${c} do nothing`}return this}onConflictDoUpdate(a){if(a.where&&(a.targetWhere||a.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let b=a.where?(0,j.ll)` where ${a.where}`:void 0,c=a.targetWhere?(0,j.ll)` where ${a.targetWhere}`:void 0,d=a.setWhere?(0,j.ll)` where ${a.setWhere}`:void 0,e=this.dialect.buildUpdateSet(this.config.table,(0,L.q)(this.config.table,a.set)),f="";return f=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target)),this.config.onConflict=(0,j.ll)`(${j.ll.raw(f)})${c} do update set ${e}${b}${d}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return R.k.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>R.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new O({alias:(0,k.Io)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class ag extends Q{constructor(a,b,c,d){super(),this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [e.i]="PgDelete";config;where(a){return this.config.where=a,this}returning(a=this.config.table[k.XI.Symbol.Columns]){return this.config.returningFields=a,this.config.returning=(0,L.He)(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return R.k.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>R.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new O({alias:(0,k.Io)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class ah extends j.Xs{constructor(a){super(ah.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.mapWith(Number),this.session=a.session,this.sql=ah.buildCount(a.source,a.filters)}sql;token;static [e.i]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(a,b){return(0,j.ll)`(select count(*) from ${a}${j.ll.raw(" where ").if(b)}${b})`}static buildCount(a,b){return(0,j.ll)`select count(*) as count from ${a}${j.ll.raw(" where ").if(b)}${b};`}setToken(a){return this.token=a,this}then(a,b){return Promise.resolve(this.session.count(this.sql,this.token)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}class ai{constructor(a,b,c,d,e,f,g){this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g}static [e.i]="PgRelationalQueryBuilder";findMany(a){return new aj(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return new aj(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class aj extends Q{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [e.i]="PgRelationalQuery";_prepare(a){return R.k.startActiveSpan("drizzle.prepareQuery",()=>{let{query:b,builtQuery:c}=this._toSQL();return this.session.prepareQuery(c,void 0,a,!0,(a,c)=>{let d=a.map(a=>(0,I.I$)(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?d[0]:d})})}prepare(a){return this._prepare(a)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let a=this._getQuery(),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(a){return this.authToken=a,this}execute(){return R.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}class ak extends Q{constructor(a,b,c,d){super(),this.execute=a,this.sql=b,this.query=c,this.mapBatchResult=d}static [e.i]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}isResponseInArrayMode(){return!1}}class al extends Q{constructor(a,b,c){super(),this.session=b,this.dialect=c,this.config={view:a}}static [e.i]="PgRefreshMaterializedView";config;concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return R.k.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>R.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}class am{constructor(a,b,c){if(this.dialect=a,this.session=b,this._=c?{schema:c.schema,fullSchema:c.fullSchema,tableNamesMap:c.tableNamesMap,session:b}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:b},this.query={},this._.schema)for(let[d,e]of Object.entries(this._.schema))this.query[d]=new ai(c.fullSchema,this._.schema,this._.tableNamesMap,c.fullSchema[d],e,a,b)}static [e.i]="PgDatabase";query;$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(new ab(c.dialect))),new Proxy(new K.J(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new O({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(a,b){return new ah({source:a,filters:b,session:this.session})}with(...a){let b=this;return{select:function(c){return new S({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new S({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},selectDistinctOn:function(c,d){return new S({fields:d??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:{on:c}})},update:function(c){return new ac(c,b.session,b.dialect,a)},insert:function(c){return new ae(c,b.session,b.dialect,a)},delete:function(c){return new ag(c,b.session,b.dialect,a)}}}select(a){return new S({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new S({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(a,b){return new S({fields:b??void 0,session:this.session,dialect:this.dialect,distinct:{on:a}})}update(a){return new ac(a,this.session,this.dialect)}insert(a){return new ae(a,this.session,this.dialect)}delete(a){return new ag(a,this.session,this.dialect)}refreshMaterializedView(a){return new al(a,this.session,this.dialect)}authToken;execute(a){let b="string"==typeof a?j.ll.raw(a):a.getSQL(),c=this.dialect.sqlToQuery(b),d=this.session.prepareQuery(c,void 0,void 0,!1);return new ak(()=>d.execute(void 0,this.authToken),b,c,a=>d.mapResult(a,!0))}transaction(a,b){return this.session.transaction(a,b)}}class an{constructor(a){this.query=a}authToken;getQuery(){return this.query}mapResult(a,b){return a}setToken(a){return this.authToken=a,this}static [e.i]="PgPreparedQuery";joinsNotNullableMap}class ao{constructor(a){this.dialect=a}static [e.i]="PgSession";execute(a,b){return R.k.startActiveSpan("drizzle.operation",()=>R.k.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1)).setToken(b).execute(void 0,b))}all(a){return this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1).all()}async count(a,b){return Number((await this.execute(a,b))[0].count)}}class ap extends am{constructor(a,b,c,d=0){super(a,b,c),this.schema=c,this.nestedIndex=d}static [e.i]="PgTransaction";rollback(){throw new y}getTransactionConfigSQL(a){let b=[];return a.isolationLevel&&b.push(`isolation level ${a.isolationLevel}`),a.accessMode&&b.push(a.accessMode),"boolean"==typeof a.deferrable&&b.push(a.deferrable?"deferrable":"not deferrable"),j.ll.raw(b.join(" "))}setTransaction(a){return this.session.execute((0,j.ll)`set transaction ${this.getTransactionConfigSQL(a)}`)}}class aq extends an{constructor(a,b,c,d,e,f,g){super({sql:b,params:c}),this.client=a,this.queryString=b,this.params=c,this.logger=d,this.fields=e,this._isResponseInArrayMode=f,this.customResultMapper=g}static [e.i]="PostgresJsPreparedQuery";async execute(a={}){return R.k.startActiveSpan("drizzle.execute",async b=>{let c=(0,j.Ct)(this.params,a);b?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(c)}),this.logger.logQuery(this.queryString,c);let{fields:d,queryString:e,client:f,joinsNotNullableMap:g,customResultMapper:h}=this;if(!d&&!h)return R.k.startActiveSpan("drizzle.driver.execute",()=>f.unsafe(e,c));let i=await R.k.startActiveSpan("drizzle.driver.execute",()=>(b?.setAttributes({"drizzle.query.text":e,"drizzle.query.params":JSON.stringify(c)}),f.unsafe(e,c).values()));return R.k.startActiveSpan("drizzle.mapResponse",()=>h?h(i):i.map(a=>(0,L.a6)(d,a,g)))})}all(a={}){return R.k.startActiveSpan("drizzle.execute",async b=>{let c=(0,j.Ct)(this.params,a);return b?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(c)}),this.logger.logQuery(this.queryString,c),R.k.startActiveSpan("drizzle.driver.execute",()=>(b?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(c)}),this.client.unsafe(this.queryString,c)))})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class ar extends ao{constructor(a,b,c,d={}){super(b),this.client=a,this.schema=c,this.options=d,this.logger=d.logger??new h}static [e.i]="PostgresJsSession";logger;prepareQuery(a,b,c,d,e){return new aq(this.client,a.sql,a.params,this.logger,b,d,e)}query(a,b){return this.logger.logQuery(a,b),this.client.unsafe(a,b).values()}queryObjects(a,b){return this.client.unsafe(a,b)}transaction(a,b){return this.client.begin(async c=>{let d=new ar(c,this.dialect,this.schema,this.options),e=new as(this.dialect,d,this.schema);return b&&await e.setTransaction(b),a(e)})}}class as extends ap{constructor(a,b,c,d=0){super(a,b,c,d),this.session=b}static [e.i]="PostgresJsTransaction";transaction(a){return this.session.client.savepoint(b=>{let c=new ar(b,this.dialect,this.schema,this.session.options);return a(new as(this.dialect,c,this.schema))})}}class at extends am{static [e.i]="PostgresJsDatabase"}function au(a,b={}){let c,d,e=a=>a;for(let b of["1184","1082","1083","1114","1182","1185","1115","1231"])a.options.parsers[b]=e,a.options.serializers[b]=e;a.options.serializers["114"]=e,a.options.serializers["3802"]=e;let f=new N({casing:b.casing});if(!0===b.logger?c=new g:!1!==b.logger&&(c=b.logger),b.schema){let a=(0,I._k)(b.schema,I.DZ);d={fullSchema:b.schema,schema:a.tables,tableNamesMap:a.tableNamesMap}}let h=new ar(a,f,d,{logger:c}),i=new at(f,h,d);return i.$client=a,i}function av(...a){if("string"==typeof a[0])return au((0,d.A)(a[0]),a[1]);if((0,L.Lq)(a[0])){let{connection:b,client:c,...e}=a[0];if(c)return au(c,e);if("object"==typeof b&&void 0!==b.url){let{url:a,...c}=b;return au((0,d.A)(a,c),e)}return au((0,d.A)(b),e)}return au(a[0],a[1])}(av||(av={})).mock=function(a){return au({options:{parsers:{},serializers:{}}},a)}},15879:(a,b,c)=>{c.d(b,{Qs:()=>d.f,d3:()=>d.t,iD:()=>d.i,sL:()=>d.a,ty:()=>d.c,uy:()=>d.l,vp:()=>d.r,xA:()=>d.u}),c(73976);var d=c(61407)},16469:(a,b,c)=>{c.d(b,{GB:()=>n,KN:()=>r,Ve:()=>q,ds:()=>o,vC:()=>p});var d=c(54241),e=c(17938),f=c(77175),g=c(42382),h=c(84699),i=c(4787),j=c(84605),k=c(70085),l=c(63549),m=c(43777);function n(a){if(3===a.length)return o(a[0],a[1],a[2]);if(1===a.length)return(0,i.$s)(a[0]);throw Error(`invalid arguments: ${JSON.stringify(a)}`)}function o(a,b,c){var e;return("is"===(e=b)||"is not"===e)&&s(c)?d.l.create((0,h.$O)(a),t(b),j.q.createImmediate(c)):d.l.create((0,h.$O)(a),t(b),(0,i.U2)(c))}function p(a,b,c){return d.l.create((0,h.$O)(a),t(b),(0,h.$O)(c))}function q(a,b){return r(Object.entries(a).filter(([,a])=>!(0,e.b0)(a)).map(([a,b])=>o(a,s(b)?"is":"=",b)),b)}function r(a,b,c=!0){let e="and"===b?k.s.create:m.K.create;if(0===a.length)return d.l.create(j.q.createImmediate(1),g.zX.create("="),j.q.createImmediate(+("and"===b)));let f=u(a[0]);for(let b=1;b<a.length;++b)f=e(f,u(a[b]));return a.length>1&&c?l.k.create(f):f}function s(a){return(0,e.kZ)(a)||(0,e.Lm)(a)}function t(a){if((0,e.Kg)(a)&&g.we.includes(a))return g.zX.create(a);if((0,f.N)(a))return a.toOperationNode();throw Error(`invalid operator ${JSON.stringify(a)}`)}function u(a){return(0,f.N)(a)?a.toOperationNode():a}},17938:(a,b,c)=>{function d(a){return void 0===a||void 0===a}function e(a){return"string"==typeof a}function f(a){return"number"==typeof a}function g(a){return"boolean"==typeof a}function h(a){return null===a}function i(a){return a instanceof Date}function j(a){return"bigint"==typeof a}function k(a){return"undefined"!=typeof Buffer&&Buffer.isBuffer(a)}function l(a){return"function"==typeof a}function m(a){return"object"==typeof a&&null!==a}function n(a){return Object.freeze(a)}function o(a){return p(a)?a:[a]}function p(a){return Array.isArray(a)}function q(a){return a}c.d(b,{$P:()=>i,CN:()=>n,Et:()=>f,Gv:()=>m,Kg:()=>e,Lm:()=>g,MH:()=>p,Pe:()=>k,Tn:()=>l,_j:()=>o,b0:()=>d,kZ:()=>h,lQ:()=>q,sI:()=>j}),Object.prototype.toString},18370:(a,b,c)=>{c.d(b,{e:()=>h});var d=c(17938),e=c(46866);let f=(0,d.CN)({is:a=>"UsingNode"===a.kind,create:a=>(0,d.CN)({kind:"UsingNode",tables:(0,d.CN)(a)}),cloneWithTables:(a,b)=>(0,d.CN)({...a,tables:(0,d.CN)([...a.tables,...b])})});var g=c(93229);let h=(0,d.CN)({is:a=>"DeleteQueryNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"DeleteQueryNode",from:e.N.create(a),...b&&{with:b}}),cloneWithOrderByItems:(a,b)=>g.L.cloneWithOrderByItems(a,b),cloneWithoutOrderBy:a=>g.L.cloneWithoutOrderBy(a),cloneWithLimit:(a,b)=>(0,d.CN)({...a,limit:b}),cloneWithoutLimit:a=>(0,d.CN)({...a,limit:void 0}),cloneWithUsing:(a,b)=>(0,d.CN)({...a,using:void 0!==a.using?f.cloneWithTables(a.using,b):f.create(b)})})},18538:(a,b,c)=>{c.d(b,{a:()=>h});var d=c(68774),e=c(16469),f=c(83965),g=c(44228);function h(a,b){var c,h,i,j,k,l,m,n;if(3===b.length){return c=a,h=b[0],i=b[1],j=b[2],d.b.createWithOn(c,(0,g.uJ)(h),(0,e.vC)(i,"=",j))}if(2===b.length){return k=a,l=b[0],(0,b[1])((0,f.GQ)(k,l)).toOperationNode()}if(1===b.length){return m=a,n=b[0],d.b.create(m,(0,g.uJ)(n))}throw Error("not implemented")}},20228:(a,b,c)=>{c.d(b,{G:()=>d});function d(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}},20632:(a,b,c)=>{c.d(b,{B:()=>n});var d=c(31866),e=c(69679),f=c(68774),g=c(57850),h=c(74218),i=c(63570),j=c(34850);let k=(0,c(17938).CN)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),l={json_agg:!0,to_json:!0};class m extends h.V{#h;#i=new Set;#j=new Set;constructor(a){super(),this.#h=a}transformNodeImpl(a,b){if(!this.#k(a))return super.transformNodeImpl(a,b);let c=this.#l(a);for(let a of c)this.#j.add(a);let d=this.#m(a);for(let a of d)this.#i.add(a);let e=super.transformNodeImpl(a,b);for(let a of d)this.#i.delete(a);for(let a of c)this.#j.delete(a);return e}transformSchemableIdentifier(a,b){let c=super.transformSchemableIdentifier(a,b);return c.schema||!this.#i.has(a.identifier.name)?c:{...c,schema:e.O.create(this.#h)}}transformReferences(a,b){let c=super.transformReferences(a,b);return c.table.table.schema?c:{...c,table:j.H.createWithSchema(this.#h,c.table.table.identifier.name)}}transformAggregateFunction(a,b){return{...super.transformAggregateFunction({...a,aggregated:[]},b),aggregated:this.#n(a,b,"aggregated")}}transformFunction(a,b){return{...super.transformFunction({...a,arguments:[]},b),arguments:this.#n(a,b,"arguments")}}#n(a,b,c){return l[a.func]?a[c].map(a=>!j.H.is(a)||a.table.schema?this.transformNode(a,b):{...a,table:this.transformIdentifier(a.table.identifier,b)}):this.transformNodeList(a[c],b)}#k(a){return a.kind in k}#m(a){let b=new Set;if("name"in a&&a.name&&i.y.is(a.name)&&this.#o(a.name,b),"from"in a&&a.from)for(let c of a.from.froms)this.#p(c,b);if("into"in a&&a.into&&this.#p(a.into,b),"table"in a&&a.table&&this.#p(a.table,b),"joins"in a&&a.joins)for(let c of a.joins)this.#p(c.table,b);return"using"in a&&a.using&&(f.b.is(a.using)?this.#p(a.using.table,b):this.#p(a.using,b)),b}#l(a){let b=new Set;return"with"in a&&a.with&&this.#q(a.with,b),b}#p(a,b){if(j.H.is(a))this.#o(a.table,b);else if(d.N.is(a)&&j.H.is(a.node))this.#o(a.node.table,b);else if(g.v.is(a))for(let c of a.items)this.#p(c,b)}#o(a,b){let c=a.identifier.name;this.#i.has(c)||this.#j.has(c)||b.add(c)}#q(a,b){for(let c of a.expressions){let a=c.name.table.table.identifier.name;this.#j.has(a)||b.add(a)}}}class n{#r;constructor(a){this.#r=new m(a)}transformQuery(a){return this.#r.transformNode(a.node,a.queryId)}async transformResult(a){return a.result}}},20771:(a,b,c)=>{c.d(b,{M3:()=>g,W2:()=>f,ll:()=>e,t9:()=>h});var d=c(20228);let e=a=>(0,d.G)(a)&&"string"==typeof a.kty,f=a=>"oct"!==a.kty&&("AKP"===a.kty&&"string"==typeof a.priv||"string"==typeof a.d),g=a=>"oct"!==a.kty&&void 0===a.d&&void 0===a.priv,h=a=>"oct"===a.kty&&"string"==typeof a.k},21029:(a,b,c)=>{c.d(b,{n:()=>d});let d=Symbol.for("drizzle:ViewBaseConfig")},22066:(a,b,c)=>{c.d(b,{O:()=>K,A:()=>L});var d=c(6424),e=c(83021),f=c(44228),g=c(20632),h=c(35467),i=c(76862),j=c(84699),k=c(16469),l=c(63549),m=c(97791),n=c(42382),o=c(17938);let p=(0,o.CN)({is:a=>"UnaryOperationNode"===a.kind,create:(a,b)=>(0,o.CN)({kind:"UnaryOperationNode",operator:a,operand:b})});var q=c(4787),r=c(42298),s=c(45335),t=c(62922),u=c(31866),v=c(69679),w=c(98233);let x=(0,o.CN)({is:a=>"JSONPathLegNode"===a.kind,create:(a,b)=>(0,o.CN)({kind:"JSONPathLegNode",type:a,value:b})});var y=c(66268),z=c(864),A=c(77175),B=c(84605);class C{#s;constructor(a){this.#s=a}at(a){return this.#t("ArrayLocation",a)}key(a){return this.#t("Member",a)}#t(a,b){return new D(z.Q.is(this.#s)?z.Q.cloneWithTraversal(this.#s,y.c.is(this.#s.traversal)?y.c.cloneWithLeg(this.#s.traversal,x.create(a,b)):w.k.cloneWithValue(this.#s.traversal,B.q.createImmediate(b))):y.c.cloneWithLeg(this.#s,x.create(a,b)))}}class D extends C{#s;constructor(a){super(a),this.#s=a}get expressionType(){}as(a){return new E(this,a)}$castTo(){return new D(this.#s)}$notNull(){return new D(this.#s)}toOperationNode(){return this.#s}}class E{#u;#b;constructor(a,b){this.#u=a,this.#b=b}get expression(){return this.#u}get alias(){return this.#b}toOperationNode(){return u.N.create(this.#u.toOperationNode(),(0,A.N)(this.#b)?this.#b.toOperationNode():v.O.create(this.#b))}}var F=c(54241),G=c(70085);let H=(0,o.CN)({is:a=>"TupleNode"===a.kind,create:a=>(0,o.CN)({kind:"TupleNode",values:(0,o.CN)(a)})});var I=c(51775);let J=(0,o.CN)({is:a=>"CastNode"===a.kind,create:(a,b)=>(0,o.CN)({kind:"CastNode",expression:a,dataType:b})});function K(a=r.W){function b(a,b){return new m.Is(p.create(n.zX.create(a),(0,j.$O)(b)))}let c=Object.assign(function(a,b,c){return new m.Is((0,k.ds)(a,b,c))},{fn:void 0,eb:void 0,selectFrom:b=>(0,d.c)({queryId:(0,h.a)(),executor:a,queryNode:e.L.createFrom((0,f.JB)(b))}),case:a=>new s.OU({node:t.P.create((0,o.b0)(a)?void 0:(0,j.$O)(a))}),ref:(a,b)=>(0,o.b0)(b)?new m.Is((0,j.q5)(a)):new C((0,j.NF)(a,b)),jsonPath:()=>new C(y.c.create()),table:a=>new m.Is((0,f.M$)(a)),val:a=>new m.Is((0,q.$s)(a)),refTuple:(...a)=>new m.Is(H.create(a.map(j.$O))),tuple:(...a)=>new m.Is(H.create(a.map(q.$s))),lit:a=>new m.Is((0,q.dJ)(a)),unary:b,not:a=>b("not",a),exists:a=>b("exists",a),neg:a=>b("-",a),between:(a,b,c)=>new m.Is(F.l.create((0,j.$O)(a),n.zX.create("between"),G.s.create((0,q.$s)(b),(0,q.$s)(c)))),betweenSymmetric:(a,b,c)=>new m.Is(F.l.create((0,j.$O)(a),n.zX.create("between symmetric"),G.s.create((0,q.$s)(b),(0,q.$s)(c)))),and:a=>new m.Is((0,o.MH)(a)?(0,k.KN)(a,"and"):(0,k.Ve)(a,"and")),or:a=>new m.Is((0,o.MH)(a)?(0,k.KN)(a,"or"):(0,k.Ve)(a,"or")),parens(...a){let b=(0,k.GB)(a);return new m.Is(l.k.is(b)?b:l.k.create(b))},cast:(a,b)=>new m.Is(J.create((0,j.$O)(a),(0,I.Q)(b))),withSchema:b=>K(a.withPluginAtFront(new g.B(b)))});return c.fn=(0,i.t)(),c.eb=c,c}function L(a){return K()}},23003:(a,b,c)=>{c.d(b,{F:()=>d});function d(a,b){if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)}},23727:(a,b,c)=>{c.d(b,{J:()=>n,G:()=>function a(b){return(0,d.Tn)(b)?a(b((0,l.A)())):(0,d.MH)(b)?b.map(a=>m(a)):[m(b)]}});var d=c(17938),e=c(54745),f=c(47724);let g=(0,d.CN)({is:a=>"SelectionNode"===a.kind,create:a=>(0,d.CN)({kind:"SelectionNode",selection:a}),createSelectAll:()=>(0,d.CN)({kind:"SelectionNode",selection:f.U.create()}),createSelectAllFromTable:a=>(0,d.CN)({kind:"SelectionNode",selection:e.q.createSelectAll(a)})});var h=c(84699),i=c(79665),j=c(63860),k=c(44228),l=c(22066);function m(a){return(0,d.Kg)(a)?g.create((0,h.DT)(a)):(0,i.C)(a)?g.create(a.toOperationNode()):g.create((0,j.v0)(a))}function n(a){return a?Array.isArray(a)?a.map(o):[o(a)]:[g.createSelectAll()]}function o(a){if((0,d.Kg)(a))return g.createSelectAllFromTable((0,k.M$)(a));throw Error(`invalid value selectAll expression: ${JSON.stringify(a)}`)}},24249:(a,b,c)=>{let d;c.d(b,{YO:()=>aw,k5:()=>ax,Yj:()=>av});var e,f,g=c(34011),h=c(79440);let i=(a,b)=>{let c;switch(a.code){case g.eq.invalid_type:c=a.received===h.Zp.undefined?"Required":`Expected ${a.expected}, received ${a.received}`;break;case g.eq.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,h.ZS.jsonStringifyReplacer)}`;break;case g.eq.unrecognized_keys:c=`Unrecognized key(s) in object: ${h.ZS.joinValues(a.keys,", ")}`;break;case g.eq.invalid_union:c="Invalid input";break;case g.eq.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${h.ZS.joinValues(a.options)}`;break;case g.eq.invalid_enum_value:c=`Invalid enum value. Expected ${h.ZS.joinValues(a.options)}, received '${a.received}'`;break;case g.eq.invalid_arguments:c="Invalid function arguments";break;case g.eq.invalid_return_type:c="Invalid function return type";break;case g.eq.invalid_date:c="Invalid date";break;case g.eq.invalid_string:"object"==typeof a.validation?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,"number"==typeof a.validation.position&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:h.ZS.assertNever(a.validation):c="regex"!==a.validation?`Invalid ${a.validation}`:"Invalid";break;case g.eq.too_small:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:"number"===a.type||"bigint"===a.type?`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:"date"===a.type?`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:"Invalid input";break;case g.eq.too_big:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:"number"===a.type?`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"bigint"===a.type?`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"date"===a.type?`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:"Invalid input";break;case g.eq.custom:c="Invalid input";break;case g.eq.invalid_intersection_types:c="Intersection results could not be merged";break;case g.eq.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case g.eq.not_finite:c="Number must be finite";break;default:c=b.defaultError,h.ZS.assertNever(a)}return{message:c}};!function(a){a.errToObj=a=>"string"==typeof a?{message:a}:a||{},a.toString=a=>"string"==typeof a?a:a?.message}(e||(e={}));let j=a=>{let{data:b,path:c,errorMaps:d,issueData:e}=a,f=[...c,...e.path||[]],g={...e,path:f};if(void 0!==e.message)return{...e,path:f,message:e.message};let h="";for(let a of d.filter(a=>!!a).slice().reverse())h=a(g,{data:b,defaultError:h}).message;return{...e,path:f,message:h}};function k(a,b){let c=j({issueData:b,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,i,void 0].filter(a=>!!a)});a.common.issues.push(c)}class l{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(a,b){let c=[];for(let d of b){if("aborted"===d.status)return m;"dirty"===d.status&&a.dirty(),c.push(d.value)}return{status:a.value,value:c}}static async mergeObjectAsync(a,b){let c=[];for(let a of b){let b=await a.key,d=await a.value;c.push({key:b,value:d})}return l.mergeObjectSync(a,c)}static mergeObjectSync(a,b){let c={};for(let d of b){let{key:b,value:e}=d;if("aborted"===b.status||"aborted"===e.status)return m;"dirty"===b.status&&a.dirty(),"dirty"===e.status&&a.dirty(),"__proto__"!==b.value&&(void 0!==e.value||d.alwaysSet)&&(c[b.value]=e.value)}return{status:a.value,value:c}}}let m=Object.freeze({status:"aborted"}),n=a=>({status:"dirty",value:a}),o=a=>({status:"valid",value:a}),p=a=>"undefined"!=typeof Promise&&a instanceof Promise;class q{constructor(a,b,c,d){this._cachedPath=[],this.parent=a,this.data=b,this._path=c,this._key=d}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let r=(a,b)=>{if("valid"===b.status)return{success:!0,data:b.value};if(!a.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let b=new g.G(a.common.issues);return this._error=b,this._error}}};function s(a){if(!a)return{};let{errorMap:b,invalid_type_error:c,required_error:d,description:e}=a;if(b&&(c||d))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return b?{errorMap:b,description:e}:{errorMap:(b,e)=>{let{message:f}=a;return"invalid_enum_value"===b.code?{message:f??e.defaultError}:void 0===e.data?{message:f??d??e.defaultError}:"invalid_type"!==b.code?{message:e.defaultError}:{message:f??c??e.defaultError}},description:e}}class t{get description(){return this._def.description}_getType(a){return(0,h.CR)(a.data)}_getOrReturnCtx(a,b){return b||{common:a.parent.common,data:a.data,parsedType:(0,h.CR)(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new l,ctx:{common:a.parent.common,data:a.data,parsedType:(0,h.CR)(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let b=this._parse(a);if(p(b))throw Error("Synchronous parse encountered promise.");return b}_parseAsync(a){return Promise.resolve(this._parse(a))}parse(a,b){let c=this.safeParse(a,b);if(c.success)return c.data;throw c.error}safeParse(a,b){let c={common:{issues:[],async:b?.async??!1,contextualErrorMap:b?.errorMap},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:(0,h.CR)(a)},d=this._parseSync({data:a,path:c.path,parent:c});return r(c,d)}"~validate"(a){let b={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:(0,h.CR)(a)};if(!this["~standard"].async)try{let c=this._parseSync({data:a,path:[],parent:b});return"valid"===c.status?{value:c.value}:{issues:b.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),b.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:b}).then(a=>"valid"===a.status?{value:a.value}:{issues:b.common.issues})}async parseAsync(a,b){let c=await this.safeParseAsync(a,b);if(c.success)return c.data;throw c.error}async safeParseAsync(a,b){let c={common:{issues:[],contextualErrorMap:b?.errorMap,async:!0},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:(0,h.CR)(a)},d=this._parse({data:a,path:c.path,parent:c});return r(c,await (p(d)?d:Promise.resolve(d)))}refine(a,b){return this._refinement((c,d)=>{let e=a(c),f=()=>d.addIssue({code:g.eq.custom,..."string"==typeof b||void 0===b?{message:b}:"function"==typeof b?b(c):b});return"undefined"!=typeof Promise&&e instanceof Promise?e.then(a=>!!a||(f(),!1)):!!e||(f(),!1)})}refinement(a,b){return this._refinement((c,d)=>!!a(c)||(d.addIssue("function"==typeof b?b(c,d):b),!1))}_refinement(a){return new am({schema:this,typeName:f.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return an.create(this,this._def)}nullable(){return ao.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return X.create(this)}promise(){return al.create(this,this._def)}or(a){return Z.create([this,a],this._def)}and(a){return aa.create(this,a,this._def)}transform(a){return new am({...s(this._def),schema:this,typeName:f.ZodEffects,effect:{type:"transform",transform:a}})}default(a){return new ap({...s(this._def),innerType:this,defaultValue:"function"==typeof a?a:()=>a,typeName:f.ZodDefault})}brand(){return new as({typeName:f.ZodBranded,type:this,...s(this._def)})}catch(a){return new aq({...s(this._def),innerType:this,catchValue:"function"==typeof a?a:()=>a,typeName:f.ZodCatch})}describe(a){return new this.constructor({...this._def,description:a})}pipe(a){return at.create(this,a)}readonly(){return au.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let u=/^c[^\s-]{8,}$/i,v=/^[0-9a-z]+$/,w=/^[0-9A-HJKMNP-TV-Z]{26}$/i,x=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,y=/^[a-z0-9_-]{21}$/i,z=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,A=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,B=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,C=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,D=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,E=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,F=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,G=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,H=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,I="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",J=RegExp(`^${I}$`);function K(a){let b="[0-5]\\d";a.precision?b=`${b}\\.\\d{${a.precision}}`:null==a.precision&&(b=`${b}(\\.\\d+)?`);let c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${b})${c}`}class L extends t{_parse(a){var b,c,e,f;let i;if(this._def.coerce&&(a.data=String(a.data)),this._getType(a)!==h.Zp.string){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.string,received:b.parsedType}),m}let j=new l;for(let l of this._def.checks)if("min"===l.kind)a.data.length<l.value&&(k(i=this._getOrReturnCtx(a,i),{code:g.eq.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),j.dirty());else if("max"===l.kind)a.data.length>l.value&&(k(i=this._getOrReturnCtx(a,i),{code:g.eq.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),j.dirty());else if("length"===l.kind){let b=a.data.length>l.value,c=a.data.length<l.value;(b||c)&&(i=this._getOrReturnCtx(a,i),b?k(i,{code:g.eq.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):c&&k(i,{code:g.eq.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),j.dirty())}else if("email"===l.kind)B.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"email",code:g.eq.invalid_string,message:l.message}),j.dirty());else if("emoji"===l.kind)d||(d=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),d.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"emoji",code:g.eq.invalid_string,message:l.message}),j.dirty());else if("uuid"===l.kind)x.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"uuid",code:g.eq.invalid_string,message:l.message}),j.dirty());else if("nanoid"===l.kind)y.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"nanoid",code:g.eq.invalid_string,message:l.message}),j.dirty());else if("cuid"===l.kind)u.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"cuid",code:g.eq.invalid_string,message:l.message}),j.dirty());else if("cuid2"===l.kind)v.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"cuid2",code:g.eq.invalid_string,message:l.message}),j.dirty());else if("ulid"===l.kind)w.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"ulid",code:g.eq.invalid_string,message:l.message}),j.dirty());else if("url"===l.kind)try{new URL(a.data)}catch{k(i=this._getOrReturnCtx(a,i),{validation:"url",code:g.eq.invalid_string,message:l.message}),j.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"regex",code:g.eq.invalid_string,message:l.message}),j.dirty())):"trim"===l.kind?a.data=a.data.trim():"includes"===l.kind?a.data.includes(l.value,l.position)||(k(i=this._getOrReturnCtx(a,i),{code:g.eq.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),j.dirty()):"toLowerCase"===l.kind?a.data=a.data.toLowerCase():"toUpperCase"===l.kind?a.data=a.data.toUpperCase():"startsWith"===l.kind?a.data.startsWith(l.value)||(k(i=this._getOrReturnCtx(a,i),{code:g.eq.invalid_string,validation:{startsWith:l.value},message:l.message}),j.dirty()):"endsWith"===l.kind?a.data.endsWith(l.value)||(k(i=this._getOrReturnCtx(a,i),{code:g.eq.invalid_string,validation:{endsWith:l.value},message:l.message}),j.dirty()):"datetime"===l.kind?(function(a){let b=`${I}T${K(a)}`,c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),b=`${b}(${c.join("|")})`,RegExp(`^${b}$`)})(l).test(a.data)||(k(i=this._getOrReturnCtx(a,i),{code:g.eq.invalid_string,validation:"datetime",message:l.message}),j.dirty()):"date"===l.kind?J.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{code:g.eq.invalid_string,validation:"date",message:l.message}),j.dirty()):"time"===l.kind?RegExp(`^${K(l)}$`).test(a.data)||(k(i=this._getOrReturnCtx(a,i),{code:g.eq.invalid_string,validation:"time",message:l.message}),j.dirty()):"duration"===l.kind?A.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"duration",code:g.eq.invalid_string,message:l.message}),j.dirty()):"ip"===l.kind?(b=a.data,!(("v4"===(c=l.version)||!c)&&C.test(b)||("v6"===c||!c)&&E.test(b))&&1&&(k(i=this._getOrReturnCtx(a,i),{validation:"ip",code:g.eq.invalid_string,message:l.message}),j.dirty())):"jwt"===l.kind?!function(a,b){if(!z.test(a))return!1;try{let[c]=a.split(".");if(!c)return!1;let d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),e=JSON.parse(atob(d));if("object"!=typeof e||null===e||"typ"in e&&e?.typ!=="JWT"||!e.alg||b&&e.alg!==b)return!1;return!0}catch{return!1}}(a.data,l.alg)&&(k(i=this._getOrReturnCtx(a,i),{validation:"jwt",code:g.eq.invalid_string,message:l.message}),j.dirty()):"cidr"===l.kind?(e=a.data,!(("v4"===(f=l.version)||!f)&&D.test(e)||("v6"===f||!f)&&F.test(e))&&1&&(k(i=this._getOrReturnCtx(a,i),{validation:"cidr",code:g.eq.invalid_string,message:l.message}),j.dirty())):"base64"===l.kind?G.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"base64",code:g.eq.invalid_string,message:l.message}),j.dirty()):"base64url"===l.kind?H.test(a.data)||(k(i=this._getOrReturnCtx(a,i),{validation:"base64url",code:g.eq.invalid_string,message:l.message}),j.dirty()):h.ZS.assertNever(l);return{status:j.value,value:a.data}}_regex(a,b,c){return this.refinement(b=>a.test(b),{validation:b,code:g.eq.invalid_string,...e.errToObj(c)})}_addCheck(a){return new L({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...e.errToObj(a)})}url(a){return this._addCheck({kind:"url",...e.errToObj(a)})}emoji(a){return this._addCheck({kind:"emoji",...e.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...e.errToObj(a)})}nanoid(a){return this._addCheck({kind:"nanoid",...e.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...e.errToObj(a)})}cuid2(a){return this._addCheck({kind:"cuid2",...e.errToObj(a)})}ulid(a){return this._addCheck({kind:"ulid",...e.errToObj(a)})}base64(a){return this._addCheck({kind:"base64",...e.errToObj(a)})}base64url(a){return this._addCheck({kind:"base64url",...e.errToObj(a)})}jwt(a){return this._addCheck({kind:"jwt",...e.errToObj(a)})}ip(a){return this._addCheck({kind:"ip",...e.errToObj(a)})}cidr(a){return this._addCheck({kind:"cidr",...e.errToObj(a)})}datetime(a){return"string"==typeof a?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:a}):this._addCheck({kind:"datetime",precision:void 0===a?.precision?null:a?.precision,offset:a?.offset??!1,local:a?.local??!1,...e.errToObj(a?.message)})}date(a){return this._addCheck({kind:"date",message:a})}time(a){return"string"==typeof a?this._addCheck({kind:"time",precision:null,message:a}):this._addCheck({kind:"time",precision:void 0===a?.precision?null:a?.precision,...e.errToObj(a?.message)})}duration(a){return this._addCheck({kind:"duration",...e.errToObj(a)})}regex(a,b){return this._addCheck({kind:"regex",regex:a,...e.errToObj(b)})}includes(a,b){return this._addCheck({kind:"includes",value:a,position:b?.position,...e.errToObj(b?.message)})}startsWith(a,b){return this._addCheck({kind:"startsWith",value:a,...e.errToObj(b)})}endsWith(a,b){return this._addCheck({kind:"endsWith",value:a,...e.errToObj(b)})}min(a,b){return this._addCheck({kind:"min",value:a,...e.errToObj(b)})}max(a,b){return this._addCheck({kind:"max",value:a,...e.errToObj(b)})}length(a,b){return this._addCheck({kind:"length",value:a,...e.errToObj(b)})}nonempty(a){return this.min(1,e.errToObj(a))}trim(){return new L({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new L({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new L({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(a=>"datetime"===a.kind)}get isDate(){return!!this._def.checks.find(a=>"date"===a.kind)}get isTime(){return!!this._def.checks.find(a=>"time"===a.kind)}get isDuration(){return!!this._def.checks.find(a=>"duration"===a.kind)}get isEmail(){return!!this._def.checks.find(a=>"email"===a.kind)}get isURL(){return!!this._def.checks.find(a=>"url"===a.kind)}get isEmoji(){return!!this._def.checks.find(a=>"emoji"===a.kind)}get isUUID(){return!!this._def.checks.find(a=>"uuid"===a.kind)}get isNANOID(){return!!this._def.checks.find(a=>"nanoid"===a.kind)}get isCUID(){return!!this._def.checks.find(a=>"cuid"===a.kind)}get isCUID2(){return!!this._def.checks.find(a=>"cuid2"===a.kind)}get isULID(){return!!this._def.checks.find(a=>"ulid"===a.kind)}get isIP(){return!!this._def.checks.find(a=>"ip"===a.kind)}get isCIDR(){return!!this._def.checks.find(a=>"cidr"===a.kind)}get isBase64(){return!!this._def.checks.find(a=>"base64"===a.kind)}get isBase64url(){return!!this._def.checks.find(a=>"base64url"===a.kind)}get minLength(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxLength(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}L.create=a=>new L({checks:[],typeName:f.ZodString,coerce:a?.coerce??!1,...s(a)});class M extends t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){let b;if(this._def.coerce&&(a.data=Number(a.data)),this._getType(a)!==h.Zp.number){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.number,received:b.parsedType}),m}let c=new l;for(let d of this._def.checks)"int"===d.kind?h.ZS.isInteger(a.data)||(k(b=this._getOrReturnCtx(a,b),{code:g.eq.invalid_type,expected:"integer",received:"float",message:d.message}),c.dirty()):"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(k(b=this._getOrReturnCtx(a,b),{code:g.eq.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(k(b=this._getOrReturnCtx(a,b),{code:g.eq.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"multipleOf"===d.kind?0!==function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(a.data,d.value)&&(k(b=this._getOrReturnCtx(a,b),{code:g.eq.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):"finite"===d.kind?Number.isFinite(a.data)||(k(b=this._getOrReturnCtx(a,b),{code:g.eq.not_finite,message:d.message}),c.dirty()):h.ZS.assertNever(d);return{status:c.value,value:a.data}}gte(a,b){return this.setLimit("min",a,!0,e.toString(b))}gt(a,b){return this.setLimit("min",a,!1,e.toString(b))}lte(a,b){return this.setLimit("max",a,!0,e.toString(b))}lt(a,b){return this.setLimit("max",a,!1,e.toString(b))}setLimit(a,b,c,d){return new M({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:e.toString(d)}]})}_addCheck(a){return new M({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:e.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:e.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:e.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:e.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:e.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:e.toString(b)})}finite(a){return this._addCheck({kind:"finite",message:e.toString(a)})}safe(a){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:e.toString(a)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:e.toString(a)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}get isInt(){return!!this._def.checks.find(a=>"int"===a.kind||"multipleOf"===a.kind&&h.ZS.isInteger(a.value))}get isFinite(){let a=null,b=null;for(let c of this._def.checks)if("finite"===c.kind||"int"===c.kind||"multipleOf"===c.kind)return!0;else"min"===c.kind?(null===b||c.value>b)&&(b=c.value):"max"===c.kind&&(null===a||c.value<a)&&(a=c.value);return Number.isFinite(b)&&Number.isFinite(a)}}M.create=a=>new M({checks:[],typeName:f.ZodNumber,coerce:a?.coerce||!1,...s(a)});class N extends t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(a){let b;if(this._def.coerce)try{a.data=BigInt(a.data)}catch{return this._getInvalidInput(a)}if(this._getType(a)!==h.Zp.bigint)return this._getInvalidInput(a);let c=new l;for(let d of this._def.checks)"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(k(b=this._getOrReturnCtx(a,b),{code:g.eq.too_small,type:"bigint",minimum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(k(b=this._getOrReturnCtx(a,b),{code:g.eq.too_big,type:"bigint",maximum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"multipleOf"===d.kind?a.data%d.value!==BigInt(0)&&(k(b=this._getOrReturnCtx(a,b),{code:g.eq.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):h.ZS.assertNever(d);return{status:c.value,value:a.data}}_getInvalidInput(a){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.bigint,received:b.parsedType}),m}gte(a,b){return this.setLimit("min",a,!0,e.toString(b))}gt(a,b){return this.setLimit("min",a,!1,e.toString(b))}lte(a,b){return this.setLimit("max",a,!0,e.toString(b))}lt(a,b){return this.setLimit("max",a,!1,e.toString(b))}setLimit(a,b,c,d){return new N({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:e.toString(d)}]})}_addCheck(a){return new N({...this._def,checks:[...this._def.checks,a]})}positive(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:e.toString(a)})}negative(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:e.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:e.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:e.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:e.toString(b)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}N.create=a=>new N({checks:[],typeName:f.ZodBigInt,coerce:a?.coerce??!1,...s(a)});class O extends t{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==h.Zp.boolean){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.boolean,received:b.parsedType}),m}return o(a.data)}}O.create=a=>new O({typeName:f.ZodBoolean,coerce:a?.coerce||!1,...s(a)});class P extends t{_parse(a){let b;if(this._def.coerce&&(a.data=new Date(a.data)),this._getType(a)!==h.Zp.date){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.date,received:b.parsedType}),m}if(Number.isNaN(a.data.getTime()))return k(this._getOrReturnCtx(a),{code:g.eq.invalid_date}),m;let c=new l;for(let d of this._def.checks)"min"===d.kind?a.data.getTime()<d.value&&(k(b=this._getOrReturnCtx(a,b),{code:g.eq.too_small,message:d.message,inclusive:!0,exact:!1,minimum:d.value,type:"date"}),c.dirty()):"max"===d.kind?a.data.getTime()>d.value&&(k(b=this._getOrReturnCtx(a,b),{code:g.eq.too_big,message:d.message,inclusive:!0,exact:!1,maximum:d.value,type:"date"}),c.dirty()):h.ZS.assertNever(d);return{status:c.value,value:new Date(a.data.getTime())}}_addCheck(a){return new P({...this._def,checks:[...this._def.checks,a]})}min(a,b){return this._addCheck({kind:"min",value:a.getTime(),message:e.toString(b)})}max(a,b){return this._addCheck({kind:"max",value:a.getTime(),message:e.toString(b)})}get minDate(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return null!=a?new Date(a):null}get maxDate(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return null!=a?new Date(a):null}}P.create=a=>new P({checks:[],coerce:a?.coerce||!1,typeName:f.ZodDate,...s(a)});class Q extends t{_parse(a){if(this._getType(a)!==h.Zp.symbol){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.symbol,received:b.parsedType}),m}return o(a.data)}}Q.create=a=>new Q({typeName:f.ZodSymbol,...s(a)});class R extends t{_parse(a){if(this._getType(a)!==h.Zp.undefined){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.undefined,received:b.parsedType}),m}return o(a.data)}}R.create=a=>new R({typeName:f.ZodUndefined,...s(a)});class S extends t{_parse(a){if(this._getType(a)!==h.Zp.null){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.null,received:b.parsedType}),m}return o(a.data)}}S.create=a=>new S({typeName:f.ZodNull,...s(a)});class T extends t{constructor(){super(...arguments),this._any=!0}_parse(a){return o(a.data)}}T.create=a=>new T({typeName:f.ZodAny,...s(a)});class U extends t{constructor(){super(...arguments),this._unknown=!0}_parse(a){return o(a.data)}}U.create=a=>new U({typeName:f.ZodUnknown,...s(a)});class V extends t{_parse(a){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.never,received:b.parsedType}),m}}V.create=a=>new V({typeName:f.ZodNever,...s(a)});class W extends t{_parse(a){if(this._getType(a)!==h.Zp.undefined){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.void,received:b.parsedType}),m}return o(a.data)}}W.create=a=>new W({typeName:f.ZodVoid,...s(a)});class X extends t{_parse(a){let{ctx:b,status:c}=this._processInputParams(a),d=this._def;if(b.parsedType!==h.Zp.array)return k(b,{code:g.eq.invalid_type,expected:h.Zp.array,received:b.parsedType}),m;if(null!==d.exactLength){let a=b.data.length>d.exactLength.value,e=b.data.length<d.exactLength.value;(a||e)&&(k(b,{code:a?g.eq.too_big:g.eq.too_small,minimum:e?d.exactLength.value:void 0,maximum:a?d.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:d.exactLength.message}),c.dirty())}if(null!==d.minLength&&b.data.length<d.minLength.value&&(k(b,{code:g.eq.too_small,minimum:d.minLength.value,type:"array",inclusive:!0,exact:!1,message:d.minLength.message}),c.dirty()),null!==d.maxLength&&b.data.length>d.maxLength.value&&(k(b,{code:g.eq.too_big,maximum:d.maxLength.value,type:"array",inclusive:!0,exact:!1,message:d.maxLength.message}),c.dirty()),b.common.async)return Promise.all([...b.data].map((a,c)=>d.type._parseAsync(new q(b,a,b.path,c)))).then(a=>l.mergeArray(c,a));let e=[...b.data].map((a,c)=>d.type._parseSync(new q(b,a,b.path,c)));return l.mergeArray(c,e)}get element(){return this._def.type}min(a,b){return new X({...this._def,minLength:{value:a,message:e.toString(b)}})}max(a,b){return new X({...this._def,maxLength:{value:a,message:e.toString(b)}})}length(a,b){return new X({...this._def,exactLength:{value:a,message:e.toString(b)}})}nonempty(a){return this.min(1,a)}}X.create=(a,b)=>new X({type:a,minLength:null,maxLength:null,exactLength:null,typeName:f.ZodArray,...s(b)});class Y extends t{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let a=this._def.shape(),b=h.ZS.objectKeys(a);return this._cached={shape:a,keys:b},this._cached}_parse(a){if(this._getType(a)!==h.Zp.object){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.object,received:b.parsedType}),m}let{status:b,ctx:c}=this._processInputParams(a),{shape:d,keys:e}=this._getCached(),f=[];if(!(this._def.catchall instanceof V&&"strip"===this._def.unknownKeys))for(let a in c.data)e.includes(a)||f.push(a);let i=[];for(let a of e){let b=d[a],e=c.data[a];i.push({key:{status:"valid",value:a},value:b._parse(new q(c,e,c.path,a)),alwaysSet:a in c.data})}if(this._def.catchall instanceof V){let a=this._def.unknownKeys;if("passthrough"===a)for(let a of f)i.push({key:{status:"valid",value:a},value:{status:"valid",value:c.data[a]}});else if("strict"===a)f.length>0&&(k(c,{code:g.eq.unrecognized_keys,keys:f}),b.dirty());else if("strip"===a);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let a=this._def.catchall;for(let b of f){let d=c.data[b];i.push({key:{status:"valid",value:b},value:a._parse(new q(c,d,c.path,b)),alwaysSet:b in c.data})}}return c.common.async?Promise.resolve().then(async()=>{let a=[];for(let b of i){let c=await b.key,d=await b.value;a.push({key:c,value:d,alwaysSet:b.alwaysSet})}return a}).then(a=>l.mergeObjectSync(b,a)):l.mergeObjectSync(b,i)}get shape(){return this._def.shape()}strict(a){return e.errToObj,new Y({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(b,c)=>{let d=this._def.errorMap?.(b,c).message??c.defaultError;return"unrecognized_keys"===b.code?{message:e.errToObj(a).message??d}:{message:d}}}:{}})}strip(){return new Y({...this._def,unknownKeys:"strip"})}passthrough(){return new Y({...this._def,unknownKeys:"passthrough"})}extend(a){return new Y({...this._def,shape:()=>({...this._def.shape(),...a})})}merge(a){return new Y({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>({...this._def.shape(),...a._def.shape()}),typeName:f.ZodObject})}setKey(a,b){return this.augment({[a]:b})}catchall(a){return new Y({...this._def,catchall:a})}pick(a){let b={};for(let c of h.ZS.objectKeys(a))a[c]&&this.shape[c]&&(b[c]=this.shape[c]);return new Y({...this._def,shape:()=>b})}omit(a){let b={};for(let c of h.ZS.objectKeys(this.shape))a[c]||(b[c]=this.shape[c]);return new Y({...this._def,shape:()=>b})}deepPartial(){return function a(b){if(b instanceof Y){let c={};for(let d in b.shape){let e=b.shape[d];c[d]=an.create(a(e))}return new Y({...b._def,shape:()=>c})}if(b instanceof X)return new X({...b._def,type:a(b.element)});if(b instanceof an)return an.create(a(b.unwrap()));if(b instanceof ao)return ao.create(a(b.unwrap()));if(b instanceof ab)return ab.create(b.items.map(b=>a(b)));else return b}(this)}partial(a){let b={};for(let c of h.ZS.objectKeys(this.shape)){let d=this.shape[c];a&&!a[c]?b[c]=d:b[c]=d.optional()}return new Y({...this._def,shape:()=>b})}required(a){let b={};for(let c of h.ZS.objectKeys(this.shape))if(a&&!a[c])b[c]=this.shape[c];else{let a=this.shape[c];for(;a instanceof an;)a=a._def.innerType;b[c]=a}return new Y({...this._def,shape:()=>b})}keyof(){return ai(h.ZS.objectKeys(this.shape))}}Y.create=(a,b)=>new Y({shape:()=>a,unknownKeys:"strip",catchall:V.create(),typeName:f.ZodObject,...s(b)}),Y.strictCreate=(a,b)=>new Y({shape:()=>a,unknownKeys:"strict",catchall:V.create(),typeName:f.ZodObject,...s(b)}),Y.lazycreate=(a,b)=>new Y({shape:a,unknownKeys:"strip",catchall:V.create(),typeName:f.ZodObject,...s(b)});class Z extends t{_parse(a){let{ctx:b}=this._processInputParams(a),c=this._def.options;if(b.common.async)return Promise.all(c.map(async a=>{let c={...b,common:{...b.common,issues:[]},parent:null};return{result:await a._parseAsync({data:b.data,path:b.path,parent:c}),ctx:c}})).then(function(a){for(let b of a)if("valid"===b.result.status)return b.result;for(let c of a)if("dirty"===c.result.status)return b.common.issues.push(...c.ctx.common.issues),c.result;let c=a.map(a=>new g.G(a.ctx.common.issues));return k(b,{code:g.eq.invalid_union,unionErrors:c}),m});{let a,d=[];for(let e of c){let c={...b,common:{...b.common,issues:[]},parent:null},f=e._parseSync({data:b.data,path:b.path,parent:c});if("valid"===f.status)return f;"dirty"!==f.status||a||(a={result:f,ctx:c}),c.common.issues.length&&d.push(c.common.issues)}if(a)return b.common.issues.push(...a.ctx.common.issues),a.result;let e=d.map(a=>new g.G(a));return k(b,{code:g.eq.invalid_union,unionErrors:e}),m}}get options(){return this._def.options}}Z.create=(a,b)=>new Z({options:a,typeName:f.ZodUnion,...s(b)});let $=a=>{if(a instanceof ag)return $(a.schema);if(a instanceof am)return $(a.innerType());if(a instanceof ah)return[a.value];if(a instanceof aj)return a.options;if(a instanceof ak)return h.ZS.objectValues(a.enum);else if(a instanceof ap)return $(a._def.innerType);else if(a instanceof R)return[void 0];else if(a instanceof S)return[null];else if(a instanceof an)return[void 0,...$(a.unwrap())];else if(a instanceof ao)return[null,...$(a.unwrap())];else if(a instanceof as)return $(a.unwrap());else if(a instanceof au)return $(a.unwrap());else if(a instanceof aq)return $(a._def.innerType);else return[]};class _ extends t{_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==h.Zp.object)return k(b,{code:g.eq.invalid_type,expected:h.Zp.object,received:b.parsedType}),m;let c=this.discriminator,d=b.data[c],e=this.optionsMap.get(d);return e?b.common.async?e._parseAsync({data:b.data,path:b.path,parent:b}):e._parseSync({data:b.data,path:b.path,parent:b}):(k(b,{code:g.eq.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[c]}),m)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(a,b,c){let d=new Map;for(let c of b){let b=$(c.shape[a]);if(!b.length)throw Error(`A discriminator value for key \`${a}\` could not be extracted from all schema options`);for(let e of b){if(d.has(e))throw Error(`Discriminator property ${String(a)} has duplicate value ${String(e)}`);d.set(e,c)}}return new _({typeName:f.ZodDiscriminatedUnion,discriminator:a,options:b,optionsMap:d,...s(c)})}}class aa extends t{_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=(a,d)=>{if("aborted"===a.status||"aborted"===d.status)return m;let e=function a(b,c){let d=(0,h.CR)(b),e=(0,h.CR)(c);if(b===c)return{valid:!0,data:b};if(d===h.Zp.object&&e===h.Zp.object){let d=h.ZS.objectKeys(c),e=h.ZS.objectKeys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1};f[d]=e.data}return{valid:!0,data:f}}if(d===h.Zp.array&&e===h.Zp.array){if(b.length!==c.length)return{valid:!1};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1};d.push(f.data)}return{valid:!0,data:d}}if(d===h.Zp.date&&e===h.Zp.date&&+b==+c)return{valid:!0,data:b};return{valid:!1}}(a.value,d.value);return e.valid?(("dirty"===a.status||"dirty"===d.status)&&b.dirty(),{status:b.value,value:e.data}):(k(c,{code:g.eq.invalid_intersection_types}),m)};return c.common.async?Promise.all([this._def.left._parseAsync({data:c.data,path:c.path,parent:c}),this._def.right._parseAsync({data:c.data,path:c.path,parent:c})]).then(([a,b])=>d(a,b)):d(this._def.left._parseSync({data:c.data,path:c.path,parent:c}),this._def.right._parseSync({data:c.data,path:c.path,parent:c}))}}aa.create=(a,b,c)=>new aa({left:a,right:b,typeName:f.ZodIntersection,...s(c)});class ab extends t{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==h.Zp.array)return k(c,{code:g.eq.invalid_type,expected:h.Zp.array,received:c.parsedType}),m;if(c.data.length<this._def.items.length)return k(c,{code:g.eq.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),m;!this._def.rest&&c.data.length>this._def.items.length&&(k(c,{code:g.eq.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b.dirty());let d=[...c.data].map((a,b)=>{let d=this._def.items[b]||this._def.rest;return d?d._parse(new q(c,a,c.path,b)):null}).filter(a=>!!a);return c.common.async?Promise.all(d).then(a=>l.mergeArray(b,a)):l.mergeArray(b,d)}get items(){return this._def.items}rest(a){return new ab({...this._def,rest:a})}}ab.create=(a,b)=>{if(!Array.isArray(a))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ab({items:a,typeName:f.ZodTuple,rest:null,...s(b)})};class ac extends t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==h.Zp.object)return k(c,{code:g.eq.invalid_type,expected:h.Zp.object,received:c.parsedType}),m;let d=[],e=this._def.keyType,f=this._def.valueType;for(let a in c.data)d.push({key:e._parse(new q(c,a,c.path,a)),value:f._parse(new q(c,c.data[a],c.path,a)),alwaysSet:a in c.data});return c.common.async?l.mergeObjectAsync(b,d):l.mergeObjectSync(b,d)}get element(){return this._def.valueType}static create(a,b,c){return new ac(b instanceof t?{keyType:a,valueType:b,typeName:f.ZodRecord,...s(c)}:{keyType:L.create(),valueType:a,typeName:f.ZodRecord,...s(b)})}}class ad extends t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==h.Zp.map)return k(c,{code:g.eq.invalid_type,expected:h.Zp.map,received:c.parsedType}),m;let d=this._def.keyType,e=this._def.valueType,f=[...c.data.entries()].map(([a,b],f)=>({key:d._parse(new q(c,a,c.path,[f,"key"])),value:e._parse(new q(c,b,c.path,[f,"value"]))}));if(c.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of f){let d=await c.key,e=await c.value;if("aborted"===d.status||"aborted"===e.status)return m;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}})}{let a=new Map;for(let c of f){let d=c.key,e=c.value;if("aborted"===d.status||"aborted"===e.status)return m;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}}}}ad.create=(a,b,c)=>new ad({valueType:b,keyType:a,typeName:f.ZodMap,...s(c)});class ae extends t{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==h.Zp.set)return k(c,{code:g.eq.invalid_type,expected:h.Zp.set,received:c.parsedType}),m;let d=this._def;null!==d.minSize&&c.data.size<d.minSize.value&&(k(c,{code:g.eq.too_small,minimum:d.minSize.value,type:"set",inclusive:!0,exact:!1,message:d.minSize.message}),b.dirty()),null!==d.maxSize&&c.data.size>d.maxSize.value&&(k(c,{code:g.eq.too_big,maximum:d.maxSize.value,type:"set",inclusive:!0,exact:!1,message:d.maxSize.message}),b.dirty());let e=this._def.valueType;function f(a){let c=new Set;for(let d of a){if("aborted"===d.status)return m;"dirty"===d.status&&b.dirty(),c.add(d.value)}return{status:b.value,value:c}}let i=[...c.data.values()].map((a,b)=>e._parse(new q(c,a,c.path,b)));return c.common.async?Promise.all(i).then(a=>f(a)):f(i)}min(a,b){return new ae({...this._def,minSize:{value:a,message:e.toString(b)}})}max(a,b){return new ae({...this._def,maxSize:{value:a,message:e.toString(b)}})}size(a,b){return this.min(a,b).max(a,b)}nonempty(a){return this.min(1,a)}}ae.create=(a,b)=>new ae({valueType:a,minSize:null,maxSize:null,typeName:f.ZodSet,...s(b)});class af extends t{constructor(){super(...arguments),this.validate=this.implement}_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==h.Zp.function)return k(b,{code:g.eq.invalid_type,expected:h.Zp.function,received:b.parsedType}),m;function c(a,c){return j({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,i,i].filter(a=>!!a),issueData:{code:g.eq.invalid_arguments,argumentsError:c}})}function d(a,c){return j({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,i,i].filter(a=>!!a),issueData:{code:g.eq.invalid_return_type,returnTypeError:c}})}let e={errorMap:b.common.contextualErrorMap},f=b.data;if(this._def.returns instanceof al){let a=this;return o(async function(...b){let h=new g.G([]),i=await a._def.args.parseAsync(b,e).catch(a=>{throw h.addIssue(c(b,a)),h}),j=await Reflect.apply(f,this,i);return await a._def.returns._def.type.parseAsync(j,e).catch(a=>{throw h.addIssue(d(j,a)),h})})}{let a=this;return o(function(...b){let h=a._def.args.safeParse(b,e);if(!h.success)throw new g.G([c(b,h.error)]);let i=Reflect.apply(f,this,h.data),j=a._def.returns.safeParse(i,e);if(!j.success)throw new g.G([d(i,j.error)]);return j.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new af({...this._def,args:ab.create(a).rest(U.create())})}returns(a){return new af({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}static create(a,b,c){return new af({args:a||ab.create([]).rest(U.create()),returns:b||U.create(),typeName:f.ZodFunction,...s(c)})}}class ag extends t{get schema(){return this._def.getter()}_parse(a){let{ctx:b}=this._processInputParams(a);return this._def.getter()._parse({data:b.data,path:b.path,parent:b})}}ag.create=(a,b)=>new ag({getter:a,typeName:f.ZodLazy,...s(b)});class ah extends t{_parse(a){if(a.data!==this._def.value){let b=this._getOrReturnCtx(a);return k(b,{received:b.data,code:g.eq.invalid_literal,expected:this._def.value}),m}return{status:"valid",value:a.data}}get value(){return this._def.value}}function ai(a,b){return new aj({values:a,typeName:f.ZodEnum,...s(b)})}ah.create=(a,b)=>new ah({value:a,typeName:f.ZodLiteral,...s(b)});class aj extends t{_parse(a){if("string"!=typeof a.data){let b=this._getOrReturnCtx(a),c=this._def.values;return k(b,{expected:h.ZS.joinValues(c),received:b.parsedType,code:g.eq.invalid_type}),m}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(a.data)){let b=this._getOrReturnCtx(a),c=this._def.values;return k(b,{received:b.data,code:g.eq.invalid_enum_value,options:c}),m}return o(a.data)}get options(){return this._def.values}get enum(){let a={};for(let b of this._def.values)a[b]=b;return a}get Values(){let a={};for(let b of this._def.values)a[b]=b;return a}get Enum(){let a={};for(let b of this._def.values)a[b]=b;return a}extract(a,b=this._def){return aj.create(a,{...this._def,...b})}exclude(a,b=this._def){return aj.create(this.options.filter(b=>!a.includes(b)),{...this._def,...b})}}aj.create=ai;class ak extends t{_parse(a){let b=h.ZS.getValidEnumValues(this._def.values),c=this._getOrReturnCtx(a);if(c.parsedType!==h.Zp.string&&c.parsedType!==h.Zp.number){let a=h.ZS.objectValues(b);return k(c,{expected:h.ZS.joinValues(a),received:c.parsedType,code:g.eq.invalid_type}),m}if(this._cache||(this._cache=new Set(h.ZS.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let a=h.ZS.objectValues(b);return k(c,{received:c.data,code:g.eq.invalid_enum_value,options:a}),m}return o(a.data)}get enum(){return this._def.values}}ak.create=(a,b)=>new ak({values:a,typeName:f.ZodNativeEnum,...s(b)});class al extends t{unwrap(){return this._def.type}_parse(a){let{ctx:b}=this._processInputParams(a);return b.parsedType!==h.Zp.promise&&!1===b.common.async?(k(b,{code:g.eq.invalid_type,expected:h.Zp.promise,received:b.parsedType}),m):o((b.parsedType===h.Zp.promise?b.data:Promise.resolve(b.data)).then(a=>this._def.type.parseAsync(a,{path:b.path,errorMap:b.common.contextualErrorMap})))}}al.create=(a,b)=>new al({type:a,typeName:f.ZodPromise,...s(b)});class am extends t{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===f.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=this._def.effect||null,e={addIssue:a=>{k(c,a),a.fatal?b.abort():b.dirty()},get path(){return c.path}};if(e.addIssue=e.addIssue.bind(e),"preprocess"===d.type){let a=d.transform(c.data,e);if(c.common.async)return Promise.resolve(a).then(async a=>{if("aborted"===b.value)return m;let d=await this._def.schema._parseAsync({data:a,path:c.path,parent:c});return"aborted"===d.status?m:"dirty"===d.status||"dirty"===b.value?n(d.value):d});{if("aborted"===b.value)return m;let d=this._def.schema._parseSync({data:a,path:c.path,parent:c});return"aborted"===d.status?m:"dirty"===d.status||"dirty"===b.value?n(d.value):d}}if("refinement"===d.type){let a=a=>{let b=d.refinement(a,e);if(c.common.async)return Promise.resolve(b);if(b instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(c=>"aborted"===c.status?m:("dirty"===c.status&&b.dirty(),a(c.value).then(()=>({status:b.value,value:c.value}))));{let d=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===d.status?m:("dirty"===d.status&&b.dirty(),a(d.value),{status:b.value,value:d.value})}}if("transform"===d.type)if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(a=>"valid"!==a.status?m:Promise.resolve(d.transform(a.value,e)).then(a=>({status:b.value,value:a})));else{let a=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if("valid"!==a.status)return m;let f=d.transform(a.value,e);if(f instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:b.value,value:f}}h.ZS.assertNever(d)}}am.create=(a,b,c)=>new am({schema:a,typeName:f.ZodEffects,effect:b,...s(c)}),am.createWithPreprocess=(a,b,c)=>new am({schema:b,effect:{type:"preprocess",transform:a},typeName:f.ZodEffects,...s(c)});class an extends t{_parse(a){return this._getType(a)===h.Zp.undefined?o(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}an.create=(a,b)=>new an({innerType:a,typeName:f.ZodOptional,...s(b)});class ao extends t{_parse(a){return this._getType(a)===h.Zp.null?o(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}ao.create=(a,b)=>new ao({innerType:a,typeName:f.ZodNullable,...s(b)});class ap extends t{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return b.parsedType===h.Zp.undefined&&(c=this._def.defaultValue()),this._def.innerType._parse({data:c,path:b.path,parent:b})}removeDefault(){return this._def.innerType}}ap.create=(a,b)=>new ap({innerType:a,typeName:f.ZodDefault,defaultValue:"function"==typeof b.default?b.default:()=>b.default,...s(b)});class aq extends t{_parse(a){let{ctx:b}=this._processInputParams(a),c={...b,common:{...b.common,issues:[]}},d=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return p(d)?d.then(a=>({status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new g.G(c.common.issues)},input:c.data})})):{status:"valid",value:"valid"===d.status?d.value:this._def.catchValue({get error(){return new g.G(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}}aq.create=(a,b)=>new aq({innerType:a,typeName:f.ZodCatch,catchValue:"function"==typeof b.catch?b.catch:()=>b.catch,...s(b)});class ar extends t{_parse(a){if(this._getType(a)!==h.Zp.nan){let b=this._getOrReturnCtx(a);return k(b,{code:g.eq.invalid_type,expected:h.Zp.nan,received:b.parsedType}),m}return{status:"valid",value:a.data}}}ar.create=a=>new ar({typeName:f.ZodNaN,...s(a)}),Symbol("zod_brand");class as extends t{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return this._def.type._parse({data:c,path:b.path,parent:b})}unwrap(){return this._def.type}}class at extends t{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?m:"dirty"===a.status?(b.dirty(),n(a.value)):this._def.out._parseAsync({data:a.value,path:c.path,parent:c})})();{let a=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?m:"dirty"===a.status?(b.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:c.path,parent:c})}}static create(a,b){return new at({in:a,out:b,typeName:f.ZodPipeline})}}class au extends t{_parse(a){let b=this._def.innerType._parse(a),c=a=>("valid"===a.status&&(a.value=Object.freeze(a.value)),a);return p(b)?b.then(a=>c(a)):c(b)}unwrap(){return this._def.innerType}}au.create=(a,b)=>new au({innerType:a,typeName:f.ZodReadonly,...s(b)}),Y.lazycreate,function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"}(f||(f={}));let av=L.create;M.create,ar.create,N.create,O.create,P.create,Q.create,R.create,S.create,T.create,U.create,V.create,W.create;let aw=X.create;Y.create,Y.strictCreate,Z.create,_.create,aa.create,ab.create,ac.create,ad.create,ae.create,af.create,ag.create,ah.create;let ax=aj.create;ak.create,al.create,am.create,an.create,ao.create,am.createWithPreprocess,at.create},24603:(a,b,c)=>{c.d(b,{Y:()=>e,i:()=>f});var d=c(37175);function e(a){return(0,d.ll)`${a} asc`}function f(a){return(0,d.ll)`${a} desc`}},25021:(a,b,c)=>{c.d(b,{B:()=>f,q:()=>g});var d=c(77175),e=c(17938);function f(a){return(0,e.Gv)(a)&&"expressionType"in a&&(0,d.N)(a)}function g(a){return(0,e.Gv)(a)&&"expression"in a&&(0,e.Kg)(a.alias)&&(0,d.N)(a)}},25038:(a,b,c)=>{c.d(b,{Aw:()=>i,Di:()=>g}),c(73976);var d=c(61407),e=c(81899);let f=(0,e.Ny)(async()=>({})),g=e.Ny.create({use:[f,(0,e.Ny)(async()=>({}))]}),h=[f],i=(a,b,c)=>(0,e.UD)(a,{...b,use:[...b?.use||[],...h]},async a=>(0,d.f)(a,()=>c(a)))},25880:(a,b,c)=>{c.d(b,{f:()=>f});var d=c(17938);let e=(0,d.CN)({is:a=>"TopNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"TopNode",expression:a,modifiers:b})});function f(a,b){var c;if(!(0,d.Et)(a)&&!(0,d.sI)(a))throw Error(`Invalid top expression: ${a}`);if(!(0,d.b0)(b)&&"percent"!==(c=b)&&"with ties"!==c&&"percent with ties"!==c)throw Error(`Invalid top modifiers: ${b}`);return e.create(a,b)}},26614:(a,b,c)=>{let d,e,f,g;c.d(b,{li:()=>bX});var h=c(42937),i=c(36093),j=c(71650),k=c(78731),l=c(5263),m=c(75578);function n(a,b){if(b.advanced?.ipAddress?.disableIpTracking)return null;if((0,l.Nu)()||(0,l.yz)())return"127.0.0.1";let c="headers"in a?a.headers:a;for(let a of b.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"]){let b="get"in c?c.get(a):c[a];if("string"==typeof b){var d;let a=b.split(",")[0].trim();if(d=a,m.uXy().safeParse(d).success||m.ugL().safeParse(d).success)return a}}return null}var o=c(35298),p=c(15879),q=c(75564),r=c(96734);async function s(a,b){let d;if(a.database)d="function"==typeof a.database?a.database(a):await b(a);else{let b=Object.keys((0,h.a)(a)).reduce((a,b)=>(a[b]=[],a),{}),{memoryAdapter:e}=await c.e(874).then(c.bind(c,2874));d=e(b)(a)}return d.transaction||(l.vF.warn("Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation."),d.transaction=async a=>a(d)),d}async function t(a){return s(a,async a=>{let{createKyselyAdapter:b}=await c.e(274).then(c.bind(c,25274)),{kysely:d,databaseType:e,transaction:f}=await b(a);if(!d)throw new q.$("Failed to initialize database adapter");let{kyselyAdapter:g}=await c.e(274).then(c.bind(c,25274));return g(d,{type:e||"sqlite",debugLogs:!!a.database&&"debugLogs"in a.database&&a.database.debugLogs,transaction:f})(a)})}let u=(a,b)=>{let c=b.logger,d=b.options,e=d.secondaryStorage,f=d.session?.expiresIn||604800,{createWithHooks:g,updateWithHooks:h,updateManyWithHooks:i,deleteWithHooks:l,deleteManyWithHooks:m}=function(a,b){let c=b.hooks;return{createWithHooks:async function(b,d,e){let f=await (0,p.xA)(),g=b;for(let a of c||[]){let b=a[d]?.create?.before;if(b){let a=await b(g,f);if(!1===a)return null;"object"==typeof a&&"data"in a&&(g={...g,...a.data})}}let h=e?await e.fn(g):null,i=!e||e.executeMainFn?await (await (0,p.d3)(a)).create({model:d,data:g,forceAllowId:!0}):h;for(let a of c||[]){let b=a[d]?.create?.after;b&&await b(i,f)}return i},updateWithHooks:async function(b,d,e,f){let g=await (0,p.xA)(),h=b;for(let a of c||[]){let c=a[e]?.update?.before;if(c){let a=await c(b,g);if(!1===a)return null;"object"==typeof a&&"data"in a&&(h={...h,...a.data})}}let i=f?await f.fn(h):null,j=!f||f.executeMainFn?await (await (0,p.d3)(a)).update({model:e,update:h,where:d}):i;for(let a of c||[]){let b=a[e]?.update?.after;b&&await b(j,g)}return j},updateManyWithHooks:async function(b,d,e,f){let g=await (0,p.xA)(),h=b;for(let a of c||[]){let c=a[e]?.update?.before;if(c){let a=await c(b,g);if(!1===a)return null;"object"==typeof a&&"data"in a&&(h={...h,...a.data})}}let i=f?await f.fn(h):null,j=!f||f.executeMainFn?await (await (0,p.d3)(a)).updateMany({model:e,update:h,where:d}):i;for(let a of c||[]){let b=a[e]?.update?.after;b&&await b(j,g)}return j},deleteWithHooks:async function(b,d,e){let f=await (0,p.xA)(),g=null;try{g=(await (await (0,p.d3)(a)).findMany({model:d,where:b,limit:1}))[0]||null}catch(a){}if(g)for(let a of c||[]){let b=a[d]?.delete?.before;if(b&&await b(g,f)===!1)return null}let h=e?await e.fn(b):null,i=!e||e.executeMainFn?await (await (0,p.d3)(a)).delete({model:d,where:b}):h;if(g)for(let a of c||[]){let b=a[d]?.delete?.after;b&&await b(g,f)}return i},deleteManyWithHooks:async function(b,d,e){let f=await (0,p.xA)(),g=[];try{g=await (await (0,p.d3)(a)).findMany({model:d,where:b})}catch(a){}for(let a of g)for(let b of c||[]){let c=b[d]?.delete?.before;if(c&&await c(a,f)===!1)return null}let h=e?await e.fn(b):null,i=!e||e.executeMainFn?await (await (0,p.d3)(a)).deleteMany({model:d,where:b}):h;for(let a of g)for(let b of c||[]){let c=b[d]?.delete?.after;c&&await c(a,f)}return i}}}(a,b);async function q(a){if(!e)return;let b=await e.get(`active-sessions-${a.id}`);if(!b)return;let c=Date.now(),d=((0,o.t)(b)||[]).filter(a=>a.expiresAt>c);await Promise.all(d.map(async({token:b})=>{let d=await e.get(b);if(!d)return;let f=(0,o.t)(d);if(!f)return;let g=Math.max(Math.floor(new Date(f.session.expiresAt).getTime()-c)/1e3,0);await e.set(b,JSON.stringify({session:f.session,user:a}),Math.floor(g))}))}return{createOAuthUser:async(b,c)=>(0,p.iD)(a,async()=>{let a=await g({createdAt:new Date,updatedAt:new Date,...b},"user",void 0);return{user:a,account:await g({...c,userId:a.id,createdAt:new Date,updatedAt:new Date},"account",void 0)}}),createUser:async a=>await g({createdAt:new Date,updatedAt:new Date,...a,email:a.email?.toLowerCase()},"user",void 0),createAccount:async a=>await g({createdAt:new Date,updatedAt:new Date,...a},"account",void 0),listSessions:async c=>{if(e){let a=await e.get(`active-sessions-${c}`);if(!a)return[];let d=(0,o.t)(a)||[],f=Date.now(),g=d.filter(a=>a.expiresAt>f),h=[];for(let a of g){let c=await e.get(a.token);if(c){let a=(0,o.t)(c);if(!a)return[];let d=(0,k.s)(b.options,{...a.session,expiresAt:new Date(a.session.expiresAt)});h.push(d)}}return h}return await (await (0,p.d3)(a)).findMany({model:"session",where:[{field:"userId",value:c}]})},listUsers:async(b,c,d,e)=>await (await (0,p.d3)(a)).findMany({model:"user",limit:b,offset:c,sortBy:d,where:e}),countTotalUsers:async b=>{let c=await (await (0,p.d3)(a)).count({model:"user",where:b});return"string"==typeof c?parseInt(c):c},deleteUser:async a=>{e&&await e.delete(`active-sessions-${a}`),(!e||d.session?.storeSessionInDatabase)&&await m([{field:"userId",value:a}],"session",void 0),await m([{field:"userId",value:a}],"account",void 0),await l([{field:"id",value:a}],"user",void 0)},createSession:async(b,c,h,i)=>{let l=await (0,p.xA)(),m=l.headers||l.request?.headers,{id:q,...r}=h||{},s={ipAddress:(l.request||l.headers)&&n(l.request||l.headers,l.context.options)||"",userAgent:m?.get("user-agent")||"",...r,expiresAt:c?(0,k.u)(86400,"sec"):(0,k.u)(f,"sec"),userId:b,token:(0,j.t)(32),createdAt:new Date,updatedAt:new Date,...i?r:{}};return await g(s,"session",e?{fn:async c=>{let d=await e.get(`active-sessions-${b}`),f=[],g=Date.now();d&&(f=(f=(0,o.t)(d)||[]).filter(a=>a.expiresAt>g));let h=f.sort((a,b)=>a.expiresAt-b.expiresAt),i=h.at(-1)?.expiresAt;h.push({token:s.token,expiresAt:s.expiresAt.getTime()}),(!i||i<s.expiresAt.getTime())&&(i=s.expiresAt.getTime());let j=Math.max(Math.floor((i-g)/1e3),0);j>0&&await e.set(`active-sessions-${b}`,JSON.stringify(h),j);let k=await a.findOne({model:"user",where:[{field:"id",value:b}]}),l=Math.max(Math.floor((s.expiresAt.getTime()-g)/1e3),0);return l>0&&await e.set(s.token,JSON.stringify({session:c,user:k}),l),c},executeMainFn:d.session?.storeSessionInDatabase}:void 0)},findSession:async c=>{if(e){let a=await e.get(c);if(!a&&!d.session?.storeSessionInDatabase)return null;if(a){let c=(0,o.t)(a);return c?{session:(0,k.s)(b.options,{...c.session,expiresAt:new Date(c.session.expiresAt),createdAt:new Date(c.session.createdAt),updatedAt:new Date(c.session.updatedAt)}),user:(0,k.l)(b.options,{...c.user,createdAt:new Date(c.user.createdAt),updatedAt:new Date(c.user.updatedAt)})}:null}}let f=await (await (0,p.d3)(a)).findOne({model:"session",where:[{value:c,field:"token"}],join:{user:!0}});if(!f)return null;let{user:g,...h}=f;return g?{session:(0,k.s)(b.options,h),user:(0,k.l)(b.options,g)}:null},findSessions:async b=>{if(e){let a=[];for(let c of b){let b=await e.get(c);if(b){let c=(0,o.t)(b);if(!c)return[];let d={session:{...c.session,expiresAt:new Date(c.session.expiresAt)},user:{...c.user,createdAt:new Date(c.user.createdAt),updatedAt:new Date(c.user.updatedAt)}};a.push(d)}}return a}let c=await (await (0,p.d3)(a)).findMany({model:"session",where:[{field:"token",value:b,operator:"in"}],join:{user:!0}});return!c.length||c.some(a=>!a.user)?[]:c.map(a=>{let{user:b,...c}=a;return{session:c,user:b}})},updateSession:async(a,b)=>await h(b,[{field:"token",value:a}],"session",e?{async fn(b){let c=await e.get(a);if(!c)return null;{let a=(0,o.t)(c);return a?{...a.session,...b}:null}},executeMainFn:d.session?.storeSessionInDatabase}:void 0),deleteSession:async f=>{if(e){let a=await e.get(f);if(a){let{session:b}=(0,o.t)(a)??{};if(!b)return void c.error("Session not found in secondary storage");let d=b.userId,g=await e.get(`active-sessions-${d}`);if(g){let a=(0,o.t)(g)||[],b=Date.now(),c=a.filter(a=>a.expiresAt>b&&a.token!==f),h=c.sort((a,b)=>a.expiresAt-b.expiresAt).at(-1)?.expiresAt;c.length>0&&h&&h>Date.now()?await e.set(`active-sessions-${d}`,JSON.stringify(c),Math.floor((h-b)/1e3)):await e.delete(`active-sessions-${d}`)}else c.error("Active sessions list not found in secondary storage")}if(await e.delete(f),!d.session?.storeSessionInDatabase||b.options.session?.preserveSessionInDatabase)return}await (await (0,p.d3)(a)).delete({model:"session",where:[{field:"token",value:f}]})},deleteAccounts:async a=>{await m([{field:"userId",value:a}],"account",void 0)},deleteAccount:async a=>{await l([{field:"id",value:a}],"account",void 0)},deleteSessions:async a=>{if(e){if("string"==typeof a){let b=await e.get(`active-sessions-${a}`),c=b?(0,o.t)(b):[];if(!c)return;for(let a of c)await e.delete(a.token)}else for(let b of a)await e.get(b)&&await e.delete(b);if(!d.session?.storeSessionInDatabase||b.options.session?.preserveSessionInDatabase)return}await m([{field:Array.isArray(a)?"token":"userId",value:a,operator:Array.isArray(a)?"in":void 0}],"session",void 0)},findOAuthUser:async(b,c,d)=>{let e=await (await (0,p.d3)(a)).findMany({model:"account",where:[{value:c,field:"accountId"}],join:{user:!0}}).then(a=>a.find(a=>a.providerId===d));if(e)if(e.user)return{user:e.user,accounts:[e]};else{let c=await (await (0,p.d3)(a)).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}]});return c?{user:c,accounts:[e]}:null}{let c=await (await (0,p.d3)(a)).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}]});return c?{user:c,accounts:await (await (0,p.d3)(a)).findMany({model:"account",where:[{value:c.id,field:"userId"}]})||[]}:null}},findUserByEmail:async(b,c)=>{let d=await (await (0,p.d3)(a)).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}],join:{...c?.includeAccounts?{account:!0}:{}}});if(!d)return null;let{account:e,...f}=d;return{user:f,accounts:e??[]}},findUserById:async b=>await (await (0,p.d3)(a)).findOne({model:"user",where:[{field:"id",value:b}]}),linkAccount:async a=>await g({createdAt:new Date,updatedAt:new Date,...a},"account",void 0),updateUser:async(a,b)=>{let c=await h(b,[{field:"id",value:a}],"user",void 0);return await q(c),await q(c),c},updateUserByEmail:async(a,b)=>{let c=await h(b,[{field:"email",value:a.toLowerCase()}],"user",void 0);return await q(c),await q(c),c},updatePassword:async(a,b)=>{await i({password:b},[{field:"userId",value:a},{field:"providerId",value:"credential"}],"account",void 0)},findAccounts:async b=>await (await (0,p.d3)(a)).findMany({model:"account",where:[{field:"userId",value:b}]}),findAccount:async b=>await (await (0,p.d3)(a)).findOne({model:"account",where:[{field:"accountId",value:b}]}),findAccountByProviderId:async(b,c)=>await (await (0,p.d3)(a)).findOne({model:"account",where:[{field:"accountId",value:b},{field:"providerId",value:c}]}),findAccountByUserId:async b=>await (await (0,p.d3)(a)).findMany({model:"account",where:[{field:"userId",value:b}]}),updateAccount:async(a,b)=>await h(b,[{field:"id",value:a}],"account",void 0),createVerificationValue:async a=>await g({createdAt:new Date,updatedAt:new Date,...a},"verification",void 0),findVerificationValue:async b=>{let c=await (await (0,p.d3)(a)).findMany({model:"verification",where:[{field:"identifier",value:b}],sortBy:{field:"createdAt",direction:"desc"},limit:1});return d.verification?.disableCleanup||await (await (0,p.d3)(a)).deleteMany({model:"verification",where:[{field:"expiresAt",value:new Date,operator:"lt"}]}),c[0]},deleteVerificationValue:async b=>{await (await (0,p.d3)(a)).delete({model:"verification",where:[{field:"id",value:b}]})},deleteVerificationByIdentifier:async b=>{await (await (0,p.d3)(a)).delete({model:"verification",where:[{field:"identifier",value:b}]})},updateVerificationValue:async(a,b)=>await h(b,[{field:"id",value:a}],"verification",void 0)}},v={postgres:{string:["character varying","varchar","text","uuid"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text","uuid"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar","uniqueidentifier"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};async function w(a){try{let b=await (0,r.l)`SHOW search_path`.execute(a);if(b.rows[0]?.search_path)return b.rows[0].search_path.split(",").map(a=>a.trim()).map(a=>a.replace(/^["']|["']$/g,"")).filter(a=>!a.startsWith("$"))[0]||"public"}catch(a){}return"public"}async function x(a){let b=function(a){let b=(0,h.a)(a),c={};for(let a in b){let d=b[a],e=d.fields,f={};if(Object.entries(e).forEach(([a,c])=>{if(f[c.fieldName||a]=c,c.references){let d=b[c.references.model];d&&(f[c.fieldName||a].references={...c.references,model:d.modelName,field:c.references.field})}}),c[d.modelName]){c[d.modelName].fields={...c[d.modelName].fields,...f};continue}c[d.modelName]={fields:f,order:d.order||1/0}}return c}(a),c=(0,l.h)(a.logger),{kysely:d,databaseType:e}=await (0,i.t)(a);e||(c.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),e="sqlite"),d||(c.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));let f="public";if("postgres"===e){f=await w(d),c.debug(`PostgreSQL migration: Using schema '${f}' (from search_path)`);try{(await (0,r.l)`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${f}
			`.execute(d)).rows[0]||c.warn(`Schema '${f}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(a){c.debug(`Could not verify schema existence: ${a instanceof Error?a.message:String(a)}`)}}let g=await d.introspection.getTables(),j=g;if("postgres"===e)try{let a=await (0,r.l)`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${f}
				AND table_type = 'BASE TABLE'
			`.execute(d),b=new Set(a.rows.map(a=>a.table_name));j=g.filter(a=>a.schema===f&&b.has(a.name)),c.debug(`Found ${j.length} table(s) in schema '${f}': ${j.map(a=>a.name).join(", ")||"(none)"}`)}catch(a){c.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${a instanceof Error?a.message:String(a)}`)}let k=[],m=[];for(let[a,d]of Object.entries(b)){let b=j.find(b=>b.name===a);if(!b){let b=k.findIndex(b=>b.table===a),c={table:a,fields:d.fields,order:d.order||1/0},e=k.findIndex(a=>(a.order||1/0)>c.order);-1===e?-1===b?k.push(c):k[b].fields={...k[b].fields,...d.fields}:k.splice(e,0,c);continue}let f={};for(let[g,h]of Object.entries(d.fields)){let d=b.columns.find(a=>a.name===g);if(!d){f[g]=h;continue}!function(a,b,c){if("string[]"===b||"number[]"===b)return a.toLowerCase().includes("json");let d=v[c];return(Array.isArray(b)?d.string.map(a=>a.toLowerCase()):d[b].map(a=>a.toLowerCase())).includes(a.toLowerCase().split("(")[0].trim())}(d.dataType,h.type,e)&&c.warn(`Field ${g} in table ${a} has a different type in the database. Expected ${h.type} but got ${d.dataType}.`)}Object.keys(f).length>0&&m.push({table:a,fields:f,order:d.order||1/0})}let n=[],o=a.advanced?.database?.generateId==="uuid",p=a.advanced?.database?.useNumberId||a.advanced?.database?.generateId==="serial";function q(a,b){let c=a.type,d={string:{sqlite:"text",postgres:"text",mysql:a.unique?"varchar(255)":a.references?"varchar(36)":a.sortable||a.index?"varchar(255)":"text",mssql:a.unique||a.sortable?"varchar(255)":a.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:a.bigint?"bigint":"integer",postgres:a.bigint?"bigint":"integer",mysql:a.bigint?"bigint":"integer",mssql:a.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:(0,r.l)`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:p?(0,r.l)`integer GENERATED BY DEFAULT AS IDENTITY`:o?"uuid":"text",mysql:p?"integer":"varchar(36)",mssql:p?"integer":"varchar(36)",sqlite:p?"integer":"text"},foreignKeyId:{postgres:p?"integer":o?"uuid":"text",mysql:p?"integer":"varchar(36)",mssql:p?"integer":"varchar(36)",sqlite:p?"integer":"text"}};return"id"===b||a.references?.field==="id"?"id"===b?d.id[e]:d.foreignKeyId[e]:"sqlite"===e&&("string[]"===c||"number[]"===c)?"text":"string[]"===c||"number[]"===c?"jsonb":Array.isArray(c)?"text":d[c][e||"sqlite"]}let s=(0,h.t)({schema:(0,h.a)(a),usePlural:!1}),t=(0,h.n)({schema:(0,h.a)(a),usePlural:!1});function u(a,b){try{return`${s(a)}.${t({model:a,field:b})}`}catch{return`${a}.${b}`}}if(m.length)for(let a of m)for(let[b,c]of Object.entries(a.fields)){let f=q(c,b),g=d.schema.alterTable(a.table);c.index&&(g=g.addIndex(`${a.table}_${b}_idx`));let h=g.addColumn(b,f,a=>(a=!1!==c.required?a.notNull():a,c.references&&(a=a.references(u(c.references.model,c.references.field)).onDelete(c.references.onDelete||"cascade")),c.unique&&(a=a.unique()),"date"===c.type&&"function"==typeof c.defaultValue&&("postgres"===e||"mysql"===e||"mssql"===e)&&(a="mysql"===e?a.defaultTo((0,r.l)`CURRENT_TIMESTAMP(3)`):a.defaultTo((0,r.l)`CURRENT_TIMESTAMP`)),a));n.push(h)}let x=[];if(a.advanced?.database?.useNumberId&&c.warn("`useNumberId` is deprecated. Please use `generateId` with `serial` instead."),k.length)for(let a of k){let b=q({type:p?"number":"string"},"id"),c=d.schema.createTable(a.table).addColumn("id",b,a=>{if(p)return"postgres"===e?a.primaryKey().notNull():"sqlite"===e?a.primaryKey().notNull():"mssql"===e?a.identity().primaryKey().notNull():a.autoIncrement().primaryKey().notNull();return o&&"postgres"===e?a.primaryKey().defaultTo((0,r.l)`pg_catalog.gen_random_uuid()`).notNull():a.primaryKey().notNull()});for(let[b,f]of Object.entries(a.fields)){let g=q(f,b);if(c=c.addColumn(b,g,a=>(a=!1!==f.required?a.notNull():a,f.references&&(a=a.references(u(f.references.model,f.references.field)).onDelete(f.references.onDelete||"cascade")),f.unique&&(a=a.unique()),"date"===f.type&&"function"==typeof f.defaultValue&&("postgres"===e||"mysql"===e||"mssql"===e)&&(a="mysql"===e?a.defaultTo((0,r.l)`CURRENT_TIMESTAMP(3)`):a.defaultTo((0,r.l)`CURRENT_TIMESTAMP`)),a)),f.index){let c=d.schema.createIndex(`${a.table}_${b}_${f.unique?"uidx":"idx"}`).on(a.table).columns([b]);x.push(f.unique?c.unique():c)}}n.push(c)}if(x.length)for(let a of x)n.push(a);return{toBeCreated:k,toBeAdded:m,runMigrations:async function(){for(let a of n)await a.execute()},compileMigrations:async function(){return n.map(a=>a.compile().sql).join(";\n\n")+";"}}}var y=c(37052),z=c(49957),A=c(74297),B=c(774),C=c(81899),D=c(25038),E=c(71121),F=c(50891),G=c(75301);let H=()=>(0,D.Aw)("/get-session",{method:"GET",operationId:"getSession",query:B.p,requireHeaders:!0,metadata:{openapi:{operationId:"getSession",description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async a=>{try{let b=await a.getSignedCookie(a.context.authCookies.sessionToken.name,a.context.secret);if(!b)return null;let c=(0,B.f)(a,a.context.authCookies.sessionData.name),d=null;if(c){let b=a.context.options.session?.cookieCache?.strategy||"compact";if("jwe"===b){let b=await (0,z.n)(c,a.context.secret,"better-auth-session");if(b&&b.session&&b.user)d={session:{session:b.session,user:b.user,updatedAt:b.updatedAt,version:b.version},expiresAt:b.exp?1e3*b.exp:Date.now()};else{let b=a.context.authCookies.sessionData.name;return a.setCookie(b,"",{maxAge:0}),a.json(null)}}else if("jwt"===b){let b=await (0,z.i)(c,a.context.secret);if(b&&b.session&&b.user)d={session:{session:b.session,user:b.user,updatedAt:b.updatedAt,version:b.version},expiresAt:b.exp?1e3*b.exp:Date.now()};else{let b=a.context.authCookies.sessionData.name;return a.setCookie(b,"",{maxAge:0}),a.json(null)}}else{let b=(0,o.t)(F.a.decode(E.z.decode(c)));if(b)if(await (0,G.s)("SHA-256","base64urlnopad").verify(a.context.secret,JSON.stringify({...b.session,expiresAt:b.expiresAt}),b.signature))d=b;else{let b=a.context.authCookies.sessionData.name;return a.setCookie(b,"",{maxAge:0}),a.json(null)}}}let e=await a.getSignedCookie(a.context.authCookies.dontRememberToken.name,a.context.secret);if(d?.session&&a.context.options.session?.cookieCache?.enabled&&!a.query?.disableCookieCache){let b=d.session,c=a.context.options.session?.cookieCache?.version,e="1";if(c){if("string"==typeof c)e=c;else if("function"==typeof c){let a=c(b.session,b.user);e=a instanceof Promise?await a:a}}if((b.version||"1")!==e){let b=a.context.authCookies.sessionData.name;a.setCookie(b,"",{maxAge:0})}else if(d.expiresAt<Date.now()||b.session.expiresAt<new Date){let b=a.context.authCookies.sessionData.name;a.setCookie(b,"",{maxAge:0})}else{let c=a.context.sessionConfig.cookieRefreshCache;if(!1===c)return a.context.session=b,a.json({session:b.session,user:b.user});if(d.expiresAt-Date.now()<1e3*c.updateAge){let c=(0,k.u)(a.context.options.session?.cookieCache?.maxAge||300,"sec"),d={session:{...b.session,expiresAt:c},user:b.user,updatedAt:Date.now()};await (0,B.s)(a,d,!1);let e=(0,k.s)(a.context.options,{...d.session,expiresAt:new Date(d.session.expiresAt),createdAt:new Date(d.session.createdAt),updatedAt:new Date(d.session.updatedAt)}),f=(0,k.l)(a.context.options,{...d.user,createdAt:new Date(d.user.createdAt),updatedAt:new Date(d.user.updatedAt)});return a.context.session={session:e,user:f},a.json({session:e,user:f})}let e=(0,k.s)(a.context.options,{...b.session,expiresAt:new Date(b.session.expiresAt),createdAt:new Date(b.session.createdAt),updatedAt:new Date(b.session.updatedAt)}),f=(0,k.l)(a.context.options,{...b.user,createdAt:new Date(b.user.createdAt),updatedAt:new Date(b.user.updatedAt)});return a.context.session={session:e,user:f},a.json({session:e,user:f})}}let f=await a.context.internalAdapter.findSession(b);if(a.context.session=f,!f||f.session.expiresAt<new Date)return(0,B.n)(a),f&&await a.context.internalAdapter.deleteSession(f.session.token),a.json(null);if(e||a.query?.disableRefresh){let b=(0,k.s)(a.context.options,f.session),c=(0,k.l)(a.context.options,f.user);return a.json({session:b,user:c})}let g=a.context.sessionConfig.expiresIn,h=a.context.sessionConfig.updateAge;if(f.session.expiresAt.valueOf()-1e3*g+1e3*h<=Date.now()&&(!a.query?.disableRefresh||!a.context.options.session?.disableSessionRefresh)){let b=await a.context.internalAdapter.updateSession(f.session.token,{expiresAt:(0,k.u)(a.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!b)return(0,B.n)(a),a.json(null,{status:401});let c=(b.expiresAt.valueOf()-Date.now())/1e3;await (0,B.c)(a,{session:b,user:f.user},!1,{maxAge:c});let d=(0,k.s)(a.context.options,b),e=(0,k.l)(a.context.options,f.user);return a.json({session:d,user:e})}return await (0,B.s)(a,f,!!e),a.json(f)}catch(b){throw a.context.logger.error("INTERNAL_SERVER_ERROR",b),new C.LG("INTERNAL_SERVER_ERROR",{message:q.q.FAILED_TO_GET_SESSION})}}),I=async(a,b)=>{if(a.context.session)return a.context.session;let c=await H()({...a,asResponse:!1,headers:a.headers,returnHeaders:!1,returnStatus:!1,query:{...b,...a.query}}).catch(a=>null);return a.context.session=c,c},J=(0,D.Di)(async a=>{let b=await I(a);if(!b?.session)throw new C.LG("UNAUTHORIZED");return{session:b}}),K=(0,D.Di)(async a=>{let b=await I(a,{disableCookieCache:!0});if(!b?.session)throw new C.LG("UNAUTHORIZED");return{session:b}});(0,D.Di)(async a=>{let b=await I(a);if(!b?.session&&(a.request||a.headers))throw new C.LG("UNAUTHORIZED");return{session:b}});let L=(0,D.Di)(async a=>{let b=await I(a);if(!b?.session)throw new C.LG("UNAUTHORIZED");if(0===a.context.sessionConfig.freshAge)return{session:b};let c=a.context.sessionConfig.freshAge,d=new Date(b.session.updatedAt||b.session.createdAt).getTime();if(!(Date.now()-d<1e3*c))throw new C.LG("FORBIDDEN",{message:"Session is not fresh"});return{session:b}}),M=(0,D.Aw)("/revoke-session",{method:"POST",body:m.Ikc({token:m.YjP().meta({description:"The token to revoke"})}),use:[K],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async a=>{let b=a.body.token;if((await a.context.internalAdapter.findSession(b))?.session.userId===a.context.session.user.id)try{await a.context.internalAdapter.deleteSession(b)}catch(b){throw a.context.logger.error(b&&"object"==typeof b&&"name"in b?b.name:"",b),new C.LG("INTERNAL_SERVER_ERROR")}return a.json({status:!0})}),N=(0,D.Aw)("/revoke-sessions",{method:"POST",use:[K],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async a=>{try{await a.context.internalAdapter.deleteSessions(a.context.session.user.id)}catch(b){throw a.context.logger.error(b&&"object"==typeof b&&"name"in b?b.name:"",b),new C.LG("INTERNAL_SERVER_ERROR")}return a.json({status:!0})}),O=(0,D.Aw)("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[K],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async a=>{let b=a.context.session;if(!b.user)throw new C.LG("UNAUTHORIZED");let c=(await a.context.internalAdapter.listSessions(b.user.id)).filter(a=>a.expiresAt>new Date).filter(b=>b.token!==a.context.session.session.token);return await Promise.all(c.map(b=>a.context.internalAdapter.deleteSession(b.token))),a.json({status:!0})});var P=c(54833),Q=c(48070),R=Object.defineProperty,S=Object.defineProperties,T=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,X=(a,b,c)=>b in a?R(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,Y=(a,b)=>{for(var c in b||(b={}))V.call(b,c)&&X(a,c,b[c]);if(U)for(var c of U(b))W.call(b,c)&&X(a,c,b[c]);return a},Z=(a,b)=>S(a,T(b)),$=class extends Error{constructor(a,b,c){super(b||a.toString(),{cause:c}),this.status=a,this.statusText=b,this.error=c}},_=async(a,b)=>{var c,d,e,f,g,h;let i=b||{},j={onRequest:[null==b?void 0:b.onRequest],onResponse:[null==b?void 0:b.onResponse],onSuccess:[null==b?void 0:b.onSuccess],onError:[null==b?void 0:b.onError],onRetry:[null==b?void 0:b.onRetry]};if(!b||!(null==b?void 0:b.plugins))return{url:a,options:i,hooks:j};for(let k of(null==b?void 0:b.plugins)||[]){if(k.init){let d=await (null==(c=k.init)?void 0:c.call(k,a.toString(),b));i=d.options||i,a=d.url}j.onRequest.push(null==(d=k.hooks)?void 0:d.onRequest),j.onResponse.push(null==(e=k.hooks)?void 0:e.onResponse),j.onSuccess.push(null==(f=k.hooks)?void 0:f.onSuccess),j.onError.push(null==(g=k.hooks)?void 0:g.onError),j.onRetry.push(null==(h=k.hooks)?void 0:h.onRetry)}return{url:a,options:i,hooks:j}},aa=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(){return this.options.delay}},ab=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(a){return Math.min(this.options.maxDelay,this.options.baseDelay*2**a)}},ac=async a=>{let b={},c=async a=>"function"==typeof a?await a():a;if(null==a?void 0:a.auth){if("Bearer"===a.auth.type){let d=await c(a.auth.token);if(!d)return b;b.authorization=`Bearer ${d}`}else if("Basic"===a.auth.type){let d=c(a.auth.username),e=c(a.auth.password);if(!d||!e)return b;b.authorization=`Basic ${btoa(`${d}:${e}`)}`}else if("Custom"===a.auth.type){let d=c(a.auth.value);if(!d)return b;b.authorization=`${c(a.auth.prefix)} ${d}`}}return b},ad=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function ae(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}function af(a){try{return JSON.parse(a)}catch(b){return a}}function ag(a){return"function"==typeof a}async function ah(a){let b=new Headers(null==a?void 0:a.headers);for(let[c,d]of Object.entries(await ac(a)||{}))b.set(c,d);if(!b.has("content-type")){let c=ae(null==a?void 0:a.body)?"application/json":null;c&&b.set("content-type",c)}return b}var ai=class a extends Error{constructor(b,c){super(c||JSON.stringify(b,null,2)),this.issues=b,Object.setPrototypeOf(this,a.prototype)}};async function aj(a,b){let c=await a["~standard"].validate(b);if(c.issues)throw new ai(c.issues);return c.value}var ak=["get","post","put","patch","delete"],al=async(a,b)=>{var c,d,e,f,g,h,i,j;let{hooks:k,url:l,options:m}=await _(a,b),n=function(a){if(null==a?void 0:a.customFetchImpl)return a.customFetchImpl;if("undefined"!=typeof globalThis&&ag(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&ag(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(m),o=new AbortController,p=null!=(c=m.signal)?c:o.signal,q=function(a,b){let{baseURL:c,params:d,query:e}=b||{query:{},params:{},baseURL:""},f=a.startsWith("http")?a.split("/").slice(0,3).join("/"):c||"";if(a.startsWith("@")){let b=a.toString().split("@")[1].split("/")[0];ak.includes(b)&&(a=a.replace(`@${b}/`,"/"))}f.endsWith("/")||(f+="/");let[g,h]=a.replace(f,"").split("?"),i=new URLSearchParams(h);for(let[a,b]of Object.entries(e||{}))null!=b&&i.set(a,String(b));if(d)if(Array.isArray(d))for(let[a,b]of g.split("/").filter(a=>a.startsWith(":")).entries()){let c=d[a];g=g.replace(b,c)}else for(let[a,b]of Object.entries(d))g=g.replace(`:${a}`,String(b));(g=g.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(g=g.slice(1));let j=i.toString();return(j=j.length>0?`?${j}`.replace(/\+/g,"%20"):"",f.startsWith("http"))?new URL(`${g}${j}`,f):`${f}${g}${j}`}(l,m),r=function(a){if(!(null==a?void 0:a.body))return null;let b=new Headers(null==a?void 0:a.headers);if(ae(a.body)&&!b.has("content-type")){for(let[b,c]of Object.entries(null==a?void 0:a.body))c instanceof Date&&(a.body[b]=c.toISOString());return JSON.stringify(a.body)}return a.body}(m),s=await ah(m),t=function(a,b){var c;if(null==b?void 0:b.method)return b.method.toUpperCase();if(a.startsWith("@")){let d=null==(c=a.split("@")[1])?void 0:c.split("/")[0];return ak.includes(d)?d.toUpperCase():(null==b?void 0:b.body)?"POST":"GET"}return(null==b?void 0:b.body)?"POST":"GET"}(l,m),u=Z(Y({},m),{url:q,headers:s,body:r,method:t,signal:p});for(let a of k.onRequest)if(a){let b=await a(u);b instanceof Object&&(u=b)}("pipeTo"in u&&"function"==typeof u.pipeTo||"function"==typeof(null==(d=null==b?void 0:b.body)?void 0:d.pipe))&&!("duplex"in u)&&(u.duplex="half");let{clearTimeout:v}=function(a,b){let c;return!(null==a?void 0:a.signal)&&(null==a?void 0:a.timeout)&&(c=setTimeout(()=>null==b?void 0:b.abort(),null==a?void 0:a.timeout)),{abortTimeout:c,clearTimeout:()=>{c&&clearTimeout(c)}}}(m,o),w=await n(u.url,u);v();let x={response:w,request:u};for(let a of k.onResponse)if(a){let c=await a(Z(Y({},x),{response:(null==(e=null==b?void 0:b.hookOptions)?void 0:e.cloneResponse)?w.clone():w}));c instanceof Response?w=c:c instanceof Object&&(w=c.response)}if(w.ok){if("HEAD"===u.method)return{data:"",error:null};let a=function(a){let b=a.headers.get("content-type"),c=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!b)return"json";let d=b.split(";").shift()||"";return ad.test(d)?"json":c.has(d)||d.startsWith("text/")?"text":"blob"}(w),c={data:"",response:w,request:u};if("json"===a||"text"===a){let a=await w.text(),b=null!=(f=u.jsonParser)?f:af;c.data=await b(a)}else c.data=await w[a]();for(let a of((null==u?void 0:u.output)&&u.output&&!u.disableValidation&&(c.data=await aj(u.output,c.data)),k.onSuccess))a&&await a(Z(Y({},c),{response:(null==(g=null==b?void 0:b.hookOptions)?void 0:g.cloneResponse)?w.clone():w}));return(null==b?void 0:b.throw)?c.data:{data:c.data,error:null}}let y=null!=(h=null==b?void 0:b.jsonParser)?h:af,z=await w.text(),A=function(a){try{return JSON.parse(a),!0}catch(a){return!1}}(z),B=A?await y(z):null,C={response:w,responseText:z,request:u,error:Z(Y({},B),{status:w.status,statusText:w.statusText})};for(let a of k.onError)a&&await a(Z(Y({},C),{response:(null==(i=null==b?void 0:b.hookOptions)?void 0:i.cloneResponse)?w.clone():w}));if(null==b?void 0:b.retry){let c=function(a){if("number"==typeof a)return new aa({type:"linear",attempts:a,delay:1e3});switch(a.type){case"linear":return new aa(a);case"exponential":return new ab(a);default:throw Error("Invalid retry strategy")}}(b.retry),d=null!=(j=b.retryAttempt)?j:0;if(await c.shouldAttemptRetry(d,w)){for(let a of k.onRetry)a&&await a(x);let e=c.getDelay(d);return await new Promise(a=>setTimeout(a,e)),await al(a,Z(Y({},b),{retryAttempt:d+1}))}}if(null==b?void 0:b.throw)throw new $(w.status,w.statusText,A?B:z);return{data:null,error:Z(Y({},B),{status:w.status,statusText:w.statusText})}};function am(a){let b=a=>new Date(new Date().getTime()+1e3*a);return{tokenType:a.token_type,accessToken:a.access_token,refreshToken:a.refresh_token,accessTokenExpiresAt:a.expires_in?b(a.expires_in):void 0,refreshTokenExpiresAt:a.refresh_token_expires_in?b(a.refresh_token_expires_in):void 0,scopes:a?.scope?"string"==typeof a.scope?a.scope.split(" "):a.scope:[],idToken:a.id_token,raw:a}}async function an(a){let b=new TextEncoder().encode(a),c=await crypto.subtle.digest("SHA-256",b);return E.z.encode(new Uint8Array(c),{padding:!1})}async function ao({id:a,options:b,authorizationEndpoint:c,state:d,codeVerifier:e,scopes:f,claims:g,redirectURI:h,duration:i,prompt:j,accessType:k,responseType:l,display:m,loginHint:n,hd:o,responseMode:p,additionalParams:q,scopeJoiner:r}){let s=new URL(c);s.searchParams.set("response_type",l||"code");let t=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;if(s.searchParams.set("client_id",t),s.searchParams.set("state",d),s.searchParams.set("scope",f.join(r||" ")),s.searchParams.set("redirect_uri",b.redirectURI||h),i&&s.searchParams.set("duration",i),m&&s.searchParams.set("display",m),n&&s.searchParams.set("login_hint",n),j&&s.searchParams.set("prompt",j),o&&s.searchParams.set("hd",o),k&&s.searchParams.set("access_type",k),p&&s.searchParams.set("response_mode",p),e){let a=await an(e);s.searchParams.set("code_challenge_method","S256"),s.searchParams.set("code_challenge",a)}if(g){let a=g.reduce((a,b)=>(a[b]=null,a),{});s.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...a}}))}return q&&Object.entries(q).forEach(([a,b])=>{s.searchParams.set(a,b)}),s}async function ap({refreshToken:a,options:b,tokenEndpoint:c,authentication:d,extraParams:e}){let{body:f,headers:g}=function({refreshToken:a,options:b,authentication:c,extraParams:d,resource:e}){let f=new URLSearchParams,g={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(f.set("grant_type","refresh_token"),f.set("refresh_token",a),"basic"===c){let a=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;a?g.authorization="Basic "+E.K.encode(`${a}:${b.clientSecret??""}`):g.authorization="Basic "+E.K.encode(`:${b.clientSecret??""}`)}else{let a=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;f.set("client_id",a),b.clientSecret&&f.set("client_secret",b.clientSecret)}if(e)if("string"==typeof e)f.append("resource",e);else for(let a of e)f.append("resource",a);if(d)for(let[a,b]of Object.entries(d))f.set(a,b);return{body:f,headers:g}}({refreshToken:a,options:b,authentication:d,extraParams:e}),{data:h,error:i}=await al(c,{method:"POST",body:f,headers:g});if(i)throw i;let j={accessToken:h.access_token,refreshToken:h.refresh_token,tokenType:h.token_type,scopes:h.scope?.split(" "),idToken:h.id_token};return h.expires_in&&(j.accessTokenExpiresAt=new Date(new Date().getTime()+1e3*h.expires_in)),j}async function aq({code:a,codeVerifier:b,redirectURI:c,options:d,tokenEndpoint:e,authentication:f,deviceId:g,headers:h,additionalParams:i={},resource:j}){let{body:k,headers:l}=function({code:a,codeVerifier:b,redirectURI:c,options:d,authentication:e,deviceId:f,headers:g,additionalParams:h={},resource:i}){let j=new URLSearchParams,k={"content-type":"application/x-www-form-urlencoded",accept:"application/json",...g};if(j.set("grant_type","authorization_code"),j.set("code",a),b&&j.set("code_verifier",b),d.clientKey&&j.set("client_key",d.clientKey),f&&j.set("device_id",f),j.set("redirect_uri",d.redirectURI||c),i)if("string"==typeof i)j.append("resource",i);else for(let a of i)j.append("resource",a);if("basic"===e){let a=Array.isArray(d.clientId)?d.clientId[0]:d.clientId;k.authorization=`Basic ${E.K.encode(`${a}:${d.clientSecret??""}`)}`}else{let a=Array.isArray(d.clientId)?d.clientId[0]:d.clientId;j.set("client_id",a),d.clientSecret&&j.set("client_secret",d.clientSecret)}for(let[a,b]of Object.entries(h))j.has(a)||j.append(a,b);return{body:j,headers:k}}({code:a,codeVerifier:b,redirectURI:c,options:d,authentication:f,deviceId:g,headers:h,additionalParams:i,resource:j}),{data:m,error:n}=await al(e,{method:"POST",body:k,headers:l});if(n)throw n;return am(m)}var ar=c(81233),as=c(99609),at=c(11980),au=c(20228);function av(a){let b;if("string"==typeof a){let c=a.split(".");(3===c.length||5===c.length)&&([b]=c)}else if("object"==typeof a&&a)if("protected"in a)b=a.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof b||!b)throw Error();let a=JSON.parse(at.D0.decode((0,as.D)(b)));if(!(0,au.G)(a))throw Error();return a}catch{throw TypeError("Invalid Token or Protected Header formatting")}}var aw=c(63624);function ax(a){let b,c;if("string"!=typeof a)throw new aw.Dp("JWTs must use Compact JWS serialization, JWT must be a string");let{1:d,length:e}=a.split(".");if(5===e)throw new aw.Dp("Only JWTs using Compact JWS serialization can be decoded");if(3!==e)throw new aw.Dp("Invalid JWT");if(!d)throw new aw.Dp("JWTs must contain a payload");try{b=(0,as.D)(d)}catch{throw new aw.Dp("Failed to base64url decode the payload")}try{c=JSON.parse(at.D0.decode(b))}catch{throw new aw.Dp("Failed to parse the decoded payload as JSON")}if(!(0,au.G)(c))throw new aw.Dp("Invalid JWT Claims Set");return c}var ay=c(65805);function az(a){return(0,au.G)(a)}class aA{#v;#w=new WeakMap;constructor(a){if(!function(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(az)}(a))throw new aw.Dm("JSON Web Key Set malformed");this.#v=structuredClone(a)}jwks(){return this.#v}async getKey(a,b){let{alg:c,kid:d}={...a,...b?.header},e=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new aw.T0('Unsupported "alg" value for a JSON Web Key Set')}}(c),f=this.#v.keys.filter(a=>{let b=e===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&("string"==typeof a.alg||"AKP"===e)&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv;break;case"Ed25519":case"EdDSA":b="Ed25519"===a.crv}return b}),{0:g,length:h}=f;if(0===h)throw new aw.BT;if(1!==h){let a=new aw.$4,b=this.#w;throw a[Symbol.asyncIterator]=async function*(){for(let a of f)try{yield await aB(b,a,c)}catch{}},a}return aB(this.#w,g,c)}}async function aB(a,b,c){let d=a.get(b)||a.set(b,{}).get(b);if(void 0===d[c]){let a=await (0,ay.Og)({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new aw.Dm("JSON Web Key Set members must be public keys");d[c]=a}return d[c]}function aC(a){let b=new aA(a),c=async(a,c)=>b.getKey(a,c);return Object.defineProperties(c,{jwks:{value:()=>structuredClone(b.jwks()),enumerable:!1,configurable:!1,writable:!1}}),c}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(d="jose/v6.1.2");let aD=Symbol();async function aE(a,b,c,d=fetch){let e=await d(a,{method:"GET",signal:c,redirect:"manual",headers:b}).catch(a=>{if("TimeoutError"===a.name)throw new aw.xb;throw a});if(200!==e.status)throw new aw.i4("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await e.json()}catch{throw new aw.i4("Failed to parse the JSON Web Key Set HTTP response as JSON")}}let aF=Symbol();class aG{#x;#y;#z;#A;#B;#C;#D;#E;#F;#G;constructor(a,b){if(!(a instanceof URL))throw TypeError("url must be an instance of URL");this.#x=new URL(a.href),this.#y="number"==typeof b?.timeoutDuration?b?.timeoutDuration:5e3,this.#z="number"==typeof b?.cooldownDuration?b?.cooldownDuration:3e4,this.#A="number"==typeof b?.cacheMaxAge?b?.cacheMaxAge:6e5,this.#D=new Headers(b?.headers),d&&!this.#D.has("User-Agent")&&this.#D.set("User-Agent",d),this.#D.has("accept")||(this.#D.set("accept","application/json"),this.#D.append("accept","application/jwk-set+json")),this.#E=b?.[aD],b?.[aF]!==void 0&&(this.#G=b?.[aF],function(a,b){return!("object"!=typeof a||null===a||!("uat"in a)||"number"!=typeof a.uat||Date.now()-a.uat>=b)&&"jwks"in a&&!!(0,au.G)(a.jwks)&&!!Array.isArray(a.jwks.keys)&&!!Array.prototype.every.call(a.jwks.keys,au.G)}(b?.[aF],this.#A)&&(this.#B=this.#G.uat,this.#F=aC(this.#G.jwks)))}pendingFetch(){return!!this.#C}coolingDown(){return"number"==typeof this.#B&&Date.now()<this.#B+this.#z}fresh(){return"number"==typeof this.#B&&Date.now()<this.#B+this.#A}jwks(){return this.#F?.jwks()}async getKey(a,b){this.#F&&this.fresh()||await this.reload();try{return await this.#F(a,b)}catch(c){if(c instanceof aw.BT&&!1===this.coolingDown())return await this.reload(),this.#F(a,b);throw c}}async reload(){this.#C&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this.#C=void 0),this.#C||=aE(this.#x.href,this.#D,AbortSignal.timeout(this.#y),this.#E).then(a=>{this.#F=aC(a),this.#G&&(this.#G.uat=Date.now(),this.#G.jwks=a),this.#B=Date.now(),this.#C=void 0}).catch(a=>{throw this.#C=void 0,a}),await this.#C}}let aH=async a=>{let{data:b}=await al("https://appleid.apple.com/auth/keys");if(!b?.keys)throw new C.LG("BAD_REQUEST",{message:"Keys not found"});let c=b.keys.find(b=>b.kid===a);if(!c)throw Error(`JWK with kid ${a} not found`);return await (0,ay.Og)(c,c.alg)},aI=async(a,b,c)=>{let d=`https://cognito-idp.${b}.amazonaws.com/${c}/.well-known/jwks.json`;try{let{data:b}=await al(d);if(!b?.keys)throw new C.LG("BAD_REQUEST",{message:"Keys not found"});let c=b.keys.find(b=>b.kid===a);if(!c)throw Error(`JWK with kid ${a} not found`);return await (0,ay.Og)(c,c.alg)}catch(a){throw Q.i.error("Failed to fetch Cognito public key:",a),a}},aJ=(a="")=>a.split("://").map(a=>a.replace(/\/{2,}/g,"/")).join("://"),aK={apple:a=>({id:"apple",name:"Apple",async createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["email","name"];return a.scope&&e.push(...a.scope),c&&e.push(...c),await ao({id:"apple",options:a,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:e,state:b,redirectURI:d,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>aq({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://appleid.apple.com/auth/token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let{kid:d,alg:e}=av(b);if(!d||!e)return!1;let{payload:f}=await (0,P.V)(b,await aH(d),{algorithms:[e],issuer:"https://appleid.apple.com",audience:a.audience&&a.audience.length?a.audience:a.appBundleIdentifier?a.appBundleIdentifier:a.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(a=>{void 0!==f[a]&&(f[a]=!!f[a])}),(!c||f.nonce===c)&&!!f},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=ax(b.idToken);if(!c)return null;let d=b.user?`${b.user.name?.firstName} ${b.user.name?.lastName}`:c.name||c.email,e="boolean"==typeof c.email_verified?c.email_verified:"true"===c.email_verified,f={...c,name:d},g=await a.mapProfileToUser?.(f);return{user:{id:c.sub,name:f.name,emailVerified:e,email:c.email,...g},data:f}},options:a}),atlassian:a=>({id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw Q.i.error("Client Id and Secret are required for Atlassian"),new ar.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new ar.t("codeVerifier is required for Atlassian");let f=a.disableDefaultScope?[]:["read:jira-user","offline_access"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ao({id:"atlassian",options:a,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e,additionalParams:{audience:"api.atlassian.com"},prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>aq({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return null;try{let{data:c}=await al("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.account_id,name:c.name,email:c.email,image:c.picture,emailVerified:!1,...d},data:c}}catch(a){return Q.i.error("Failed to fetch user info from Figma:",a),null}},options:a}),cognito:a=>{if(!a.domain||!a.region||!a.userPoolId)throw Q.i.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new ar.t("DOMAIN_AND_REGION_REQUIRED");let b=a.domain.replace(/^https?:\/\//,""),c=`https://${b}/oauth2/authorize`,d=`https://${b}/oauth2/token`,e=`https://${b}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f}){if(!a.clientId)throw Q.i.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new ar.t("CLIENT_ID_AND_SECRET_REQUIRED");if(a.requireClientSecret&&!a.clientSecret)throw Q.i.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new ar.t("CLIENT_SECRET_REQUIRED");let g=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&g.push(...a.scope),d&&g.push(...d),await ao({id:"cognito",options:{...a},authorizationEndpoint:c,scopes:g,state:b,codeVerifier:e,redirectURI:f,prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>aq({code:b,codeVerifier:c,redirectURI:e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:d}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);try{let{kid:d,alg:e}=av(b);if(!d||!e)return!1;let f=await aI(d,a.region,a.userPoolId),g=`https://cognito-idp.${a.region}.amazonaws.com/${a.userPoolId}`,{payload:h}=await (0,P.V)(b,f,{algorithms:[e],issuer:g,audience:a.clientId,maxTokenAge:"1h"});if(c&&h.nonce!==c)return!1;return!0}catch(a){return Q.i.error("Failed to verify ID token:",a),!1}},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(b.idToken)try{let c=ax(b.idToken);if(!c)return null;let d=c.name||c.given_name||c.username||c.email,e={...c,name:d},f=await a.mapProfileToUser?.(e);return{user:{id:c.sub,name:e.name,email:c.email,image:c.picture,emailVerified:c.email_verified,...f},data:e}}catch(a){Q.i.error("Failed to decode ID token:",a)}if(b.accessToken)try{let{data:c}=await al(e,{headers:{Authorization:`Bearer ${b.accessToken}`}});if(c){let b=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.given_name||c.username,email:c.email,image:c.picture,emailVerified:c.email_verified,...b},data:c}}}catch(a){Q.i.error("Failed to fetch user info from Cognito:",a)}return null},options:a}},discord:a=>({id:"discord",name:"Discord",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["identify","email"];c&&e.push(...c),a.scope&&e.push(...a.scope);let f=e.includes("bot")&&void 0!==a.permissions?`&permissions=${a.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${e.join("+")}&response_type=code&client_id=${a.clientId}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}&prompt=${a.prompt||"none"}${f}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>aq({code:b,redirectURI:c,options:a,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;if(null===c.avatar)c.image_url=`https://cdn.discordapp.com/embed/avatars/${"0"===c.discriminator?Number(BigInt(c.id)>>BigInt(22))%6:parseInt(c.discriminator)%5}.png`;else{let a=c.avatar.startsWith("a_")?"gif":"png";c.image_url=`https://cdn.discordapp.com/avatars/${c.id}/${c.avatar}.${a}`}let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.global_name||c.username||"",email:c.email,emailVerified:c.verified,image:c.image_url,...e},data:c}},options:a}),facebook:a=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:b,scopes:c,redirectURI:d,loginHint:e}){let f=a.disableDefaultScope?[]:["email","public_profile"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await ao({id:"facebook",options:a,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:f,state:b,redirectURI:d,loginHint:e,additionalParams:a.configId?{config_id:a.configId}:{}})},validateAuthorizationCode:async({code:b,redirectURI:c})=>aq({code:b,redirectURI:c,options:a,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);if(3===b.split(".").length)try{let{payload:d}=await (0,P.V)(b,function(a,b){let c=new aG(a,void 0),d=async(a,b)=>c.getKey(a,b);return Object.defineProperties(d,{coolingDown:{get:()=>c.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>c.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>c.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>c.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>c.jwks(),enumerable:!0,configurable:!1,writable:!1}}),d}(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:a.clientId,issuer:"https://www.facebook.com"});if(c&&d.nonce!==c)return!1;return!!d}catch(a){return!1}return!0},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(b.idToken&&3===b.idToken.split(".").length){let c=ax(b.idToken),d={id:c.sub,name:c.name,email:c.email,picture:{data:{url:c.picture,height:100,width:100,is_silhouette:!1}}},e=await a.mapProfileToUser?.({...d,email_verified:!1});return{user:{...d,emailVerified:!1,...e},data:c}}let{data:c,error:d}=await al("https://graph.facebook.com/me?fields="+["id","name","email","picture",...a?.fields||[]].join(","),{auth:{type:"Bearer",token:b.accessToken}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name,email:c.email,image:c.picture.data.url,emailVerified:c.email_verified,...e},data:c}},options:a}),figma:a=>({id:"figma",name:"Figma",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw Q.i.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new ar.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new ar.t("codeVerifier is required for Figma");let f=a.disableDefaultScope?[]:["file_read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await ao({id:"figma",options:a,authorizationEndpoint:"https://www.figma.com/oauth",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>aq({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://www.figma.com/api/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://www.figma.com/api/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);try{let{data:c}=await al("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return Q.i.error("Failed to fetch user from Figma"),null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.handle,email:c.email,image:c.img_url,emailVerified:!!c.email,...d},data:c}}catch(a){return Q.i.error("Failed to fetch user info from Figma:",a),null}},options:a}),github:a=>({id:"github",name:"GitHub",createAuthorizationURL({state:b,scopes:c,loginHint:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["read:user","user:email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ao({id:"github",options:a,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:f,state:b,redirectURI:e,loginHint:d,prompt:a.prompt})},validateAuthorizationCode:async({code:b,redirectURI:c})=>aq({code:b,redirectURI:c,options:a,tokenEndpoint:"https://github.com/login/oauth/access_token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${b.accessToken}`}});if(d)return null;let{data:e}=await al("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${b.accessToken}`,"User-Agent":"better-auth"}});!c.email&&e&&(c.email=(e.find(a=>a.primary)??e[0])?.email);let f=e?.find(a=>a.email===c.email)?.verified??!1,g=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name||c.login,email:c.email,image:c.avatar_url,emailVerified:f,...g},data:c}},options:a}),microsoft:a=>{let b=a.tenantId||"common",c=a.authority||"https://login.microsoftonline.com",d=`${c}/${b}/oauth2/v2.0/authorize`,e=`${c}/${b}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(b){let c=a.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return a.scope&&c.push(...a.scope),b.scopes&&c.push(...b.scopes),ao({id:"microsoft",options:a,authorizationEndpoint:d,state:b.state,codeVerifier:b.codeVerifier,scopes:c,redirectURI:b.redirectURI,prompt:a.prompt,loginHint:b.loginHint})},validateAuthorizationCode:({code:b,codeVerifier:c,redirectURI:d})=>aq({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:e}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=ax(b.idToken),d=a.profilePhotoSize||48;await al(`https://graph.microsoft.com/v1.0/me/photos/${d}x${d}/$value`,{headers:{Authorization:`Bearer ${b.accessToken}`},async onResponse(b){if(!a.disableProfilePhoto&&b.response.ok)try{let a=await b.response.clone().arrayBuffer();c.picture=`data:image/jpeg;base64, ${E.K.encode(a)}`}catch(a){Q.i.error(a&&"object"==typeof a&&"name"in a?a.name:"",a)}}});let e=await a.mapProfileToUser?.(c),f=void 0!==c.email_verified?c.email_verified:!!(c.email&&(c.verified_primary_email?.includes(c.email)||c.verified_secondary_email?.includes(c.email)));return{user:{id:c.sub,name:c.name,email:c.email,image:c.picture,emailVerified:f,...e},data:c}},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>{let c=a.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return a.scope&&c.push(...a.scope),ap({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},extraParams:{scope:c.join(" ")},tokenEndpoint:e})},options:a}},google:a=>({id:"google",name:"Google",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e,loginHint:f,display:g}){if(!a.clientId||!a.clientSecret)throw Q.i.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new ar.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new ar.t("codeVerifier is required for Google");let h=a.disableDefaultScope?[]:["email","profile","openid"];return a.scope&&h.push(...a.scope),c&&h.push(...c),await ao({id:"google",options:a,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:h,state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt,accessType:a.accessType,display:g||a.display,loginHint:f,hd:a.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>aq({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let{data:d}=await al(`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${b}`);return!!d&&d.aud===a.clientId&&("https://accounts.google.com"===d.iss||"accounts.google.com"===d.iss)},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=ax(b.idToken),d=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name,email:c.email,image:c.picture,emailVerified:c.email_verified,...d},data:c}},options:a}),huggingface:a=>({id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ao({id:"huggingface",options:a,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>aq({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://huggingface.co/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.preferred_username,email:c.email,image:c.picture,emailVerified:c.email_verified??!1,...e},data:c}},options:a}),slack:a=>({id:"slack",name:"Slack",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["openid","profile","email"];c&&e.push(...c),a.scope&&e.push(...a.scope);let f=new URL("https://slack.com/openid/connect/authorize");return f.searchParams.set("scope",e.join(" ")),f.searchParams.set("response_type","code"),f.searchParams.set("client_id",a.clientId),f.searchParams.set("redirect_uri",a.redirectURI||d),f.searchParams.set("state",b),f},validateAuthorizationCode:async({code:b,redirectURI:c})=>aq({code:b,redirectURI:c,options:a,tokenEndpoint:"https://slack.com/api/openid.connect.token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c["https://slack.com/user_id"],name:c.name||"",email:c.email,emailVerified:c.email_verified,image:c.picture||c["https://slack.com/user_image_512"],...e},data:c}},options:a}),spotify:a=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["user-read-email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ao({id:"spotify",options:a,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>aq({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.display_name,email:c.email,image:c.images[0]?.url,emailVerified:!1,...e},data:c}},options:a}),twitch:a=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["user:read:email","openid"];return a.scope&&e.push(...a.scope),c&&e.push(...c),ao({id:"twitch",redirectURI:d,options:a,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:e,state:b,claims:a.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:b,redirectURI:c})=>aq({code:b,redirectURI:c,options:a,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let c=b.idToken;if(!c)return Q.i.error("No idToken found in token"),null;let d=ax(c),e=await a.mapProfileToUser?.(d);return{user:{id:d.sub,name:d.preferred_username,email:d.email,image:d.picture,emailVerified:d.email_verified,...e},data:d}},options:a}),twitter:a=>({id:"twitter",name:"Twitter",createAuthorizationURL(b){let c=a.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return a.scope&&c.push(...a.scope),b.scopes&&c.push(...b.scopes),ao({id:"twitter",options:a,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:c,state:b.state,codeVerifier:b.codeVerifier,redirectURI:b.redirectURI})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>aq({code:b,codeVerifier:c,authentication:"basic",redirectURI:d,options:a,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let{data:e,error:f}=await al("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}}),g=!1;!f&&e?.data?.confirmed_email&&(c.data.email=e.data.confirmed_email,g=!0);let h=await a.mapProfileToUser?.(c);return{user:{id:c.data.id,name:c.data.name,email:c.data.email||c.data.username||null,image:c.data.profile_image_url,emailVerified:g,...h},data:c}},options:a}),dropbox:a=>({id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:b,scopes:c,codeVerifier:d,redirectURI:e})=>{let f=a.disableDefaultScope?[]:["account_info.read"];a.scope&&f.push(...a.scope),c&&f.push(...c);let g={};return a.accessType&&(g.token_access_type=a.accessType),await ao({id:"dropbox",options:a,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:f,state:b,redirectURI:e,codeVerifier:d,additionalParams:g})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>await aq({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.account_id,name:c.name?.display_name,email:c.email,emailVerified:c.email_verified||!1,image:c.profile_photo_url,...e},data:c}},options:a}),kick:a=>({id:"kick",name:"Kick",createAuthorizationURL({state:b,scopes:c,redirectURI:d,codeVerifier:e}){let f=a.disableDefaultScope?[]:["user:read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ao({id:"kick",redirectURI:d,options:a,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:f,codeVerifier:e,state:b})},validateAuthorizationCode:async({code:b,redirectURI:c,codeVerifier:d})=>aq({code:b,redirectURI:c,options:a,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:d}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=c.data[0],f=await a.mapProfileToUser?.(e);return{user:{id:e.user_id,name:e.name,email:e.email,image:e.profile_picture,emailVerified:!1,...f},data:e}},options:a}),linear:a=>{let b="https://api.linear.app/oauth/token";return{id:"linear",name:"Linear",createAuthorizationURL({state:b,scopes:c,loginHint:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ao({id:"linear",options:a,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:f,state:b,redirectURI:e,loginHint:d})},validateAuthorizationCode:async({code:c,redirectURI:d})=>aq({code:c,redirectURI:d,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>ap({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(d||!c?.data?.viewer)return null;let e=c.data.viewer,f=await a.mapProfileToUser?.(e);return{user:{id:c.data.viewer.id,name:c.data.viewer.name,email:c.data.viewer.email,image:c.data.viewer.avatarUrl,emailVerified:!1,...f},data:e}},options:a}},linkedin:a=>{let b="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:b,scopes:c,redirectURI:d,loginHint:e})=>{let f=a.disableDefaultScope?[]:["profile","email","openid"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await ao({id:"linkedin",options:a,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:f,state:b,loginHint:e,redirectURI:d})},validateAuthorizationCode:async({code:c,redirectURI:d})=>await aq({code:c,redirectURI:d,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>ap({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name,email:c.email,emailVerified:c.email_verified||!1,image:c.picture,...e},data:c}},options:a}},gitlab:a=>{let{authorizationEndpoint:b,tokenEndpoint:c,userinfoEndpoint:d}=(a=>{let b=a||"https://gitlab.com";return{authorizationEndpoint:aJ(`${b}/oauth/authorize`),tokenEndpoint:aJ(`${b}/oauth/token`),userinfoEndpoint:aJ(`${b}/api/v4/user`)}})(a.issuer),e="gitlab";return{id:e,name:"Gitlab",createAuthorizationURL:async({state:c,scopes:d,codeVerifier:f,loginHint:g,redirectURI:h})=>{let i=a.disableDefaultScope?[]:["read_user"];return a.scope&&i.push(...a.scope),d&&i.push(...d),await ao({id:e,options:a,authorizationEndpoint:b,scopes:i,state:c,redirectURI:h,codeVerifier:f,loginHint:g})},validateAuthorizationCode:async({code:b,redirectURI:d,codeVerifier:e})=>aq({code:b,redirectURI:d,options:a,codeVerifier:e,tokenEndpoint:c}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:c}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:e}=await al(d,{headers:{authorization:`Bearer ${b.accessToken}`}});if(e||"active"!==c.state||c.locked)return null;let f=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name??c.username,email:c.email,image:c.avatar_url,emailVerified:c.email_verified??!1,...f},data:c}},options:a}},tiktok:a=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["user.info.profile"];return a.scope&&e.push(...a.scope),c&&e.push(...c),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${e.join(",")}&response_type=code&client_key=${a.clientKey}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>aq({code:b,redirectURI:a.redirectURI||c,options:{clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientSecret:a.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:a.clientKey}}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://open.tiktokapis.com/v2/user/info/?fields=open_id,avatar_large_url,display_name,username",{headers:{authorization:`Bearer ${b.accessToken}`}});return d?null:{user:{email:c.data.user.email||c.data.user.username,id:c.data.user.open_id,name:c.data.user.display_name||c.data.user.username,image:c.data.user.avatar_large_url,emailVerified:!!c.data.user.email},data:c}},options:a}),reddit:a=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["identity"];return a.scope&&e.push(...a.scope),c&&e.push(...c),ao({id:"reddit",options:a,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:e,state:b,redirectURI:d,duration:a.duration})},validateAuthorizationCode:async({code:b,redirectURI:c})=>{let d=new URLSearchParams({grant_type:"authorization_code",code:b,redirect_uri:a.redirectURI||c}),{data:e,error:f}=await al("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${E.K.encode(`${a.clientId}:${a.clientSecret}`)}`},body:d.toString()});if(f)throw f;return am(e)},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${b.accessToken}`,"User-Agent":"better-auth"}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name,email:c.oauth_client_id,emailVerified:c.has_verified_email,image:c.icon_img?.split("?")[0],...e},data:c}},options:a}),roblox:a=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["openid","profile"];return a.scope&&e.push(...a.scope),c&&e.push(...c),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${e.join("+")}&response_type=code&client_id=${a.clientId}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}&prompt=${a.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>aq({code:b,redirectURI:a.redirectURI||c,options:a,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.nickname||c.preferred_username||"",image:c.picture,email:c.preferred_username||null,emailVerified:!1,...e},data:{...c}}},options:a}),salesforce:a=>{let b=(a.environment??"production")==="sandbox",c=a.loginUrl?`https://${a.loginUrl}/services/oauth2/authorize`:b?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",d=a.loginUrl?`https://${a.loginUrl}/services/oauth2/token`:b?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",e=a.loginUrl?`https://${a.loginUrl}/services/oauth2/userinfo`:b?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f}){if(!a.clientId||!a.clientSecret)throw Q.i.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new ar.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!e)throw new ar.t("codeVerifier is required for Salesforce");let g=a.disableDefaultScope?[]:["openid","email","profile"];return a.scope&&g.push(...a.scope),d&&g.push(...d),ao({id:"salesforce",options:a,authorizationEndpoint:c,scopes:g,state:b,codeVerifier:e,redirectURI:a.redirectURI||f})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>aq({code:b,codeVerifier:c,redirectURI:a.redirectURI||e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:d}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);try{let{data:c}=await al(e,{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return Q.i.error("Failed to fetch user info from Salesforce"),null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.user_id,name:c.name,email:c.email,image:c.photos?.picture||c.photos?.thumbnail,emailVerified:c.email_verified??!1,...d},data:c}}catch(a){return Q.i.error("Failed to fetch user info from Salesforce:",a),null}},options:a}},vk:a=>({id:"vk",name:"VK",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["email","phone"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ao({id:"vk",options:a,authorizationEndpoint:"https://id.vk.com/authorize",scopes:f,state:b,redirectURI:e,codeVerifier:d})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d,deviceId:e})=>aq({code:b,codeVerifier:c,redirectURI:a.redirectURI||d,options:a,deviceId:e,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return null;let c=new URLSearchParams({access_token:b.accessToken,client_id:a.clientId}).toString(),{data:d,error:e}=await al("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(e)return null;let f=await a.mapProfileToUser?.(d);return d.user.email||f?.email?{user:{id:d.user.user_id,first_name:d.user.first_name,last_name:d.user.last_name,email:d.user.email,image:d.user.avatar,emailVerified:!!d.user.email,birthday:d.user.birthday,sex:d.user.sex,name:`${d.user.first_name} ${d.user.last_name}`,...f},data:d}:null},options:a}),zoom:a=>{let b={pkce:!0,...a};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:a,redirectURI:c,codeVerifier:d})=>{let e=new URLSearchParams({response_type:"code",redirect_uri:b.redirectURI?b.redirectURI:c,client_id:b.clientId,state:a});if(b.pkce){let a=await an(d);e.set("code_challenge_method","S256"),e.set("code_challenge",a)}let f=new URL("https://zoom.us/oauth/authorize");return f.search=e.toString(),f},validateAuthorizationCode:async({code:a,redirectURI:c,codeVerifier:d})=>aq({code:a,redirectURI:b.redirectURI||c,codeVerifier:d,options:b,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),refreshAccessToken:b.refreshAccessToken?b.refreshAccessToken:async a=>ap({refreshToken:a,options:{clientId:b.clientId,clientKey:b.clientKey,clientSecret:b.clientSecret},tokenEndpoint:"https://zoom.us/oauth/token"}),async getUserInfo(a){if(b.getUserInfo)return b.getUserInfo(a);let{data:c,error:d}=await al("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${a.accessToken}`}});if(d)return null;let e=await b.mapProfileToUser?.(c);return{user:{id:c.id,name:c.display_name,image:c.pic_url,email:c.email,emailVerified:!!c.verified,...e},data:{...c}}}}},notion:a=>{let b="https://api.notion.com/v1/oauth/token";return{id:"notion",name:"Notion",createAuthorizationURL({state:b,scopes:c,loginHint:d,redirectURI:e}){let f=(a.disableDefaultScope,[]);return a.scope&&f.push(...a.scope),c&&f.push(...c),ao({id:"notion",options:a,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:f,state:b,redirectURI:e,loginHint:d,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:c,redirectURI:d})=>aq({code:c,redirectURI:d,options:a,tokenEndpoint:b,authentication:"basic"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>ap({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${b.accessToken}`,"Notion-Version":"2022-06-28"}});if(d||!c)return null;let e=c.bot?.owner?.user;if(!e)return null;let f=await a.mapProfileToUser?.(e);return{user:{id:e.id,name:e.name||"Notion User",email:e.person?.email||null,image:e.avatar_url,emailVerified:!!e.person?.email,...f},data:e}},options:a}},kakao:a=>({id:"kakao",name:"Kakao",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return a.scope&&e.push(...a.scope),c&&e.push(...c),ao({id:"kakao",options:a,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:e,state:b,redirectURI:d})},validateAuthorizationCode:async({code:b,redirectURI:c})=>aq({code:b,redirectURI:c,options:a,tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d||!c)return null;let e=await a.mapProfileToUser?.(c),f=c.kakao_account||{},g=f.profile||{};return{user:{id:String(c.id),name:g.nickname||f.name||void 0,email:f.email,image:g.profile_image_url||g.thumbnail_image_url,emailVerified:!!f.is_email_valid&&!!f.is_email_verified,...e},data:c}},options:a}),naver:a=>({id:"naver",name:"Naver",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["profile","email"];return a.scope&&e.push(...a.scope),c&&e.push(...c),ao({id:"naver",options:a,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:e,state:b,redirectURI:d})},validateAuthorizationCode:async({code:b,redirectURI:c})=>aq({code:b,redirectURI:c,options:a,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d||!c||"00"!==c.resultcode)return null;let e=await a.mapProfileToUser?.(c),f=c.response||{};return{user:{id:f.id,name:f.name||f.nickname,email:f.email,image:f.profile_image,emailVerified:!1,...e},data:c}},options:a}),line:a=>{let b="https://api.line.me/oauth2/v2.1/token";return{id:"line",name:"LINE",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e,loginHint:f}){let g=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&g.push(...a.scope),c&&g.push(...c),await ao({id:"line",options:a,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:g,state:b,codeVerifier:d,redirectURI:e,loginHint:f})},validateAuthorizationCode:async({code:c,codeVerifier:d,redirectURI:e})=>aq({code:c,codeVerifier:d,redirectURI:e,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>ap({refreshToken:c,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:b}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let d=new URLSearchParams;d.set("id_token",b),d.set("client_id",a.clientId),c&&d.set("nonce",c);let{data:e,error:f}=await al("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:d});return!f&&!!e&&e.aud===a.clientId&&(!c||!e.nonce||e.nonce===c)},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let c=null;if(b.idToken)try{c=ax(b.idToken)}catch{}if(!c){let{data:a}=await al("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${b.accessToken}`}});c=a||null}if(!c)return null;let d=await a.mapProfileToUser?.(c),e=c.sub||c.userId,f=c.name||c.displayName,g=c.picture||c.pictureUrl||void 0;return{user:{id:e,name:f,email:c.email,image:g,emailVerified:!1,...d},data:c}},options:a}},paybin:a=>{let b=a.issuer||"https://idp.paybin.io",c=`${b}/oauth2/authorize`,d=`${b}/oauth2/token`;return{id:"paybin",name:"Paybin",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f,loginHint:g}){if(!a.clientId||!a.clientSecret)throw Q.i.error("Client Id and Client Secret is required for Paybin. Make sure to provide them in the options."),new ar.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!e)throw new ar.t("codeVerifier is required for Paybin");let h=a.disableDefaultScope?[]:["openid","email","profile"];return a.scope&&h.push(...a.scope),d&&h.push(...d),await ao({id:"paybin",options:a,authorizationEndpoint:c,scopes:h,state:b,codeVerifier:e,redirectURI:f,prompt:a.prompt,loginHint:g})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>aq({code:b,codeVerifier:c,redirectURI:e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:d}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=ax(b.idToken),d=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.preferred_username||(c.email?c.email.split("@")[0]:"User")||"User",email:c.email,image:c.picture,emailVerified:c.email_verified||!1,...d},data:c}},options:a}},paypal:a=>{let b="sandbox"===(a.environment||"sandbox"),c=b?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",d=b?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",e=b?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:b,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw Q.i.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new ar.t("CLIENT_ID_AND_SECRET_REQUIRED");return await ao({id:"paypal",options:a,authorizationEndpoint:c,scopes:[],state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt})},validateAuthorizationCode:async({code:b,redirectURI:c})=>{let e=E.K.encode(`${a.clientId}:${a.clientSecret}`);try{let a=await al(d,{method:"POST",headers:{Authorization:`Basic ${e}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:b,redirect_uri:c}).toString()});if(!a.data)throw new ar.t("FAILED_TO_GET_ACCESS_TOKEN");let f=a.data;return{accessToken:f.access_token,refreshToken:f.refresh_token,accessTokenExpiresAt:f.expires_in?new Date(Date.now()+1e3*f.expires_in):void 0,idToken:f.id_token}}catch(a){throw Q.i.error("PayPal token exchange failed:",a),new ar.t("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>{let c=E.K.encode(`${a.clientId}:${a.clientSecret}`);try{let a=await al(d,{method:"POST",headers:{Authorization:`Basic ${c}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:b}).toString()});if(!a.data)throw new ar.t("FAILED_TO_REFRESH_ACCESS_TOKEN");let e=a.data;return{accessToken:e.access_token,refreshToken:e.refresh_token,accessTokenExpiresAt:e.expires_in?new Date(Date.now()+1e3*e.expires_in):void 0}}catch(a){throw Q.i.error("PayPal token refresh failed:",a),new ar.t("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);try{return!!ax(b).sub}catch(a){return Q.i.error("Failed to verify PayPal ID token:",a),!1}},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return Q.i.error("Access token is required to fetch PayPal user info"),null;try{let c=await al(`${e}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${b.accessToken}`,Accept:"application/json"}});if(!c.data)return Q.i.error("Failed to fetch user info from PayPal"),null;let d=c.data,f=await a.mapProfileToUser?.(d);return{user:{id:d.user_id,name:d.name,email:d.email,image:d.picture,emailVerified:d.email_verified,...f},data:d}}catch(a){return Q.i.error("Failed to fetch user info from PayPal:",a),null}},options:a}},polar:a=>({id:"polar",name:"Polar",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ao({id:"polar",options:a,authorizationEndpoint:"https://polar.sh/oauth2/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>aq({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ap({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await al("https://api.polar.sh/v1/oauth2/userinfo",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.public_name||c.username,email:c.email,image:c.avatar_url,emailVerified:c.email_verified??!1,...e},data:c}},options:a})},aL=Object.keys(aK),aM=m.k5n(aL).or(m.YjP());function aN(a){if(null===a||"object"!=typeof a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.iterator in a)&&(!(Symbol.toStringTag in a)||"[object Module]"===Object.prototype.toString.call(a))}function aO(a){return(...b)=>b.reduce((b,c)=>(function a(b,c,d=".",e){if(!aN(c))return a(b,{},d,e);let f=Object.assign({},c);for(let c in b){if("__proto__"===c||"constructor"===c)continue;let g=b[c];null!=g&&(e&&e(f,c,g,d)||(Array.isArray(g)&&Array.isArray(f[c])?f[c]=[...g,...f[c]]:aN(g)&&aN(f[c])?f[c]=a(g,f[c],(d?`${d}.`:"")+c.toString(),e):f[c]=g))}return f})(b,c,"",a),{})}let aP=aO();function aQ(a){return"-"===a||"^"===a||"$"===a||"+"===a||"."===a||"("===a||")"===a||"|"===a||"["===a||"]"===a||"{"===a||"}"===a||"*"===a||"?"===a||"\\"===a?`\\${a}`:a}function aR(a,b){if("string"!=typeof b)throw TypeError(`Sample must be a string, but ${typeof b} given`);return a.test(b)}function aS(a,b){if("string"!=typeof a&&!Array.isArray(a))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof a} given`);if(("string"==typeof b||"boolean"==typeof b)&&(b={separator:b}),2==arguments.length&&!(void 0===b||"object"==typeof b&&null!==b&&!Array.isArray(b)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof b} given`);if("\\"===(b=b||{}).separator)throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let c=function a(b,c=!0){if(Array.isArray(b))return`(?:${b.map(b=>`^${a(b,c)}$`).join("|")})`;let d="",e="",f=".";!0===c?(d="/",e="[/\\\\]",f="[^/\\\\]"):c&&((e=function(a){let b="";for(let c=0;c<a.length;c++)b+=aQ(a[c]);return b}(d=c)).length>1?(e=`(?:${e})`,f=`((?!${e}).)`):f=`[^${e}]`);let g=c?`${e}+?`:"",h=c?`${e}*?`:"",i=c?b.split(d):[b],j="";for(let a=0;a<i.length;a++){let b=i[a],d=i[a+1],e="";if(b||!(a>0)){if(c&&(e=a===i.length-1?h:"**"!==d?g:""),c&&"**"===b){e&&(j+=0===a?"":e,j+=`(?:${f}*?${e})*?`);continue}for(let a=0;a<b.length;a++){let c=b[a];"\\"===c?a<b.length-1&&(j+=aQ(b[a+1]),a++):"?"===c?j+=f:"*"===c?j+=`${f}*?`:j+=aQ(c)}j+=e}}return j}(a,b.separator),d=RegExp(`^${c}$`,b.flags),e=aR.bind(null,d);return e.options=b,e.pattern=a,e.regexp=d,e}aO((a,b,c)=>{if(void 0!==a[b]&&"function"==typeof c)return a[b]=c(a[b]),!0}),aO((a,b,c)=>{if(Array.isArray(a[b])&&"function"==typeof c)return a[b]=c(a[b]),!0});let aT=(0,D.Di)(async a=>{if(a.request?.method==="GET"||a.request?.method==="OPTIONS"||a.request?.method==="HEAD"||!a.request)return;let b=a.request?.headers,c=a.request,{body:d,query:e,context:f}=a,g=b?.get("origin")||b?.get("referer")||"",h=d?.callbackURL||e?.callbackURL,i=d?.redirectTo,j=d?.errorCallbackURL,k=d?.newUserCallbackURL,l=Array.isArray(f.options.trustedOrigins)?f.trustedOrigins:[...f.trustedOrigins,...await f.options.trustedOrigins?.(c)||[]],m=b?.has("cookie"),n=(b,c)=>{if(b&&!l.some(a=>((a,b)=>{if(a.startsWith("/"))return!1;if(b.includes("*")){if(b.includes("://"))return aS(b)((0,A.r)(a)||a);let c=(0,A.n)(a);return!!c&&aS(b)(c)}let c=(0,A.i)(a);return"http:"!==c&&"https:"!==c&&c?a.startsWith(b):b===(0,A.r)(a)})(b,a)||b?.startsWith("/")&&"origin"!==c&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(b)))throw a.context.logger.error(`Invalid ${c}: ${b}`),a.context.logger.info(`If it's a valid URL, please add ${b} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${l}`),new C.LG("FORBIDDEN",{message:`Invalid ${c}`})};if(m&&!a.context.skipCSRFCheck&&!a.context.skipOriginCheck){if(!g||"null"===g)throw new C.LG("FORBIDDEN",{message:"Missing or null Origin"});n(g,"origin")}h&&n(h,"callbackURL"),i&&n(i,"redirectURL"),j&&n(j,"errorCallbackURL"),k&&n(k,"newUserCallbackURL")}),aU=a=>(0,D.Di)(async b=>{if(!b.request)return;let{context:c}=b,d=a(b),e=Array.isArray(c.options.trustedOrigins)?c.trustedOrigins:[...c.trustedOrigins,...await c.options.trustedOrigins?.(b.request)||[]],f=(a,c)=>{if(a&&!e.some(b=>((a,b)=>{if(a.startsWith("/"))return!1;if(b.includes("*")){if(b.includes("://"))return aS(b)((0,A.r)(a)||a);let c=(0,A.n)(a);return!!c&&aS(b)(c)}let c=(0,A.i)(a);return"http:"!==c&&"https:"!==c&&c?a.startsWith(b):b===(0,A.r)(a)})(a,b)||a?.startsWith("/")&&"origin"!==c&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(a)))throw b.context.logger.error(`Invalid ${c}: ${a}`),b.context.logger.info(`If it's a valid URL, please add ${a} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${e}`),new C.LG("FORBIDDEN",{message:`Invalid ${c}`})};for(let a of Array.isArray(d)?d:[d])f(a,"callbackURL")}),aV=new Map;async function aW(a,b){if(!b.rateLimit.enabled)return;let c=new URL(a.url).pathname.replace(b.options.basePath||"/api/auth",""),d=b.rateLimit.window,e=b.rateLimit.max,f=n(a,b.options);if(!f)return;let g=f+c,h=[{pathMatcher:a=>a.startsWith("/sign-in")||a.startsWith("/sign-up")||a.startsWith("/change-password")||a.startsWith("/change-email"),window:10,max:3}].find(a=>a.pathMatcher(c));for(let a of(h&&(d=h.window,e=h.max),b.options.plugins||[]))if(a.rateLimit){let b=a.rateLimit.find(a=>a.pathMatcher(c));if(b){d=b.window,e=b.max;break}}if(b.rateLimit.customRules){let f=Object.keys(b.rateLimit.customRules).find(a=>a.includes("*")?aS(a)(c):a===c);if(f){let c=b.rateLimit.customRules[f],g="function"==typeof c?await c(a):c;if(g&&(d=g.window,e=g.max),!1===g)return}}let i=function(a,b){if(a.options.rateLimit?.customStorage)return a.options.rateLimit.customStorage;let c=a.rateLimit.storage;if("secondary-storage"===c)return{get:async b=>{let c=await a.options.secondaryStorage?.get(b);return c?(0,o.t)(c):void 0},set:async(c,d,e)=>{let f=b?.window??a.options.rateLimit?.window??10;await a.options.secondaryStorage?.set?.(c,JSON.stringify(d),f)}};if("memory"===c)return{get:async a=>aV.get(a),async set(a,b,c){aV.set(a,b)}};let d="rateLimit",e=a.adapter;return{get:async a=>{let b=(await e.findMany({model:d,where:[{field:"key",value:a}]}))[0];return"bigint"==typeof b?.lastRequest&&(b.lastRequest=Number(b.lastRequest)),b},set:async(b,c,f)=>{try{f?await e.updateMany({model:d,where:[{field:"key",value:b}],update:{count:c.count,lastRequest:c.lastRequest}}):await e.create({model:d,data:{key:b,count:c.count,lastRequest:c.lastRequest}})}catch(b){a.logger.error("Error setting rate limit",b)}}}}(b,{window:d}),j=await i.get(g),k=Date.now();if(j){var l,m,p,q;let a=k-j.lastRequest;if(l=e,m=d,p=j,Date.now()-p.lastRequest<1e3*m&&p.count>=l){return q=Math.ceil((j.lastRequest+1e3*d-Date.now())/1e3),new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":q.toString()}})}a>1e3*d?await i.set(g,{...j,count:1,lastRequest:k},!0):await i.set(g,{...j,count:j.count+1,lastRequest:k},!0)}else await i.set(g,{key:g,count:1,lastRequest:k})}function aX(a,b){return a&&b.options.account?.encryptOAuthTokens?(0,y.t)({key:b.secret,data:a}):a}function aY(a,b){return b.options.account?.encryptOAuthTokens&&a?(0,y.n)({key:b.secret,data:a}):a}let aZ=(0,D.Aw)("/list-accounts",{method:"GET",use:[J],metadata:{openapi:{operationId:"listUserAccounts",description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},userId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","userId","scopes"]}}}}}}}}},async a=>{let b=a.context.session,c=await a.context.internalAdapter.findAccounts(b.user.id);return a.json(c.map(a=>({id:a.id,providerId:a.providerId,createdAt:a.createdAt,updatedAt:a.updatedAt,accountId:a.accountId,userId:a.userId,scopes:a.scope?.split(",")||[]})))}),a$=(0,D.Aw)("/link-social",{method:"POST",requireHeaders:!0,body:m.Ikc({callbackURL:m.YjP().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:aM,idToken:m.Ikc({token:m.YjP(),nonce:m.YjP().optional(),accessToken:m.YjP().optional(),refreshToken:m.YjP().optional(),scopes:m.YOg(m.YjP()).optional()}).optional(),requestSignUp:m.zMY().optional(),scopes:m.YOg(m.YjP()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:m.YjP().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:m.zMY().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),additionalData:m.g1P(m.YjP(),m.bzn()).optional()}),use:[J],metadata:{openapi:{description:"Link a social account to the user",operationId:"linkSocialAccount",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async a=>{let b=a.context.session,c=a.context.socialProviders.find(b=>b.id===a.body.provider);if(!c)throw a.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:a.body.provider}),new C.LG("NOT_FOUND",{message:q.q.PROVIDER_NOT_FOUND});if(a.body.idToken){if(!c.verifyIdToken)throw a.context.logger.error("Provider does not support id token verification",{provider:a.body.provider}),new C.LG("NOT_FOUND",{message:q.q.ID_TOKEN_NOT_SUPPORTED});let{token:d,nonce:e}=a.body.idToken;if(!await c.verifyIdToken(d,e))throw a.context.logger.error("Invalid id token",{provider:a.body.provider}),new C.LG("UNAUTHORIZED",{message:q.q.INVALID_TOKEN});let f=await c.getUserInfo({idToken:d,accessToken:a.body.idToken.accessToken,refreshToken:a.body.idToken.refreshToken});if(!f||!f?.user)throw a.context.logger.error("Failed to get user info",{provider:a.body.provider}),new C.LG("UNAUTHORIZED",{message:q.q.FAILED_TO_GET_USER_INFO});let g=String(f.user.id);if(!f.user.email)throw a.context.logger.error("User email not found",{provider:a.body.provider}),new C.LG("UNAUTHORIZED",{message:q.q.USER_EMAIL_NOT_FOUND});if((await a.context.internalAdapter.findAccounts(b.user.id)).find(a=>a.providerId===c.id&&a.accountId===g))return a.json({url:"",status:!0,redirect:!1});if(!a.context.options.account?.accountLinking?.trustedProviders?.includes(c.id)&&!f.user.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)throw new C.LG("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(f.user.email!==b.user.email&&a.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new C.LG("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await a.context.internalAdapter.createAccount({userId:b.user.id,providerId:c.id,accountId:g,accessToken:a.body.idToken.accessToken,idToken:d,refreshToken:a.body.idToken.refreshToken,scope:a.body.idToken.scopes?.join(",")})}catch(a){throw new C.LG("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(a.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await a.context.internalAdapter.updateUser(b.user.id,{name:f.user?.name,image:f.user?.image})}catch(a){console.warn("Could not update user - "+a.toString())}return a.json({url:"",status:!0,redirect:!1})}let d=await (0,j.r)(a,{userId:b.user.id,email:b.user.email},a.body.additionalData),e=await c.createAuthorizationURL({state:d.state,codeVerifier:d.codeVerifier,redirectURI:`${a.context.baseURL}/callback/${c.id}`,scopes:a.body.scopes});return a.json({url:e.toString(),redirect:!a.body.disableRedirect})}),a_=(0,D.Aw)("/unlink-account",{method:"POST",body:m.Ikc({providerId:m.YjP(),accountId:m.YjP().optional()}),use:[L],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async a=>{let{providerId:b,accountId:c}=a.body,d=await a.context.internalAdapter.findAccounts(a.context.session.user.id);if(1===d.length&&!a.context.options.account?.accountLinking?.allowUnlinkingAll)throw new C.LG("BAD_REQUEST",{message:q.q.FAILED_TO_UNLINK_LAST_ACCOUNT});let e=d.find(a=>c?a.accountId===c&&a.providerId===b:a.providerId===b);if(!e)throw new C.LG("BAD_REQUEST",{message:q.q.ACCOUNT_NOT_FOUND});return await a.context.internalAdapter.deleteAccount(e.id),a.json({status:!0})}),a0=(0,D.Aw)("/get-access-token",{method:"POST",body:m.Ikc({providerId:m.YjP().meta({description:"The provider ID for the OAuth provider"}),accountId:m.YjP().meta({description:"The account ID associated with the refresh token"}).optional(),userId:m.YjP().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async a=>{let b,{providerId:c,accountId:d,userId:e}=a.body||{},f=a.request,g=await I(a);if(f&&!g)throw a.error("UNAUTHORIZED");let h=g?.user?.id||e;if(!h)throw a.error("UNAUTHORIZED");if(!a.context.socialProviders.find(a=>a.id===c))throw new C.LG("BAD_REQUEST",{message:`Provider ${c} is not supported.`});let i=a.context.authCookies.accountData.name,j=await a.getSignedCookie(i,a.context.secret),k=j?(0,o.t)(j):null;if(!(b=k&&c===k.providerId&&(!d||k.id===d)?k:(await a.context.internalAdapter.findAccounts(h)).find(a=>d?a.id===d&&a.providerId===c:a.providerId===c)))throw new C.LG("BAD_REQUEST",{message:"Account not found"});let l=a.context.socialProviders.find(a=>a.id===c);if(!l)throw new C.LG("BAD_REQUEST",{message:`Provider ${c} not found.`});try{let c=null,d=b.accessTokenExpiresAt&&new Date(b.accessTokenExpiresAt).getTime()-Date.now()<5e3;if(b.refreshToken&&d&&l.refreshAccessToken){let d=await aX(b.refreshToken,a.context);c=await l.refreshAccessToken(d);let e=await a.context.internalAdapter.updateAccount(b.id,{accessToken:await aY(c.accessToken,a.context),accessTokenExpiresAt:c.accessTokenExpiresAt,refreshToken:await aY(c.refreshToken,a.context),refreshTokenExpiresAt:c.refreshTokenExpiresAt});a.context.options.account?.storeAccountCookie&&e&&await a.setSignedCookie(i,JSON.stringify(e),a.context.secret,a.context.authCookies.accountData.options)}let e={accessToken:c?.accessToken??await aX(b.accessToken??"",a.context),accessTokenExpiresAt:c?.accessTokenExpiresAt??b.accessTokenExpiresAt??void 0,scopes:b.scope?.split(",")??[],idToken:c?.idToken??b.idToken??void 0};return a.json(e)}catch(a){throw new C.LG("BAD_REQUEST",{message:"Failed to get a valid access token",cause:a})}}),a1=(0,D.Aw)("/refresh-token",{method:"POST",body:m.Ikc({providerId:m.YjP().meta({description:"The provider ID for the OAuth provider"}),accountId:m.YjP().meta({description:"The account ID associated with the refresh token"}).optional(),userId:m.YjP().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async a=>{let b,c,{providerId:d,accountId:e,userId:f}=a.body,g=a.request,h=await I(a);if(g&&!h)throw a.error("UNAUTHORIZED");let i=h?.user?.id||f;if(!i)throw new C.LG("BAD_REQUEST",{message:"Either userId or session is required"});let j=a.context.socialProviders.find(a=>a.id===d);if(!j)throw new C.LG("BAD_REQUEST",{message:`Provider ${d} not found.`});if(!j.refreshAccessToken)throw new C.LG("BAD_REQUEST",{message:`Provider ${d} does not support token refreshing.`});let k=a.context.authCookies.accountData.name,l=await a.getSignedCookie(k,a.context.secret),m=l?(0,o.t)(l):null;if(!(b=m&&(!d||d===m?.providerId)?m:(await a.context.internalAdapter.findAccounts(i)).find(a=>e?a.id===e&&a.providerId===d:a.providerId===d)))throw new C.LG("BAD_REQUEST",{message:"Account not found"});if(!(c=m&&d===m.providerId?m.refreshToken??void 0:b.refreshToken??void 0))throw new C.LG("BAD_REQUEST",{message:"Refresh token not found"});try{let e=await aX(c,a.context),f=await j.refreshAccessToken(e);if(b.id){let c={...b||{},accessToken:await aY(f.accessToken,a.context),refreshToken:await aY(f.refreshToken,a.context),accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")||b.scope,idToken:f.idToken||b.idToken};await a.context.internalAdapter.updateAccount(b.id,c)}if(m&&d===m.providerId&&a.context.options.account?.storeAccountCookie){let b={...m,accessToken:await aY(f.accessToken,a.context),refreshToken:await aY(f.refreshToken,a.context),accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")||m.scope,idToken:f.idToken||m.idToken};await a.setSignedCookie(k,JSON.stringify(b),a.context.secret,a.context.authCookies.accountData.options)}return a.json({accessToken:f.accessToken,refreshToken:f.refreshToken,accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")||b.scope,idToken:f.idToken||b.idToken,providerId:b.providerId,accountId:b.accountId})}catch(a){throw new C.LG("BAD_REQUEST",{message:"Failed to refresh access token",cause:a})}}),a2=m.lqM(m.Ikc({accountId:m.YjP().meta({description:"The provider given account id for which to get the account info"}).optional()})),a3=(0,D.Aw)("/account-info",{method:"GET",use:[J],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},query:a2},async a=>{let b,c=a.query?.accountId;if(c){let d=await a.context.internalAdapter.findAccount(c);d&&(b=d)}else if(a.context.options.account?.storeAccountCookie){let c=a.context.authCookies.accountData.name,d=await a.getSignedCookie(c,a.context.secret);if(d){let a=(0,o.t)(d);a&&(b=a)}}if(!b||b.userId!==a.context.session.user.id)throw new C.LG("BAD_REQUEST",{message:"Account not found"});let d=a.context.socialProviders.find(a=>a.id===b.providerId);if(!d)throw new C.LG("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${b.providerId} but it is not configured`});let e=await a0({...a,method:"POST",body:{accountId:b.id,providerId:b.providerId},returnHeaders:!1,returnStatus:!1});if(!e.accessToken)throw new C.LG("BAD_REQUEST",{message:"Access token not found"});let f=await d.getUserInfo({...e,accessToken:e.accessToken});return a.json(f)});async function a4(a,{userInfo:b,account:c,callbackURL:d,disableSignUp:e,overrideUserInfo:f}){let g=await a.context.internalAdapter.findOAuthUser(b.email.toLowerCase(),c.accountId,c.providerId).catch(b=>{l.vF.error("Better auth was unable to query your database.\nError: ",b);let c=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${c}?error=internal_server_error`)}),h=g?.user,i=!h;if(g){let d=g.accounts.find(a=>a.providerId===c.providerId&&a.accountId===c.accountId);if(d){if(a.context.options.account?.updateAccountOnSignIn!==!1){let b=Object.fromEntries(Object.entries({idToken:c.idToken,accessToken:await aY(c.accessToken,a.context),refreshToken:await aY(c.refreshToken,a.context),accessTokenExpiresAt:c.accessTokenExpiresAt,refreshTokenExpiresAt:c.refreshTokenExpiresAt,scope:c.scope}).filter(([a,b])=>void 0!==b));if(a.context.options.account?.storeAccountCookie){let c=a.context.authCookies.accountData;await a.setSignedCookie(c.name,JSON.stringify(b),a.context.secret,c.options)}Object.keys(b).length>0&&await a.context.internalAdapter.updateAccount(d.id,b)}b.emailVerified&&!g.user.emailVerified&&b.email.toLowerCase()===g.user.email&&await a.context.internalAdapter.updateUser(g.user.id,{emailVerified:!0})}else{if(!a.context.options.account?.accountLinking?.trustedProviders?.includes(c.providerId)&&!b.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)return(0,l.yz)()&&l.vF.warn(`User already exist but account isn't linked to ${c.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await a.context.internalAdapter.linkAccount({providerId:c.providerId,accountId:b.id.toString(),userId:g.user.id,accessToken:await aY(c.accessToken,a.context),refreshToken:await aY(c.refreshToken,a.context),idToken:c.idToken,accessTokenExpiresAt:c.accessTokenExpiresAt,refreshTokenExpiresAt:c.refreshTokenExpiresAt,scope:c.scope})}catch(a){return l.vF.error("Unable to link account",a),{error:"unable to link account",data:null}}b.emailVerified&&!g.user.emailVerified&&b.email.toLowerCase()===g.user.email&&await a.context.internalAdapter.updateUser(g.user.id,{emailVerified:!0})}if(f){let{id:c,...d}=b;h=await a.context.internalAdapter.updateUser(g.user.id,{...d,email:b.email.toLowerCase(),emailVerified:b.email.toLowerCase()===g.user.email&&g.user.emailVerified||b.emailVerified})}}else{if(e)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:e,...f}=b,g={accessToken:await aY(c.accessToken,a.context),refreshToken:await aY(c.refreshToken,a.context),idToken:c.idToken,accessTokenExpiresAt:c.accessTokenExpiresAt,refreshTokenExpiresAt:c.refreshTokenExpiresAt,scope:c.scope,providerId:c.providerId,accountId:b.id.toString()},{user:i,account:j}=await a.context.internalAdapter.createOAuthUser({...f,email:b.email.toLowerCase()},g);if(h=i,a.context.options.account?.storeAccountCookie){let b=a.context.authCookies.accountData;await a.setSignedCookie(b.name,JSON.stringify(j),a.context.secret,b.options)}if(!b.emailVerified&&h&&a.context.options.emailVerification?.sendOnSignUp){let b=await a7(a.context.secret,h.email,void 0,a.context.options.emailVerification?.expiresIn),c=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${d}`;await a.context.options.emailVerification?.sendVerificationEmail?.({user:h,url:c,token:b},a.request)}}catch(a){if(l.vF.error(a),a instanceof C.LG)return{error:a.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!h)return{error:"unable to create user",data:null,isRegister:!1};let j=await a.context.internalAdapter.createSession(h.id);return j?{data:{session:j,user:h},error:null,isRegister:i}:{error:"unable to create session",data:null,isRegister:!1}}let a5=m.Ikc({code:m.YjP().optional(),error:m.YjP().optional(),device_id:m.YjP().optional(),error_description:m.YjP().optional(),state:m.YjP().optional(),user:m.YjP().optional()}),a6=(0,D.Aw)("/callback/:id",{method:["GET","POST"],operationId:"handleOAuthCallback",body:a5.optional(),query:a5.optional(),metadata:{...j.n,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async a=>{let b,c,d,e=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;if("POST"===a.method){let b=a.body?a5.parse(a.body):{},c=a.query?a5.parse(a.query):{},d=a5.parse({...b,...c}),e=new URLSearchParams;for(let[a,b]of Object.entries(d))null!=b&&e.set(a,String(b));let f=`${a.context.baseURL}/callback/${a.params.id}?${e.toString()}`;throw a.redirect(f)}try{if("GET"===a.method)b=a5.parse(a.query);else if("POST"===a.method)b=a5.parse(a.body);else throw Error("Unsupported method")}catch(b){throw a.context.logger.error("INVALID_CALLBACK_REQUEST",b),a.redirect(`${e}?error=invalid_callback_request`)}let{code:f,error:g,state:h,error_description:i,device_id:k}=b;if(!h){a.context.logger.error("State not found",g);let b=`${e}${e.includes("?")?"&":"?"}state=state_not_found`;throw a.redirect(b)}let{codeVerifier:l,callbackURL:m,link:n,errorURL:p,newUserURL:q,requestSignUp:r}=await (0,j.i)(a);function s(b,c){let d=p??e,f=new URLSearchParams({error:b});c&&f.set("error_description",c);let g=`${d}${d.includes("?")?"&":"?"}${f.toString()}`;throw a.redirect(g)}if(g&&s(g,i),!f)throw a.context.logger.error("Code not found"),s("no_code");let t=a.context.socialProviders.find(b=>b.id===a.params.id);if(!t)throw a.context.logger.error("Oauth provider with id",a.params.id,"not found"),s("oauth_provider_not_found");try{c=await t.validateAuthorizationCode({code:f,codeVerifier:l,deviceId:k,redirectURI:`${a.context.baseURL}/callback/${t.id}`})}catch(b){throw a.context.logger.error("",b),s("invalid_code")}let u=await t.getUserInfo({...c,user:a.body?.user?(0,o.t)(a.body.user):void 0}).then(a=>a?.user);if(!u)return a.context.logger.error("Unable to get user info"),s("unable_to_get_user_info");if(!m)throw a.context.logger.error("No callback URL found"),s("no_callback_url");if(n){let b;if(!a.context.options.account?.accountLinking?.trustedProviders?.includes(t.id)&&!u.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)return a.context.logger.error("Unable to link account - untrusted provider"),s("unable_to_link_account");if(u.email!==n.email&&a.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return s("email_doesn't_match");let d=await a.context.internalAdapter.findAccount(String(u.id));if(d){if(d.userId.toString()!==n.userId.toString())return s("account_already_linked_to_different_user");let b=Object.fromEntries(Object.entries({accessToken:await aY(c.accessToken,a.context),refreshToken:await aY(c.refreshToken,a.context),idToken:c.idToken,accessTokenExpiresAt:c.accessTokenExpiresAt,refreshTokenExpiresAt:c.refreshTokenExpiresAt,scope:c.scopes?.join(",")}).filter(([a,b])=>void 0!==b));await a.context.internalAdapter.updateAccount(d.id,b)}else if(!await a.context.internalAdapter.createAccount({userId:n.userId,providerId:t.id,accountId:String(u.id),...c,accessToken:await aY(c.accessToken,a.context),refreshToken:await aY(c.refreshToken,a.context),scope:c.scopes?.join(",")}))return s("unable_to_link_account");try{b=m.toString()}catch{b=m}throw a.redirect(b)}if(!u.email)return a.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),s("email_not_found");let v={providerId:t.id,accountId:String(u.id),...c,scope:c.scopes?.join(",")},w=await a4(a,{userInfo:{...u,id:String(u.id),email:u.email,name:u.name||u.email},account:v,callbackURL:m,disableSignUp:t.disableImplicitSignUp&&!r||t.options?.disableSignUp,overrideUserInfo:t.options?.overrideUserInfoOnSignIn});if(w.error)return a.context.logger.error(w.error.split(" ").join("_")),s(w.error.split(" ").join("_"));let{session:x,user:y}=w.data;await (0,B.c)(a,{session:x,user:y});try{d=(w.isRegister&&q||m).toString()}catch{d=w.isRegister&&q||m}throw a.redirect(d)});async function a7(a,b,c,d=3600,e){return await (0,z.t)({email:b.toLowerCase(),updateTo:c,...e},a,d)}async function a8(a,b){if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new C.LG("BAD_REQUEST",{message:"Verification email isn't enabled"});let c=await a7(a.context.secret,b.email,void 0,a.context.options.emailVerification?.expiresIn),d=a.body.callbackURL?encodeURIComponent(a.body.callbackURL):encodeURIComponent("/"),e=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${d}`;await a.context.options.emailVerification.sendVerificationEmail({user:b,url:e,token:c},a.request)}let a9=(0,D.Aw)("/send-verification-email",{method:"POST",operationId:"sendVerificationEmail",body:m.Ikc({email:m.Rpp().meta({description:"The email to send the verification email to"}),callbackURL:m.YjP().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{operationId:"sendVerificationEmail",description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async a=>{if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new C.LG("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:b}=a.body,c=await I(a);if(!c){let c=await a.context.internalAdapter.findUserByEmail(b);return c?await a8(a,c.user):await a7(a.context.secret,b,void 0,a.context.options.emailVerification?.expiresIn),a.json({status:!0})}if(c?.user.emailVerified)throw new C.LG("BAD_REQUEST",{message:"You can only send a verification email to an unverified email"});if(c?.user.email!==b)throw new C.LG("BAD_REQUEST",{message:"You can only send a verification email to your own email"});return await a8(a,c.user),a.json({status:!0})}),ba=(0,D.Aw)("/verify-email",{method:"GET",operationId:"verifyEmail",query:m.Ikc({token:m.YjP().meta({description:"The token to verify the email"}),callbackURL:m.YjP().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[aU(a=>a.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async a=>{let b;function c(b){if(a.query.callbackURL){if(a.query.callbackURL.includes("?"))throw a.redirect(`${a.query.callbackURL}&error=${b}`);throw a.redirect(`${a.query.callbackURL}?error=${b}`)}throw new C.LG("UNAUTHORIZED",{message:b})}let{token:d}=a.query;try{b=await (0,P.V)(d,new TextEncoder().encode(a.context.secret),{algorithms:["HS256"]})}catch(a){if(a instanceof aw.n)return c("token_expired");return c("invalid_token")}let e=m.Ikc({email:m.Rpp(),updateTo:m.YjP().optional(),requestType:m.YjP().optional()}).parse(b.payload),f=await a.context.internalAdapter.findUserByEmail(e.email);if(!f)return c("user_not_found");if(e.updateTo){let b=await I(a);if(b&&b.user.email!==e.email)return c("unauthorized");if("change-email-confirmation"===e.requestType){let b=await a7(a.context.secret,e.email,e.updateTo,a.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),c=a.query.callbackURL?encodeURIComponent(a.query.callbackURL):encodeURIComponent("/"),d=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${c}`;if(await a.context.options.emailVerification?.sendVerificationEmail?.({user:{...f.user,email:e.updateTo},url:d,token:b},a.request),a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0})}if(!b){let c=await a.context.internalAdapter.createSession(f.user.id);if(!c)throw new C.LG("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});b={session:c,user:f.user}}if("change-email-verification"===e.requestType){let c=await a.context.internalAdapter.updateUserByEmail(e.email,{email:e.updateTo,emailVerified:!0});if(await (0,B.c)(a,{session:b.session,user:{...b.user,email:e.updateTo,emailVerified:!0}}),a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:c})}let d=await a.context.internalAdapter.updateUserByEmail(e.email,{email:e.updateTo,emailVerified:!1}),g=await a7(a.context.secret,e.updateTo),h=a.query.callbackURL?encodeURIComponent(a.query.callbackURL):encodeURIComponent("/");if(await a.context.options.emailVerification?.sendVerificationEmail?.({user:d,url:`${a.context.baseURL}/verify-email?token=${g}&callbackURL=${h}`,token:g},a.request),await (0,B.c)(a,{session:b.session,user:{...b.user,email:e.updateTo,emailVerified:!1}}),a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:{id:d.id,email:d.email,name:d.name,image:d.image,emailVerified:d.emailVerified,createdAt:d.createdAt,updatedAt:d.updatedAt}})}if(f.user.emailVerified){if(a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:null})}a.context.options.emailVerification?.onEmailVerification&&await a.context.options.emailVerification.onEmailVerification(f.user,a.request);let g=await a.context.internalAdapter.updateUserByEmail(e.email,{emailVerified:!0});if(a.context.options.emailVerification?.afterEmailVerification&&await a.context.options.emailVerification.afterEmailVerification(g,a.request),a.context.options.emailVerification?.autoSignInAfterVerification){let b=await I(a);if(b&&b.user.email===e.email)await (0,B.c)(a,{session:b.session,user:{...b.user,emailVerified:!0}});else{let b=await a.context.internalAdapter.createSession(f.user.id);if(!b)throw new C.LG("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await (0,B.c)(a,{session:b,user:{...f.user,emailVerified:!0}})}}if(a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:null})});function bb(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g,"&amp;")}let bc=(0,D.Aw)("/error",{method:"GET",metadata:{...j.n,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async a=>{let b=new URL(a.request?.url||""),c=b.searchParams.get("error")||"UNKNOWN",d=b.searchParams.get("error_description")||null,e=/^[\'A-Za-z0-9_-]+$/.test(c||"")?c:"UNKNOWN",f=d?bb(d):null,g=new URLSearchParams;g.set("error",e),d&&g.set("error_description",d);let h=a.context.options,i=h.onAPIError?.errorURL;return i?new Response(null,{status:302,headers:{Location:`${i}${i.includes("?")?"&":"?"}${g.toString()}`}}):l.KV&&!h.onAPIError?.customizeDefaultErrorPage?new Response(null,{status:302,headers:{Location:`/?${g.toString()}`}}):new Response(((a,b="Unknown",c=null)=>{let d=a.onAPIError?.customizeDefaultErrorPage;return`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: ${d?.font?.defaultFamily||"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"};
        background: ${d?.colors?.background||"var(--background)"};
        color: var(--foreground);
        margin: 0;
      }
      :root,
      :host {
        --spacing: 0.25rem;
        --container-md: 28rem;
        --text-sm: ${d?.size?.textSm||"0.875rem"};
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-2xl: ${d?.size?.text2xl||"1.5rem"};
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: ${d?.size?.text4xl||"2.25rem"};
        --text-4xl--line-height: calc(2.5 / 2.25);
        --text-6xl: ${d?.size?.text6xl||"3rem"};
        --text-6xl--line-height: 1;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --radius: ${d?.size?.radiusSm||"0.625rem"};
        --default-mono-font-family: ${d?.font?.monoFamily||"var(--font-geist-mono)"};
        --primary: ${d?.colors?.primary||"black"};
        --primary-foreground: ${d?.colors?.primaryForeground||"white"};
        --background: ${d?.colors?.background||"white"};
        --foreground: ${d?.colors?.foreground||"oklch(0.271 0 0)"};
        --border: ${d?.colors?.border||"oklch(0.89 0 0)"};
        --destructive: ${d?.colors?.destructive||"oklch(0.55 0.15 25.723)"};
        --muted-foreground: ${d?.colors?.mutedForeground||"oklch(0.545 0 0)"};
        --corner-border: ${d?.colors?.cornerBorder||"#404040"};
      }

      button, .btn {
        cursor: pointer;
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        transition: all var(--default-transition-duration)
          var(--default-transition-timing-function);
      }
      button:hover, .btn:hover {
        opacity: 0.8;
      }

      @media (prefers-color-scheme: dark) {
        :root,
        :host {
          --primary: ${d?.colors?.primary||"white"};
          --primary-foreground: ${d?.colors?.primaryForeground||"black"};
          --background: ${d?.colors?.background||"oklch(0.15 0 0)"};
          --foreground: ${d?.colors?.foreground||"oklch(0.98 0 0)"};
          --border: ${d?.colors?.border||"oklch(0.27 0 0)"};
          --destructive: ${d?.colors?.destructive||"oklch(0.65 0.15 25.723)"};
          --muted-foreground: ${d?.colors?.mutedForeground||"oklch(0.65 0 0)"};
          --corner-border: ${d?.colors?.cornerBorder||"#a0a0a0"};
        }
      }
      @media (max-width: 640px) {
        :root, :host {
          --text-6xl: 2.5rem;
          --text-2xl: 1.25rem;
          --text-sm: 0.8125rem;
        }
      }
      @media (max-width: 480px) {
        :root, :host {
          --text-6xl: 2rem;
          --text-2xl: 1.125rem;
        }
      }
    </style>
  </head>
  <body style="width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">
    <div
        style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
        "
        >
${d?.disableBackgroundGrid?"":`
      <div
        style="
          position: absolute;
          inset: 0;
          background-image: linear-gradient(to right, ${d?.colors?.gridColor||"var(--border)"} 1px, transparent 1px),
            linear-gradient(to bottom, ${d?.colors?.gridColor||"var(--border)"} 1px, transparent 1px);
          background-size: 40px 40px;
          opacity: 0.6;
          pointer-events: none;
          width: 100vw;
          height: 100vh;
        "
      ></div>
      <div
        style="
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: ${d?.colors?.background||"var(--background)"};
          mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          pointer-events: none;
        "
      ></div>
`}

<div
  style="
    position: relative;
    z-index: 10;
    border: 2px solid var(--border);
    background: ${d?.colors?.cardBackground||"var(--background)"};
    padding: 1.5rem;
    max-width: 42rem;
    width: 100%;
  "
>
    ${d?.disableCornerDecorations?"":`
        <!-- Corner decorations -->
        <div
          style="
            position: absolute;
            top: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>
  
        <div
          style="
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>`}

        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="margin-bottom: 1.5rem;">
            <div
              style="
                display: inline-block;
                border: 2px solid ${d?.disableTitleBorder?"transparent":d?.colors?.titleBorder||"var(--destructive)"};
                padding: 0.375rem 1rem;
              "
            >
              <h1
                style="
                  font-size: var(--text-6xl);
                  font-weight: var(--font-weight-semibold);
                  color: ${d?.colors?.titleColor||"var(--foreground)"};
                  letter-spacing: -0.02em;
                  margin: 0;
                "
              >
                ERROR
              </h1>
            </div>
            <div
              style="
                height: 2px;
                background-color: var(--border);
                width: calc(100% + 3rem);
                margin-left: -1.5rem;
                margin-top: 1.5rem;
              "
            ></div>
          </div>

          <h2
            style="
              font-size: var(--text-2xl);
              font-weight: var(--font-weight-semibold);
              color: var(--foreground);
              margin: 0 0 1rem;
            "
          >
            Something went wrong
          </h2>

          <div
            style="
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                border: 2px solid var(--border);
                background-color: var(--muted);
                padding: 0.375rem 0.75rem;
                margin: 0 0 1rem;
                flex-wrap: wrap;
                justify-content: center;
            "
            >
            <span
                style="
                font-size: 0.75rem;
                color: var(--muted-foreground);
                font-weight: var(--font-weight-semibold);
                "
            >
                CODE:
            </span>
            <span
                style="
                font-size: var(--text-sm);
                font-family: var(--default-mono-font-family, monospace);
                color: var(--foreground);
                word-break: break-all;
                "
            >
                ${bb(b)}
            </span>
            </div>

          <p
            style="
              color: var(--muted-foreground);
              max-width: 28rem;
              margin: 0 auto;
              font-size: var(--text-sm);
              line-height: 1.5;
              text-wrap: pretty;
            "
          >
            ${!c?`We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/errors/${encodeURIComponent(b)}' target='_blank' rel="noopener noreferrer" style='color: var(--foreground); text-decoration: underline;'>here</a>.`:c}
          </p>
        </div>

        <div
          style="
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: var(--primary);
                color: var(--primary-foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Go Home
            </div>
          </a>
          <a
            href="https://better-auth.com/docs/errors/${encodeURIComponent(b)}?askai=${encodeURIComponent(`What does the error code ${b} mean?`)}"
            target="_blank"
            rel="noopener noreferrer"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: transparent;
                color: var(--foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Ask AI
            </div>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>`})(a.context.options,e,f),{headers:{"Content-Type":"text/html"}})}),bd=(0,D.Aw)("/ok",{method:"GET",metadata:{...j.n,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async a=>a.json({ok:!0}));function be(a,b,c){let d=b?new URL(b,a.baseURL):new URL(`${a.baseURL}/error`);return c&&Object.entries(c).forEach(([a,b])=>d.searchParams.set(a,b)),d.href}let bf=(0,D.Aw)("/request-password-reset",{method:"POST",operationId:"forgetPassword",body:m.Ikc({email:m.Rpp().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:m.YjP().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{operationId:"forgetPassword",description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async a=>{if(!a.context.options.emailAndPassword?.sendResetPassword)throw a.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new C.LG("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:b,redirectTo:c}=a.body,d=await a.context.internalAdapter.findUserByEmail(b,{includeAccounts:!0});if(!d)return(0,j.t)(24),await a.context.internalAdapter.findVerificationValue("dummy-verification-token"),a.context.logger.error("Reset Password: User not found",{email:b}),a.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let e=(0,k.u)(a.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),f=(0,j.t)(24);await a.context.internalAdapter.createVerificationValue({value:d.user.id,identifier:`reset-password:${f}`,expiresAt:e});let g=c?encodeURIComponent(c):"",h=`${a.context.baseURL}/reset-password/${f}?callbackURL=${g}`;return a.context.options.emailAndPassword.sendResetPassword({user:d.user,url:h,token:f},a.request).catch(b=>{a.context.logger.error("Failed to send reset password email",b)}),a.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),bg=(0,D.Aw)("/reset-password/:token",{method:"GET",operationId:"forgetPasswordCallback",query:m.Ikc({callbackURL:m.YjP().meta({description:"The URL to redirect the user to reset their password"})}),use:[aU(a=>a.query.callbackURL)],metadata:{openapi:{operationId:"resetPasswordCallback",description:"Redirects the user to the callback URL with the token",parameters:[{name:"token",in:"path",required:!0,description:"The token to reset the password",schema:{type:"string"}},{name:"callbackURL",in:"query",required:!0,description:"The URL to redirect the user to reset their password",schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async a=>{let{token:b}=a.params,{callbackURL:c}=a.query;if(!b||!c)throw a.redirect(be(a.context,c,{error:"INVALID_TOKEN"}));let d=await a.context.internalAdapter.findVerificationValue(`reset-password:${b}`);if(!d||d.expiresAt<new Date)throw a.redirect(be(a.context,c,{error:"INVALID_TOKEN"}));throw a.redirect(function(a,b,c){let d=new URL(b,a.baseURL);return c&&Object.entries(c).forEach(([a,b])=>d.searchParams.set(a,b)),d.href}(a.context,c,{token:b}))}),bh=(0,D.Aw)("/reset-password",{method:"POST",operationId:"resetPassword",query:m.Ikc({token:m.YjP().optional()}).optional(),body:m.Ikc({newPassword:m.YjP().meta({description:"The new password to set"}),token:m.YjP().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{operationId:"resetPassword",description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async a=>{let b=a.body.token||a.query?.token;if(!b)throw new C.LG("BAD_REQUEST",{message:q.q.INVALID_TOKEN});let{newPassword:c}=a.body,d=a.context.password?.config.minPasswordLength,e=a.context.password?.config.maxPasswordLength;if(c.length<d)throw new C.LG("BAD_REQUEST",{message:q.q.PASSWORD_TOO_SHORT});if(c.length>e)throw new C.LG("BAD_REQUEST",{message:q.q.PASSWORD_TOO_LONG});let f=`reset-password:${b}`,g=await a.context.internalAdapter.findVerificationValue(f);if(!g||g.expiresAt<new Date)throw new C.LG("BAD_REQUEST",{message:q.q.INVALID_TOKEN});let h=g.value,i=await a.context.password.hash(c);if((await a.context.internalAdapter.findAccounts(h)).find(a=>"credential"===a.providerId)?await a.context.internalAdapter.updatePassword(h,i):await a.context.internalAdapter.createAccount({userId:h,providerId:"credential",password:i,accountId:h}),await a.context.internalAdapter.deleteVerificationValue(g.id),a.context.options.emailAndPassword?.onPasswordReset){let b=await a.context.internalAdapter.findUserById(h);b&&await a.context.options.emailAndPassword.onPasswordReset({user:b},a.request)}return a.context.options.emailAndPassword?.revokeSessionsOnPasswordReset&&await a.context.internalAdapter.deleteSessions(h),a.json({status:!0})}),bi=(0,D.Aw)("/sign-in/social",{method:"POST",operationId:"socialSignIn",body:m.Ikc({callbackURL:m.YjP().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:m.YjP().optional(),errorCallbackURL:m.YjP().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:aM,disableRedirect:m.zMY().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:m.lqM(m.Ikc({token:m.YjP().meta({description:"ID token from the provider"}),nonce:m.YjP().meta({description:"Nonce used to generate the token"}).optional(),accessToken:m.YjP().meta({description:"Access token from the provider"}).optional(),refreshToken:m.YjP().meta({description:"Refresh token from the provider"}).optional(),expiresAt:m.aig().meta({description:"Expiry date of the token"}).optional()})),scopes:m.YOg(m.YjP()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:m.zMY().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:m.YjP().meta({description:"The login hint to use for the authorization code request"}).optional(),additionalData:m.g1P(m.YjP(),m.bzn()).optional().meta({description:"Additional data to be passed through the OAuth flow"})}),metadata:{openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{token:{type:"string"},user:{type:"object",$ref:"#/components/schemas/User"},url:{type:"string"},redirect:{type:"boolean",enum:[!1]}},required:["redirect","token","user"]}}}}}}}},async a=>{let b=a.context.socialProviders.find(b=>b.id===a.body.provider);if(!b)throw a.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:a.body.provider}),new C.LG("NOT_FOUND",{message:q.q.PROVIDER_NOT_FOUND});if(a.body.idToken){if(!b.verifyIdToken)throw a.context.logger.error("Provider does not support id token verification",{provider:a.body.provider}),new C.LG("NOT_FOUND",{message:q.q.ID_TOKEN_NOT_SUPPORTED});let{token:c,nonce:d}=a.body.idToken;if(!await b.verifyIdToken(c,d))throw a.context.logger.error("Invalid id token",{provider:a.body.provider}),new C.LG("UNAUTHORIZED",{message:q.q.INVALID_TOKEN});let e=await b.getUserInfo({idToken:c,accessToken:a.body.idToken.accessToken,refreshToken:a.body.idToken.refreshToken});if(!e||!e?.user)throw a.context.logger.error("Failed to get user info",{provider:a.body.provider}),new C.LG("UNAUTHORIZED",{message:q.q.FAILED_TO_GET_USER_INFO});if(!e.user.email)throw a.context.logger.error("User email not found",{provider:a.body.provider}),new C.LG("UNAUTHORIZED",{message:q.q.USER_EMAIL_NOT_FOUND});let f=await a4(a,{userInfo:{...e.user,email:e.user.email,id:String(e.user.id),name:e.user.name||"",image:e.user.image,emailVerified:e.user.emailVerified||!1},account:{providerId:b.id,accountId:String(e.user.id),accessToken:a.body.idToken.accessToken},callbackURL:a.body.callbackURL,disableSignUp:b.disableImplicitSignUp&&!a.body.requestSignUp||b.disableSignUp});if(f.error)throw new C.LG("UNAUTHORIZED",{message:f.error});return await (0,B.c)(a,f.data),a.json({redirect:!1,token:f.data.session.token,url:void 0,user:{id:f.data.user.id,email:f.data.user.email,name:f.data.user.name,image:f.data.user.image,emailVerified:f.data.user.emailVerified,createdAt:f.data.user.createdAt,updatedAt:f.data.user.updatedAt}})}let{codeVerifier:c,state:d}=await (0,j.r)(a,void 0,a.body.additionalData),e=await b.createAuthorizationURL({state:d,codeVerifier:c,redirectURI:`${a.context.baseURL}/callback/${b.id}`,scopes:a.body.scopes,loginHint:a.body.loginHint});return a.json({url:e.toString(),redirect:!a.body.disableRedirect})}),bj=(0,D.Aw)("/sign-in/email",{method:"POST",operationId:"signInEmail",body:m.Ikc({email:m.YjP().meta({description:"Email of the user"}),password:m.YjP().meta({description:"Password of the user"}),callbackURL:m.YjP().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:m.zMY().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{openapi:{operationId:"signInEmail",description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"null",nullable:!0},user:{type:"object",$ref:"#/components/schemas/User"}},required:["redirect","token","user"]}}}}}}}},async a=>{if(!a.context.options?.emailAndPassword?.enabled)throw a.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new C.LG("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:b,password:c}=a.body;if(!m.Rpp().safeParse(b).success)throw new C.LG("BAD_REQUEST",{message:q.q.INVALID_EMAIL});let d=await a.context.internalAdapter.findUserByEmail(b,{includeAccounts:!0});if(!d)throw await a.context.password.hash(c),a.context.logger.error("User not found",{email:b}),new C.LG("UNAUTHORIZED",{message:q.q.INVALID_EMAIL_OR_PASSWORD});let e=d.accounts.find(a=>"credential"===a.providerId);if(!e)throw await a.context.password.hash(c),a.context.logger.error("Credential account not found",{email:b}),new C.LG("UNAUTHORIZED",{message:q.q.INVALID_EMAIL_OR_PASSWORD});let f=e?.password;if(!f)throw await a.context.password.hash(c),a.context.logger.error("Password not found",{email:b}),new C.LG("UNAUTHORIZED",{message:q.q.INVALID_EMAIL_OR_PASSWORD});if(!await a.context.password.verify({hash:f,password:c}))throw a.context.logger.error("Invalid password"),new C.LG("UNAUTHORIZED",{message:q.q.INVALID_EMAIL_OR_PASSWORD});if(a.context.options?.emailAndPassword?.requireEmailVerification&&!d.user.emailVerified){if(!a.context.options?.emailVerification?.sendVerificationEmail)throw new C.LG("FORBIDDEN",{message:q.q.EMAIL_NOT_VERIFIED});if(a.context.options?.emailVerification?.sendOnSignIn){let b=await a7(a.context.secret,d.user.email,void 0,a.context.options.emailVerification?.expiresIn),c=a.body.callbackURL?encodeURIComponent(a.body.callbackURL):encodeURIComponent("/"),e=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${c}`;await a.context.options.emailVerification.sendVerificationEmail({user:d.user,url:e,token:b},a.request)}throw new C.LG("FORBIDDEN",{message:q.q.EMAIL_NOT_VERIFIED})}let g=await a.context.internalAdapter.createSession(d.user.id,!1===a.body.rememberMe);if(!g)throw a.context.logger.error("Failed to create session"),new C.LG("UNAUTHORIZED",{message:q.q.FAILED_TO_CREATE_SESSION});return await (0,B.c)(a,{session:g,user:d.user},!1===a.body.rememberMe),a.json({redirect:!!a.body.callbackURL,token:g.token,url:a.body.callbackURL,user:{id:d.user.id,email:d.user.email,name:d.user.name,image:d.user.image,emailVerified:d.user.emailVerified,createdAt:d.user.createdAt,updatedAt:d.user.updatedAt}})}),bk=(0,D.Aw)("/sign-out",{method:"POST",operationId:"signOut",requireHeaders:!0,metadata:{openapi:{operationId:"signOut",description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async a=>{let b=await a.getSignedCookie(a.context.authCookies.sessionToken.name,a.context.secret);if(b)try{await a.context.internalAdapter.deleteSession(b)}catch(b){a.context.logger.error("Failed to delete session from database",b)}return(0,B.n)(a),a.json({success:!0})}),bl=(0,D.Aw)("/change-password",{method:"POST",operationId:"changePassword",body:m.Ikc({newPassword:m.YjP().meta({description:"The new password to set"}),currentPassword:m.YjP().meta({description:"The current password is required"}),revokeOtherSessions:m.zMY().meta({description:"Must be a boolean value"}).optional()}),use:[K],metadata:{openapi:{operationId:"changePassword",description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async a=>{let{newPassword:b,currentPassword:c,revokeOtherSessions:d}=a.body,e=a.context.session,f=a.context.password.config.minPasswordLength;if(b.length<f)throw a.context.logger.error("Password is too short"),new C.LG("BAD_REQUEST",{message:q.q.PASSWORD_TOO_SHORT});let g=a.context.password.config.maxPasswordLength;if(b.length>g)throw a.context.logger.error("Password is too long"),new C.LG("BAD_REQUEST",{message:q.q.PASSWORD_TOO_LONG});let h=(await a.context.internalAdapter.findAccounts(e.user.id)).find(a=>"credential"===a.providerId&&a.password);if(!h||!h.password)throw new C.LG("BAD_REQUEST",{message:q.q.CREDENTIAL_ACCOUNT_NOT_FOUND});let i=await a.context.password.hash(b);if(!await a.context.password.verify({hash:h.password,password:c}))throw new C.LG("BAD_REQUEST",{message:q.q.INVALID_PASSWORD});await a.context.internalAdapter.updateAccount(h.id,{password:i});let j=null;if(d){await a.context.internalAdapter.deleteSessions(e.user.id);let b=await a.context.internalAdapter.createSession(e.user.id);if(!b)throw new C.LG("INTERNAL_SERVER_ERROR",{message:q.q.FAILED_TO_GET_SESSION});await (0,B.c)(a,{session:b,user:e.user}),j=b.token}return a.json({token:j,user:{id:e.user.id,email:e.user.email,name:e.user.name,image:e.user.image,emailVerified:e.user.emailVerified,createdAt:e.user.createdAt,updatedAt:e.user.updatedAt}})}),bm=(0,D.Aw)("/set-password",{method:"POST",body:m.Ikc({newPassword:m.YjP().meta({description:"The new password to set is required"})}),metadata:{SERVER_ONLY:!0},use:[K]},async a=>{let{newPassword:b}=a.body,c=a.context.session,d=a.context.password.config.minPasswordLength;if(b.length<d)throw a.context.logger.error("Password is too short"),new C.LG("BAD_REQUEST",{message:q.q.PASSWORD_TOO_SHORT});let e=a.context.password.config.maxPasswordLength;if(b.length>e)throw a.context.logger.error("Password is too long"),new C.LG("BAD_REQUEST",{message:q.q.PASSWORD_TOO_LONG});let f=(await a.context.internalAdapter.findAccounts(c.user.id)).find(a=>"credential"===a.providerId&&a.password),g=await a.context.password.hash(b);if(!f)return await a.context.internalAdapter.linkAccount({userId:c.user.id,providerId:"credential",accountId:c.user.id,password:g}),a.json({status:!0});throw new C.LG("BAD_REQUEST",{message:"user already has a password"})}),bn=(0,D.Aw)("/delete-user",{method:"POST",use:[K],body:m.Ikc({callbackURL:m.YjP().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:m.YjP().meta({description:"The password of the user is required to delete the user"}).optional(),token:m.YjP().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{operationId:"deleteUser",description:"Delete the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{callbackURL:{type:"string",description:"The callback URL to redirect to after the user is deleted"},password:{type:"string",description:"The user's password. Required if session is not fresh"},token:{type:"string",description:"The deletion verification token"}}}}}},responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async a=>{if(!a.context.options.user?.deleteUser?.enabled)throw a.context.logger.error("Delete user is disabled. Enable it in the options"),new C.LG("NOT_FOUND");let b=a.context.session;if(a.body.password){let c=(await a.context.internalAdapter.findAccounts(b.user.id)).find(a=>"credential"===a.providerId&&a.password);if(!c||!c.password)throw new C.LG("BAD_REQUEST",{message:q.q.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await a.context.password.verify({hash:c.password,password:a.body.password}))throw new C.LG("BAD_REQUEST",{message:q.q.INVALID_PASSWORD})}if(a.body.token)return await bo({...a,query:{token:a.body.token}}),a.json({success:!0,message:"User deleted"});if(a.context.options.user.deleteUser?.sendDeleteAccountVerification){let c=(0,y.r)(32,"0-9","a-z");await a.context.internalAdapter.createVerificationValue({value:b.user.id,identifier:`delete-account-${c}`,expiresAt:new Date(Date.now()+1e3*(a.context.options.user.deleteUser?.deleteTokenExpiresIn||86400))});let d=`${a.context.baseURL}/delete-user/callback?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;return await a.context.options.user.deleteUser.sendDeleteAccountVerification({user:b.user,url:d,token:c},a.request),a.json({success:!0,message:"Verification email sent"})}if(!a.body.password&&0!==a.context.sessionConfig.freshAge){let c=new Date(b.session.createdAt).getTime(),d=1e3*a.context.sessionConfig.freshAge;if(Date.now()-c>1e3*d)throw new C.LG("BAD_REQUEST",{message:q.q.SESSION_EXPIRED})}let c=a.context.options.user.deleteUser?.beforeDelete;c&&await c(b.user,a.request),await a.context.internalAdapter.deleteUser(b.user.id),await a.context.internalAdapter.deleteSessions(b.user.id),(0,B.n)(a);let d=a.context.options.user.deleteUser?.afterDelete;return d&&await d(b.user,a.request),a.json({success:!0,message:"User deleted"})}),bo=(0,D.Aw)("/delete-user/callback",{method:"GET",query:m.Ikc({token:m.YjP().meta({description:"The token to verify the deletion request"}),callbackURL:m.YjP().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[aU(a=>a.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async a=>{if(!a.context.options.user?.deleteUser?.enabled)throw a.context.logger.error("Delete user is disabled. Enable it in the options"),new C.LG("NOT_FOUND");let b=await I(a);if(!b)throw new C.LG("NOT_FOUND",{message:q.q.FAILED_TO_GET_USER_INFO});let c=await a.context.internalAdapter.findVerificationValue(`delete-account-${a.query.token}`);if(!c||c.expiresAt<new Date||c.value!==b.user.id)throw new C.LG("NOT_FOUND",{message:q.q.INVALID_TOKEN});let d=a.context.options.user.deleteUser?.beforeDelete;d&&await d(b.user,a.request),await a.context.internalAdapter.deleteUser(b.user.id),await a.context.internalAdapter.deleteSessions(b.user.id),await a.context.internalAdapter.deleteAccounts(b.user.id),await a.context.internalAdapter.deleteVerificationValue(c.id),(0,B.n)(a);let e=a.context.options.user.deleteUser?.afterDelete;if(e&&await e(b.user,a.request),a.query.callbackURL)throw a.redirect(a.query.callbackURL||"/");return a.json({success:!0,message:"User deleted"})}),bp=(0,D.Aw)("/change-email",{method:"POST",body:m.Ikc({newEmail:m.Rpp().meta({description:"The new email address to set must be a valid email address"}),callbackURL:m.YjP().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[K],metadata:{openapi:{operationId:"changeEmail",responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},422:{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async a=>{if(!a.context.options.user?.changeEmail?.enabled)throw a.context.logger.error("Change email is disabled."),new C.LG("BAD_REQUEST",{message:"Change email is disabled"});let b=a.body.newEmail.toLowerCase();if(b===a.context.session.user.email)throw a.context.logger.error("Email is the same"),new C.LG("BAD_REQUEST",{message:"Email is the same"});if(await a.context.internalAdapter.findUserByEmail(b))throw a.context.logger.error("Email already exists"),new C.LG("UNPROCESSABLE_ENTITY",{message:q.q.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(!0!==a.context.session.user.emailVerified&&a.context.options.user.changeEmail.updateEmailWithoutVerification){if(await a.context.internalAdapter.updateUserByEmail(a.context.session.user.email,{email:b}),await (0,B.c)(a,{session:a.context.session.session,user:{...a.context.session.user,email:b}}),a.context.options.emailVerification?.sendVerificationEmail){let c=await a7(a.context.secret,b,void 0,a.context.options.emailVerification?.expiresIn),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;await a.context.options.emailVerification.sendVerificationEmail({user:{...a.context.session.user,email:b},url:d,token:c},a.request)}return a.json({status:!0})}if(a.context.session.user.emailVerified&&(a.context.options.user.changeEmail.sendChangeEmailConfirmation||a.context.options.user.changeEmail.sendChangeEmailVerification)){let c=await a7(a.context.secret,a.context.session.user.email,b,a.context.options.emailVerification?.expiresIn,{requestType:"change-email-confirmation"}),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`,e=a.context.options.user.changeEmail.sendChangeEmailConfirmation||a.context.options.user.changeEmail.sendChangeEmailVerification;return e&&await e({user:a.context.session.user,newEmail:b,url:d,token:c},a.request),a.json({status:!0})}if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new C.LG("BAD_REQUEST",{message:"Verification email isn't enabled"});let c=await a7(a.context.secret,a.context.session.user.email,b,a.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;return await a.context.options.emailVerification.sendVerificationEmail({user:{...a.context.session.user,email:b},url:d,token:c},a.request),a.json({status:!0})}),bq=aO((a,b,c)=>{if(Array.isArray(a[b])&&Array.isArray(c))return a[b]=c,!0});async function br(a,b){let c={};for(let d of b)if(d.matcher(a)){let b=await d.handler({...a,returnHeaders:!1}).catch(b=>{throw b instanceof C.LG&&(0,l.p8)(a.context.logger.level,"debug")&&(b.stack=b.errorStack),b});if(b&&"object"==typeof b){if("context"in b&&"object"==typeof b.context){let{headers:a,...d}=b.context;a instanceof Headers&&(c.headers?a.forEach((a,b)=>{c.headers?.set(b,a)}):c.headers=a),c=bq(d,c);continue}return b}}return{context:c}}async function bs(a,b){for(let c of b)if(c.matcher(a)){let b=await c.handler(a).catch(b=>{if(b instanceof C.LG)return(0,l.p8)(a.context.logger.level,"debug")&&(b.stack=b.errorStack),{response:b,headers:b.headers?new Headers(b.headers):null};throw b});b.headers&&b.headers.forEach((b,c)=>{a.context.responseHeaders?"set-cookie"===c.toLowerCase()?a.context.responseHeaders.append(c,b):a.context.responseHeaders.set(c,b):a.context.responseHeaders=new Headers({[c]:b})}),b.response&&(a.context.returned=b.response)}return{response:a.context.returned,headers:a.context.responseHeaders}}function bt(a,b){let c=b.plugins?.reduce((a,b)=>({...a,...b.endpoints}),{})??{},d=b.plugins?.map(b=>b.middlewares?.map(b=>{let c=async c=>{let d=await a;return b.middleware({...c,context:{...d,...c.context}})};return c.options=b.middleware.options,{path:b.path,middleware:c}})).filter(a=>void 0!==a).flat()||[];return{api:function(a,b){let c={};for(let[d,e]of Object.entries(a))c[d]=async a=>{let c=async()=>{let c=await b,d={...a,context:{...c,returned:void 0,responseHeaders:void 0,session:null},path:e.path,headers:a?.headers?new Headers(a?.headers):void 0};return(0,p.Qs)(d,async()=>{let{beforeHooks:b,afterHooks:f}=function(a){let b=a.options.plugins||[],c=[],d=[];a.options.hooks?.before&&c.push({matcher:()=>!0,handler:a.options.hooks.before}),a.options.hooks?.after&&d.push({matcher:()=>!0,handler:a.options.hooks.after});let e=b.map(a=>{if(a.hooks?.before)return a.hooks.before}).filter(a=>void 0!==a).flat(),f=b.map(a=>{if(a.hooks?.after)return a.hooks.after}).filter(a=>void 0!==a).flat();return e.length&&c.push(...e),f.length&&d.push(...f),{beforeHooks:c,afterHooks:d}}(c),g=await br(d,b);if("context"in g&&g.context&&"object"==typeof g.context){let{headers:a,...b}=g.context;a&&a.forEach((a,b)=>{d.headers.set(b,a)}),d=bq(b,d)}else if(g)return a?.asResponse?(0,C.Zr)(g,{headers:a?.headers}):a?.returnHeaders?{headers:a?.headers,response:g}:g;d.asResponse=!1,d.returnHeaders=!0,d.returnStatus=!0;let h=await (0,p.Qs)(d,()=>e(d)).catch(a=>{if(a instanceof C.LG)return{response:a,status:a.statusCode,headers:a.headers?new Headers(a.headers):null};throw a});if(h&&h instanceof Response)return h;d.context.returned=h.response,d.context.responseHeaders=h.headers;let i=await bs(d,f);if(i.response&&(h.response=i.response),h.response instanceof C.LG&&(0,l.p8)(c.logger.level,"debug")&&(h.response.stack=h.response.errorStack),h.response instanceof C.LG&&!a?.asResponse)throw h.response;return a?.asResponse?(0,C.Zr)(h.response,{headers:h.headers,status:h.status}):a?.returnHeaders?a?.returnStatus?{headers:h.headers,response:h.response,status:h.status}:{headers:h.headers,response:h.response}:a?.returnStatus?{response:h.response,status:h.status}:h.response})};return await (0,p.ty)()?c():(0,p.uy)(new WeakMap,c)},c[d].path=e.path,c[d].options=e.options;return c}({signInSocial:bi,callbackOAuth:a6,getSession:H(),signOut:bk,signUpEmail:(0,D.Aw)("/sign-up/email",{method:"POST",operationId:"signUpWithEmailAndPassword",body:m.g1P(m.YjP(),m.bzn()),metadata:{$Infer:{body:{}},openapi:{operationId:"signUpWithEmailAndPassword",description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},422:{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async a=>(0,p.iD)(a.context.adapter,async()=>{let b;if(!a.context.options.emailAndPassword?.enabled||a.context.options.emailAndPassword?.disableSignUp)throw new C.LG("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let c=a.body,{name:d,email:e,password:f,image:g,callbackURL:h,rememberMe:i,...j}=c;if(!m.Rpp().safeParse(e).success)throw new C.LG("BAD_REQUEST",{message:q.q.INVALID_EMAIL});let n=a.context.password.config.minPasswordLength;if(f.length<n)throw a.context.logger.error("Password is too short"),new C.LG("BAD_REQUEST",{message:q.q.PASSWORD_TOO_SHORT});let o=a.context.password.config.maxPasswordLength;if(f.length>o)throw a.context.logger.error("Password is too long"),new C.LG("BAD_REQUEST",{message:q.q.PASSWORD_TOO_LONG});if((await a.context.internalAdapter.findUserByEmail(e))?.user)throw a.context.logger.info(`Sign-up attempt for existing email: ${e}`),new C.LG("UNPROCESSABLE_ENTITY",{message:q.q.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let p=await a.context.password.hash(f);try{let c=(0,k.c)(a.context.options,j,"create");if(!(b=await a.context.internalAdapter.createUser({email:e.toLowerCase(),name:d,image:g,...c,emailVerified:!1})))throw new C.LG("BAD_REQUEST",{message:q.q.FAILED_TO_CREATE_USER})}catch(b){if((0,l.yz)()&&a.context.logger.error("Failed to create user",b),b instanceof C.LG)throw b;throw a.context.logger?.error("Failed to create user",b),new C.LG("UNPROCESSABLE_ENTITY",{message:q.q.FAILED_TO_CREATE_USER,details:b})}if(!b)throw new C.LG("UNPROCESSABLE_ENTITY",{message:q.q.FAILED_TO_CREATE_USER});if(await a.context.internalAdapter.linkAccount({userId:b.id,providerId:"credential",accountId:b.id,password:p}),a.context.options.emailVerification?.sendOnSignUp||a.context.options.emailAndPassword.requireEmailVerification){let d=await a7(a.context.secret,b.email,void 0,a.context.options.emailVerification?.expiresIn),e=c.callbackURL?encodeURIComponent(c.callbackURL):encodeURIComponent("/"),f=`${a.context.baseURL}/verify-email?token=${d}&callbackURL=${e}`,g=a.request?[{user:b,url:f,token:d},a.request]:[{user:b,url:f,token:d}];await a.context.options.emailVerification?.sendVerificationEmail?.(...g)}if(!1===a.context.options.emailAndPassword.autoSignIn||a.context.options.emailAndPassword.requireEmailVerification)return a.json({token:null,user:{id:b.id,email:b.email,name:b.name,image:b.image,emailVerified:b.emailVerified,createdAt:b.createdAt,updatedAt:b.updatedAt}});let r=await a.context.internalAdapter.createSession(b.id,!1===i);if(!r)throw new C.LG("BAD_REQUEST",{message:q.q.FAILED_TO_CREATE_SESSION});return await (0,B.c)(a,{session:r,user:b},!1===i),a.json({token:r.token,user:{id:b.id,email:b.email,name:b.name,image:b.image,emailVerified:b.emailVerified,createdAt:b.createdAt,updatedAt:b.updatedAt}})})),signInEmail:bj,resetPassword:bh,verifyEmail:ba,sendVerificationEmail:a9,changeEmail:bp,changePassword:bl,setPassword:bm,updateUser:(0,D.Aw)("/update-user",{method:"POST",operationId:"updateUser",body:m.g1P(m.YjP().meta({description:"Field name must be a string"}),m.bzn()),use:[J],metadata:{$Infer:{body:{}},openapi:{operationId:"updateUser",description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user"}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async a=>{let b=a.body;if(b.email)throw new C.LG("BAD_REQUEST",{message:q.q.EMAIL_CAN_NOT_BE_UPDATED});let{name:c,image:d,...e}=b,f=a.context.session,g=(0,k.c)(a.context.options,e,"update");if(void 0===d&&void 0===c&&0===Object.keys(g).length)throw new C.LG("BAD_REQUEST",{message:"No fields to update"});let h=await a.context.internalAdapter.updateUser(f.user.id,{name:c,image:d,...g});return await (0,B.c)(a,{session:f.session,user:h}),a.json({status:!0})}),deleteUser:bn,requestPasswordReset:bf,requestPasswordResetCallback:bg,listSessions:(0,D.Aw)("/list-sessions",{method:"GET",operationId:"listUserSessions",use:[J],requireHeaders:!0,metadata:{openapi:{operationId:"listUserSessions",description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async a=>{try{let b=(await a.context.internalAdapter.listSessions(a.context.session.user.id)).filter(a=>a.expiresAt>new Date);return a.json(b)}catch(b){throw a.context.logger.error(b),a.error("INTERNAL_SERVER_ERROR")}}),revokeSession:M,revokeSessions:N,revokeOtherSessions:O,linkSocialAccount:a$,listUserAccounts:aZ,deleteUserCallback:bo,unlinkAccount:a_,refreshToken:a1,getAccessToken:a0,accountInfo:a3,...c,ok:bd,error:bc},a),middlewares:d}}async function bu(a,b){let c=(await b.context.internalAdapter.findAccounts(a))?.find(a=>"credential"===a.providerId),d=c?.password;if(!c||!d||!b.body.password)throw new C.LG("BAD_REQUEST",{message:"No password credential found"});if(!await b.context.password.verify({hash:d,password:b.body.password}))throw new C.LG("BAD_REQUEST",{message:"Invalid password"});return!0}var bv=c(71844),bw=c(81713);async function bx(){if(e)return e;try{let a="undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!a)return;let b=a=>Function("mm","return import(mm)")(a),[{default:c},{default:d}]=await Promise.all([b("fs/promises"),b("path")]),f=await c.readFile(d.join(a,"package.json"),"utf-8");return e=JSON.parse(f)}catch{}}async function by(a){if(e)return e.dependencies?.[a]||e.devDependencies?.[a]||e.peerDependencies?.[a];try{let b="undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!b)throw Error("no-cwd");let c=a=>Function("mm","return import(mm)")(a),[{default:d},{default:e}]=await Promise.all([c("fs/promises"),c("path")]),f=e.join(b,"node_modules",a,"package.json"),g=await d.readFile(f,"utf-8");return JSON.parse(g).version||await bz(a)||void 0}catch{}return await bz(a)}async function bz(a){let b=await bx();if(b)return({...b.dependencies,...b.devDependencies,...b.peerDependencies})[a]}async function bA(){return(await bx())?.name}let bB={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function bC(){for(let[a,b]of Object.entries(bB)){let c=await by(a);if(c)return{name:b,version:c}}}let bD={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function bE(){for(let[a,b]of Object.entries(bD)){let c=await by(a);if(c)return{name:b,version:c}}}let bF=a=>Function("mm","return import(mm)")(a);function bG(){let a=(...a)=>a.some(a=>!!l._K[a]);return a("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent?"cloudflare":a("VERCEL","VERCEL_URL","VERCEL_ENV")?"vercel":a("NETLIFY","NETLIFY_URL")?"netlify":a("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID")?"render":a("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT")?"aws":a("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE")?"gcp":a("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME")?"azure":a("DENO_DEPLOYMENT_ID","DENO_REGION")?"deno-deploy":a("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID")?"fly-io":a("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME")?"railway":a("DYNO","HEROKU_APP_NAME")?"heroku":a("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN")?"digitalocean":a("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME")?"koyeb":null}async function bH(){try{if("cloudflare"===bG())return"cloudflare";let a=await bF("os"),b=a.cpus();return{deploymentVendor:bG(),systemPlatform:a.platform(),systemRelease:a.release(),systemArchitecture:a.arch(),cpuCount:b.length,cpuModel:b.length?b[0].model:null,cpuSpeed:b.length?b[0].speed:null,memory:a.totalmem(),isWSL:await bL(),isDocker:await bK(),isTTY:"undefined"!=typeof process&&process.stdout?process.stdout.isTTY:null}}catch(a){return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}async function bI(){if("cloudflare"===bG())return!1;try{return(await bF("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function bJ(){if("cloudflare"===bG())return!1;try{return(await bF("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function bK(){return"cloudflare"!==bG()&&(void 0===f&&(f=await bI()||await bJ()),f)}async function bL(){try{if("cloudflare"===bG()||"undefined"==typeof process||process?.platform!=="linux")return!1;let a=await bF("fs");if((await bF("os")).release().toLowerCase().includes("microsoft")){if(await bN())return!1;return!0}return!!a.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!await bN()}catch{return!1}}let bM=async()=>{if("cloudflare"===bG())return!1;try{return(await bF("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function bN(){return void 0===g&&(g=await bM()||await bK()),g}async function bO(a){let b=await (0,bv.n)("SHA-256").digest(a);return E.K.encode(b)}let bP=null;async function bQ(a){if(bP)return bP;let b=await bA();return b?bP=await bO(a?a+b:b):a?bP=await bO(a):bP=(0,bw.q)("a-z","A-Z","0-9")(32)}async function bR(a,b){let c,d=a.telemetry?.debug||(0,l.$F)("BETTER_AUTH_TELEMETRY_DEBUG",!1),e=l.Km.BETTER_AUTH_TELEMETRY_ENDPOINT,f=async a=>{b?.customTrack?await b.customTrack(a).catch(l.vF.error):d?l.vF.info("telemetry event",JSON.stringify(a,null,2)):await al(e,{method:"POST",body:a}).catch(l.vF.error)},g=async()=>{let c=a.telemetry?.enabled!==void 0&&a.telemetry.enabled;return((0,l.$F)("BETTER_AUTH_TELEMETRY",!1)||c)&&(b?.skipTestCheck||!(0,l.Nu)())},h=await g();h&&(c=await bQ(a.baseURL),f({type:"init",payload:{config:{database:b?.database,adapter:b?.adapter,emailVerification:{sendVerificationEmail:!!a.emailVerification?.sendVerificationEmail,sendOnSignUp:!!a.emailVerification?.sendOnSignUp,sendOnSignIn:!!a.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!a.emailVerification?.autoSignInAfterVerification,expiresIn:a.emailVerification?.expiresIn,onEmailVerification:!!a.emailVerification?.onEmailVerification,afterEmailVerification:!!a.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!a.emailAndPassword?.enabled,disableSignUp:!!a.emailAndPassword?.disableSignUp,requireEmailVerification:!!a.emailAndPassword?.requireEmailVerification,maxPasswordLength:a.emailAndPassword?.maxPasswordLength,minPasswordLength:a.emailAndPassword?.minPasswordLength,sendResetPassword:!!a.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:a.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!a.emailAndPassword?.onPasswordReset,password:{hash:!!a.emailAndPassword?.password?.hash,verify:!!a.emailAndPassword?.password?.verify},autoSignIn:!!a.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!a.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(a.socialProviders||{}).map(b=>{let c=a.socialProviders?.[b];return c?{id:b,mapProfileToUser:!!c.mapProfileToUser,disableDefaultScope:!!c.disableDefaultScope,disableIdTokenSignIn:!!c.disableIdTokenSignIn,disableImplicitSignUp:c.disableImplicitSignUp,disableSignUp:c.disableSignUp,getUserInfo:!!c.getUserInfo,overrideUserInfoOnSignIn:!!c.overrideUserInfoOnSignIn,prompt:c.prompt,verifyIdToken:!!c.verifyIdToken,scope:c.scope,refreshAccessToken:!!c.refreshAccessToken}:{}}),plugins:a.plugins?.map(a=>a.id.toString()),user:{modelName:a.user?.modelName,fields:a.user?.fields,additionalFields:a.user?.additionalFields,changeEmail:{enabled:a.user?.changeEmail?.enabled,sendChangeEmailVerification:!!a.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:a.verification?.modelName,disableCleanup:a.verification?.disableCleanup,fields:a.verification?.fields},session:{modelName:a.session?.modelName,additionalFields:a.session?.additionalFields,cookieCache:{enabled:a.session?.cookieCache?.enabled,maxAge:a.session?.cookieCache?.maxAge,strategy:a.session?.cookieCache?.strategy},disableSessionRefresh:a.session?.disableSessionRefresh,expiresIn:a.session?.expiresIn,fields:a.session?.fields,freshAge:a.session?.freshAge,preserveSessionInDatabase:a.session?.preserveSessionInDatabase,storeSessionInDatabase:a.session?.storeSessionInDatabase,updateAge:a.session?.updateAge},account:{modelName:a.account?.modelName,fields:a.account?.fields,encryptOAuthTokens:a.account?.encryptOAuthTokens,updateAccountOnSignIn:a.account?.updateAccountOnSignIn,accountLinking:{enabled:a.account?.accountLinking?.enabled,trustedProviders:a.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:a.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:a.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!a.hooks?.after,before:!!a.hooks?.before},secondaryStorage:!!a.secondaryStorage,advanced:{cookiePrefix:!!a.advanced?.cookiePrefix,cookies:!!a.advanced?.cookies,crossSubDomainCookies:{domain:!!a.advanced?.crossSubDomainCookies?.domain,enabled:a.advanced?.crossSubDomainCookies?.enabled,additionalCookies:a.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!a.advanced?.database?.useNumberId||a.advanced?.database?.generateId==="serial",generateId:a.advanced?.database?.generateId,defaultFindManyLimit:a.advanced?.database?.defaultFindManyLimit},useSecureCookies:a.advanced?.useSecureCookies,ipAddress:{disableIpTracking:a.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:a.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:a.advanced?.disableCSRFCheck,cookieAttributes:{expires:a.advanced?.defaultCookieAttributes?.expires,secure:a.advanced?.defaultCookieAttributes?.secure,sameSite:a.advanced?.defaultCookieAttributes?.sameSite,domain:!!a.advanced?.defaultCookieAttributes?.domain,path:a.advanced?.defaultCookieAttributes?.path,httpOnly:a.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:a.trustedOrigins?.length,rateLimit:{storage:a.rateLimit?.storage,modelName:a.rateLimit?.modelName,window:a.rateLimit?.window,customStorage:!!a.rateLimit?.customStorage,enabled:a.rateLimit?.enabled,max:a.rateLimit?.max},onAPIError:{errorURL:a.onAPIError?.errorURL,onError:!!a.onAPIError?.onError,throw:a.onAPIError?.throw},logger:{disabled:a.logger?.disabled,level:a.logger?.level,log:!!a.logger?.log},databaseHooks:{user:{create:{after:!!a.databaseHooks?.user?.create?.after,before:!!a.databaseHooks?.user?.create?.before},update:{after:!!a.databaseHooks?.user?.update?.after,before:!!a.databaseHooks?.user?.update?.before}},session:{create:{after:!!a.databaseHooks?.session?.create?.after,before:!!a.databaseHooks?.session?.create?.before},update:{after:!!a.databaseHooks?.session?.update?.after,before:!!a.databaseHooks?.session?.update?.before}},account:{create:{after:!!a.databaseHooks?.account?.create?.after,before:!!a.databaseHooks?.account?.create?.before},update:{after:!!a.databaseHooks?.account?.update?.after,before:!!a.databaseHooks?.account?.update?.before}},verification:{create:{after:!!a.databaseHooks?.verification?.create?.after,before:!!a.databaseHooks?.verification?.create?.before},update:{after:!!a.databaseHooks?.verification?.update?.after,before:!!a.databaseHooks?.verification?.update?.before}}}},runtime:"undefined"!=typeof Deno?{name:"deno",version:Deno?.version?.deno??null}:"undefined"!=typeof Bun?{name:"bun",version:Bun?.version??null}:"undefined"!=typeof process&&process?.versions?.node?{name:"node",version:process.versions.node??null}:{name:"edge",version:null},database:await bC(),framework:await bE(),environment:"production"===(0,l.lh)("NODE_ENV")?"production":"false"!==l._K.CI&&("BUILD_ID"in l._K||"BUILD_NUMBER"in l._K||"CI"in l._K||"CI_APP_ID"in l._K||"CI_BUILD_ID"in l._K||"CI_BUILD_NUMBER"in l._K||"CI_NAME"in l._K||"CONTINUOUS_INTEGRATION"in l._K||"RUN_ID"in l._K)?"ci":(0,l.Nu)()?"test":"development",systemInfo:await bH(),packageManager:function(){let a=l._K.npm_config_user_agent;if(!a)return;let b=a.split(" ")[0],c=b.lastIndexOf("/"),d=b.substring(0,c);return{name:"npminstall"===d?"cnpm":d,version:b.substring(c+1)}}()},anonymousId:c}));return{publish:async b=>{h&&(c||(c=await bQ(a.baseURL)),await f({type:b.type,payload:b.payload,anonymousId:c}))}}}let bS="better-auth-secret-123456789";function bT(a){return!!a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof a.then}async function bU(a){let b=a.options,c=b.plugins||[],d=a,e=[];for(let a of c)if(a.init){let c,f=a.init(d);if("object"==typeof(c=bT(f)?await f:f)){if(c.options){let{databaseHooks:a,...d}=c.options;a&&e.push(a),b=aP(b,d)}c.context&&(d={...d,...c.context})}}return e.push(b.databaseHooks),d.internalAdapter=u(d.adapter,{options:b,logger:d.logger,hooks:e.filter(a=>void 0!==a),generateId:d.generateId}),d.options=b,{context:d}}async function bV(a,b,c){var d;let e;b.database||(b=aP(b,{session:{cookieCache:{enabled:!0,strategy:"jwe",refreshCache:!0}},account:{storeStateStrategy:"cookie",storeAccountCookie:!0}}));let f=b.plugins||[],g=(d=b,d.advanced?.crossSubDomainCookies?.enabled,[]),i=(0,l.h)(b.logger),k=(0,A.t)(b.baseURL,b.basePath),m=b.secret||l._K.BETTER_AUTH_SECRET||l._K.AUTH_SECRET||bS;m===bS&&l.KV&&i.error("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config."),function(a,b){let c=new Map;a.plugins?.forEach(a=>{if(a.endpoints){for(let[b,d]of Object.entries(a.endpoints))if(d&&"path"in d){let e=d.path,f=[];d.options&&"method"in d.options&&(Array.isArray(d.options.method)?f=d.options.method:"string"==typeof d.options.method&&(f=[d.options.method])),0===f.length&&(f=["*"]),c.has(e)||c.set(e,[]),c.get(e).push({pluginId:a.id,endpointKey:b,methods:f})}}});let d=[];for(let[a,b]of c.entries())if(b.length>1){let c=new Map,e=!1;for(let a of b)for(let d of a.methods)c.has(d)||c.set(d,[]),c.get(d).push(a.pluginId),c.get(d).length>1&&(e=!0),"*"===d&&b.length>1?e=!0:"*"!==d&&c.has("*")&&(e=!0);if(e){let e=[...new Set(b.map(a=>a.pluginId))],f=[];for(let[a,d]of c.entries())(d.length>1||"*"===a&&b.length>1||"*"!==a&&c.has("*"))&&f.push(a);d.push({path:a,plugins:e,conflictingMethods:f})}}if(d.length>0){let a=d.map(a=>`  - "${a.path}" [${a.conflictingMethods.join(", ")}] used by plugins: ${a.plugins.join(", ")}`).join("\n");b.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${a}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}(b={...b,secret:m,baseURL:k?new URL(k).origin:"",basePath:b.basePath||"/api/auth",plugins:f.concat(g)},i);let n=(0,B.i)(b),o=(0,h.a)(b),p=Object.entries(b.socialProviders||{}).map(([a,b])=>{if(null==b||!1===b.enabled)return null;b.clientId||i.warn(`Social provider ${a} is missing clientId or clientSecret`);let c=aK[a](b);return c.disableImplicitSignUp=b.disableImplicitSignUp,c}).filter(a=>null!==a),r=({model:a,size:c})=>"function"==typeof b.advanced?.generateId?b.advanced.generateId({model:a,size:c}):"function"==typeof b?.advanced?.database?.generateId?b.advanced.database.generateId({model:a,size:c}):(0,j.t)(c),{publish:s}=await bR(b,{adapter:a.id,database:"function"==typeof b.database?"adapter":c(b.database)}),t=bU({appName:b.appName||"Better Auth",socialProviders:p,options:b,oauthConfig:{storeStateStrategy:b.account?.storeStateStrategy||"database",skipStateCookieCheck:!!b.account?.skipStateCookieCheck},tables:o,trustedOrigins:function(a){let b=(0,A.t)(a.baseURL,a.basePath);if(!b)return[];let c=[new URL(b).origin];a.trustedOrigins&&Array.isArray(a.trustedOrigins)&&c.push(...a.trustedOrigins);let d=l._K.BETTER_AUTH_TRUSTED_ORIGINS;if(d&&c.push(...d.split(",")),c.filter(a=>!a).length)throw new q.$("A provided trusted origin is invalid, make sure your trusted origins list is properly defined.");return c}(b),baseURL:k||"",sessionConfig:{updateAge:b.session?.updateAge!==void 0?b.session.updateAge:86400,expiresIn:b.session?.expiresIn||604800,freshAge:b.session?.freshAge===void 0?86400:b.session.freshAge,cookieRefreshCache:(()=>{let a=b.session?.cookieCache?.refreshCache,c=b.session?.cookieCache?.maxAge||300;return!1!==a&&void 0!==a&&(!0===a?{enabled:!0,updateAge:Math.floor(.2*c)}:{enabled:!0,updateAge:void 0!==a.updateAge?a.updateAge:Math.floor(.2*c)})})()},secret:m,rateLimit:{...b.rateLimit,enabled:b.rateLimit?.enabled??l.KV,window:b.rateLimit?.window||10,max:b.rateLimit?.max||100,storage:b.rateLimit?.storage||(b.secondaryStorage?"secondary-storage":"memory")},authCookies:n,logger:i,generateId:r,session:null,secondaryStorage:b.secondaryStorage,password:{hash:b.emailAndPassword?.password?.hash||y.i,verify:b.emailAndPassword?.password?.verify||y.a,config:{minPasswordLength:b.emailAndPassword?.minPasswordLength||8,maxPasswordLength:b.emailAndPassword?.maxPasswordLength||128},checkPassword:bu},setNewSession(a){this.newSession=a},newSession:null,adapter:a,internalAdapter:u(a,{options:b,logger:i,hooks:b.databaseHooks?[b.databaseHooks]:[],generateId:r}),createAuthCookie:(0,B.t)(b),async runMigrations(){throw new q.$("runMigrations will be set by the specific init implementation")},publishTelemetry:s,skipCSRFCheck:!!b.advanced?.disableCSRFCheck,skipOriginCheck:b.advanced?.disableOriginCheck!==void 0?b.advanced.disableOriginCheck:!!(0,l.Nu)()});return bT(t)?{context:e}=await t:{context:e}=t,e}let bW=async a=>{let b=await t(a),c=await bV(b,a,a=>(0,i.n)(a)||"unknown");return c.runMigrations=async function(){if(!a.database||"updateMany"in a.database)throw new q.$("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:b}=await x(a);await b()},c},bX=a=>((a,b)=>{let c=b(a),{api:d}=bt(c,a);return{handler:async b=>{let d=await c,e=d.options.basePath||"/api/auth";if(!d.options.baseURL){let a=(0,A.t)(void 0,e,b);if(a)d.baseURL=a,d.options.baseURL=(0,A.r)(d.baseURL)||void 0;else throw new q.$("Could not get base URL from request. Please provide a valid base URL.")}d.trustedOrigins=[...a.trustedOrigins?Array.isArray(a.trustedOrigins)?a.trustedOrigins:await a.trustedOrigins(b):[],d.options.baseURL];let{handler:f}=((a,b)=>{let{api:c,middlewares:d}=bt(a,b),e=new URL(a.baseURL).pathname;return(0,C.aE)(c,{routerContext:a,openapi:{disabled:!0},basePath:e,routerMiddleware:[{path:"/**",middleware:aT},...d],allowedMediaTypes:["application/json"],async onRequest(b){let c=a.options.disabledPaths||[],d=new URL(b.url).pathname.replace(e,"");if(c.includes(d))return new Response("Not Found",{status:404});for(let c of a.options.plugins||[])if(c.onRequest){let d=await c.onRequest(b,a);if(d&&"response"in d)return d.response;if(d&&"request"in d){let b=await aW(d.request,a);if(b)return b;return d.request}}return aW(b,a)},async onResponse(b){for(let c of a.options.plugins||[])if(c.onResponse){let d=await c.onResponse(b,a);if(d)return d.response}return b},onError(c){if(c instanceof C.LG&&"FOUND"===c.status)return;if(b.onAPIError?.throw)throw c;if(b.onAPIError?.onError)return void b.onAPIError.onError(c,a);let d=b.logger?.level,e="error"===d||"warn"===d||"debug"===d?l.vF:void 0;if(b.logger?.disabled!==!0){if(c&&"object"==typeof c&&"message"in c&&"string"==typeof c.message&&(c.message.includes("no column")||c.message.includes("column")||c.message.includes("relation")||c.message.includes("table")||c.message.includes("does not exist")))return void a.logger?.error(c.message);c instanceof C.LG?("INTERNAL_SERVER_ERROR"===c.status&&a.logger.error(c.status,c),e?.error(c.message)):a.logger?.error(c&&"object"==typeof c&&"name"in c?c.name:"",c)}}})})(d,a);return(0,p.vp)(d.adapter,()=>f(b))},api:d,options:a,$context:c,$ERROR_CODES:{...a.plugins?.reduce((a,b)=>b.$ERROR_CODES?{...a,...b.$ERROR_CODES}:a,{}),...q.q}}})(a,bW),bY=m.Ikc({id:m.YjP(),createdAt:m.p6U().default(()=>new Date),updatedAt:m.p6U().default(()=>new Date)});bY.extend({providerId:m.YjP(),accountId:m.YjP(),userId:m.auy.string(),accessToken:m.YjP().nullish(),refreshToken:m.YjP().nullish(),idToken:m.YjP().nullish(),accessTokenExpiresAt:m.p6U().nullish(),refreshTokenExpiresAt:m.p6U().nullish(),scope:m.YjP().nullish(),password:m.YjP().nullish()}),m.Ikc({key:m.YjP(),count:m.aig(),lastRequest:m.aig()}),bY.extend({userId:m.auy.string(),expiresAt:m.p6U(),token:m.YjP(),ipAddress:m.YjP().nullish(),userAgent:m.YjP().nullish()}),bY.extend({email:m.YjP().transform(a=>a.toLowerCase()),emailVerified:m.zMY().default(!1),name:m.YjP(),image:m.YjP().nullish()}),bY.extend({value:m.YjP(),expiresAt:m.p6U(),identifier:m.YjP()})},28707:(a,b,c)=>{c.d(b,{u:()=>d});let d={encode:a=>{if("string"==typeof a&&(a=new TextEncoder().encode(a)),0===a.byteLength)return"";let b=new Uint8Array(a),c="";for(let a of b)c+=a.toString(16).padStart(2,"0");return c},decode:a=>{if(!a)return"";if("string"==typeof a){if(a.length%2!=0||!RegExp("^[0123456789abcdef]+$").test(a))throw Error("Invalid hexadecimal string");let b=new Uint8Array(a.length/2);for(let c=0;c<a.length;c+=2)b[c/2]=parseInt(a.slice(c,c+2),16);return new TextDecoder().decode(b)}return new TextDecoder().decode(a)}}},30869:(a,b,c)=>{let d;c.d(b,{l:()=>j});var e=c(20771),f=c(99609),g=c(37832),h=c(9400);let i=async(a,b,c,e=!1)=>{let f=(d||=new WeakMap).get(a);if(f?.[c])return f[c];let h=await (0,g.x)({...b,alg:c});return e&&Object.freeze(a),f?f[c]=h:d.set(a,{[c]:h}),h};async function j(a,b){if(a instanceof Uint8Array||(0,h.R7)(a))return a;if((0,h.D2)(a)){if("secret"===a.type)return a.export();if("toCryptoKey"in a&&"function"==typeof a.toCryptoKey)try{return((a,b)=>{let c,e=(d||=new WeakMap).get(a);if(e?.[b])return e[b];let f="public"===a.type,g=!!f;if("x25519"===a.asymmetricKeyType){switch(b){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}c=a.toCryptoKey(a.asymmetricKeyType,g,f?[]:["deriveBits"])}if("ed25519"===a.asymmetricKeyType){if("EdDSA"!==b&&"Ed25519"!==b)throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}switch(a.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(b!==a.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}if("rsa"===a.asymmetricKeyType){let d;switch(b){case"RSA-OAEP":d="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":d="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":d="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":d="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(b.startsWith("RSA-OAEP"))return a.toCryptoKey({name:"RSA-OAEP",hash:d},g,f?["encrypt"]:["decrypt"]);c=a.toCryptoKey({name:b.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:d},g,[f?"verify":"sign"])}if("ec"===a.asymmetricKeyType){let d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(a.asymmetricKeyDetails?.namedCurve);if(!d)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===b&&"P-256"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),"ES384"===b&&"P-384"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),"ES512"===b&&"P-521"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),b.startsWith("ECDH-ES")&&(c=a.toCryptoKey({name:"ECDH",namedCurve:d},g,f?[]:["deriveBits"]))}if(!c)throw TypeError("given KeyObject instance cannot be used for this algorithm");return e?e[b]=c:d.set(a,{[b]:c}),c})(a,b)}catch(a){if(a instanceof TypeError)throw a}let c=a.export({format:"jwk"});return i(a,c,b)}if((0,e.ll)(a))return a.k?(0,f.D)(a.k):i(a,a,b,!0);throw Error("unreachable")}},31741:(a,b,c)=>{c.d(b,{O:()=>d});function d(a,b){if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:c}=b.algorithm;if("number"!=typeof c||c<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}}},31866:(a,b,c)=>{c.d(b,{N:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"AliasNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"AliasNode",node:a,alias:b})})},33197:(a,b,c)=>{c.d(b,{B:()=>f,o:()=>e});var d=c(17938);let e=["preserve rows","delete rows","drop"],f=(0,d.CN)({is:a=>"CreateTableNode"===a.kind,create:a=>(0,d.CN)({kind:"CreateTableNode",table:a,columns:(0,d.CN)([])}),cloneWithColumn:(a,b)=>(0,d.CN)({...a,columns:(0,d.CN)([...a.columns,b])}),cloneWithConstraint:(a,b)=>(0,d.CN)({...a,constraints:a.constraints?(0,d.CN)([...a.constraints,b]):(0,d.CN)([b])}),cloneWithFrontModifier:(a,b)=>(0,d.CN)({...a,frontModifiers:a.frontModifiers?(0,d.CN)([...a.frontModifiers,b]):(0,d.CN)([b])}),cloneWithEndModifier:(a,b)=>(0,d.CN)({...a,endModifiers:a.endModifiers?(0,d.CN)([...a.endModifiers,b]):(0,d.CN)([b])}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},34011:(a,b,c)=>{c.d(b,{G:()=>f,eq:()=>e});var d=c(79440);let e=d.ZS.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class f extends Error{get errors(){return this.issues}constructor(a){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let b=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,b):this.__proto__=b,this.name="ZodError",this.issues=a}format(a){let b=a||function(a){return a.message},c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code)e.unionErrors.map(d);else if("invalid_return_type"===e.code)d(e.returnTypeError);else if("invalid_arguments"===e.code)d(e.argumentsError);else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(this),c}static assert(a){if(!(a instanceof f))throw Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,d.ZS.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(a=a=>a.message){let b={},c=[];for(let d of this.issues)if(d.path.length>0){let c=d.path[0];b[c]=b[c]||[],b[c].push(a(d))}else c.push(a(d));return{formErrors:c,fieldErrors:b}}get formErrors(){return this.flatten()}}f.create=a=>new f(a)},34850:(a,b,c)=>{c.d(b,{H:()=>f});var d=c(17938),e=c(63570);let f=(0,d.CN)({is:a=>"TableNode"===a.kind,create:a=>(0,d.CN)({kind:"TableNode",table:e.y.create(a)}),createWithSchema:(a,b)=>(0,d.CN)({kind:"TableNode",table:e.y.createWithSchema(a,b)})})},35235:(a,b,c)=>{c.d(b,{Xd:()=>i,kB:()=>j});var d=c(94329),e=c(58941),f=c(90091),g=c(3763);class h extends g.u{constructor(a,b,c){super(a,"string","PgTime"),this.withTimezone=b,this.precision=c,this.config.withTimezone=b,this.config.precision=c}static [d.i]="PgTimeBuilder";build(a){return new i(a,this.config)}}class i extends f.Kl{static [d.i]="PgTime";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`time${a}${this.withTimezone?" with time zone":""}`}}function j(a,b={}){let{name:c,config:d}=(0,e.Ll)(a,b);return new h(c,d.withTimezone??!1,d.precision)}},35298:(a,b,c)=>{c.d(b,{t:()=>e});var d=c(5263);function e(a){try{if("string"!=typeof a)return a;return JSON.parse(a,function(a,b){if("string"==typeof b&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(b)){let a=new Date(b);if(!isNaN(a.getTime()))return a}return b})}catch(a){return d.vF.error("Error parsing JSON",{error:a}),null}}},35467:(a,b,c)=>{c.d(b,{a:()=>e});var d=c(5170);function e(){return new f}class f{#H;get queryId(){return void 0===this.#H&&(this.#H=(0,d.D)(8)),this.#H}}},35756:(a,b,c)=>{c.d(b,{O:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"OrderByNode"===a.kind,create:a=>(0,d.CN)({kind:"OrderByNode",items:(0,d.CN)([...a])}),cloneWithItems:(a,b)=>(0,d.CN)({...a,items:(0,d.CN)([...a.items,...b])})})},36093:(a,b,c)=>{c.d(b,{n:()=>bP,t:()=>bQ});var d=c(83021),e=c(69679),f=c(53460);function g(a,b){return f.z.createWithChildren([f.z.createWithSql(`${a} `),e.O.create(b)])}var h=c(10009),i=c(17938),j=c(35467);class k{#I;#J=new m;#K;#L;constructor(a){this.#I=(0,i.CN)({...a})}async init(){this.#K=(0,i.Tn)(this.#I.database)?await this.#I.database():this.#I.database,this.#L=new l(this.#K),this.#I.onCreateConnection&&await this.#I.onCreateConnection(this.#L)}async acquireConnection(){return await this.#J.lock(),this.#L}async beginTransaction(a){await a.executeQuery(h.E.raw("begin"))}async commitTransaction(a){await a.executeQuery(h.E.raw("commit"))}async rollbackTransaction(a){await a.executeQuery(h.E.raw("rollback"))}async savepoint(a,b,c){await a.executeQuery(c(g("savepoint",b),(0,j.a)()))}async rollbackToSavepoint(a,b,c){await a.executeQuery(c(g("rollback to",b),(0,j.a)()))}async releaseSavepoint(a,b,c){await a.executeQuery(c(g("release",b),(0,j.a)()))}async releaseConnection(){this.#J.unlock()}async destroy(){this.#K?.close()}}class l{#K;constructor(a){this.#K=a}executeQuery(a){let{sql:b,parameters:c}=a,d=this.#K.prepare(b);if(d.reader)return Promise.resolve({rows:d.all(c)});let{changes:e,lastInsertRowid:f}=d.run(c);return Promise.resolve({numAffectedRows:null!=e?BigInt(e):void 0,insertId:null!=f?BigInt(f):void 0,rows:[]})}async *streamQuery(a,b){let{sql:c,parameters:e,query:f}=a,g=this.#K.prepare(c);if(d.L.is(f))for(let a of g.iterate(e))yield{rows:[a]};else throw Error("Sqlite driver only supports streaming of select queries")}}class m{#M;#N;async lock(){for(;this.#M;)await this.#M;this.#M=new Promise(a=>{this.#N=a})}unlock(){let a=this.#N;this.#M=void 0,this.#N=void 0,a?.()}}var n=c(43395);let o=/"/g;class p extends n.n{visitOrAction(a){this.append("or "),this.append(a.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(a){return a.replace(o,'""')}visitDefaultInsertValue(a){this.append("null")}}var q=c(68740),r=c(96734);class s{#K;constructor(a){this.#K=a}async getSchemas(){return[]}async getTables(a={withInternalKyselyTables:!1}){return await this.#O(a)}async getMetadata(a){return{tables:await this.getTables(a)}}#P(a,b){let c=a.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");return b.withInternalKyselyTables||(c=c.where("name","!=",q.kQ).where("name","!=",q.sy)),c}async #O(a){let b=await this.#P(this.#K,a).execute(),c=await this.#K.with("table_list",b=>this.#P(b,a)).selectFrom(["table_list as tl",(0,r.l)`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),d={};for(let a of c)d[a.table]??=[],d[a.table].push(a);return b.map(({name:a,sql:b,type:c})=>{let e=b?.split(/[\(\),]/)?.find(a=>a.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),f=d[a]??[];if(!e){let a=f.filter(a=>a.pk>0);1===a.length&&"integer"===a[0].type.toLowerCase()&&(e=a[0].name)}return{name:a,isView:"view"===c,columns:f.map(a=>({name:a.name,dataType:a.type,isNullable:!a.notnull,isAutoIncrementing:a.name===e,hasDefaultValue:null!=a.dflt_value,comment:void 0}))}})}}class t{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}class u extends t{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(a,b){}async releaseMigrationLock(a,b){}}class v{#I;constructor(a){this.#I=(0,i.CN)({...a})}createDriver(){return new k(this.#I)}createQueryCompiler(){return new p}createAdapter(){return new u}createIntrospector(a){return new s(a)}}function w(a,b){var c;if(c=a,(0,i.Gv)(c)&&(0,i.Kg)(c.stack)&&b.stack){let c=b.stack.split("\n").slice(1).join("\n");a.stack+=`
${c}`}return a}let x=Symbol();class y{#I;#Q=new WeakMap;#R;constructor(a){this.#I=(0,i.CN)({...a})}async init(){this.#R=(0,i.Tn)(this.#I.pool)?await this.#I.pool():this.#I.pool}async acquireConnection(){let a=await this.#S(),b=this.#Q.get(a);return!b&&(b=new z(a),this.#Q.set(a,b),this.#I?.onCreateConnection&&await this.#I.onCreateConnection(b)),this.#I?.onReserveConnection&&await this.#I.onReserveConnection(b),b}async #S(){return new Promise((a,b)=>{this.#R.getConnection(async(c,d)=>{c?b(c):a(d)})})}async beginTransaction(a,b){if(b.isolationLevel||b.accessMode){let c=[];b.isolationLevel&&c.push(`isolation level ${b.isolationLevel}`),b.accessMode&&c.push(b.accessMode);let d=`set transaction ${c.join(", ")}`;await a.executeQuery(h.E.raw(d))}await a.executeQuery(h.E.raw("begin"))}async commitTransaction(a){await a.executeQuery(h.E.raw("commit"))}async rollbackTransaction(a){await a.executeQuery(h.E.raw("rollback"))}async savepoint(a,b,c){await a.executeQuery(c(g("savepoint",b),(0,j.a)()))}async rollbackToSavepoint(a,b,c){await a.executeQuery(c(g("rollback to",b),(0,j.a)()))}async releaseSavepoint(a,b,c){await a.executeQuery(c(g("release savepoint",b),(0,j.a)()))}async releaseConnection(a){a[x]()}async destroy(){return new Promise((a,b)=>{this.#R.end(c=>{c?b(c):a()})})}}class z{#T;constructor(a){this.#T=a}async executeQuery(a){try{let b=await this.#U(a);if((0,i.Gv)(b)&&"insertId"in b&&"affectedRows"in b){let{insertId:a,affectedRows:c,changedRows:d}=b;return{insertId:null!=a&&"0"!==a.toString()?BigInt(a):void 0,numAffectedRows:null!=c?BigInt(c):void 0,numChangedRows:null!=d?BigInt(d):void 0,rows:[]}}if(Array.isArray(b))return{rows:b};return{rows:[]}}catch(a){throw w(a,Error())}}#U(a){return new Promise((b,c)=>{this.#T.query(a.sql,a.parameters,(a,d)=>{a?c(a):b(d)})})}async *streamQuery(a,b){let c=this.#T.query(a.sql,a.parameters).stream({objectMode:!0});try{for await(let a of c)yield{rows:[a]}}catch(a){if(a&&"object"==typeof a&&"code"in a&&"ERR_STREAM_PREMATURE_CLOSE"===a.code)return;throw a}}[x](){this.#T.release()}}let A=/`/g;class B extends n.n{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(a){return a.replace(A,"``")}visitCreateIndex(a){this.append("create "),a.unique&&this.append("unique "),this.append("index "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),a.using&&(this.append(" using "),this.visitNode(a.using)),a.table&&(this.append(" on "),this.visitNode(a.table)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.where&&(this.append(" "),this.visitNode(a.where))}}class C{#K;constructor(a){this.#K=a}async getSchemas(){return(await this.#K.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(a=>({name:a.SCHEMA_NAME}))}async getTables(a={withInternalKyselyTables:!1}){let b=this.#K.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",a=>a.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",(0,r.l)`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();a.withInternalKyselyTables||(b=b.where("columns.TABLE_NAME","!=",q.kQ).where("columns.TABLE_NAME","!=",q.sy));let c=await b.execute();return this.#V(c)}async getMetadata(a){return{tables:await this.getTables(a)}}#V(a){return a.reduce((a,b)=>{let c=a.find(a=>a.name===b.TABLE_NAME);return c||(c=(0,i.CN)({name:b.TABLE_NAME,isView:"VIEW"===b.TABLE_TYPE,schema:b.TABLE_SCHEMA,columns:[]}),a.push(c)),c.columns.push((0,i.CN)({name:b.COLUMN_NAME,dataType:b.DATA_TYPE,isNullable:"YES"===b.IS_NULLABLE,isAutoIncrementing:b.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:null!==b.COLUMN_DEFAULT,comment:""===b.COLUMN_COMMENT?void 0:b.COLUMN_COMMENT})),a},[])}}let D="ea586330-2c93-47c8-908d-981d9d270f9d";class E extends t{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(a,b){await (0,r.l)`select get_lock(${r.l.lit(D)}, ${r.l.lit(3600)})`.execute(a)}async releaseMigrationLock(a,b){await (0,r.l)`select release_lock(${r.l.lit(D)})`.execute(a)}}class F{#I;constructor(a){this.#I=a}createDriver(){return new y(this.#I)}createQueryCompiler(){return new B}createAdapter(){return new E}createIntrospector(a){return new C(a)}}let G=Symbol();class H{#I;#Q=new WeakMap;#R;constructor(a){this.#I=(0,i.CN)({...a})}async init(){this.#R=(0,i.Tn)(this.#I.pool)?await this.#I.pool():this.#I.pool}async acquireConnection(){let a=await this.#R.connect(),b=this.#Q.get(a);return!b&&(b=new I(a,{cursor:this.#I.cursor??null}),this.#Q.set(a,b),this.#I.onCreateConnection&&await this.#I.onCreateConnection(b)),this.#I.onReserveConnection&&await this.#I.onReserveConnection(b),b}async beginTransaction(a,b){if(b.isolationLevel||b.accessMode){let c="start transaction";b.isolationLevel&&(c+=` isolation level ${b.isolationLevel}`),b.accessMode&&(c+=` ${b.accessMode}`),await a.executeQuery(h.E.raw(c))}else await a.executeQuery(h.E.raw("begin"))}async commitTransaction(a){await a.executeQuery(h.E.raw("commit"))}async rollbackTransaction(a){await a.executeQuery(h.E.raw("rollback"))}async savepoint(a,b,c){await a.executeQuery(c(g("savepoint",b),(0,j.a)()))}async rollbackToSavepoint(a,b,c){await a.executeQuery(c(g("rollback to",b),(0,j.a)()))}async releaseSavepoint(a,b,c){await a.executeQuery(c(g("release",b),(0,j.a)()))}async releaseConnection(a){a[G]()}async destroy(){if(this.#R){let a=this.#R;this.#R=void 0,await a.end()}}}class I{#W;#X;constructor(a,b){this.#W=a,this.#X=b}async executeQuery(a){try{let{command:b,rowCount:c,rows:d}=await this.#W.query(a.sql,[...a.parameters]);return{numAffectedRows:"INSERT"===b||"UPDATE"===b||"DELETE"===b||"MERGE"===b?BigInt(c):void 0,rows:d??[]}}catch(a){throw w(a,Error())}}async *streamQuery(a,b){if(!this.#X.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(b)||b<=0)throw Error("chunkSize must be a positive integer");let c=this.#W.query(new this.#X.cursor(a.sql,a.parameters.slice()));try{for(;;){let a=await c.read(b);if(0===a.length)break;yield{rows:a}}}finally{await c.close()}}[G](){this.#W.release()}}class J{#K;constructor(a){this.#K=a}async getSchemas(){return(await this.#K.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(a=>({name:a.nspname}))}async getTables(a={withInternalKyselyTables:!1}){let b=this.#K.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",(0,r.l)`col_description(a.attrelid, a.attnum)`.as("column_description"),(0,r.l)`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where((0,r.l)`has_schema_privilege(ns.nspname, 'USAGE')`).where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();a.withInternalKyselyTables||(b=b.where("c.relname","!=",q.kQ).where("c.relname","!=",q.sy));let c=await b.execute();return this.#V(c)}async getMetadata(a){return{tables:await this.getTables(a)}}#V(a){return a.reduce((a,b)=>{let c=a.find(a=>a.name===b.table&&a.schema===b.schema);return c||(c=(0,i.CN)({name:b.table,isView:"v"===b.table_type,schema:b.schema,columns:[]}),a.push(c)),c.columns.push((0,i.CN)({name:b.column,dataType:b.type,dataTypeSchema:b.type_schema,isNullable:!b.not_null,isAutoIncrementing:null!==b.auto_incrementing,hasDefaultValue:b.has_default,comment:b.column_description??void 0})),a},[])}}let K=/"/g;class L extends n.n{sanitizeIdentifier(a){return a.replace(K,'""')}}let M=BigInt("3853314791062309107");class N extends t{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(a,b){await (0,r.l)`select pg_advisory_xact_lock(${r.l.lit(M)})`.execute(a)}async releaseMigrationLock(a,b){}}class O{#I;constructor(a){this.#I=a}createDriver(){return new H(this.#I)}createQueryCompiler(){return new L}createAdapter(){return new N}createIntrospector(a){return new J(a)}}class P extends t{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(a){await (0,r.l)`exec sp_getapplock @DbPrincipal = ${r.l.lit("dbo")}, @Resource = ${r.l.lit(q.kQ)}, @LockMode = ${r.l.lit("Exclusive")}`.execute(a)}async releaseMigrationLock(){}}var Q=c(5170),R=c(50874);let S=Symbol(),T=Symbol(),U=Symbol();class V{#I;#R;constructor(a){this.#I=(0,i.CN)({...a});let{tarn:b,tedious:c,validateConnections:d}=this.#I,{validateConnections:e,...f}=b.options;this.#R=new b.Pool({...f,create:async()=>{let a=await c.connectionFactory();return await new W(a,c).connect()},destroy:async a=>{await a[T]()},validate:!1===d||!1===e?void 0:a=>a[U]()})}async init(){}async acquireConnection(){return await this.#R.acquire().promise}async beginTransaction(a,b){await a.beginTransaction(b)}async commitTransaction(a){await a.commitTransaction()}async rollbackTransaction(a){await a.rollbackTransaction()}async savepoint(a,b){await a.savepoint(b)}async rollbackToSavepoint(a,b){await a.rollbackTransaction(b)}async releaseConnection(a){(this.#I.resetConnectionsOnRelease||this.#I.tedious.resetConnectionOnRelease)&&await a[S](),this.#R.release(a)}async destroy(){await this.#R.destroy()}}class W{#L;#Y;#Z;constructor(a,b){this.#L=a,this.#Y=!1,this.#Z=b}async beginTransaction(a){let{isolationLevel:b}=a;await new Promise((a,c)=>this.#L.beginTransaction(b=>{b?c(b):a(void 0)},b?(0,Q.D)(8):void 0,b?this.#$(b):void 0))}async commitTransaction(){await new Promise((a,b)=>this.#L.commitTransaction(c=>{c?b(c):a(void 0)}))}async connect(){let{promise:a,reject:b,resolve:c}=new R.c;function d(){b(Error("The connection ended without ever completing the connection"))}return this.#L.connect(a=>{if(a)return b(a);c()}),this.#L.on("error",a=>{a instanceof Error&&"code"in a&&"ESOCKET"===a.code&&(this.#Y=!0),console.error(a),b(a)}),this.#L.once("end",d),await a,this.#L.off("end",d),this}async executeQuery(a){try{let b=new R.c,c=new X({compiledQuery:a,tedious:this.#Z,onDone:b});this.#L.execSql(c.request);let{rowCount:d,rows:e}=await b.promise;return{numAffectedRows:void 0!==d?BigInt(d):void 0,rows:e}}catch(a){throw w(a,Error())}}async rollbackTransaction(a){await new Promise((b,c)=>this.#L.rollbackTransaction(a=>{a?c(a):b(void 0)},a))}async savepoint(a){await new Promise((b,c)=>this.#L.saveTransaction(a=>{a?c(a):b(void 0)},a))}async *streamQuery(a,b){if(!Number.isInteger(b)||b<=0)throw Error("chunkSize must be a positive integer");let c=new X({compiledQuery:a,streamChunkSize:b,tedious:this.#Z});this.#L.execSql(c.request);try{for(;;){let a=await c.readChunk();if(0===a.length||(yield{rows:a},a.length<b))break}}finally{await this.#_(c)}}#$(a){let{ISOLATION_LEVEL:b}=this.#Z,c={"read committed":b.READ_COMMITTED,"read uncommitted":b.READ_UNCOMMITTED,"repeatable read":b.REPEATABLE_READ,serializable:b.SERIALIZABLE,snapshot:b.SNAPSHOT}[a];if(void 0===c)throw Error(`Unknown isolation level: ${a}`);return c}#_(a){return new Promise(b=>{a.request.once("requestCompleted",b),this.#L.cancel()||(a.request.off("requestCompleted",b),b())})}[T](){return"closed"in this.#L&&this.#L.closed?Promise.resolve():new Promise(a=>{this.#L.once("end",a),this.#L.close()})}async [S](){await new Promise((a,b)=>{this.#L.reset(c=>{if(c)return b(c);a()})})}async [U](){if(this.#Y||this.#aa())return!1;try{let a=new R.c,b=new X({compiledQuery:h.E.raw("select 1"),onDone:a,tedious:this.#Z});return this.#L.execSql(b.request),await a.promise,!0}catch{return!1}}#aa(){return"closed"in this.#L&&!!this.#L.closed}}class X{#ab;#ac;#ad;#ae;#Z;#af;constructor(a){let{compiledQuery:b,onDone:c,streamChunkSize:d,tedious:e}=a;if(this.#ac=[],this.#ad=d,this.#ae={},this.#Z=e,c){let a="onDone";this.#ae[a]=(b,d)=>{if("chunkReady"!==b){if(delete this.#ae[a],"error"===b)return c.reject(d);c.resolve({rowCount:this.#af,rows:this.#ac})}}}this.#ab=new this.#Z.Request(b.sql,(a,b)=>{if(a)return Object.values(this.#ae).forEach(b=>b("error",a instanceof AggregateError?a.errors:a));this.#af=b}),this.#ag(b.parameters),this.#ah()}get request(){return this.#ab}readChunk(){let a=this.readChunk.name;return new Promise((b,c)=>{this.#ae[a]=(d,e)=>{if(delete this.#ae[a],"error"===d)return c(e);b(this.#ac.splice(0,this.#ad))},this.#ab.resume()})}#ag(a){for(let b=0;b<a.length;b++){let c=a[b];this.#ab.addParameter(String(b+1),this.#ai(c),c)}}#ah(){let a=this.#ad?()=>{this.#ad<=this.#ac.length&&(this.#ab.pause(),Object.values(this.#ae).forEach(a=>a("chunkReady")))}:()=>{},b=b=>{let c={};for(let a of b)c[a.metadata.colName]=a.value;this.#ac.push(c),a()};this.#ab.on("row",b),this.#ab.once("requestCompleted",()=>{Object.values(this.#ae).forEach(a=>a("completed")),this.#ab.off("row",b)})}#ai(a){if((0,i.kZ)(a)||(0,i.b0)(a)||(0,i.Kg)(a))return this.#Z.TYPES.NVarChar;if((0,i.sI)(a)||(0,i.Et)(a)&&a%1==0)if(a<-0x80000000||a>0x7fffffff)return this.#Z.TYPES.BigInt;else return this.#Z.TYPES.Int;return(0,i.Et)(a)?this.#Z.TYPES.Float:(0,i.Lm)(a)?this.#Z.TYPES.Bit:(0,i.$P)(a)?this.#Z.TYPES.DateTime:(0,i.Pe)(a)?this.#Z.TYPES.VarBinary:this.#Z.TYPES.NVarChar}}class Y{#K;constructor(a){this.#K=a}async getSchemas(){return await this.#K.selectFrom("sys.schemas").select("name").execute()}async getTables(a={withInternalKyselyTables:!1}){let b=await this.#K.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",a=>a.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!a.withInternalKyselyTables,a=>a.where("tables.name","!=",q.kQ).where("tables.name","!=",q.sy)).select(["tables.name as table_name",a=>a.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#K.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",a=>a.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),c={};for(let a of b){let b=`${a.table_schema_name}.${a.table_name}`;(c[b]=c[b]||(0,i.CN)({columns:[],isView:"V "===a.table_type,name:a.table_name,schema:a.table_schema_name??void 0})).columns.push((0,i.CN)({dataType:a.type_name,dataTypeSchema:a.type_schema_name??void 0,hasDefaultValue:a.column_default_object_id>0||"NOT_APPLICABLE"!==a.column_generated_always_type||a.column_is_identity||a.column_is_computed||a.column_is_rowguidcol,isAutoIncrementing:a.column_is_identity,isNullable:a.column_is_nullable&&a.type_is_nullable,name:a.column_name,comment:a.column_comment??void 0}))}return Object.values(c)}async getMetadata(a){return{tables:await this.getTables(a)}}}let Z=/^[a-z0-9_]$/i;class $ extends n.n{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(a){super.visitOffset(a),this.append(" rows")}compileColumnAlterations(a){let b={};for(let c of a)b[c.kind]||(b[c.kind]=[]),b[c.kind].push(c);let c=!0;b.AddColumnNode&&(this.append("add "),this.compileList(b.AddColumnNode),c=!1),b.AlterColumnNode&&(c||this.append(", "),this.compileList(b.AlterColumnNode)),b.DropColumnNode&&(c||this.append(", "),this.append("drop column "),this.compileList(b.DropColumnNode)),b.ModifyColumnNode&&(c||this.append(", "),this.compileList(b.ModifyColumnNode)),b.RenameColumnNode&&(c||this.append(", "),this.compileList(b.RenameColumnNode))}visitAddColumn(a){this.visitNode(a.column)}visitDropColumn(a){this.visitNode(a.column)}visitMergeQuery(a){super.visitMergeQuery(a),this.append(";")}visitCollate(a){this.append("collate ");let{name:b}=a.collation;for(let a of b)if(!Z.test(a))throw Error(`Invalid collation: ${b}`);this.append(b)}announcesNewColumnDataType(){return!1}}class _{#I;constructor(a){this.#I=a}createDriver(){return new V(this.#I)}createQueryCompiler(){return new $}createAdapter(){return new P}createIntrospector(a){return new Y(a)}}let aa=(0,i.CN)({is:a=>"AlterTableNode"===a.kind,create:a=>(0,i.CN)({kind:"AlterTableNode",table:a}),cloneWithTableProps:(a,b)=>(0,i.CN)({...a,...b}),cloneWithColumnAlteration:(a,b)=>(0,i.CN)({...a,columnAlterations:a.columnAlterations?[...a.columnAlterations,b]:[b]})}),ab=(0,i.CN)({is:a=>"CreateIndexNode"===a.kind,create:a=>(0,i.CN)({kind:"CreateIndexNode",name:e.O.create(a)}),cloneWith:(a,b)=>(0,i.CN)({...a,...b}),cloneWithColumns:(a,b)=>(0,i.CN)({...a,columns:[...a.columns||[],...b]})}),ac=(0,i.CN)({is:a=>"CreateSchemaNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"CreateSchemaNode",schema:e.O.create(a),...b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});var ad=c(33197),ae=c(63570);let af=(0,i.CN)({is:a=>"DropIndexNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"DropIndexNode",name:ae.y.create(a),...b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),ag=(0,i.CN)({is:a=>"DropSchemaNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"DropSchemaNode",schema:e.O.create(a),...b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),ah=(0,i.CN)({is:a=>"DropTableNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"DropTableNode",table:a,...b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});var ai=c(44228);let aj=(0,i.CN)({is:a=>"AddColumnNode"===a.kind,create:a=>(0,i.CN)({kind:"AddColumnNode",column:a})});var ak=c(69256);let al=(0,i.CN)({is:a=>"ColumnDefinitionNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"ColumnDefinitionNode",column:ak.Z.create(a),dataType:b}),cloneWithFrontModifier:(a,b)=>(0,i.CN)({...a,frontModifiers:a.frontModifiers?(0,i.CN)([...a.frontModifiers,b]):[b]}),cloneWithEndModifier:(a,b)=>(0,i.CN)({...a,endModifiers:a.endModifiers?(0,i.CN)([...a.endModifiers,b]):[b]}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),am=(0,i.CN)({is:a=>"DropColumnNode"===a.kind,create:a=>(0,i.CN)({kind:"DropColumnNode",column:ak.Z.create(a)})}),an=(0,i.CN)({is:a=>"RenameColumnNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"RenameColumnNode",column:ak.Z.create(a),renameTo:ak.Z.create(b)})}),ao=(0,i.CN)({is:a=>"CheckConstraintNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"CheckConstraintNode",expression:a,name:b?e.O.create(b):void 0})}),ap=["no action","restrict","cascade","set null","set default"],aq=(0,i.CN)({is:a=>"ReferencesNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"ReferencesNode",table:a,columns:(0,i.CN)([...b])}),cloneWithOnDelete:(a,b)=>(0,i.CN)({...a,onDelete:b}),cloneWithOnUpdate:(a,b)=>(0,i.CN)({...a,onUpdate:b})});var ar=c(47724),as=c(84699),at=c(77175),au=c(84605);function av(a){return(0,at.N)(a)?a.toOperationNode():au.q.createImmediate(a)}let aw=(0,i.CN)({is:a=>"GeneratedNode"===a.kind,create:a=>(0,i.CN)({kind:"GeneratedNode",...a}),createWithExpression:a=>(0,i.CN)({kind:"GeneratedNode",always:!0,expression:a}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),ax=(0,i.CN)({is:a=>"DefaultValueNode"===a.kind,create:a=>(0,i.CN)({kind:"DefaultValueNode",defaultValue:a})});function ay(a){if(ap.includes(a))return a;throw Error(`invalid OnModifyForeignAction ${a}`)}class az{#s;constructor(a){this.#s=a}autoIncrement(){return new az(al.cloneWith(this.#s,{autoIncrement:!0}))}identity(){return new az(al.cloneWith(this.#s,{identity:!0}))}primaryKey(){return new az(al.cloneWith(this.#s,{primaryKey:!0}))}references(a){let b=(0,as.q5)(a);if(!b.table||ar.U.is(b.column))throw Error(`invalid call references('${a}'). The reference must have format table.column or schema.table.column`);return new az(al.cloneWith(this.#s,{references:aq.create(b.table,[b.column])}))}onDelete(a){if(!this.#s.references)throw Error("on delete constraint can only be added for foreign keys");return new az(al.cloneWith(this.#s,{references:aq.cloneWithOnDelete(this.#s.references,ay(a))}))}onUpdate(a){if(!this.#s.references)throw Error("on update constraint can only be added for foreign keys");return new az(al.cloneWith(this.#s,{references:aq.cloneWithOnUpdate(this.#s.references,ay(a))}))}unique(){return new az(al.cloneWith(this.#s,{unique:!0}))}notNull(){return new az(al.cloneWith(this.#s,{notNull:!0}))}unsigned(){return new az(al.cloneWith(this.#s,{unsigned:!0}))}defaultTo(a){return new az(al.cloneWith(this.#s,{defaultTo:ax.create(av(a))}))}check(a){return new az(al.cloneWith(this.#s,{check:ao.create(a.toOperationNode())}))}generatedAlwaysAs(a){return new az(al.cloneWith(this.#s,{generated:aw.createWithExpression(a.toOperationNode())}))}generatedAlwaysAsIdentity(){return new az(al.cloneWith(this.#s,{generated:aw.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new az(al.cloneWith(this.#s,{generated:aw.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#s.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new az(al.cloneWith(this.#s,{generated:aw.cloneWith(this.#s.generated,{stored:!0})}))}modifyFront(a){return new az(al.cloneWithFrontModifier(this.#s,a.toOperationNode()))}nullsNotDistinct(){return new az(al.cloneWith(this.#s,{nullsNotDistinct:!0}))}ifNotExists(){return new az(al.cloneWith(this.#s,{ifNotExists:!0}))}modifyEnd(a){return new az(al.cloneWithEndModifier(this.#s,a.toOperationNode()))}$call(a){return a(this)}toOperationNode(){return this.#s}}let aA=(0,i.CN)({is:a=>"ModifyColumnNode"===a.kind,create:a=>(0,i.CN)({kind:"ModifyColumnNode",column:a})});var aB=c(51775);let aC=(0,i.CN)({is:a=>"ForeignKeyConstraintNode"===a.kind,create:(a,b,c,d)=>(0,i.CN)({kind:"ForeignKeyConstraintNode",columns:a,references:aq.create(b,c),name:d?e.O.create(d):void 0}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class aD{#s;constructor(a){this.#s=a}onDelete(a){return new aD(aC.cloneWith(this.#s,{onDelete:ay(a)}))}onUpdate(a){return new aD(aC.cloneWith(this.#s,{onUpdate:ay(a)}))}deferrable(){return new aD(aC.cloneWith(this.#s,{deferrable:!0}))}notDeferrable(){return new aD(aC.cloneWith(this.#s,{deferrable:!1}))}initiallyDeferred(){return new aD(aC.cloneWith(this.#s,{initiallyDeferred:!0}))}initiallyImmediate(){return new aD(aC.cloneWith(this.#s,{initiallyDeferred:!1}))}$call(a){return a(this)}toOperationNode(){return this.#s}}let aE=(0,i.CN)({is:a=>"AddConstraintNode"===a.kind,create:a=>(0,i.CN)({kind:"AddConstraintNode",constraint:a})}),aF=(0,i.CN)({is:a=>"UniqueConstraintNode"===a.kind,create:(a,b,c)=>(0,i.CN)({kind:"UniqueConstraintNode",columns:(0,i.CN)(a.map(ak.Z.create)),name:b?e.O.create(b):void 0,nullsNotDistinct:c}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),aG=(0,i.CN)({is:a=>"DropConstraintNode"===a.kind,create:a=>(0,i.CN)({kind:"DropConstraintNode",constraintName:e.O.create(a)}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),aH=(0,i.CN)({is:a=>"AlterColumnNode"===a.kind,create:(a,b,c)=>(0,i.CN)({kind:"AlterColumnNode",column:ak.Z.create(a),[b]:c})});class aI{#aj;constructor(a){this.#aj=a}setDataType(a){return new aJ(aH.create(this.#aj,"dataType",(0,aB.Q)(a)))}setDefault(a){return new aJ(aH.create(this.#aj,"setDefault",av(a)))}dropDefault(){return new aJ(aH.create(this.#aj,"dropDefault",!0))}setNotNull(){return new aJ(aH.create(this.#aj,"setNotNull",!0))}dropNotNull(){return new aJ(aH.create(this.#aj,"dropNotNull",!0))}$call(a){return a(this)}}class aJ{#ak;constructor(a){this.#ak=a}toOperationNode(){return this.#ak}}class aK{#c;constructor(a){this.#c=(0,i.CN)(a)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}class aL{#c;constructor(a){this.#c=(0,i.CN)(a)}onDelete(a){return new aL({...this.#c,constraintBuilder:this.#c.constraintBuilder.onDelete(a)})}onUpdate(a){return new aL({...this.#c,constraintBuilder:this.#c.constraintBuilder.onUpdate(a)})}deferrable(){return new aL({...this.#c,constraintBuilder:this.#c.constraintBuilder.deferrable()})}notDeferrable(){return new aL({...this.#c,constraintBuilder:this.#c.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new aL({...this.#c,constraintBuilder:this.#c.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new aL({...this.#c,constraintBuilder:this.#c.constraintBuilder.initiallyImmediate()})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(aa.cloneWithTableProps(this.#c.node,{addConstraint:aE.create(this.#c.constraintBuilder.toOperationNode())}),this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}class aM{#c;constructor(a){this.#c=(0,i.CN)(a)}ifExists(){return new aM({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{dropConstraint:aG.cloneWith(this.#c.node.dropConstraint,{ifExists:!0})})})}cascade(){return new aM({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{dropConstraint:aG.cloneWith(this.#c.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new aM({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{dropConstraint:aG.cloneWith(this.#c.node.dropConstraint,{modifier:"restrict"})})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}let aN=(0,i.CN)({is:a=>"PrimaryKeyConstraintNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"PrimaryKeyConstraintNode",columns:(0,i.CN)(a.map(ak.Z.create)),name:b?e.O.create(b):void 0}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),aO=(0,i.CN)({is:a=>"AddIndexNode"===a.kind,create:a=>(0,i.CN)({kind:"AddIndexNode",name:e.O.create(a)}),cloneWith:(a,b)=>(0,i.CN)({...a,...b}),cloneWithColumns:(a,b)=>(0,i.CN)({...a,columns:[...a.columns||[],...b]})});class aP{#c;constructor(a){this.#c=(0,i.CN)(a)}unique(){return new aP({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{addIndex:aO.cloneWith(this.#c.node.addIndex,{unique:!0})})})}column(a){return new aP({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{addIndex:aO.cloneWithColumns(this.#c.node.addIndex,[(0,as.Ow)(a)])})})}columns(a){return new aP({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{addIndex:aO.cloneWithColumns(this.#c.node.addIndex,a.map(as.Ow))})})}expression(a){return new aP({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{addIndex:aO.cloneWithColumns(this.#c.node.addIndex,[a.toOperationNode()])})})}using(a){return new aP({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{addIndex:aO.cloneWith(this.#c.node.addIndex,{using:f.z.createWithSql(a)})})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}class aQ{#s;constructor(a){this.#s=a}nullsNotDistinct(){return new aQ(aF.cloneWith(this.#s,{nullsNotDistinct:!0}))}deferrable(){return new aQ(aF.cloneWith(this.#s,{deferrable:!0}))}notDeferrable(){return new aQ(aF.cloneWith(this.#s,{deferrable:!1}))}initiallyDeferred(){return new aQ(aF.cloneWith(this.#s,{initiallyDeferred:!0}))}initiallyImmediate(){return new aQ(aF.cloneWith(this.#s,{initiallyDeferred:!1}))}$call(a){return a(this)}toOperationNode(){return this.#s}}class aR{#s;constructor(a){this.#s=a}deferrable(){return new aR(aN.cloneWith(this.#s,{deferrable:!0}))}notDeferrable(){return new aR(aN.cloneWith(this.#s,{deferrable:!1}))}initiallyDeferred(){return new aR(aN.cloneWith(this.#s,{initiallyDeferred:!0}))}initiallyImmediate(){return new aR(aN.cloneWith(this.#s,{initiallyDeferred:!1}))}$call(a){return a(this)}toOperationNode(){return this.#s}}class aS{#s;constructor(a){this.#s=a}$call(a){return a(this)}toOperationNode(){return this.#s}}let aT=(0,i.CN)({is:a=>"RenameConstraintNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"RenameConstraintNode",oldName:e.O.create(a),newName:e.O.create(b)})});class aU{#c;constructor(a){this.#c=(0,i.CN)(a)}renameTo(a){return new aK({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{renameTo:(0,ai.M$)(a)})})}setSchema(a){return new aK({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{setSchema:e.O.create(a)})})}alterColumn(a,b){let c=b(new aI(a));return new aV({...this.#c,node:aa.cloneWithColumnAlteration(this.#c.node,c.toOperationNode())})}dropColumn(a){return new aV({...this.#c,node:aa.cloneWithColumnAlteration(this.#c.node,am.create(a))})}renameColumn(a,b){return new aV({...this.#c,node:aa.cloneWithColumnAlteration(this.#c.node,an.create(a,b))})}addColumn(a,b,c=i.lQ){let d=c(new az(al.create(a,(0,aB.Q)(b))));return new aV({...this.#c,node:aa.cloneWithColumnAlteration(this.#c.node,aj.create(d.toOperationNode()))})}modifyColumn(a,b,c=i.lQ){let d=c(new az(al.create(a,(0,aB.Q)(b))));return new aV({...this.#c,node:aa.cloneWithColumnAlteration(this.#c.node,aA.create(d.toOperationNode()))})}addUniqueConstraint(a,b,c=i.lQ){let d=c(new aQ(aF.create(b,a)));return new aK({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{addConstraint:aE.create(d.toOperationNode())})})}addCheckConstraint(a,b,c=i.lQ){let d=c(new aS(ao.create(b.toOperationNode(),a)));return new aK({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{addConstraint:aE.create(d.toOperationNode())})})}addForeignKeyConstraint(a,b,c,d,e=i.lQ){let f=e(new aD(aC.create(b.map(ak.Z.create),(0,ai.M$)(c),d.map(ak.Z.create),a)));return new aL({...this.#c,constraintBuilder:f})}addPrimaryKeyConstraint(a,b,c=i.lQ){let d=c(new aR(aN.create(b,a)));return new aK({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{addConstraint:aE.create(d.toOperationNode())})})}dropConstraint(a){return new aM({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{dropConstraint:aG.create(a)})})}renameConstraint(a,b){return new aM({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{renameConstraint:aT.create(a,b)})})}addIndex(a){return new aP({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{addIndex:aO.create(a)})})}dropIndex(a){return new aK({...this.#c,node:aa.cloneWithTableProps(this.#c.node,{dropIndex:af.create(a)})})}$call(a){return a(this)}}class aV{#c;constructor(a){this.#c=(0,i.CN)(a)}alterColumn(a,b){let c=b(new aI(a));return new aV({...this.#c,node:aa.cloneWithColumnAlteration(this.#c.node,c.toOperationNode())})}dropColumn(a){return new aV({...this.#c,node:aa.cloneWithColumnAlteration(this.#c.node,am.create(a))})}renameColumn(a,b){return new aV({...this.#c,node:aa.cloneWithColumnAlteration(this.#c.node,an.create(a,b))})}addColumn(a,b,c=i.lQ){let d=c(new az(al.create(a,(0,aB.Q)(b))));return new aV({...this.#c,node:aa.cloneWithColumnAlteration(this.#c.node,aj.create(d.toOperationNode()))})}modifyColumn(a,b,c=i.lQ){let d=c(new az(al.create(a,(0,aB.Q)(b))));return new aV({...this.#c,node:aa.cloneWithColumnAlteration(this.#c.node,aA.create(d.toOperationNode()))})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}var aW=c(16469),aX=c(93229),aY=c(74218),aZ=c(67882);class a$ extends aY.V{transformPrimitiveValueList(a){return aZ.s.create(a.values.map(au.q.createImmediate))}transformValue(a){return au.q.createImmediate(a.value)}}class a_{#c;constructor(a){this.#c=(0,i.CN)(a)}ifNotExists(){return new a_({...this.#c,node:ab.cloneWith(this.#c.node,{ifNotExists:!0})})}unique(){return new a_({...this.#c,node:ab.cloneWith(this.#c.node,{unique:!0})})}nullsNotDistinct(){return new a_({...this.#c,node:ab.cloneWith(this.#c.node,{nullsNotDistinct:!0})})}on(a){return new a_({...this.#c,node:ab.cloneWith(this.#c.node,{table:(0,ai.M$)(a)})})}column(a){return new a_({...this.#c,node:ab.cloneWithColumns(this.#c.node,[(0,as.Ow)(a)])})}columns(a){return new a_({...this.#c,node:ab.cloneWithColumns(this.#c.node,a.map(as.Ow))})}expression(a){return new a_({...this.#c,node:ab.cloneWithColumns(this.#c.node,[a.toOperationNode()])})}using(a){return new a_({...this.#c,node:ab.cloneWith(this.#c.node,{using:f.z.createWithSql(a)})})}where(...a){let b=new a$;return new a_({...this.#c,node:aX.L.cloneWithWhere(this.#c.node,b.transformNode((0,aW.GB)(a),this.#c.queryId))})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}class a0{#c;constructor(a){this.#c=(0,i.CN)(a)}ifNotExists(){return new a0({...this.#c,node:ac.cloneWith(this.#c.node,{ifNotExists:!0})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}var a1=c(63860);class a2{#c;constructor(a){this.#c=(0,i.CN)(a)}temporary(){return new a2({...this.#c,node:ad.B.cloneWith(this.#c.node,{temporary:!0})})}onCommit(a){return new a2({...this.#c,node:ad.B.cloneWith(this.#c.node,{onCommit:function(a){if(ad.o.includes(a))return a;throw Error(`invalid OnCommitAction ${a}`)}(a)})})}ifNotExists(){return new a2({...this.#c,node:ad.B.cloneWith(this.#c.node,{ifNotExists:!0})})}addColumn(a,b,c=i.lQ){let d=c(new az(al.create(a,(0,aB.Q)(b))));return new a2({...this.#c,node:ad.B.cloneWithColumn(this.#c.node,d.toOperationNode())})}addPrimaryKeyConstraint(a,b,c=i.lQ){let d=c(new aR(aN.create(b,a)));return new a2({...this.#c,node:ad.B.cloneWithConstraint(this.#c.node,d.toOperationNode())})}addUniqueConstraint(a,b,c=i.lQ){let d=c(new aQ(aF.create(b,a)));return new a2({...this.#c,node:ad.B.cloneWithConstraint(this.#c.node,d.toOperationNode())})}addCheckConstraint(a,b,c=i.lQ){let d=c(new aS(ao.create(b.toOperationNode(),a)));return new a2({...this.#c,node:ad.B.cloneWithConstraint(this.#c.node,d.toOperationNode())})}addForeignKeyConstraint(a,b,c,d,e=i.lQ){let f=e(new aD(aC.create(b.map(ak.Z.create),(0,ai.M$)(c),d.map(ak.Z.create),a)));return new a2({...this.#c,node:ad.B.cloneWithConstraint(this.#c.node,f.toOperationNode())})}modifyFront(a){return new a2({...this.#c,node:ad.B.cloneWithFrontModifier(this.#c.node,a.toOperationNode())})}modifyEnd(a){return new a2({...this.#c,node:ad.B.cloneWithEndModifier(this.#c.node,a.toOperationNode())})}as(a){return new a2({...this.#c,node:ad.B.cloneWith(this.#c.node,{selectQuery:(0,a1.YK)(a)})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}class a3{#c;constructor(a){this.#c=(0,i.CN)(a)}on(a){return new a3({...this.#c,node:af.cloneWith(this.#c.node,{table:(0,ai.M$)(a)})})}ifExists(){return new a3({...this.#c,node:af.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new a3({...this.#c,node:af.cloneWith(this.#c.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}class a4{#c;constructor(a){this.#c=(0,i.CN)(a)}ifExists(){return new a4({...this.#c,node:ag.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new a4({...this.#c,node:ag.cloneWith(this.#c.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}class a5{#c;constructor(a){this.#c=(0,i.CN)(a)}ifExists(){return new a5({...this.#c,node:ah.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new a5({...this.#c,node:ah.cloneWith(this.#c.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}var a6=c(20632),a7=c(60724);class a8{#r=new a$;transformQuery(a){return this.#r.transformNode(a.node,a.queryId)}transformResult(a){return Promise.resolve(a.result)}}class a9{#c;constructor(a){this.#c=(0,i.CN)(a)}temporary(){return new a9({...this.#c,node:a7.Y.cloneWith(this.#c.node,{temporary:!0})})}materialized(){return new a9({...this.#c,node:a7.Y.cloneWith(this.#c.node,{materialized:!0})})}ifNotExists(){return new a9({...this.#c,node:a7.Y.cloneWith(this.#c.node,{ifNotExists:!0})})}orReplace(){return new a9({...this.#c,node:a7.Y.cloneWith(this.#c.node,{orReplace:!0})})}columns(a){return new a9({...this.#c,node:a7.Y.cloneWith(this.#c.node,{columns:a.map(as.RY)})})}as(a){let b=a.withPlugin(new a8).toOperationNode();return new a9({...this.#c,node:a7.Y.cloneWith(this.#c.node,{as:b})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}let ba=(0,i.CN)({is:a=>"DropViewNode"===a.kind,create:a=>(0,i.CN)({kind:"DropViewNode",name:ae.y.create(a)}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class bb{#c;constructor(a){this.#c=(0,i.CN)(a)}materialized(){return new bb({...this.#c,node:ba.cloneWith(this.#c.node,{materialized:!0})})}ifExists(){return new bb({...this.#c,node:ba.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new bb({...this.#c,node:ba.cloneWith(this.#c.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}let bc=(0,i.CN)({is:a=>"CreateTypeNode"===a.kind,create:a=>(0,i.CN)({kind:"CreateTypeNode",name:a}),cloneWithEnum:(a,b)=>(0,i.CN)({...a,enum:aZ.s.create(b.map(au.q.createImmediate))})});class bd{#c;constructor(a){this.#c=(0,i.CN)(a)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}asEnum(a){return new bd({...this.#c,node:bc.cloneWithEnum(this.#c.node,a)})}$call(a){return a(this)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}let be=(0,i.CN)({is:a=>"DropTypeNode"===a.kind,create:a=>(0,i.CN)({kind:"DropTypeNode",name:a}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class bf{#c;constructor(a){this.#c=(0,i.CN)(a)}ifExists(){return new bf({...this.#c,node:be.cloneWith(this.#c.node,{ifExists:!0})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}function bg(a){if(!a.includes("."))return ae.y.create(a);{let b=a.split(".").map(bh);if(2===b.length)return ae.y.createWithSchema(b[0],b[1]);throw Error(`invalid schemable identifier ${a}`)}}function bh(a){return a.trim()}let bi=(0,i.CN)({is:a=>"RefreshMaterializedViewNode"===a.kind,create:a=>(0,i.CN)({kind:"RefreshMaterializedViewNode",name:ae.y.create(a)}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class bj{#c;constructor(a){this.#c=(0,i.CN)(a)}concurrently(){return new bj({...this.#c,node:bi.cloneWith(this.#c.node,{concurrently:!0,withNoData:!1})})}withData(){return new bj({...this.#c,node:bi.cloneWith(this.#c.node,{withNoData:!1})})}withNoData(){return new bj({...this.#c,node:bi.cloneWith(this.#c.node,{withNoData:!0,concurrently:!1})})}$call(a){return a(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile())}}class bk{#al;constructor(a){this.#al=a}createTable(a){return new a2({queryId:(0,j.a)(),executor:this.#al,node:ad.B.create((0,ai.M$)(a))})}dropTable(a){return new a5({queryId:(0,j.a)(),executor:this.#al,node:ah.create((0,ai.M$)(a))})}createIndex(a){return new a_({queryId:(0,j.a)(),executor:this.#al,node:ab.create(a)})}dropIndex(a){return new a3({queryId:(0,j.a)(),executor:this.#al,node:af.create(a)})}createSchema(a){return new a0({queryId:(0,j.a)(),executor:this.#al,node:ac.create(a)})}dropSchema(a){return new a4({queryId:(0,j.a)(),executor:this.#al,node:ag.create(a)})}alterTable(a){return new aU({queryId:(0,j.a)(),executor:this.#al,node:aa.create((0,ai.M$)(a))})}createView(a){return new a9({queryId:(0,j.a)(),executor:this.#al,node:a7.Y.create(a)})}refreshMaterializedView(a){return new bj({queryId:(0,j.a)(),executor:this.#al,node:bi.create(a)})}dropView(a){return new bb({queryId:(0,j.a)(),executor:this.#al,node:ba.create(a)})}createType(a){return new bd({queryId:(0,j.a)(),executor:this.#al,node:bc.create(bg(a))})}dropType(a){return new bf({queryId:(0,j.a)(),executor:this.#al,node:be.create(bg(a))})}withPlugin(a){return new bk(this.#al.withPlugin(a))}withoutPlugins(){return new bk(this.#al.withoutPlugins())}withSchema(a){return new bk(this.#al.withPluginAtFront(new a6.B(a)))}}var bl=c(79665),bm=c(4308);class bn{ref(a){return new bl.g(a)}table(a){return new bm.bj(a)}}class bo{#am;constructor(a){this.#am=a}async provideConnection(a){let b=await this.#am.acquireConnection();try{return await a(b)}finally{await this.#am.releaseConnection(b)}}}var bp=c(41517),bq=c(9263);class br extends bq.R{#an;#ao;#ap;constructor(a,b,c,d=[]){super(d),this.#an=a,this.#ao=b,this.#ap=c}get adapter(){return this.#ao}compileQuery(a,b){return this.#an.compileQuery(a,b)}provideConnection(a){return this.#ap.provideConnection(a)}withPlugins(a){return new br(this.#an,this.#ao,this.#ap,[...this.plugins,...a])}withPlugin(a){return new br(this.#an,this.#ao,this.#ap,[...this.plugins,a])}withPluginAtFront(a){return new br(this.#an,this.#ao,this.#ap,[a,...this.plugins])}withConnectionProvider(a){return new br(this.#an,this.#ao,a,[...this.plugins])}withoutPlugins(){return new br(this.#an,this.#ao,this.#ap,[])}}function bs(){return"undefined"!=typeof performance&&(0,i.Tn)(performance.now)?performance.now():Date.now()}class bt{#am;#aq;#ar;#as;#at;#Q=new WeakSet;constructor(a,b){this.#as=!1,this.#am=a,this.#aq=b}async init(){if(this.#at)throw Error("driver has already been destroyed");this.#ar||(this.#ar=this.#am.init().then(()=>{this.#as=!0}).catch(a=>(this.#ar=void 0,Promise.reject(a)))),await this.#ar}async acquireConnection(){if(this.#at)throw Error("driver has already been destroyed");this.#as||await this.init();let a=await this.#am.acquireConnection();return this.#Q.has(a)||(this.#au()&&this.#av(a),this.#Q.add(a)),a}async releaseConnection(a){await this.#am.releaseConnection(a)}beginTransaction(a,b){return this.#am.beginTransaction(a,b)}commitTransaction(a){return this.#am.commitTransaction(a)}rollbackTransaction(a){return this.#am.rollbackTransaction(a)}savepoint(a,b,c){if(this.#am.savepoint)return this.#am.savepoint(a,b,c);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint(a,b,c){if(this.#am.rollbackToSavepoint)return this.#am.rollbackToSavepoint(a,b,c);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint(a,b,c){if(this.#am.releaseSavepoint)return this.#am.releaseSavepoint(a,b,c);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){this.#ar&&(await this.#ar,this.#at||(this.#at=this.#am.destroy().catch(a=>(this.#at=void 0,Promise.reject(a)))),await this.#at)}#au(){return this.#aq.isLevelEnabled("query")||this.#aq.isLevelEnabled("error")}#av(a){let b=a.executeQuery,c=a.streamQuery,d=this;a.executeQuery=async c=>{let e,f=bs();try{return await b.call(a,c)}catch(a){throw e=a,await d.#aw(a,c,f),a}finally{e||await d.#ax(c,f)}},a.streamQuery=async function*(b,e){let f,g=bs();try{for await(let d of c.call(a,b,e))yield d}catch(a){throw f=a,await d.#aw(a,b,g),a}finally{f||await d.#ax(b,g,!0)}}}async #aw(a,b,c){await this.#aq.error(()=>({level:"error",error:a,query:b,queryDurationMillis:this.#ay(c)}))}async #ax(a,b,c=!1){await this.#aq.query(()=>({level:"query",isStream:c,query:a,queryDurationMillis:this.#ay(b)}))}#ay(a){return bs()-a}}let bu=()=>{};class bv{#L;#az;constructor(a){this.#L=a}async provideConnection(a){for(;this.#az;)await this.#az.catch(bu);return this.#az=this.#aA(a).finally(()=>{this.#az=void 0}),this.#az}async #aA(a){return await a(this.#L)}}let bw=["read only","read write"],bx=["read uncommitted","read committed","repeatable read","serializable","snapshot"];function by(a){if(a.accessMode&&!bw.includes(a.accessMode))throw Error(`invalid transaction access mode ${a.accessMode}`);if(a.isolationLevel&&!bx.includes(a.isolationLevel))throw Error(`invalid transaction isolation level ${a.isolationLevel}`)}var bz=c(76862);(0,i.CN)(["query","error"]);class bA{#aB;#aC;constructor(a){(0,i.Tn)(a)?(this.#aC=a,this.#aB=(0,i.CN)({query:!0,error:!0})):(this.#aC=bB,this.#aB=(0,i.CN)({query:a.includes("query"),error:a.includes("error")}))}isLevelEnabled(a){return this.#aB[a]}async query(a){this.#aB.query&&await this.#aC(a())}async error(a){this.#aB.error&&await this.#aC(a())}}function bB(a){if("query"===a.level){let b=`kysely:query:${a.isStream?"stream:":""}`;console.log(`${b} ${a.query.sql}`),console.log(`${b} duration: ${a.queryDurationMillis.toFixed(1)}ms`)}else"error"===a.level&&(a.error instanceof Error?console.error(`kysely:error: ${a.error.stack??a.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:a.error,query:a.query.sql,queryDurationMillis:a.queryDurationMillis})}`))}var bC=c(45335),bD=c(62922),bE=c(67260),bF=c(91561);Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");class bG extends bp.n{#c;constructor(a){let b,c;if(function(a){return(0,i.Gv)(a)&&(0,i.Gv)(a.config)&&(0,i.Gv)(a.driver)&&(0,i.Gv)(a.executor)&&(0,i.Gv)(a.dialect)}(a))b={executor:a.executor},c={...a};else{let d=a.dialect,e=d.createDriver(),f=d.createQueryCompiler(),g=d.createAdapter(),h=new bt(e,new bA(a.log??[])),i=new br(f,g,new bo(h),a.plugins??[]);b={executor:i},c={config:a,executor:i,dialect:d,driver:h}}super(b),this.#c=(0,i.CN)(c)}get schema(){return new bk(this.#c.executor)}get dynamic(){return new bn}get introspection(){return this.#c.dialect.createIntrospector(this.withoutPlugins())}case(a){return new bC.OU({node:bD.P.create((0,i.b0)(a)?void 0:(0,a1.YK)(a))})}get fn(){return(0,bz.t)()}transaction(){return new bJ({...this.#c})}startTransaction(){return new bK({...this.#c})}connection(){return new bI({...this.#c})}withPlugin(a){return new bG({...this.#c,executor:this.#c.executor.withPlugin(a)})}withoutPlugins(){return new bG({...this.#c,executor:this.#c.executor.withoutPlugins()})}withSchema(a){return new bG({...this.#c,executor:this.#c.executor.withPluginAtFront(new a6.B(a))})}withTables(){return new bG({...this.#c})}async destroy(){await this.#c.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#c.executor}executeQuery(a,b){void 0!==b&&(0,bF.u)("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let c=(0,i.Gv)(a)&&(0,i.Tn)(a.compile)?a.compile():a;return this.getExecutor().executeQuery(c)}async [Symbol.asyncDispose](){await this.destroy()}}class bH extends bG{#c;constructor(a){super(a),this.#c=a}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(a){return new bH({...this.#c,executor:this.#c.executor.withPlugin(a)})}withoutPlugins(){return new bH({...this.#c,executor:this.#c.executor.withoutPlugins()})}withSchema(a){return new bH({...this.#c,executor:this.#c.executor.withPluginAtFront(new a6.B(a))})}withTables(){return new bH({...this.#c})}}class bI{#c;constructor(a){this.#c=(0,i.CN)(a)}async execute(a){return this.#c.executor.provideConnection(async b=>{let c=this.#c.executor.withConnectionProvider(new bv(b)),d=new bG({...this.#c,executor:c});return await a(d)})}}class bJ{#c;constructor(a){this.#c=(0,i.CN)(a)}setAccessMode(a){return new bJ({...this.#c,accessMode:a})}setIsolationLevel(a){return new bJ({...this.#c,isolationLevel:a})}async execute(a){let{isolationLevel:b,accessMode:c,...d}=this.#c,e={isolationLevel:b,accessMode:c};return by(e),this.#c.executor.provideConnection(async b=>{let c=this.#c.executor.withConnectionProvider(new bv(b)),f=new bH({...d,executor:c}),g=!1;try{await this.#c.driver.beginTransaction(b,e),g=!0;let c=await a(f);return await this.#c.driver.commitTransaction(b),c}catch(a){throw g&&await this.#c.driver.rollbackTransaction(b),a}})}}class bK{#c;constructor(a){this.#c=(0,i.CN)(a)}setAccessMode(a){return new bK({...this.#c,accessMode:a})}setIsolationLevel(a){return new bK({...this.#c,isolationLevel:a})}async execute(){let{isolationLevel:a,accessMode:b,...c}=this.#c,d={isolationLevel:a,accessMode:b};by(d);let e=await (0,bE.G)(this.#c.executor);return await this.#c.driver.beginTransaction(e.connection,d),new bL({...c,connection:e,executor:this.#c.executor.withConnectionProvider(new bv(e.connection))})}}class bL extends bH{#c;#aD;#aE;constructor(a){let b={isCommitted:!1,isRolledBack:!1},{connection:c,...d}=a={...a,executor:new bO(a.executor,b)};super(d),this.#c=(0,i.CN)(a),this.#aE=b;let e=(0,j.a)();this.#aD=b=>a.executor.compileQuery(b,e)}get isCommitted(){return this.#aE.isCommitted}get isRolledBack(){return this.#aE.isRolledBack}commit(){return bN(this.#aE),new bM(async()=>{await this.#c.driver.commitTransaction(this.#c.connection.connection),this.#aE.isCommitted=!0,this.#c.connection.release()})}rollback(){return bN(this.#aE),new bM(async()=>{await this.#c.driver.rollbackTransaction(this.#c.connection.connection),this.#aE.isRolledBack=!0,this.#c.connection.release()})}savepoint(a){return bN(this.#aE),new bM(async()=>(await this.#c.driver.savepoint?.(this.#c.connection.connection,a,this.#aD),new bL({...this.#c})))}rollbackToSavepoint(a){return bN(this.#aE),new bM(async()=>(await this.#c.driver.rollbackToSavepoint?.(this.#c.connection.connection,a,this.#aD),new bL({...this.#c})))}releaseSavepoint(a){return bN(this.#aE),new bM(async()=>(await this.#c.driver.releaseSavepoint?.(this.#c.connection.connection,a,this.#aD),new bL({...this.#c})))}withPlugin(a){return new bL({...this.#c,executor:this.#c.executor.withPlugin(a)})}withoutPlugins(){return new bL({...this.#c,executor:this.#c.executor.withoutPlugins()})}withSchema(a){return new bL({...this.#c,executor:this.#c.executor.withPluginAtFront(new a6.B(a))})}withTables(){return new bL({...this.#c})}}class bM{#aF;constructor(a){this.#aF=a}async execute(){return await this.#aF()}}function bN(a){if(a.isCommitted)throw Error("Transaction is already committed");if(a.isRolledBack)throw Error("Transaction is already rolled back")}class bO{#al;#aE;constructor(a,b){a instanceof bO?this.#al=a.#al:this.#al=a,this.#aE=b}get adapter(){return this.#al.adapter}get plugins(){return this.#al.plugins}transformQuery(a,b){return this.#al.transformQuery(a,b)}compileQuery(a,b){return this.#al.compileQuery(a,b)}provideConnection(a){return this.#al.provideConnection(a)}executeQuery(a){return bN(this.#aE),this.#al.executeQuery(a)}stream(a,b){return bN(this.#aE),this.#al.stream(a,b)}withConnectionProvider(a){return new bO(this.#al.withConnectionProvider(a),this.#aE)}withPlugin(a){return new bO(this.#al.withPlugin(a),this.#aE)}withPlugins(a){return new bO(this.#al.withPlugins(a),this.#aE)}withPluginAtFront(a){return new bO(this.#al.withPluginAtFront(a),this.#aE)}withoutPlugins(){return new bO(this.#al.withoutPlugins(),this.#aE)}}function bP(a){if(!a)return null;if("dialect"in a)return bP(a.dialect);if("createDriver"in a){if(a instanceof v)return"sqlite";if(a instanceof F)return"mysql";if(a instanceof O)return"postgres";if(a instanceof _)return"mssql"}return"aggregate"in a?"sqlite":"getConnection"in a?"mysql":"connect"in a?"postgres":"fileControl"in a||"open"in a&&"close"in a&&"prepare"in a?"sqlite":null}let bQ=async a=>{let b,d=a.database;if(!d)return{kysely:null,databaseType:null,transaction:void 0};if("db"in d)return{kysely:d.db,databaseType:d.type,transaction:d.transaction};if("dialect"in d)return{kysely:new bG({dialect:d.dialect}),databaseType:d.type,transaction:d.transaction};let e=bP(d);if("createDriver"in d&&(b=d),"aggregate"in d&&!("createSession"in d)&&(b=new v({database:d})),"getConnection"in d&&(b=new F(d)),"connect"in d&&(b=new O({pool:d})),"fileControl"in d){let{BunSqliteDialect:a}=await c.e(682).then(c.bind(c,11682));b=new a({database:d})}if("createSession"in d&&"undefined"==typeof window){let a;try{({DatabaseSync:a}=await import("node:sqlite"))}catch(a){if(null!==a&&"object"==typeof a&&"code"in a&&"ERR_UNKNOWN_BUILTIN_MODULE"!==a.code)throw a}if(a&&d instanceof a){let{NodeSqliteDialect:a}=await c.e(301).then(c.bind(c,40301));b=new a({database:d})}}return{kysely:b?new bG({dialect:b}):null,databaseType:e,transaction:void 0}}},37052:(a,b,c)=>{c.d(b,{a:()=>aa,i:()=>_,n:()=>ac,r:()=>ab,t:()=>ad});var d=c(75564),e=c(71844);function f(a){if("boolean"!=typeof a)throw Error(`boolean expected, not ${a}`)}function g(a){if(!Number.isSafeInteger(a)||a<0)throw Error("positive integer expected, got "+a)}function h(a,b,c=""){let d=a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name,e=a?.length,f=void 0!==b;if(!d||f&&e!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(f?` of length ${b}`:"")+", got "+(d?`length=${e}`:`type=${typeof a}`));return a}function i(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function j(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}function k(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}let l=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],m="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,n=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0")),o={_0:48,_9:57,A:65,F:70,a:97,f:102};function p(a){return a>=o._0&&a<=o._9?a-o._0:a>=o.A&&a<=o.F?a-(o.A-10):a>=o.a&&a<=o.f?a-(o.a-10):void 0}function q(a,b,c=!0){if(void 0===b)return new Uint8Array(a);if(b.length!==a)throw Error('"output" expected Uint8Array of length '+a+", got: "+b.length);if(c&&b.byteOffset%4!=0)throw Error("invalid output, must be aligned");return b}function r(a){return Uint8Array.from(a)}function s(a=32){let b="object"==typeof globalThis?globalThis.crypto:null;if("function"!=typeof b?.getRandomValues)throw Error("crypto.getRandomValues must be defined");return b.getRandomValues(new Uint8Array(a))}function t(a,b=s){let{nonceLength:c}=a;g(c);let d=(a,b)=>{let c=function(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];h(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}(a,b);return b.fill(0),c};return(e,...f)=>({encrypt(g){h(g);let i=b(c),j=a(e,i,...f).encrypt(g);return j instanceof Promise?j.then(a=>d(i,a)):d(i,j)},decrypt(b){h(b);let d=b.subarray(0,c),g=b.subarray(c);return a(e,d,...f).decrypt(g)}})}let u=a=>Uint8Array.from(a.split(""),a=>a.charCodeAt(0)),v=u("expand 16-byte k"),w=u("expand 32-byte k"),x=j(v),y=j(w);function z(a,b){return a<<b|a>>>32-b}function A(a){return a.byteOffset%4==0}let B=0x100000000-1,C=Uint32Array.of();function D(a,b){let{allowShortKeys:c,extendNonceFn:d,counterLength:e,counterRight:i,rounds:l}=function(a,b){if(null==b||"object"!=typeof b)throw Error("options must be defined");return Object.assign(a,b)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},b);if("function"!=typeof a)throw Error("core must be a function");return g(e),g(l),f(i),f(c),(b,f,m,n,o=0)=>{let p,q;h(b,void 0,"key"),h(f,void 0,"nonce"),h(m,void 0,"data");let s=m.length;if(void 0===n&&(n=new Uint8Array(s)),h(n,void 0,"output"),g(o),o<0||o>=B)throw Error("arx: counter overflow");if(n.length<s)throw Error(`arx: output (${n.length}) is shorter than data (${s})`);let t=[],u=b.length;if(32===u)t.push(p=r(b)),q=y;else if(16===u&&c)(p=new Uint8Array(32)).set(b),p.set(b,16),q=x,t.push(p);else throw h(b,32,"arx key"),Error("invalid key size");A(f)||t.push(f=r(f));let v=j(p);if(d){if(24!==f.length)throw Error("arx: extended nonce must be 24 bytes");d(q,v,j(f.subarray(0,16)),v),f=f.subarray(16)}let w=16-e;if(w!==f.length)throw Error(`arx: nonce must be ${w} or 16 bytes`);if(12!==w){let a=new Uint8Array(12);a.set(f,i?0:12-f.length),f=a,t.push(f)}return!function(a,b,c,d,e,f,g,h){let i=e.length,k=new Uint8Array(64),l=j(k),m=A(e)&&A(f),n=m?j(e):C,o=m?j(f):C;for(let j=0;j<i;g++){if(a(b,c,d,l,g,h),g>=B)throw Error("arx: counter overflow");let p=Math.min(64,i-j);if(m&&64===p){let a=j/4;if(j%4!=0)throw Error("arx: invalid block position");for(let b=0,c;b<16;b++)o[c=a+b]=n[c]^l[b];j+=64;continue}for(let a=0,b;a<p;a++)f[b=j+a]=e[b]^k[a];j+=p}}(a,q,v,j(f),m,n,o,l),k(...t),n}}function E(a,b){return 255&a[b++]|(255&a[b++])<<8}class F{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(a){let b=E(a=r(h(a,32,"key")),0),c=E(a,2),d=E(a,4),e=E(a,6),f=E(a,8),g=E(a,10),i=E(a,12),j=E(a,14);this.r[0]=8191&b,this.r[1]=(b>>>13|c<<3)&8191,this.r[2]=(c>>>10|d<<6)&7939,this.r[3]=(d>>>7|e<<9)&8191,this.r[4]=(e>>>4|f<<12)&255,this.r[5]=f>>>1&8190,this.r[6]=(f>>>14|g<<2)&8191,this.r[7]=(g>>>11|i<<5)&8065,this.r[8]=(i>>>8|j<<8)&8191,this.r[9]=j>>>5&127;for(let b=0;b<8;b++)this.pad[b]=E(a,16+2*b)}process(a,b,c=!1){let{h:d,r:e}=this,f=e[0],g=e[1],h=e[2],i=e[3],j=e[4],k=e[5],l=e[6],m=e[7],n=e[8],o=e[9],p=E(a,b+0),q=E(a,b+2),r=E(a,b+4),s=E(a,b+6),t=E(a,b+8),u=E(a,b+10),v=E(a,b+12),w=E(a,b+14),x=d[0]+(8191&p),y=d[1]+((p>>>13|q<<3)&8191),z=d[2]+((q>>>10|r<<6)&8191),A=d[3]+((r>>>7|s<<9)&8191),B=d[4]+((s>>>4|t<<12)&8191),C=d[5]+(t>>>1&8191),D=d[6]+((t>>>14|u<<2)&8191),F=d[7]+((u>>>11|v<<5)&8191),G=d[8]+((v>>>8|w<<8)&8191),H=d[9]+(w>>>5|2048*!c),I=0,J=0+x*f+5*o*y+5*n*z+5*m*A+5*l*B;I=J>>>13,J&=8191,J+=5*k*C+5*j*D+5*i*F+5*h*G+5*g*H,I+=J>>>13,J&=8191;let K=I+x*g+y*f+5*o*z+5*n*A+5*m*B;I=K>>>13,K&=8191,K+=5*l*C+5*k*D+5*j*F+5*i*G+5*h*H,I+=K>>>13,K&=8191;let L=I+x*h+y*g+z*f+5*o*A+5*n*B;I=L>>>13,L&=8191,L+=5*m*C+5*l*D+5*k*F+5*j*G+5*i*H,I+=L>>>13,L&=8191;let M=I+x*i+y*h+z*g+A*f+5*o*B;I=M>>>13,M&=8191,M+=5*n*C+5*m*D+5*l*F+5*k*G+5*j*H,I+=M>>>13,M&=8191;let N=I+x*j+y*i+z*h+A*g+B*f;I=N>>>13,N&=8191,N+=5*o*C+5*n*D+5*m*F+5*l*G+5*k*H,I+=N>>>13,N&=8191;let O=I+x*k+y*j+z*i+A*h+B*g;I=O>>>13,O&=8191,O+=C*f+5*o*D+5*n*F+5*m*G+5*l*H,I+=O>>>13,O&=8191;let P=I+x*l+y*k+z*j+A*i+B*h;I=P>>>13,P&=8191,P+=C*g+D*f+5*o*F+5*n*G+5*m*H,I+=P>>>13,P&=8191;let Q=I+x*m+y*l+z*k+A*j+B*i;I=Q>>>13,Q&=8191,Q+=C*h+D*g+F*f+5*o*G+5*n*H,I+=Q>>>13,Q&=8191;let R=I+x*n+y*m+z*l+A*k+B*j;I=R>>>13,R&=8191,R+=C*i+D*h+F*g+G*f+5*o*H,I+=R>>>13,R&=8191;let S=I+x*o+y*n+z*m+A*l+B*k;I=S>>>13,S&=8191,S+=C*j+D*i+F*h+G*g+H*f,I+=S>>>13,S&=8191,J=8191&(I=(I=(I<<2)+I|0)+J|0),I>>>=13,K+=I,d[0]=J,d[1]=K,d[2]=L,d[3]=M,d[4]=N,d[5]=O,d[6]=P,d[7]=Q,d[8]=R,d[9]=S}finalize(){let{h:a,pad:b}=this,c=new Uint16Array(10),d=a[1]>>>13;a[1]&=8191;for(let b=2;b<10;b++)a[b]+=d,d=a[b]>>>13,a[b]&=8191;a[0]+=5*d,d=a[0]>>>13,a[0]&=8191,a[1]+=d,d=a[1]>>>13,a[1]&=8191,a[2]+=d,c[0]=a[0]+5,d=c[0]>>>13,c[0]&=8191;for(let b=1;b<10;b++)c[b]=a[b]+d,d=c[b]>>>13,c[b]&=8191;c[9]-=8192;let e=(1^d)-1;for(let a=0;a<10;a++)c[a]&=e;e=~e;for(let b=0;b<10;b++)a[b]=a[b]&e|c[b];a[0]=(a[0]|a[1]<<13)&65535,a[1]=(a[1]>>>3|a[2]<<10)&65535,a[2]=(a[2]>>>6|a[3]<<7)&65535,a[3]=(a[3]>>>9|a[4]<<4)&65535,a[4]=(a[4]>>>12|a[5]<<1|a[6]<<14)&65535,a[5]=(a[6]>>>2|a[7]<<11)&65535,a[6]=(a[7]>>>5|a[8]<<8)&65535,a[7]=(a[8]>>>8|a[9]<<5)&65535;let f=a[0]+b[0];a[0]=65535&f;for(let c=1;c<8;c++)f=(a[c]+b[c]|0)+(f>>>16)|0,a[c]=65535&f;k(c)}update(a){i(this),h(a);let{buffer:b,blockLen:c}=this,d=(a=r(a)).length;for(let e=0;e<d;){let f=Math.min(c-this.pos,d-e);if(f===c){for(;c<=d-e;e+=c)this.process(a,e);continue}b.set(a.subarray(e,e+f),this.pos),this.pos+=f,e+=f,this.pos===c&&(this.process(b,0,!1),this.pos=0)}return this}destroy(){k(this.h,this.r,this.buffer,this.pad)}digestInto(a){i(this);h(a,void 0,"output");let b=this.outputLen;if(a.length<b)throw Error("digestInto() expects output buffer of length at least "+b);this.finished=!0;let{buffer:c,h:d}=this,{pos:e}=this;if(e){for(c[e++]=1;e<16;e++)c[e]=0;this.process(c,0,!0)}this.finalize();let f=0;for(let b=0;b<8;b++)a[f++]=d[b]>>>0,a[f++]=d[b]>>>8;return a}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}}let G=function(a){let b=(b,c)=>a(c).update(b).digest(),c=a(new Uint8Array(32));return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=b=>a(b),b}(a=>new F(a));function H(a,b,c,d,e,f=20){let g=a[0],h=a[1],i=a[2],j=a[3],k=b[0],l=b[1],m=b[2],n=b[3],o=b[4],p=b[5],q=b[6],r=b[7],s=c[0],t=c[1],u=c[2],v=g,w=h,x=i,y=j,A=k,B=l,C=m,D=n,E=o,F=p,G=q,I=r,J=e,K=s,L=t,M=u;for(let a=0;a<f;a+=2)E=E+(J=z(J^(v=v+A|0),16))|0,v=v+(A=z(A^E,12))|0,E=E+(J=z(J^v,8))|0,A=z(A^E,7),F=F+(K=z(K^(w=w+B|0),16))|0,w=w+(B=z(B^F,12))|0,F=F+(K=z(K^w,8))|0,B=z(B^F,7),G=G+(L=z(L^(x=x+C|0),16))|0,x=x+(C=z(C^G,12))|0,G=G+(L=z(L^x,8))|0,C=z(C^G,7),I=I+(M=z(M^(y=y+D|0),16))|0,y=y+(D=z(D^I,12))|0,I=I+(M=z(M^y,8))|0,D=z(D^I,7),G=G+(M=z(M^(v=v+B|0),16))|0,v=v+(B=z(B^G,12))|0,G=G+(M=z(M^v,8))|0,B=z(B^G,7),I=I+(J=z(J^(w=w+C|0),16))|0,w=w+(C=z(C^I,12))|0,I=I+(J=z(J^w,8))|0,C=z(C^I,7),E=E+(K=z(K^(x=x+D|0),16))|0,x=x+(D=z(D^E,12))|0,E=E+(K=z(K^x,8))|0,D=z(D^E,7),F=F+(L=z(L^(y=y+A|0),16))|0,y=y+(A=z(A^F,12))|0,F=F+(L=z(L^y,8))|0,A=z(A^F,7);let N=0;d[N++]=g+v|0,d[N++]=h+w|0,d[N++]=i+x|0,d[N++]=j+y|0,d[N++]=k+A|0,d[N++]=l+B|0,d[N++]=m+C|0,d[N++]=n+D|0,d[N++]=o+E|0,d[N++]=p+F|0,d[N++]=q+G|0,d[N++]=r+I|0,d[N++]=e+J|0,d[N++]=s+K|0,d[N++]=t+L|0,d[N++]=u+M|0}let I=D(H,{counterRight:!1,counterLength:4,allowShortKeys:!1}),J=D(H,{counterRight:!1,counterLength:8,extendNonceFn:function(a,b,c,d){let e=a[0],f=a[1],g=a[2],h=a[3],i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=c[0],r=c[1],s=c[2],t=c[3];for(let a=0;a<20;a+=2)m=m+(q=z(q^(e=e+i|0),16))|0,e=e+(i=z(i^m,12))|0,m=m+(q=z(q^e,8))|0,i=z(i^m,7),n=n+(r=z(r^(f=f+j|0),16))|0,f=f+(j=z(j^n,12))|0,n=n+(r=z(r^f,8))|0,j=z(j^n,7),o=o+(s=z(s^(g=g+k|0),16))|0,g=g+(k=z(k^o,12))|0,o=o+(s=z(s^g,8))|0,k=z(k^o,7),p=p+(t=z(t^(h=h+l|0),16))|0,h=h+(l=z(l^p,12))|0,p=p+(t=z(t^h,8))|0,l=z(l^p,7),o=o+(t=z(t^(e=e+j|0),16))|0,e=e+(j=z(j^o,12))|0,o=o+(t=z(t^e,8))|0,j=z(j^o,7),p=p+(q=z(q^(f=f+k|0),16))|0,f=f+(k=z(k^p,12))|0,p=p+(q=z(q^f,8))|0,k=z(k^p,7),m=m+(r=z(r^(g=g+l|0),16))|0,g=g+(l=z(l^m,12))|0,m=m+(r=z(r^g,8))|0,l=z(l^m,7),n=n+(s=z(s^(h=h+i|0),16))|0,h=h+(i=z(i^n,12))|0,n=n+(s=z(s^h,8))|0,i=z(i^n,7);let u=0;d[u++]=e,d[u++]=f,d[u++]=g,d[u++]=h,d[u++]=q,d[u++]=r,d[u++]=s,d[u++]=t},allowShortKeys:!1}),K=new Uint8Array(16),L=(a,b)=>{a.update(b);let c=b.length%16;c&&a.update(K.subarray(c))},M=new Uint8Array(32);function N(a,b,c,d,e){void 0!==e&&h(e,void 0,"AAD");let g=a(b,c,M),i=function(a,b,c){f(c);let d=new Uint8Array(16),e=new DataView(d.buffer,d.byteOffset,d.byteLength);return e.setBigUint64(0,BigInt(b),c),e.setBigUint64(8,BigInt(a),c),d}(d.length,e?e.length:0,!0),j=G.create(g);e&&L(j,e),L(j,d),j.update(i);let l=j.digest();return k(g,i),l}let O=a=>(b,c,d)=>({encrypt(e,f){let g=e.length;(f=q(g+16,f,!1)).set(e);let h=f.subarray(0,-16);a(b,c,h,h,1);let i=N(a,b,c,h,d);return f.set(i,g),k(i),f},decrypt(e,f){f=q(e.length-16,f,!1);let g=e.subarray(0,-16),h=e.subarray(-16),i=N(a,b,c,g,d);if(!function(a,b){if(a.length!==b.length)return!1;let c=0;for(let d=0;d<a.length;d++)c|=a[d]^b[d];return 0===c}(h,i))throw Error("invalid tag");return f.set(e.subarray(0,-16)),a(b,c,f,f,1),k(i),f}});O(I);let P=((a,b)=>{function c(d,...e){if(h(d,void 0,"key"),!l)throw Error("Non little-endian hardware is not yet supported");void 0!==a.nonceLength&&h(e[0],a.varSizeNonce?void 0:a.nonceLength,"nonce");let f=a.tagLength;f&&void 0!==e[1]&&h(e[1],void 0,"AAD");let g=b(d,...e),i=(a,b)=>{if(void 0!==b){if(2!==a)throw Error("cipher output not supported");h(b,void 0,"output")}},j=!1;return{encrypt(a,b){if(j)throw Error("cannot encrypt() twice with same key + nonce");return j=!0,h(a),i(g.encrypt.length,b),g.encrypt(a,b)},decrypt(a,b){if(h(a),f&&a.length<f)throw Error('"ciphertext" expected length bigger than tagLength='+f);return i(g.decrypt.length,b),g.decrypt(a,b)}}}return Object.assign(c,a),c})({blockSize:64,nonceLength:24,tagLength:16},O(J));var Q=c(28707),R=c(85277),S=c(82153);function T(a,b,c,d){var e;let f,{c:g,dkLen:h,DK:i,PRF:j,PRFSalt:k}=function(a,b,c,d){(0,S.sd)(a);let{c:e,dkLen:f,asyncTick:g}=(0,S.tY)({dkLen:32,asyncTick:10},d);if((0,S.Fe)(e,"c"),(0,S.Fe)(f,"dkLen"),(0,S.Fe)(g,"asyncTick"),e<1)throw Error("iterations (c) must be >= 1");let h=(0,S.K_)(b,"password"),i=(0,S.K_)(c,"salt"),j=new Uint8Array(f),k=R.w.create(a,h),l=k._cloneInto().update(i);return{c:e,dkLen:f,asyncTick:g,DK:j,PRF:k,PRFSalt:l}}(a,b,c,d),l=new Uint8Array(4),m=(0,S.O8)(l),n=new Uint8Array(j.outputLen);for(let a=1,b=0;b<h;a++,b+=j.outputLen){let c=i.subarray(b,b+j.outputLen);m.setInt32(0,a,!1),(f=k._cloneInto(f)).update(l).digestInto(n),c.set(n.subarray(0,c.length));for(let a=1;a<g;a++){j._cloneInto(f).update(n).digestInto(n);for(let a=0;a<c.length;a++)c[a]^=n[a]}}return e=f,j.destroy(),k.destroy(),e&&e.destroy(),(0,S.uH)(n),i}var U=c(71002);function V(a,b,c,d,e,f){let g=a[b++]^c[d++],h=a[b++]^c[d++],i=a[b++]^c[d++],j=a[b++]^c[d++],k=a[b++]^c[d++],l=a[b++]^c[d++],m=a[b++]^c[d++],n=a[b++]^c[d++],o=a[b++]^c[d++],p=a[b++]^c[d++],q=a[b++]^c[d++],r=a[b++]^c[d++],s=a[b++]^c[d++],t=a[b++]^c[d++],u=a[b++]^c[d++],v=a[b++]^c[d++],w=g,x=h,y=i,z=j,A=k,B=l,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v;for(let a=0;a<8;a+=2)A^=(0,S.aZ)(w+I|0,7),E^=(0,S.aZ)(A+w|0,9),I^=(0,S.aZ)(E+A|0,13),w^=(0,S.aZ)(I+E|0,18),F^=(0,S.aZ)(B+x|0,7),J^=(0,S.aZ)(F+B|0,9),x^=(0,S.aZ)(J+F|0,13),B^=(0,S.aZ)(x+J|0,18),K^=(0,S.aZ)(G+C|0,7),y^=(0,S.aZ)(K+G|0,9),C^=(0,S.aZ)(y+K|0,13),G^=(0,S.aZ)(C+y|0,18),z^=(0,S.aZ)(L+H|0,7),D^=(0,S.aZ)(z+L|0,9),H^=(0,S.aZ)(D+z|0,13),L^=(0,S.aZ)(H+D|0,18),x^=(0,S.aZ)(w+z|0,7),y^=(0,S.aZ)(x+w|0,9),z^=(0,S.aZ)(y+x|0,13),w^=(0,S.aZ)(z+y|0,18),C^=(0,S.aZ)(B+A|0,7),D^=(0,S.aZ)(C+B|0,9),A^=(0,S.aZ)(D+C|0,13),B^=(0,S.aZ)(A+D|0,18),H^=(0,S.aZ)(G+F|0,7),E^=(0,S.aZ)(H+G|0,9),F^=(0,S.aZ)(E+H|0,13),G^=(0,S.aZ)(F+E|0,18),I^=(0,S.aZ)(L+K|0,7),J^=(0,S.aZ)(I+L|0,9),K^=(0,S.aZ)(J+I|0,13),L^=(0,S.aZ)(K+J|0,18);e[f++]=g+w|0,e[f++]=h+x|0,e[f++]=i+y|0,e[f++]=j+z|0,e[f++]=k+A|0,e[f++]=l+B|0,e[f++]=m+C|0,e[f++]=n+D|0,e[f++]=o+E|0,e[f++]=p+F|0,e[f++]=q+G|0,e[f++]=r+H|0,e[f++]=s+I|0,e[f++]=t+J|0,e[f++]=u+K|0,e[f++]=v+L|0}function W(a,b,c,d,e){let f=d+0,g=d+16*e;for(let d=0;d<16;d++)c[g+d]=a[b+(2*e-1)*16+d];for(let d=0;d<e;d++,f+=16,b+=16)V(c,g,a,b,c,f),d>0&&(g+=16),V(c,f,a,b+=16,c,g)}async function X(a,b,c){let{N:d,r:e,p:f,dkLen:g,blockSize32:h,V:i,B32:j,B:k,tmp:l,blockMixCb:m,asyncTick:n}=function(a,b,c){let{N:d,r:e,p:f,dkLen:g,asyncTick:h,maxmem:i,onProgress:j}=(0,S.tY)({dkLen:32,asyncTick:10,maxmem:0x40000400},c);if((0,S.Fe)(d,"N"),(0,S.Fe)(e,"r"),(0,S.Fe)(f,"p"),(0,S.Fe)(g,"dkLen"),(0,S.Fe)(h,"asyncTick"),(0,S.Fe)(i,"maxmem"),void 0!==j&&"function"!=typeof j)throw Error("progressCb must be a function");let k=128*e,l=k/4;if(d<=1||(d&d-1)!=0||d>0x100000000)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(f<1||f>0x1fffffffe0/k)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(g<1||g>0x1fffffffe0)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(k*(d+f)>i)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+i);let m=T(U.sc,a,b,{c:1,dkLen:k*f}),n=(0,S.DH)(m),o=(0,S.DH)(new Uint8Array(k*d)),p=(0,S.DH)(new Uint8Array(k)),q=()=>{};if(j){let a=2*d*f,b=Math.max(Math.floor(a/1e4),1),c=0;q=()=>{c++,j&&(!(c%b)||c===a)&&j(c/a)}}return{N:d,r:e,p:f,dkLen:g,blockSize32:l,V:o,B32:n,B:m,tmp:p,blockMixCb:q,asyncTick:h}}(a,b,c);(0,S.fd)(j);for(let a=0;a<f;a++){let b=h*a;for(let a=0;a<h;a++)i[a]=j[b+a];let c=0;await (0,S.$h)(d-1,n,()=>{W(i,c,i,c+=h,e),m()}),W(i,(d-1)*h,j,b,e),m(),await (0,S.$h)(d,n,()=>{let a=(j[b+h-16]&d-1)>>>0;for(let c=0;c<h;c++)l[c]=j[b+c]^i[a*h+c];W(l,0,j,b,e),m()})}(0,S.fd)(j);let o=T(U.sc,a,k,{c:1,dkLen:g});return(0,S.uH)(k,i,l),o}var Y=c(81713);let Z={N:16384,r:16,p:1,dkLen:64};async function $(a,b){return await X(a.normalize("NFKC"),b,{N:Z.N,p:Z.p,r:Z.r,dkLen:Z.dkLen,maxmem:128*Z.N*Z.r*2})}let _=async a=>{let b=Q.u.encode(crypto.getRandomValues(new Uint8Array(16))),c=await $(a,b);return`${b}:${Q.u.encode(c)}`},aa=async({hash:a,password:b})=>{let[c,e]=a.split(":");if(!c||!e)throw new d.$("Invalid password hash");return function(a,b){"string"==typeof a&&(a=new TextEncoder().encode(a)),"string"==typeof b&&(b=new TextEncoder().encode(b));let c=new Uint8Array(a),d=new Uint8Array(b),e=c.length^d.length,f=Math.max(c.length,d.length);for(let a=0;a<f;a++)e|=(a<c.length?c[a]:0)^(a<d.length?d[a]:0);return 0===e}(await $(b,c),(0,S.aT)(e))},ab=(0,Y.q)("a-z","0-9","A-Z","-_"),ac=async({key:a,data:b})=>{let c=await (0,e.n)("SHA-256").digest(a),d=function(a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}(b);return function(a){if(h(a),m)return a.toHex();let b="";for(let c=0;c<a.length;c++)b+=n[a[c]];return b}(t(P)(new Uint8Array(c)).encrypt(d))},ad=async({key:a,data:b})=>{let c=await (0,e.n)("SHA-256").digest(a),d=function(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(m)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=p(a.charCodeAt(e)),f=p(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}(b),f=t(P)(new Uint8Array(c));return new TextDecoder().decode(f.decrypt(d))}},37175:(a,b,c)=>{c.d(b,{Iw:()=>v,Or:()=>x,Xs:()=>q,DJ:()=>p,Ss:()=>A,Ct:()=>y,eG:()=>s,qt:()=>o,ll:()=>w});var d=c(94329),e=c(90091);let f=Symbol.for("drizzle:isPgEnum");class g extends e.pe{static [d.i]="PgEnumColumnBuilder";constructor(a,b){super(a,"string","PgEnumColumn"),this.config.enum=b}build(a){return new h(a,this.config)}}class h extends e.Kl{static [d.i]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}var i=c(83940),j=c(77883),k=c(21029),l=c(79928),m=c(75872);class n{static [d.i]=null}function o(a){return null!=a&&"function"==typeof a.getSQL}class p{static [d.i]="StringChunk";value;constructor(a){this.value=Array.isArray(a)?a:[a]}getSQL(){return new q([this])}}class q{constructor(a){this.queryChunks=a}static [d.i]="SQL";decoder=t;shouldInlineParams=!1;append(a){return this.queryChunks.push(...a.queryChunks),this}toQuery(a){return j.k.startActiveSpan("drizzle.buildSQL",b=>{let c=this.buildQueryFromSourceParams(this.queryChunks,a);return b?.setAttributes({"drizzle.query.text":c.sql,"drizzle.query.params":JSON.stringify(c.params)}),c})}buildQueryFromSourceParams(a,b){let c=Object.assign({},b,{inlineParams:b.inlineParams||this.shouldInlineParams,paramStartIndex:b.paramStartIndex||{value:0}}),{casing:e,escapeName:g,escapeParam:h,prepareTyping:j,inlineParams:n,paramStartIndex:s}=c;var t=a.map(a=>{if((0,d.is)(a,p))return{sql:a.value.join(""),params:[]};if((0,d.is)(a,r))return{sql:g(a.value),params:[]};if(void 0===a)return{sql:"",params:[]};if(Array.isArray(a)){let b=[new p("(")];for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push(new p(", "));return b.push(new p(")")),this.buildQueryFromSourceParams(b,c)}if((0,d.is)(a,q))return this.buildQueryFromSourceParams(a.queryChunks,{...c,inlineParams:n||a.shouldInlineParams});if((0,d.is)(a,m.XI)){let b=a[m.XI.Symbol.Schema],c=a[m.XI.Symbol.Name];return{sql:void 0===b||a[m.HE]?g(c):g(b)+"."+g(c),params:[]}}if((0,d.is)(a,l.V)){let c=e.getColumnCasing(a);if("indexes"===b.invokeSource)return{sql:g(c),params:[]};let d=a.table[m.XI.Symbol.Schema];return{sql:a.table[m.HE]||void 0===d?g(a.table[m.XI.Symbol.Name])+"."+g(c):g(d)+"."+g(a.table[m.XI.Symbol.Name])+"."+g(c),params:[]}}if((0,d.is)(a,A)){let b=a[k.n].schema,c=a[k.n].name;return{sql:void 0===b||a[k.n].isAlias?g(c):g(b)+"."+g(c),params:[]}}if((0,d.is)(a,v)){if((0,d.is)(a.value,x))return{sql:h(s.value++,a),params:[a],typings:["none"]};let b=null===a.value?null:a.encoder.mapToDriverValue(a.value);if((0,d.is)(b,q))return this.buildQueryFromSourceParams([b],c);if(n)return{sql:this.mapInlineParam(b,c),params:[]};let e=["none"];return j&&(e=[j(a.encoder)]),{sql:h(s.value++,b),params:[b],typings:e}}return(0,d.is)(a,x)?{sql:h(s.value++,a),params:[a],typings:["none"]}:(0,d.is)(a,q.Aliased)&&void 0!==a.fieldAlias?{sql:g(a.fieldAlias),params:[]}:(0,d.is)(a,i.n)?a._.isWith?{sql:g(a._.alias),params:[]}:this.buildQueryFromSourceParams([new p("("),a._.sql,new p(") "),new r(a._.alias)],c):a&&"function"==typeof a&&f in a&&!0===a[f]?a.schema?{sql:g(a.schema)+"."+g(a.enumName),params:[]}:{sql:g(a.enumName),params:[]}:o(a)?a.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([a.getSQL()],c):this.buildQueryFromSourceParams([new p("("),a.getSQL(),new p(")")],c):n?{sql:this.mapInlineParam(a,c),params:[]}:{sql:h(s.value++,a),params:[a],typings:["none"]}});let u={sql:"",params:[]};for(let a of t)u.sql+=a.sql,u.params.push(...a.params),a.typings?.length&&(u.typings||(u.typings=[]),u.typings.push(...a.typings));return u}mapInlineParam(a,{escapeString:b}){if(null===a)return"null";if("number"==typeof a||"boolean"==typeof a)return a.toString();if("string"==typeof a)return b(a);if("object"==typeof a){let c=a.toString();return"[object Object]"===c?b(JSON.stringify(a)):b(c)}throw Error("Unexpected param value: "+a)}getSQL(){return this}as(a){return void 0===a?this:new q.Aliased(this,a)}mapWith(a){return this.decoder="function"==typeof a?{mapFromDriverValue:a}:a,this}inlineParams(){return this.shouldInlineParams=!0,this}if(a){return a?this:void 0}}class r{constructor(a){this.value=a}static [d.i]="Name";brand;getSQL(){return new q([this])}}function s(a){return"object"==typeof a&&null!==a&&"mapToDriverValue"in a&&"function"==typeof a.mapToDriverValue}let t={mapFromDriverValue:a=>a},u={mapToDriverValue:a=>a};({...t,...u});class v{constructor(a,b=u){this.value=a,this.encoder=b}static [d.i]="Param";brand;getSQL(){return new q([this])}}function w(a,...b){let c=[];for(let[d,e]of((b.length>0||a.length>0&&""!==a[0])&&c.push(new p(a[0])),b.entries()))c.push(e,new p(a[d+1]));return new q(c)}(a=>{a.empty=function(){return new q([])},a.fromList=function(a){return new q(a)},a.raw=function(a){return new q([new p(a)])},a.join=function(a,b){let c=[];for(let[d,e]of a.entries())d>0&&void 0!==b&&c.push(b),c.push(e);return new q(c)},a.identifier=function(a){return new r(a)},a.placeholder=function(a){return new x(a)},a.param=function(a,b){return new v(a,b)}})(w||(w={})),(a=>{class b{constructor(a,b){this.sql=a,this.fieldAlias=b}static [d.i]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new b(this.sql,this.fieldAlias)}}a.Aliased=b})(q||(q={}));class x{constructor(a){this.name=a}static [d.i]="Placeholder";getSQL(){return new q([this])}}function y(a,b){return a.map(a=>{if((0,d.is)(a,x)){if(!(a.name in b))throw Error(`No value for placeholder "${a.name}" was provided`);return b[a.name]}if((0,d.is)(a,v)&&(0,d.is)(a.value,x)){if(!(a.value.name in b))throw Error(`No value for placeholder "${a.value.name}" was provided`);return a.encoder.mapToDriverValue(b[a.value.name])}return a})}let z=Symbol.for("drizzle:IsDrizzleView");class A{static [d.i]="View";[k.n];[z]=!0;constructor({name:a,schema:b,selectedFields:c,query:d}){this[k.n]={name:a,originalName:a,schema:b,selectedFields:c,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new q([this])}}l.V.prototype.getSQL=function(){return new q([this])},m.XI.prototype.getSQL=function(){return new q([this])},i.n.prototype.getSQL=function(){return new q([this])}},37193:(a,b,c)=>{c.d(b,{y:()=>i});var d=c(57246),e=c(9400),f=c(20771);let g=a=>a?.[Symbol.toStringTag],h=(a,b,c)=>{if(void 0!==b.use){let a;switch(c){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc"}if(b.use!==a)throw TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, its "alg" must be "${a}" when present`);if(Array.isArray(b.key_ops)){let d;switch(!0){case"sign"===c||"verify"===c:case"dir"===a:case a.includes("CBC-HS"):d=c;break;case a.startsWith("PBES2"):d="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(a):d=!a.includes("GCM")&&a.endsWith("KW")?"encrypt"===c?"wrapKey":"unwrapKey":c;break;case"encrypt"===c&&a.startsWith("RSA"):d="wrapKey";break;case"decrypt"===c:d=a.startsWith("RSA")?"unwrapKey":"deriveBits"}if(d&&b.key_ops?.includes?.(d)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${d}" when present`)}return!0};function i(a,b,c){switch(a.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((a,b,c)=>{if(!(b instanceof Uint8Array)){if(f.ll(b)){if(f.t9(b)&&h(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!(0,e.P2)(b))throw TypeError((0,d.t)(a,b,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==b.type)throw TypeError(`${g(b)} instances for symmetric algorithms must be of type "secret"`)}})(a,b,c);break;default:((a,b,c)=>{if(f.ll(b))switch(c){case"decrypt":case"sign":if(f.W2(b)&&h(a,b,c))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(f.M3(b)&&h(a,b,c))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!(0,e.P2)(b))throw TypeError((0,d.t)(a,b,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===b.type)throw TypeError(`${g(b)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===b.type)switch(c){case"sign":throw TypeError(`${g(b)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${g(b)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===b.type)switch(c){case"verify":throw TypeError(`${g(b)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${g(b)} instances for asymmetric algorithm encryption must be of type "public"`)}})(a,b,c)}}},37832:(a,b,c)=>{c.d(b,{x:()=>e});var d=c(63624);async function e(a){if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:b,keyUsages:c}=function(a){let b,c;switch(a.kty){case"AKP":switch(a.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":b={name:a.alg},c=a.priv?["sign"]:["verify"];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"Ed25519":case"EdDSA":b={name:"Ed25519"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new d.T0('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),e={...a};return"AKP"!==e.kty&&delete e.alg,delete e.use,crypto.subtle.importKey("jwk",e,b,a.ext??(!a.d&&!a.priv),a.key_ops??c)}},38721:(a,b,c)=>{c.d(b,{t:()=>l});var d=c(42937),e=c(71650),f=c(35298),g=c(5263),h=c(75564);let i=({usePlural:a,schema:b,disableIdGeneration:c,options:f,customIdGenerator:h,supportsUUIDs:i})=>{let j=(0,d.i)({usePlural:a,schema:b});return({customModelName:a,forceAllowId:b})=>{let d=f.advanced?.database?.useNumberId||f.advanced?.database?.generateId==="serial",k=f.advanced?.database?.generateId==="uuid",l=!c&&(!d||!!b)&&(!k||!i),m=j(a??"id");return{type:d?"number":"string",required:!!l,...l?{defaultValue(){if(c)return;let a=f.advanced?.database?.generateId;if(!1!==a&&!d)return"function"==typeof a?a({model:m}):h?h({model:m}):"uuid"===a?crypto.randomUUID():(0,e.t)()}}:{},transform:{input:a=>{if(a){if(d){let b=Number(a);if(isNaN(b))return;return b}if(k){if(l&&!b)return a;if(c||i)return;if(b&&"string"==typeof a)if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a))return a;else{let a=Error().stack?.split("\n").filter((a,b)=>1!==b).join("\n").replace("Error:","");g.vF.warn("[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.",a)}return"string"==typeof a||i?void 0:crypto.randomUUID()}return a}},output:a=>{if(a)return String(a)}}}}},j=[],k=-1,l=({adapter:a,config:b})=>c=>{let e=Math.random().toString(36).substring(2,15),l={...b,supportsBooleans:b.supportsBooleans??!0,supportsDates:b.supportsDates??!0,supportsJSON:b.supportsJSON??!1,adapterName:b.adapterName??b.adapterId,supportsNumericIds:b.supportsNumericIds??!0,supportsUUIDs:b.supportsUUIDs??!1,transaction:b.transaction??!1,disableTransformInput:b.disableTransformInput??!1,disableTransformOutput:b.disableTransformOutput??!1,disableTransformJoin:b.disableTransformJoin??!1};if((c.advanced?.database?.useNumberId===!0||c.advanced?.database?.generateId==="serial")&&!1===l.supportsNumericIds)throw new h.$(`[${l.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let q=(0,d.a)(c),r=(...a)=>{if(!0===l.debugLogs||"object"==typeof l.debugLogs){if("object"==typeof l.debugLogs&&"isRunningAdapterTests"in l.debugLogs){l.debugLogs.isRunningAdapterTests&&(a.shift(),j.push({instance:e,args:a}));return}if("object"!=typeof l.debugLogs||!l.debugLogs.logCondition||l.debugLogs.logCondition?.())if("object"==typeof a[0]&&"method"in a[0]){let b=a.shift().method;if("object"==typeof l.debugLogs){if("create"===b&&!l.debugLogs.create)return;else if("update"===b&&!l.debugLogs.update)return;else if("updateMany"===b&&!l.debugLogs.updateMany)return;else if("findOne"===b&&!l.debugLogs.findOne)return;else if("findMany"===b&&!l.debugLogs.findMany)return;else if("delete"===b&&!l.debugLogs.delete)return;else if("deleteMany"===b&&!l.debugLogs.deleteMany)return;else if("count"===b&&!l.debugLogs.count)return}g.vF.info(`[${l.adapterName}]`,...a)}else g.vF.info(`[${l.adapterName}]`,...a)}},s=(0,d.i)({usePlural:l.usePlural,schema:q}),t=(0,d.r)({usePlural:l.usePlural,schema:q}),u=(0,d.t)({usePlural:l.usePlural,schema:q}),v=(0,d.n)({schema:q,usePlural:l.usePlural}),w=i({schema:q,options:c,usePlural:l.usePlural,disableIdGeneration:l.disableIdGeneration,customIdGenerator:l.customIdGenerator,supportsUUIDs:l.supportsUUIDs}),x=(({usePlural:a,schema:b,options:c,customIdGenerator:e,disableIdGeneration:f})=>{let g=(0,d.i)({usePlural:a,schema:b}),j=(0,d.r)({usePlural:a,schema:b}),k=i({usePlural:a,schema:b,options:c,customIdGenerator:e,disableIdGeneration:f});return({model:a,field:c})=>{let d=g(a),e=j({field:c,model:d}),f=b[d].fields;f.id=k({customModelName:d});let i=f[e];if(!i)throw new h.$(`Field ${c} not found in model ${a}`);return i}})({schema:q,options:c,usePlural:l.usePlural,disableIdGeneration:l.disableIdGeneration,customIdGenerator:l.customIdGenerator}),y=async(a,b,d,e)=>{let f={},h=q[b].fields,i=l.mapKeysTransformInput??{},j=c.advanced?.database?.useNumberId||c.advanced?.database?.generateId==="serial";for(let k in h.id=w({customModelName:b,forceAllowId:e&&"id"in a}),h){let e=a[k],m=h[k],n=i[k]||h[k].fieldName||k;if(void 0===e&&(void 0===m.defaultValue&&!m.transform?.input&&!("update"===d&&m.onUpdate)||"update"===d&&!m.onUpdate))continue;if(m&&"date"===m.type&&!(e instanceof Date)&&"string"==typeof e)try{e=new Date(e)}catch{g.vF.error("[Adapter Factory] Failed to convert string to date",{value:e,field:k})}let o=function(a,b,c){if("update"===c)return void 0===a&&void 0!==b.onUpdate?"function"==typeof b.onUpdate?b.onUpdate():b.onUpdate:a;return"create"===c&&(void 0===a||!0===b.required&&null===a)&&void 0!==b.defaultValue?"function"==typeof b.defaultValue?b.defaultValue():b.defaultValue:a}(e,m,d);m.transform?.input&&(o=await m.transform.input(o)),m.references?.field==="id"&&j?o=Array.isArray(o)?o.map(a=>null!==a?Number(a):null):null!==o?Number(o):null:!1===l.supportsJSON&&"object"==typeof o&&"json"===m.type?o=JSON.stringify(o):!1===l.supportsDates&&o instanceof Date&&"date"===m.type?o=o.toISOString():!1===l.supportsBooleans&&"boolean"==typeof o&&(o=+!!o),l.customTransformInput&&(o=l.customTransformInput({data:o,action:d,field:n,fieldAttributes:m,model:u(b),schema:q,options:c})),void 0!==o&&(f[n]=o)}return f},z=async(a,b,d=[],e)=>{let g=async(a,b,d=[])=>{if(!a)return null;let e=l.mapKeysTransformOutput??{},g={},h=q[s(b)].fields;for(let i in h[Object.entries(e).find(([a,b])=>"id"===b)?.[0]??"id"]={type:c.advanced?.database?.useNumberId||c.advanced?.database?.generateId==="serial"?"number":"string"},h){if(d.length&&!d.includes(i))continue;let j=h[i];if(j){let h=j.fieldName||i,k=a[Object.entries(e).find(([a,b])=>b===h)?.[0]||h];j.transform?.output&&(k=await j.transform.output(k));let m=e[i]||i;"id"===h||j.references?.field==="id"?null!=k&&(k=String(k)):!1===l.supportsJSON&&"string"==typeof k&&"json"===j.type?k=(0,f.t)(k):!1===l.supportsDates&&"string"==typeof k&&"date"===j.type?k=new Date(k):!1===l.supportsBooleans&&"number"==typeof k&&"boolean"===j.type&&(k=1===k),l.customTransformOutput&&(k=l.customTransformOutput({data:k,field:m,fieldAttributes:j,select:d,model:u(b),schema:q,options:c})),g[m]=k}}return g};if(!e||0===Object.keys(e).length)return await g(a,b,d);b=s(b);let h=await g(a,b,d),i=Object.entries(e).map(([a,b])=>({modelName:u(a),defaultModelName:s(a),joinConfig:b}));if(!a)return null;for(let{modelName:d,defaultModelName:e,joinConfig:f}of i){let i=await (async()=>c.experimental?.joins?a[d]:await C({baseModel:b,baseData:h,joinModel:d,specificJoinConfig:f}))();null==i&&(i="one-to-one"===f.relation?null:[]),"one-to-many"!==f.relation||Array.isArray(i)||(i=[i]);let j=[];if(Array.isArray(i))for(let a of i){let b=await g(a,d,[]);j.push(b)}else{let a=await g(i,d,[]);j.push(a)}h[e]=("one-to-one"===f.relation?j[0]:j)??null}return h},A=({model:a,where:b})=>{if(!b)return;let d=l.mapKeysTransformInput??{};return b.map(b=>{let{field:e,value:f,operator:g="eq",connector:i="AND"}=b;if("in"===g&&!Array.isArray(f))throw new h.$("Value must be an array");let j=f,k=s(a),m=t({field:e,model:a}),n=d[m]||v({field:m,model:k}),o=x({field:m,model:k}),p=c.advanced?.database?.useNumberId||c.advanced?.database?.generateId==="serial";if(("id"===m||o.references?.field==="id")&&p&&(j=Array.isArray(f)?f.map(Number):Number(f)),"date"===o.type&&f instanceof Date&&!l.supportsDates&&(j=f.toISOString()),"boolean"!==o.type||"boolean"!=typeof f||l.supportsBooleans||(j=+!!f),"json"===o.type&&"object"==typeof f&&!l.supportsJSON)try{j=JSON.stringify(f)}catch(a){throw Error(`Failed to stringify JSON value for field ${n}`,{cause:a})}return{operator:g,connector:i,field:n,value:j}})},B=(a,b,d)=>{if(!b||0===Object.keys(b).length)return;let e={};for(let[f,g]of Object.entries(b)){let b,i,j;if(!g)continue;let k=s(f),l=s(a),m=Object.entries(q[k].fields).filter(([a,b])=>b.references&&s(b.references.model)===l),n=!0;if(m.length||(m=Object.entries(q[l].fields).filter(([a,b])=>b.references&&s(b.references.model)===k),n=!1),m.length){if(m.length>1)throw new h.$(`Multiple foreign keys found for model ${f} and base model ${a} while performing join operation. Only one foreign key is supported.`)}else throw new h.$(`No foreign key found for model ${f} and base model ${a} while performing join operation.`);let[o,p]=m[0];if(!p.references)throw new h.$(`No references found for foreign key ${o} on model ${f} while performing join operation.`);n?(b=v({model:a,field:j=p.references.field}),i=v({model:f,field:o})):(b=v({model:a,field:j=o}),i=v({model:f,field:p.references.field})),d&&!d.includes(j)&&d.push(j);let r="id"===i||(p.unique??!1),t=c.advanced?.database?.defaultFindManyLimit??100;r?t=1:"object"==typeof g&&"number"==typeof g.limit&&(t=g.limit),e[u(f)]={on:{from:b,to:i},limit:t,relation:r?"one-to-one":"one-to-many"}}return{join:e,select:d}},C=async({baseModel:a,baseData:b,joinModel:d,specificJoinConfig:e})=>{let f;if(!b)return b;let h=u(d),i=e.on.to,j=b[t({field:e.on.from,model:a})];if(null==j)return"one-to-one"===e.relation?null:[];let k=A({model:h,where:[{field:i,value:j,operator:"eq",connector:"AND"}]});try{if("one-to-one"===e.relation)f=await D.findOne({model:h,where:k});else{let a=e.limit??c.advanced?.database?.defaultFindManyLimit??100;f=await D.findMany({model:h,where:k,limit:a})}}catch(a){throw g.vF.error(`Failed to query fallback join for model ${h}:`,{where:k,limit:e.limit}),console.error(a),a}return f},D=a({options:c,schema:q,debugLog:r,getFieldName:v,getModelName:u,getDefaultModelName:s,getDefaultFieldName:t,getFieldAttributes:x,transformInput:y,transformOutput:z,transformWhereClause:A}),E=null,F={transaction:async a=>{if(!E)if(l.transaction)g.vF.debug(`[${l.adapterName}] - Using provided transaction implementation.`),E=l.transaction;else E=a=>a(F);return E(a)},create:async({data:a,model:b,select:c,forceAllowId:d=!1})=>{let e=++k,f=u(b);b=s(b),"id"in a&&void 0!==a.id&&!d&&(g.vF.warn(`[${l.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`),console.log(Error().stack?.split("\n").filter((a,b)=>1!==b).join("\n").replace("Error:","Create method with `id` being called at:")),a.id=void 0),r({method:"create"},`${m(e)} ${n(1,4)}`,`${o("create")} ${p("Unsafe Input")}:`,{model:f,data:a});let h=a;l.disableTransformInput||(h=await y(a,b,"create",d)),r({method:"create"},`${m(e)} ${n(2,4)}`,`${o("create")} ${p("Parsed Input")}:`,{model:f,data:h});let i=await D.create({data:h,model:f});r({method:"create"},`${m(e)} ${n(3,4)}`,`${o("create")} ${p("DB Result")}:`,{model:f,res:i});let j=i;return l.disableTransformOutput||(j=await z(i,b,c,void 0)),r({method:"create"},`${m(e)} ${n(4,4)}`,`${o("create")} ${p("Parsed Result")}:`,{model:f,data:j}),j},update:async({model:a,where:b,update:c})=>{let d=++k,e=u(a=s(a)),f=A({model:a,where:b});r({method:"update"},`${m(d)} ${n(1,4)}`,`${o("update")} ${p("Unsafe Input")}:`,{model:e,data:c});let g=c;l.disableTransformInput||(g=await y(c,a,"update")),r({method:"update"},`${m(d)} ${n(2,4)}`,`${o("update")} ${p("Parsed Input")}:`,{model:e,data:g});let h=await D.update({model:e,where:f,update:g});r({method:"update"},`${m(d)} ${n(3,4)}`,`${o("update")} ${p("DB Result")}:`,{model:e,data:h});let i=h;return l.disableTransformOutput||(i=await z(h,a,void 0,void 0)),r({method:"update"},`${m(d)} ${n(4,4)}`,`${o("update")} ${p("Parsed Result")}:`,{model:e,data:i}),i},updateMany:async({model:a,where:b,update:c})=>{let d=++k,e=u(a),f=A({model:a,where:b});a=s(a),r({method:"updateMany"},`${m(d)} ${n(1,4)}`,`${o("updateMany")} ${p("Unsafe Input")}:`,{model:e,data:c});let g=c;l.disableTransformInput||(g=await y(c,a,"update")),r({method:"updateMany"},`${m(d)} ${n(2,4)}`,`${o("updateMany")} ${p("Parsed Input")}:`,{model:e,data:g});let h=await D.updateMany({model:e,where:f,update:g});return r({method:"updateMany"},`${m(d)} ${n(3,4)}`,`${o("updateMany")} ${p("DB Result")}:`,{model:e,data:h}),r({method:"updateMany"},`${m(d)} ${n(4,4)}`,`${o("updateMany")} ${p("Parsed Result")}:`,{model:e,data:h}),h},findOne:async({model:a,where:b,select:d,join:e})=>{let f,g=++k,h=u(a),i=A({model:a,where:b});a=s(a);let j=!0;if(l.disableTransformJoin)f=e;else{let b=B(a,e,d);b&&(f=b.join,d=b.select),!c.experimental?.joins&&f&&Object.keys(f).length>0&&(j=!1)}r({method:"findOne"},`${m(g)} ${n(1,3)}`,`${o("findOne")}:`,{model:h,where:i,select:d,join:f});let q=await D.findOne({model:h,where:i,select:d,join:j?f:void 0});r({method:"findOne"},`${m(g)} ${n(2,3)}`,`${o("findOne")} ${p("DB Result")}:`,{model:h,data:q});let t=q;return l.disableTransformOutput||(t=await z(q,a,d,f)),r({method:"findOne"},`${m(g)} ${n(3,3)}`,`${o("findOne")} ${p("Parsed Result")}:`,{model:h,data:t}),t},findMany:async({model:a,where:b,limit:d,sortBy:e,offset:f,join:g})=>{let h,i=++k,j=d??c.advanced?.database?.defaultFindManyLimit??100,q=u(a),t=A({model:a,where:b});a=s(a);let v=!0;if(l.disableTransformJoin)h=g;else{let b=B(a,g,void 0);b&&(h=b.join),!c.experimental?.joins&&h&&Object.keys(h).length>0&&(v=!1)}r({method:"findMany"},`${m(i)} ${n(1,3)}`,`${o("findMany")}:`,{model:q,where:t,limit:j,sortBy:e,offset:f,join:h});let w=await D.findMany({model:q,where:t,limit:j,sortBy:e,offset:f,join:v?h:void 0});r({method:"findMany"},`${m(i)} ${n(2,3)}`,`${o("findMany")} ${p("DB Result")}:`,{model:q,data:w});let x=w;return l.disableTransformOutput||(x=await Promise.all(w.map(async b=>await z(b,a,void 0,h)))),r({method:"findMany"},`${m(i)} ${n(3,3)}`,`${o("findMany")} ${p("Parsed Result")}:`,{model:q,data:x}),x},delete:async({model:a,where:b})=>{let c=++k,d=u(a),e=A({model:a,where:b});a=s(a),r({method:"delete"},`${m(c)} ${n(1,2)}`,`${o("delete")}:`,{model:d,where:e}),await D.delete({model:d,where:e}),r({method:"delete"},`${m(c)} ${n(2,2)}`,`${o("delete")} ${p("DB Result")}:`,{model:d})},deleteMany:async({model:a,where:b})=>{let c=++k,d=u(a),e=A({model:a,where:b});a=s(a),r({method:"deleteMany"},`${m(c)} ${n(1,2)}`,`${o("deleteMany")} ${p("DeleteMany")}:`,{model:d,where:e});let f=await D.deleteMany({model:d,where:e});return r({method:"deleteMany"},`${m(c)} ${n(2,2)}`,`${o("deleteMany")} ${p("DB Result")}:`,{model:d,data:f}),f},count:async({model:a,where:b})=>{let c=++k,d=u(a),e=A({model:a,where:b});a=s(a),r({method:"count"},`${m(c)} ${n(1,2)}`,`${o("count")}:`,{model:d,where:e});let f=await D.count({model:d,where:e});return r({method:"count"},`${m(c)} ${n(2,2)}`,`${o("count")}:`,{model:d,data:f}),f},createSchema:D.createSchema?async(a,b)=>{let e=(0,d.a)(c);return c.secondaryStorage&&!c.session?.storeSessionInDatabase&&delete e.session,c.rateLimit&&"database"===c.rateLimit.storage&&(void 0===c.rateLimit.enabled||!0===c.rateLimit.enabled)&&(e.ratelimit={modelName:c.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:c.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:c.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:c.rateLimit.fields?.lastRequest??"lastRequest"}}}),D.createSchema({file:b,tables:e})}:void 0,options:{adapterConfig:l,...D.options??{}},id:l.adapterId,...l.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){j=j.filter(a=>a.instance!==e)},printDebugLogs(){let a=``.repeat(80),b=j.filter(a=>a.instance===e);0!==b.length&&console.log(...b.reverse().map(a=>(a.args[0]=`
${a.args[0]}`,[...a.args,"\n"])).reduce((a,b)=>[...b,...a],[`
${a}`]))}}}:{}};return F};function m(a){return 8>(0,g.t$)()?`#${a}`:`${g.p4.fg.magenta}#${a}${g.p4.reset}`}function n(a,b){return`${g.p4.bg.black}${g.p4.fg.yellow}[${a}/${b}]${g.p4.reset}`}function o(a){return`${g.p4.bright}${a}${g.p4.reset}`}function p(a){return`${g.p4.dim}(${a})${g.p4.reset}`}},41517:(a,b,c)=>{c.d(b,{n:()=>an});var d=c(6424),e=c(23727),f=c(69256),g=c(4758),h=c(67882),i=c(17938),j=c(4787);let k=(0,i.CN)({is:a=>"ValuesNode"===a.kind,create:a=>(0,i.CN)({kind:"ValuesNode",values:(0,i.CN)(a)})});var l=c(63860);let m=(0,i.CN)({is:a=>"DefaultInsertValueNode"===a.kind,create:()=>(0,i.CN)({kind:"DefaultInsertValueNode"})});var n=c(22066);function o(a){let b=(0,i.Tn)(a)?a((0,n.A)()):a;var c=(0,i.MH)(b)?b:(0,i.CN)([b]);let d=function(a){let b=new Map;for(let c of a)for(let a of Object.keys(c))b.has(a)||void 0===c[a]||b.set(a,b.size);return b}(c);return[(0,i.CN)([...d.keys()].map(f.Z.create)),k.create(c.map(a=>(function(a,b){let c=Object.keys(a),d=Array.from({length:b.size}),e=!1,f=c.length;for(let g of c){let c=b.get(g);if((0,i.b0)(c)){f--;continue}let h=a[g];((0,i.b0)(h)||(0,l.SS)(h))&&(e=!0),d[c]=h}if(f<b.size||e){let a=m.create();return h.s.create(d.map(b=>(0,i.b0)(b)?a:(0,j.$s)(b)))}return g.h.create(d)})(a,d)))]}var p=c(6282),q=c(93229);let r=(0,i.CN)({is:a=>"ColumnUpdateNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"ColumnUpdateNode",column:a,value:b})});var s=c(84699);function t(a){return Object.entries((0,i.Tn)(a)?a((0,n.A)()):a).filter(([a,b])=>void 0!==b).map(([a,b])=>r.create(f.Z.create(a),(0,j.$s)(b)))}let u=(0,i.CN)({is:a=>"OnDuplicateKeyNode"===a.kind,create:a=>(0,i.CN)({kind:"OnDuplicateKeyNode",updates:a})});class v{insertId;numInsertedOrUpdatedRows;constructor(a,b){this.insertId=a,this.numInsertedOrUpdatedRows=b}}var w=c(4601),x=c(69679),y=c(90663);let z=(0,i.CN)({is:a=>"OnConflictNode"===a.kind,create:()=>(0,i.CN)({kind:"OnConflictNode"}),cloneWith:(a,b)=>(0,i.CN)({...a,...b}),cloneWithIndexWhere:(a,b)=>(0,i.CN)({...a,indexWhere:a.indexWhere?y.o.cloneWithOperation(a.indexWhere,"And",b):y.o.create(b)}),cloneWithIndexOrWhere:(a,b)=>(0,i.CN)({...a,indexWhere:a.indexWhere?y.o.cloneWithOperation(a.indexWhere,"Or",b):y.o.create(b)}),cloneWithUpdateWhere:(a,b)=>(0,i.CN)({...a,updateWhere:a.updateWhere?y.o.cloneWithOperation(a.updateWhere,"And",b):y.o.create(b)}),cloneWithUpdateOrWhere:(a,b)=>(0,i.CN)({...a,updateWhere:a.updateWhere?y.o.cloneWithOperation(a.updateWhere,"Or",b):y.o.create(b)}),cloneWithoutIndexWhere:a=>(0,i.CN)({...a,indexWhere:void 0}),cloneWithoutUpdateWhere:a=>(0,i.CN)({...a,updateWhere:void 0})});var A=c(16469);class B{#c;constructor(a){this.#c=(0,i.CN)(a)}column(a){let b=f.Z.create(a);return new B({...this.#c,onConflictNode:z.cloneWith(this.#c.onConflictNode,{columns:this.#c.onConflictNode.columns?(0,i.CN)([...this.#c.onConflictNode.columns,b]):(0,i.CN)([b])})})}columns(a){let b=a.map(f.Z.create);return new B({...this.#c,onConflictNode:z.cloneWith(this.#c.onConflictNode,{columns:this.#c.onConflictNode.columns?(0,i.CN)([...this.#c.onConflictNode.columns,...b]):(0,i.CN)(b)})})}constraint(a){return new B({...this.#c,onConflictNode:z.cloneWith(this.#c.onConflictNode,{constraint:x.O.create(a)})})}expression(a){return new B({...this.#c,onConflictNode:z.cloneWith(this.#c.onConflictNode,{indexExpression:a.toOperationNode()})})}where(...a){return new B({...this.#c,onConflictNode:z.cloneWithIndexWhere(this.#c.onConflictNode,(0,A.GB)(a))})}whereRef(a,b,c){return new B({...this.#c,onConflictNode:z.cloneWithIndexWhere(this.#c.onConflictNode,(0,A.vC)(a,b,c))})}clearWhere(){return new B({...this.#c,onConflictNode:z.cloneWithoutIndexWhere(this.#c.onConflictNode)})}doNothing(){return new C({...this.#c,onConflictNode:z.cloneWith(this.#c.onConflictNode,{doNothing:!0})})}doUpdateSet(a){return new D({...this.#c,onConflictNode:z.cloneWith(this.#c.onConflictNode,{updates:t(a)})})}$call(a){return a(this)}}class C{#c;constructor(a){this.#c=(0,i.CN)(a)}toOperationNode(){return this.#c.onConflictNode}}class D{#c;constructor(a){this.#c=(0,i.CN)(a)}where(...a){return new D({...this.#c,onConflictNode:z.cloneWithUpdateWhere(this.#c.onConflictNode,(0,A.GB)(a))})}whereRef(a,b,c){return new D({...this.#c,onConflictNode:z.cloneWithUpdateWhere(this.#c.onConflictNode,(0,A.vC)(a,b,c))})}clearWhere(){return new D({...this.#c,onConflictNode:z.cloneWithoutUpdateWhere(this.#c.onConflictNode)})}$call(a){return a(this)}toOperationNode(){return this.#c.onConflictNode}}var E=c(25880);let F=(0,i.CN)({is:a=>"OrActionNode"===a.kind,create:a=>(0,i.CN)({kind:"OrActionNode",action:a})});class G{#c;constructor(a){this.#c=(0,i.CN)(a)}values(a){let[b,c]=o(a);return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{columns:b,values:c})})}columns(a){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{columns:(0,i.CN)(a.map(f.Z.create))})})}expression(a){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{values:(0,l.YK)(a)})})}defaultValues(){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{defaultValues:!0})})}modifyEnd(a){return new G({...this.#c,queryNode:q.L.cloneWithEndModifier(this.#c.queryNode,a.toOperationNode())})}ignore(){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{orAction:F.create("ignore")})})}orIgnore(){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{orAction:F.create("ignore")})})}orAbort(){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{orAction:F.create("abort")})})}orFail(){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{orAction:F.create("fail")})})}orReplace(){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{orAction:F.create("replace")})})}orRollback(){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{orAction:F.create("rollback")})})}top(a,b){return new G({...this.#c,queryNode:q.L.cloneWithTop(this.#c.queryNode,(0,E.f)(a,b))})}onConflict(a){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{onConflict:a(new B({onConflictNode:z.create()})).toOperationNode()})})}onDuplicateKeyUpdate(a){return new G({...this.#c,queryNode:p.o.cloneWith(this.#c.queryNode,{onDuplicateKey:u.create(t(a))})})}returning(a){return new G({...this.#c,queryNode:q.L.cloneWithReturning(this.#c.queryNode,(0,e.G)(a))})}returningAll(){return new G({...this.#c,queryNode:q.L.cloneWithReturning(this.#c.queryNode,(0,e.J)())})}output(a){return new G({...this.#c,queryNode:q.L.cloneWithOutput(this.#c.queryNode,(0,e.G)(a))})}outputAll(a){return new G({...this.#c,queryNode:q.L.cloneWithOutput(this.#c.queryNode,(0,e.J)(a))})}clearReturning(){return new G({...this.#c,queryNode:q.L.cloneWithoutReturning(this.#c.queryNode)})}$call(a){return a(this)}$if(a,b){return a?b(this):new G({...this.#c})}$castTo(){return new G(this.#c)}$narrowType(){return new G(this.#c)}$assertType(){return new G(this.#c)}withPlugin(a){return new G({...this.#c,executor:this.#c.executor.withPlugin(a)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let a=this.compile(),b=await this.#c.executor.executeQuery(a),{adapter:c}=this.#c.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new v(b.insertId,b.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#c.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new G({...this.#c,queryNode:q.L.cloneWithExplain(this.#c.queryNode,a,b)});return await c.execute()}}var H=c(18538),I=c(44228);class J{numDeletedRows;constructor(a){this.numDeletedRows=a}}var K=c(18370),L=c(68479),M=c(80955);class N{#c;constructor(a){this.#c=(0,i.CN)(a)}where(...a){return new N({...this.#c,queryNode:q.L.cloneWithWhere(this.#c.queryNode,(0,A.GB)(a))})}whereRef(a,b,c){return new N({...this.#c,queryNode:q.L.cloneWithWhere(this.#c.queryNode,(0,A.vC)(a,b,c))})}clearWhere(){return new N({...this.#c,queryNode:q.L.cloneWithoutWhere(this.#c.queryNode)})}top(a,b){return new N({...this.#c,queryNode:q.L.cloneWithTop(this.#c.queryNode,(0,E.f)(a,b))})}using(a){return new N({...this.#c,queryNode:K.e.cloneWithUsing(this.#c.queryNode,(0,I.JB)(a))})}innerJoin(...a){return this.#d("InnerJoin",a)}leftJoin(...a){return this.#d("LeftJoin",a)}rightJoin(...a){return this.#d("RightJoin",a)}fullJoin(...a){return this.#d("FullJoin",a)}#d(a,b){return new N({...this.#c,queryNode:q.L.cloneWithJoin(this.#c.queryNode,(0,H.a)(a,b))})}returning(a){return new N({...this.#c,queryNode:q.L.cloneWithReturning(this.#c.queryNode,(0,e.G)(a))})}returningAll(a){return new N({...this.#c,queryNode:q.L.cloneWithReturning(this.#c.queryNode,(0,e.J)(a))})}output(a){return new N({...this.#c,queryNode:q.L.cloneWithOutput(this.#c.queryNode,(0,e.G)(a))})}outputAll(a){return new N({...this.#c,queryNode:q.L.cloneWithOutput(this.#c.queryNode,(0,e.J)(a))})}clearReturning(){return new N({...this.#c,queryNode:q.L.cloneWithoutReturning(this.#c.queryNode)})}clearLimit(){return new N({...this.#c,queryNode:K.e.cloneWithoutLimit(this.#c.queryNode)})}orderBy(...a){return new N({...this.#c,queryNode:q.L.cloneWithOrderByItems(this.#c.queryNode,(0,M.xk)(a))})}clearOrderBy(){return new N({...this.#c,queryNode:q.L.cloneWithoutOrderBy(this.#c.queryNode)})}limit(a){return new N({...this.#c,queryNode:K.e.cloneWithLimit(this.#c.queryNode,L.a.create((0,j.$s)(a)))})}modifyEnd(a){return new N({...this.#c,queryNode:q.L.cloneWithEndModifier(this.#c.queryNode,a.toOperationNode())})}$call(a){return a(this)}$if(a,b){return a?b(this):new N({...this.#c})}$castTo(){return new N(this.#c)}$narrowType(){return new N(this.#c)}$assertType(){return new N(this.#c)}withPlugin(a){return new N({...this.#c,executor:this.#c.executor.withPlugin(a)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let a=this.compile(),b=await this.#c.executor.executeQuery(a),{adapter:c}=this.#c.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new J(b.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#c.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new N({...this.#c,queryNode:q.L.cloneWithExplain(this.#c.queryNode,a,b)});return await c.execute()}}var O=c(12458);class P{numUpdatedRows;numChangedRows;constructor(a,b){this.numUpdatedRows=a,this.numChangedRows=b}}class Q{#c;constructor(a){this.#c=(0,i.CN)(a)}where(...a){return new Q({...this.#c,queryNode:q.L.cloneWithWhere(this.#c.queryNode,(0,A.GB)(a))})}whereRef(a,b,c){return new Q({...this.#c,queryNode:q.L.cloneWithWhere(this.#c.queryNode,(0,A.vC)(a,b,c))})}clearWhere(){return new Q({...this.#c,queryNode:q.L.cloneWithoutWhere(this.#c.queryNode)})}top(a,b){return new Q({...this.#c,queryNode:q.L.cloneWithTop(this.#c.queryNode,(0,E.f)(a,b))})}from(a){return new Q({...this.#c,queryNode:O.U.cloneWithFromItems(this.#c.queryNode,(0,I.JB)(a))})}innerJoin(...a){return this.#d("InnerJoin",a)}leftJoin(...a){return this.#d("LeftJoin",a)}rightJoin(...a){return this.#d("RightJoin",a)}fullJoin(...a){return this.#d("FullJoin",a)}#d(a,b){return new Q({...this.#c,queryNode:q.L.cloneWithJoin(this.#c.queryNode,(0,H.a)(a,b))})}orderBy(...a){return new Q({...this.#c,queryNode:q.L.cloneWithOrderByItems(this.#c.queryNode,(0,M.xk)(a))})}clearOrderBy(){return new Q({...this.#c,queryNode:q.L.cloneWithoutOrderBy(this.#c.queryNode)})}limit(a){return new Q({...this.#c,queryNode:O.U.cloneWithLimit(this.#c.queryNode,L.a.create((0,j.$s)(a)))})}set(...a){return new Q({...this.#c,queryNode:O.U.cloneWithUpdates(this.#c.queryNode,function(...a){return 2===a.length?[r.create((0,s.$O)(a[0]),(0,j.$s)(a[1]))]:t(a[0])}(...a))})}returning(a){return new Q({...this.#c,queryNode:q.L.cloneWithReturning(this.#c.queryNode,(0,e.G)(a))})}returningAll(a){return new Q({...this.#c,queryNode:q.L.cloneWithReturning(this.#c.queryNode,(0,e.J)(a))})}output(a){return new Q({...this.#c,queryNode:q.L.cloneWithOutput(this.#c.queryNode,(0,e.G)(a))})}outputAll(a){return new Q({...this.#c,queryNode:q.L.cloneWithOutput(this.#c.queryNode,(0,e.J)(a))})}modifyEnd(a){return new Q({...this.#c,queryNode:q.L.cloneWithEndModifier(this.#c.queryNode,a.toOperationNode())})}clearReturning(){return new Q({...this.#c,queryNode:q.L.cloneWithoutReturning(this.#c.queryNode)})}$call(a){return a(this)}$if(a,b){return a?b(this):new Q({...this.#c})}$castTo(){return new Q(this.#c)}$narrowType(){return new Q(this.#c)}$assertType(){return new Q(this.#c)}withPlugin(a){return new Q({...this.#c,executor:this.#c.executor.withPlugin(a)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let a=this.compile(),b=await this.#c.executor.executeQuery(a),{adapter:c}=this.#c.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new P(b.numAffectedRows??BigInt(0),b.numChangedRows)]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#c.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new Q({...this.#c,queryNode:q.L.cloneWithExplain(this.#c.queryNode,a,b)});return await c.execute()}}var R=c(83021),S=c(34850);let T=(0,i.CN)({is:a=>"CommonTableExpressionNameNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"CommonTableExpressionNameNode",table:S.H.create(a),columns:b?(0,i.CN)(b.map(f.Z.create)):void 0})});var U=c(83965);let V=(0,i.CN)({is:a=>"CommonTableExpressionNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"CommonTableExpressionNode",name:a,expression:b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class W{#c;constructor(a){this.#c=(0,i.CN)(a)}materialized(){return new W({...this.#c,node:V.cloneWith(this.#c.node,{materialized:!0})})}notMaterialized(){return new W({...this.#c,node:V.cloneWith(this.#c.node,{materialized:!1})})}toOperationNode(){return this.#c.node}}function X(a,b){var c;let d=b((0,U.bl)()).toOperationNode();return(0,i.Tn)(a)?a((c=d,a=>new W({node:V.create(Y(a),c)}))).toOperationNode():V.create(Y(a),d)}function Y(a){if(!a.includes("("))return T.create(a);{let b=a.split(/[\(\)]/),c=b[0],d=b[1].split(",").map(a=>a.trim());return T.create(c,d)}}let Z=(0,i.CN)({is:a=>"WithNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"WithNode",expressions:(0,i.CN)([a]),...b}),cloneWithExpression:(a,b)=>(0,i.CN)({...a,expressions:(0,i.CN)([...a.expressions,b])})});var $=c(35467),_=c(20632),aa=c(8997);let ab=(0,i.CN)({is:a=>"MatchedNode"===a.kind,create:(a,b=!1)=>(0,i.CN)({kind:"MatchedNode",not:a,bySource:b})});var ac=c(77175),ad=c(53460),ae=c(90998);function af(a,b,c){return ae.t.create((0,A.KN)([ab.create(!a.isMatched,a.bySource),...b&&b.length>0?[3===b.length&&c?(0,A.vC)(b[0],b[1],b[2]):(0,A.GB)(b)]:[]],"and",!1))}function ag(a){return(0,i.Kg)(a)?ad.z.create([a],[]):(0,ac.N)(a)?a.toOperationNode():a}var ah=c(42298);class ai{numChangedRows;constructor(a){this.numChangedRows=a}}class aj{#c;constructor(a){this.#c=(0,i.CN)(a)}modifyEnd(a){return new aj({...this.#c,queryNode:q.L.cloneWithEndModifier(this.#c.queryNode,a.toOperationNode())})}top(a,b){return new aj({...this.#c,queryNode:q.L.cloneWithTop(this.#c.queryNode,(0,E.f)(a,b))})}using(...a){return new ak({...this.#c,queryNode:aa.r.cloneWithUsing(this.#c.queryNode,(0,H.a)("Using",a))})}returning(a){return new aj({...this.#c,queryNode:q.L.cloneWithReturning(this.#c.queryNode,(0,e.G)(a))})}returningAll(a){return new aj({...this.#c,queryNode:q.L.cloneWithReturning(this.#c.queryNode,(0,e.J)(a))})}output(a){return new aj({...this.#c,queryNode:q.L.cloneWithOutput(this.#c.queryNode,(0,e.G)(a))})}outputAll(a){return new aj({...this.#c,queryNode:q.L.cloneWithOutput(this.#c.queryNode,(0,e.J)(a))})}}class ak{#c;constructor(a){this.#c=(0,i.CN)(a)}modifyEnd(a){return new ak({...this.#c,queryNode:q.L.cloneWithEndModifier(this.#c.queryNode,a.toOperationNode())})}top(a,b){return new ak({...this.#c,queryNode:q.L.cloneWithTop(this.#c.queryNode,(0,E.f)(a,b))})}whenMatched(){return this.#aG([])}whenMatchedAnd(...a){return this.#aG(a)}whenMatchedAndRef(a,b,c){return this.#aG([a,b,c],!0)}#aG(a,b){return new al({...this.#c,queryNode:aa.r.cloneWithWhen(this.#c.queryNode,af({isMatched:!0},a,b))})}whenNotMatched(){return this.#aH([])}whenNotMatchedAnd(...a){return this.#aH(a)}whenNotMatchedAndRef(a,b,c){return this.#aH([a,b,c],!0)}whenNotMatchedBySource(){return this.#aH([],!1,!0)}whenNotMatchedBySourceAnd(...a){return this.#aH(a,!1,!0)}whenNotMatchedBySourceAndRef(a,b,c){return this.#aH([a,b,c],!0,!0)}returning(a){return new ak({...this.#c,queryNode:q.L.cloneWithReturning(this.#c.queryNode,(0,e.G)(a))})}returningAll(a){return new ak({...this.#c,queryNode:q.L.cloneWithReturning(this.#c.queryNode,(0,e.J)(a))})}output(a){return new ak({...this.#c,queryNode:q.L.cloneWithOutput(this.#c.queryNode,(0,e.G)(a))})}outputAll(a){return new ak({...this.#c,queryNode:q.L.cloneWithOutput(this.#c.queryNode,(0,e.J)(a))})}#aH(a,b=!1,c=!1){let d={...this.#c,queryNode:aa.r.cloneWithWhen(this.#c.queryNode,af({isMatched:!1,bySource:c},a,b))};return new(c?al:am)(d)}$call(a){return a(this)}$if(a,b){return a?b(this):new ak({...this.#c})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let a=this.compile(),b=await this.#c.executor.executeQuery(a),{adapter:c}=this.#c.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new ai(b.numAffectedRows)]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}}class al{#c;constructor(a){this.#c=(0,i.CN)(a)}thenDelete(){return new ak({...this.#c,queryNode:aa.r.cloneWithThen(this.#c.queryNode,ag("delete"))})}thenDoNothing(){return new ak({...this.#c,queryNode:aa.r.cloneWithThen(this.#c.queryNode,ag("do nothing"))})}thenUpdate(a){return new ak({...this.#c,queryNode:aa.r.cloneWithThen(this.#c.queryNode,ag(a(new Q({queryId:this.#c.queryId,executor:ah.W,queryNode:O.U.createWithoutTable()}))))})}thenUpdateSet(...a){return this.thenUpdate(b=>b.set(...a))}}class am{#c;constructor(a){this.#c=(0,i.CN)(a)}thenDoNothing(){return new ak({...this.#c,queryNode:aa.r.cloneWithThen(this.#c.queryNode,ag("do nothing"))})}thenInsertValues(a){let[b,c]=o(a);return new ak({...this.#c,queryNode:aa.r.cloneWithThen(this.#c.queryNode,ag(p.o.cloneWith(p.o.createWithoutInto(),{columns:b,values:c})))})}}class an{#c;constructor(a){this.#c=(0,i.CN)(a)}selectFrom(a){return(0,d.c)({queryId:(0,$.a)(),executor:this.#c.executor,queryNode:R.L.createFrom((0,I.JB)(a),this.#c.withNode)})}selectNoFrom(a){return(0,d.c)({queryId:(0,$.a)(),executor:this.#c.executor,queryNode:R.L.cloneWithSelections(R.L.create(this.#c.withNode),(0,e.G)(a))})}insertInto(a){return new G({queryId:(0,$.a)(),executor:this.#c.executor,queryNode:p.o.create((0,I.M$)(a),this.#c.withNode)})}replaceInto(a){return new G({queryId:(0,$.a)(),executor:this.#c.executor,queryNode:p.o.create((0,I.M$)(a),this.#c.withNode,!0)})}deleteFrom(a){return new N({queryId:(0,$.a)(),executor:this.#c.executor,queryNode:K.e.create((0,I.JB)(a),this.#c.withNode)})}updateTable(a){return new Q({queryId:(0,$.a)(),executor:this.#c.executor,queryNode:O.U.create((0,I.JB)(a),this.#c.withNode)})}mergeInto(a){return new aj({queryId:(0,$.a)(),executor:this.#c.executor,queryNode:aa.r.create((0,I.Xm)(a),this.#c.withNode)})}with(a,b){let c=X(a,b);return new an({...this.#c,withNode:this.#c.withNode?Z.cloneWithExpression(this.#c.withNode,c):Z.create(c)})}withRecursive(a,b){let c=X(a,b);return new an({...this.#c,withNode:this.#c.withNode?Z.cloneWithExpression(this.#c.withNode,c):Z.create(c,{recursive:!0})})}withPlugin(a){return new an({...this.#c,executor:this.#c.executor.withPlugin(a)})}withoutPlugins(){return new an({...this.#c,executor:this.#c.executor.withoutPlugins()})}withSchema(a){return new an({...this.#c,executor:this.#c.executor.withPluginAtFront(new _.B(a))})}}},42298:(a,b,c)=>{c.d(b,{W:()=>f});var d=c(9263);class e extends d.R{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin(a){return new e([...this.plugins,a])}withPlugins(a){return new e([...this.plugins,...a])}withPluginAtFront(a){return new e([a,...this.plugins])}withoutPlugins(){return new e([])}}let f=new e},42382:(a,b,c)=>{c.d(b,{Xm:()=>h,we:()=>f,zX:()=>g});var d=c(17938);let e=["->","->>"],f=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from","+","-","*","/","%","^","&","|","#","<<",">>","&&","||",...e,"not","-","exists","not exists","between","between symmetric"],g=(0,d.CN)({is:a=>"OperatorNode"===a.kind,create:a=>(0,d.CN)({kind:"OperatorNode",operator:a})});function h(a){return(0,d.Kg)(a)&&e.includes(a)}},42937:(a,b,c)=>{c.d(b,{a:()=>e,i:()=>f,n:()=>h,r:()=>g,t:()=>i});var d=c(75564);let e=a=>{let b=(a.plugins??[]).reduce((a,b)=>{let c=b.schema;if(!c)return a;for(let[b,d]of Object.entries(c))a[b]={fields:{...a[b]?.fields,...d.fields},modelName:d.modelName||b};return a},{}),c=a.rateLimit?.storage==="database",d={rateLimit:{modelName:a.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:a.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:a.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:a.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:e,session:f,account:g,...h}=b,i={session:{modelName:a.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:a.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:a.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:a.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:a.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:a.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:a.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:a.session?.fields?.userId||"userId",references:{model:a.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,index:!0},...f?.fields,...a.session?.additionalFields},order:2}};return{user:{modelName:a.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:a.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:a.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:a.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:a.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:a.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:a.user?.fields?.updatedAt||"updatedAt"},...e?.fields,...a.user?.additionalFields},order:1},...!a.secondaryStorage||a.session?.storeSessionInDatabase?i:{},account:{modelName:a.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:a.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:a.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:a.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:a.account?.fields?.userId||"userId",index:!0},accessToken:{type:"string",required:!1,fieldName:a.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:a.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:a.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:a.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:a.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:a.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:a.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:a.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:a.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...g?.fields,...a.account?.additionalFields},order:3},verification:{modelName:a.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:a.verification?.fields?.identifier||"identifier",index:!0},value:{type:"string",required:!0,fieldName:a.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:a.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:a.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:a.verification?.fields?.updatedAt||"updatedAt"}},order:4},...h,...c?d:{}}},f=({usePlural:a,schema:b})=>c=>{if(a&&"s"===c.charAt(c.length-1)){let a=c.slice(0,-1),d=b[a]?a:void 0;if(d||(d=Object.entries(b).find(([b,c])=>c.modelName===a)?.[0]),d)return d}let e=b[c]?c:void 0;if(e||(e=Object.entries(b).find(([a,b])=>b.modelName===c)?.[0]),!e)throw new d.$(`Model "${c}" not found in schema`);return e},g=({schema:a,usePlural:b})=>{let c=f({schema:a,usePlural:b});return({field:b,model:e})=>{if("id"===b||"_id"===b)return"id";let f=c(e),g=a[f]?.fields[b];if(!g){let c=Object.entries(a[f].fields).find(([a,c])=>c.fieldName===b);c&&(g=c[1],b=c[0])}if(!g)throw new d.$(`Field ${b} not found in model ${f}`);return b}},h=({schema:a,usePlural:b})=>{let c=f({schema:a,usePlural:b}),d=g({schema:a,usePlural:b});return function({model:b,field:e}){let f=c(b),g=d({model:f,field:e});return a[f]?.fields[g]?.fieldName||g}},i=({usePlural:a,schema:b})=>{let c=f({schema:b,usePlural:a});return d=>{let e=c(d);return b&&b[e]&&b[e].modelName!==d?a?`${b[e].modelName}s`:b[e].modelName:a?`${d}s`:d}}},43395:(a,b,c)=>{c.d(b,{n:()=>p});var d=c(33197),e=c(6282),f=c(17938);class g{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#aI=(0,f.CN)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=a=>{this.nodeStack.push(a),this.#aI[a.kind](a),this.nodeStack.pop()}}var h=c(42382),i=c(63549),j=c(53460),k=c(60724),l=c(97946),m=c(90998),n=c(91561);let o=/'/g;class p extends g{#aJ="";#aK=[];get numParameters(){return this.#aK.length}compileQuery(a,b){return this.#aJ="",this.#aK=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(a),(0,f.CN)({query:a,queryId:b,sql:this.getSql(),parameters:[...this.#aK]})}getSql(){return this.#aJ}visitSelectQuery(a){let b=void 0!==this.parentNode&&!i.k.is(this.parentNode)&&!e.o.is(this.parentNode)&&!d.B.is(this.parentNode)&&!k.Y.is(this.parentNode)&&!l.i.is(this.parentNode);void 0===this.parentNode&&a.explain&&(this.visitNode(a.explain),this.append(" ")),b&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("select"),a.distinctOn&&(this.append(" "),this.compileDistinctOn(a.distinctOn)),a.frontModifiers?.length&&(this.append(" "),this.compileList(a.frontModifiers," ")),a.top&&(this.append(" "),this.visitNode(a.top)),a.selections&&(this.append(" "),this.compileList(a.selections)),a.from&&(this.append(" "),this.visitNode(a.from)),a.joins&&(this.append(" "),this.compileList(a.joins," ")),a.where&&(this.append(" "),this.visitNode(a.where)),a.groupBy&&(this.append(" "),this.visitNode(a.groupBy)),a.having&&(this.append(" "),this.visitNode(a.having)),a.setOperations&&(this.append(" "),this.compileList(a.setOperations," ")),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),a.offset&&(this.append(" "),this.visitNode(a.offset)),a.fetch&&(this.append(" "),this.visitNode(a.fetch)),a.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...a.endModifiers])," ")),b&&this.append(")")}visitFrom(a){this.append("from "),this.compileList(a.froms)}visitSelection(a){this.visitNode(a.selection)}visitColumn(a){this.visitNode(a.column)}compileDistinctOn(a){this.append("distinct on ("),this.compileList(a),this.append(")")}compileList(a,b=", "){let c=a.length-1;for(let d=0;d<=c;d++)this.visitNode(a[d]),d<c&&this.append(b)}visitWhere(a){this.append("where "),this.visitNode(a.where)}visitHaving(a){this.append("having "),this.visitNode(a.having)}visitInsertQuery(a){let b=void 0!==this.parentNode&&!i.k.is(this.parentNode)&&!j.z.is(this.parentNode)&&!m.t.is(this.parentNode);void 0===this.parentNode&&a.explain&&(this.visitNode(a.explain),this.append(" ")),b&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append(a.replace?"replace":"insert"),a.ignore&&((0,n.u)("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore")),a.orAction&&(this.append(" "),this.visitNode(a.orAction)),a.top&&(this.append(" "),this.visitNode(a.top)),a.into&&(this.append(" into "),this.visitNode(a.into)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.output&&(this.append(" "),this.visitNode(a.output)),a.values&&(this.append(" "),this.visitNode(a.values)),a.defaultValues&&(this.append(" "),this.append("default values")),a.onConflict&&(this.append(" "),this.visitNode(a.onConflict)),a.onDuplicateKey&&(this.append(" "),this.visitNode(a.onDuplicateKey)),a.returning&&(this.append(" "),this.visitNode(a.returning)),b&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitValues(a){this.append("values "),this.compileList(a.values)}visitDeleteQuery(a){let b=void 0!==this.parentNode&&!i.k.is(this.parentNode)&&!j.z.is(this.parentNode);void 0===this.parentNode&&a.explain&&(this.visitNode(a.explain),this.append(" ")),b&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("delete "),a.top&&(this.visitNode(a.top),this.append(" ")),this.visitNode(a.from),a.output&&(this.append(" "),this.visitNode(a.output)),a.using&&(this.append(" "),this.visitNode(a.using)),a.joins&&(this.append(" "),this.compileList(a.joins," ")),a.where&&(this.append(" "),this.visitNode(a.where)),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),a.returning&&(this.append(" "),this.visitNode(a.returning)),b&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitReturning(a){this.append("returning "),this.compileList(a.selections)}visitAlias(a){this.visitNode(a.node),this.append(" as "),this.visitNode(a.alias)}visitReference(a){a.table&&(this.visitNode(a.table),this.append(".")),this.visitNode(a.column)}visitSelectAll(a){this.append("*")}visitIdentifier(a){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(a),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(a){if(!(0,f.Kg)(a.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(a.name))}visitAnd(a){this.visitNode(a.left),this.append(" and "),this.visitNode(a.right)}visitOr(a){this.visitNode(a.left),this.append(" or "),this.visitNode(a.right)}visitValue(a){a.immediate?this.appendImmediateValue(a.value):this.appendValue(a.value)}visitValueList(a){this.append("("),this.compileList(a.values),this.append(")")}visitTuple(a){this.append("("),this.compileList(a.values),this.append(")")}visitPrimitiveValueList(a){this.append("(");let{values:b}=a;for(let a=0;a<b.length;++a)this.appendValue(b[a]),a!==b.length-1&&this.append(", ");this.append(")")}visitParens(a){this.append("("),this.visitNode(a.node),this.append(")")}visitJoin(a){this.append(s[a.joinType]),this.append(" "),this.visitNode(a.table),a.on&&(this.append(" "),this.visitNode(a.on))}visitOn(a){this.append("on "),this.visitNode(a.on)}visitRaw(a){let{sqlFragments:b,parameters:c}=a;for(let a=0;a<b.length;++a)this.append(b[a]),c.length>a&&this.visitNode(c[a])}visitOperator(a){this.append(a.operator)}visitTable(a){this.visitNode(a.table)}visitSchemableIdentifier(a){a.schema&&(this.visitNode(a.schema),this.append(".")),this.visitNode(a.identifier)}visitCreateTable(a){this.append("create "),a.frontModifiers&&a.frontModifiers.length>0&&(this.compileList(a.frontModifiers," "),this.append(" ")),a.temporary&&this.append("temporary "),this.append("table "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.table),a.selectQuery?(this.append(" as "),this.visitNode(a.selectQuery)):(this.append(" ("),this.compileList([...a.columns,...a.constraints??[]]),this.append(")"),a.onCommit&&(this.append(" on commit "),this.append(a.onCommit)),a.endModifiers&&a.endModifiers.length>0&&(this.append(" "),this.compileList(a.endModifiers," ")))}visitColumnDefinition(a){a.ifNotExists&&this.append("if not exists "),this.visitNode(a.column),this.append(" "),this.visitNode(a.dataType),a.unsigned&&this.append(" unsigned"),a.frontModifiers&&a.frontModifiers.length>0&&(this.append(" "),this.compileList(a.frontModifiers," ")),a.generated&&(this.append(" "),this.visitNode(a.generated)),a.identity&&this.append(" identity"),a.defaultTo&&(this.append(" "),this.visitNode(a.defaultTo)),a.notNull&&this.append(" not null"),a.unique&&this.append(" unique"),a.nullsNotDistinct&&this.append(" nulls not distinct"),a.primaryKey&&this.append(" primary key"),a.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),a.references&&(this.append(" "),this.visitNode(a.references)),a.check&&(this.append(" "),this.visitNode(a.check)),a.endModifiers&&a.endModifiers.length>0&&(this.append(" "),this.compileList(a.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(a){this.append("references "),this.visitNode(a.table),this.append(" ("),this.compileList(a.columns),this.append(")"),a.onDelete&&(this.append(" on delete "),this.append(a.onDelete)),a.onUpdate&&(this.append(" on update "),this.append(a.onUpdate))}visitDropTable(a){this.append("drop table "),a.ifExists&&this.append("if exists "),this.visitNode(a.table),a.cascade&&this.append(" cascade")}visitDataType(a){this.append(a.dataType)}visitOrderBy(a){this.append("order by "),this.compileList(a.items)}visitOrderByItem(a){this.visitNode(a.orderBy),a.collation&&(this.append(" "),this.visitNode(a.collation)),a.direction&&(this.append(" "),this.visitNode(a.direction)),a.nulls&&(this.append(" nulls "),this.append(a.nulls))}visitGroupBy(a){this.append("group by "),this.compileList(a.items)}visitGroupByItem(a){this.visitNode(a.groupBy)}visitUpdateQuery(a){let b=void 0!==this.parentNode&&!i.k.is(this.parentNode)&&!j.z.is(this.parentNode)&&!m.t.is(this.parentNode);if(void 0===this.parentNode&&a.explain&&(this.visitNode(a.explain),this.append(" ")),b&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("update "),a.top&&(this.visitNode(a.top),this.append(" ")),a.table&&(this.visitNode(a.table),this.append(" ")),this.append("set "),a.updates&&this.compileList(a.updates),a.output&&(this.append(" "),this.visitNode(a.output)),a.from&&(this.append(" "),this.visitNode(a.from)),a.joins){if(!a.from)throw Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList(a.joins," ")}a.where&&(this.append(" "),this.visitNode(a.where)),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),a.returning&&(this.append(" "),this.visitNode(a.returning)),b&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitColumnUpdate(a){this.visitNode(a.column),this.append(" = "),this.visitNode(a.value)}visitLimit(a){this.append("limit "),this.visitNode(a.limit)}visitOffset(a){this.append("offset "),this.visitNode(a.offset)}visitOnConflict(a){this.append("on conflict"),a.columns?(this.append(" ("),this.compileList(a.columns),this.append(")")):a.constraint?(this.append(" on constraint "),this.visitNode(a.constraint)):a.indexExpression&&(this.append(" ("),this.visitNode(a.indexExpression),this.append(")")),a.indexWhere&&(this.append(" "),this.visitNode(a.indexWhere)),!0===a.doNothing?this.append(" do nothing"):a.updates&&(this.append(" do update set "),this.compileList(a.updates),a.updateWhere&&(this.append(" "),this.visitNode(a.updateWhere)))}visitOnDuplicateKey(a){this.append("on duplicate key update "),this.compileList(a.updates)}visitCreateIndex(a){this.append("create "),a.unique&&this.append("unique "),this.append("index "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),a.table&&(this.append(" on "),this.visitNode(a.table)),a.using&&(this.append(" using "),this.visitNode(a.using)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.nullsNotDistinct&&this.append(" nulls not distinct"),a.where&&(this.append(" "),this.visitNode(a.where))}visitDropIndex(a){this.append("drop index "),a.ifExists&&this.append("if exists "),this.visitNode(a.name),a.table&&(this.append(" on "),this.visitNode(a.table)),a.cascade&&this.append(" cascade")}visitCreateSchema(a){this.append("create schema "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.schema)}visitDropSchema(a){this.append("drop schema "),a.ifExists&&this.append("if exists "),this.visitNode(a.schema),a.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("primary key ("),this.compileList(a.columns),this.append(")"),this.buildDeferrable(a)}buildDeferrable(a){void 0!==a.deferrable&&(a.deferrable?this.append(" deferrable"):this.append(" not deferrable")),void 0!==a.initiallyDeferred&&(a.initiallyDeferred?this.append(" initially deferred"):this.append(" initially immediate"))}visitUniqueConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("unique"),a.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(a.columns),this.append(")"),this.buildDeferrable(a)}visitCheckConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("check ("),this.visitNode(a.expression),this.append(")")}visitForeignKeyConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("foreign key ("),this.compileList(a.columns),this.append(") "),this.visitNode(a.references),a.onDelete&&(this.append(" on delete "),this.append(a.onDelete)),a.onUpdate&&(this.append(" on update "),this.append(a.onUpdate)),this.buildDeferrable(a)}visitList(a){this.compileList(a.items)}visitWith(a){this.append("with "),a.recursive&&this.append("recursive "),this.compileList(a.expressions)}visitCommonTableExpression(a){this.visitNode(a.name),this.append(" as "),(0,f.Lm)(a.materialized)&&(a.materialized||this.append("not "),this.append("materialized ")),this.visitNode(a.expression)}visitCommonTableExpressionName(a){this.visitNode(a.table),a.columns&&(this.append("("),this.compileList(a.columns),this.append(")"))}visitAlterTable(a){this.append("alter table "),this.visitNode(a.table),this.append(" "),a.renameTo&&(this.append("rename to "),this.visitNode(a.renameTo)),a.setSchema&&(this.append("set schema "),this.visitNode(a.setSchema)),a.addConstraint&&this.visitNode(a.addConstraint),a.dropConstraint&&this.visitNode(a.dropConstraint),a.renameConstraint&&this.visitNode(a.renameConstraint),a.columnAlterations&&this.compileColumnAlterations(a.columnAlterations),a.addIndex&&this.visitNode(a.addIndex),a.dropIndex&&this.visitNode(a.dropIndex)}visitAddColumn(a){this.append("add column "),this.visitNode(a.column)}visitRenameColumn(a){this.append("rename column "),this.visitNode(a.column),this.append(" to "),this.visitNode(a.renameTo)}visitDropColumn(a){this.append("drop column "),this.visitNode(a.column)}visitAlterColumn(a){this.append("alter column "),this.visitNode(a.column),this.append(" "),a.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(a.dataType),a.dataTypeExpression&&(this.append("using "),this.visitNode(a.dataTypeExpression))),a.setDefault&&(this.append("set default "),this.visitNode(a.setDefault)),a.dropDefault&&this.append("drop default"),a.setNotNull&&this.append("set not null"),a.dropNotNull&&this.append("drop not null")}visitModifyColumn(a){this.append("modify column "),this.visitNode(a.column)}visitAddConstraint(a){this.append("add "),this.visitNode(a.constraint)}visitDropConstraint(a){this.append("drop constraint "),a.ifExists&&this.append("if exists "),this.visitNode(a.constraintName),"cascade"===a.modifier?this.append(" cascade"):"restrict"===a.modifier&&this.append(" restrict")}visitRenameConstraint(a){this.append("rename constraint "),this.visitNode(a.oldName),this.append(" to "),this.visitNode(a.newName)}visitSetOperation(a){this.append(a.operator),this.append(" "),a.all&&this.append("all "),this.visitNode(a.expression)}visitCreateView(a){this.append("create "),a.orReplace&&this.append("or replace "),a.materialized&&this.append("materialized "),a.temporary&&this.append("temporary "),this.append("view "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),this.append(" "),a.columns&&(this.append("("),this.compileList(a.columns),this.append(") ")),a.as&&(this.append("as "),this.visitNode(a.as))}visitRefreshMaterializedView(a){this.append("refresh materialized view "),a.concurrently&&this.append("concurrently "),this.visitNode(a.name),a.withNoData?this.append(" with no data"):this.append(" with data")}visitDropView(a){this.append("drop "),a.materialized&&this.append("materialized "),this.append("view "),a.ifExists&&this.append("if exists "),this.visitNode(a.name),a.cascade&&this.append(" cascade")}visitGenerated(a){this.append("generated "),a.always&&this.append("always "),a.byDefault&&this.append("by default "),this.append("as "),a.identity&&this.append("identity"),a.expression&&(this.append("("),this.visitNode(a.expression),this.append(")")),a.stored&&this.append(" stored")}visitDefaultValue(a){this.append("default "),this.visitNode(a.defaultValue)}visitSelectModifier(a){a.rawModifier?this.visitNode(a.rawModifier):this.append(q[a.modifier]),a.of&&(this.append(" of "),this.compileList(a.of,", "))}visitCreateType(a){this.append("create type "),this.visitNode(a.name),a.enum&&(this.append(" as enum "),this.visitNode(a.enum))}visitDropType(a){this.append("drop type "),a.ifExists&&this.append("if exists "),this.visitNode(a.name)}visitExplain(a){this.append("explain"),(a.options||a.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),a.options&&(this.visitNode(a.options),a.format&&this.append(this.getExplainOptionsDelimiter())),a.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(a.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(a){this.append("default")}visitAggregateFunction(a){this.append(a.func),this.append("("),a.distinct&&this.append("distinct "),this.compileList(a.aggregated),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),this.append(")"),a.withinGroup&&(this.append(" within group ("),this.visitNode(a.withinGroup),this.append(")")),a.filter&&(this.append(" filter("),this.visitNode(a.filter),this.append(")")),a.over&&(this.append(" "),this.visitNode(a.over))}visitOver(a){this.append("over("),a.partitionBy&&(this.visitNode(a.partitionBy),a.orderBy&&this.append(" ")),a.orderBy&&this.visitNode(a.orderBy),this.append(")")}visitPartitionBy(a){this.append("partition by "),this.compileList(a.items)}visitPartitionByItem(a){this.visitNode(a.partitionBy)}visitBinaryOperation(a){this.visitNode(a.leftOperand),this.append(" "),this.visitNode(a.operator),this.append(" "),this.visitNode(a.rightOperand)}visitUnaryOperation(a){this.visitNode(a.operator),this.isMinusOperator(a.operator)||this.append(" "),this.visitNode(a.operand)}isMinusOperator(a){return h.zX.is(a)&&"-"===a.operator}visitUsing(a){this.append("using "),this.compileList(a.tables)}visitFunction(a){this.append(a.func),this.append("("),this.compileList(a.arguments),this.append(")")}visitCase(a){this.append("case"),a.value&&(this.append(" "),this.visitNode(a.value)),a.when&&(this.append(" "),this.compileList(a.when," ")),a.else&&(this.append(" else "),this.visitNode(a.else)),this.append(" end"),a.isStatement&&this.append(" case")}visitWhen(a){this.append("when "),this.visitNode(a.condition),a.result&&(this.append(" then "),this.visitNode(a.result))}visitJSONReference(a){this.visitNode(a.reference),this.visitNode(a.traversal)}visitJSONPath(a){for(let b of(a.inOperator&&this.visitNode(a.inOperator),this.append("'$"),a.pathLegs))this.visitNode(b);this.append("'")}visitJSONPathLeg(a){let b="ArrayLocation"===a.type;this.append(b?"[":"."),this.append(String(a.value)),b&&this.append("]")}visitJSONOperatorChain(a){for(let b=0,c=a.values.length;b<c;b++)b===c-1?this.visitNode(a.operator):this.append("->"),this.visitNode(a.values[b])}visitMergeQuery(a){a.with&&(this.visitNode(a.with),this.append(" ")),this.append("merge "),a.top&&(this.visitNode(a.top),this.append(" ")),this.append("into "),this.visitNode(a.into),a.using&&(this.append(" "),this.visitNode(a.using)),a.whens&&(this.append(" "),this.compileList(a.whens," ")),a.returning&&(this.append(" "),this.visitNode(a.returning)),a.output&&(this.append(" "),this.visitNode(a.output)),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitMatched(a){a.not&&this.append("not "),this.append("matched"),a.bySource&&this.append(" by source")}visitAddIndex(a){this.append("add "),a.unique&&this.append("unique "),this.append("index "),this.visitNode(a.name),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.using&&(this.append(" using "),this.visitNode(a.using))}visitCast(a){this.append("cast("),this.visitNode(a.expression),this.append(" as "),this.visitNode(a.dataType),this.append(")")}visitFetch(a){this.append("fetch next "),this.visitNode(a.rowCount),this.append(` rows ${a.modifier}`)}visitOutput(a){this.append("output "),this.compileList(a.selections)}visitTop(a){this.append(`top(${a.expression})`),a.modifiers&&this.append(` ${a.modifiers}`)}visitOrAction(a){this.append(a.action)}visitCollate(a){this.append("collate "),this.visitNode(a.collation)}append(a){this.#aJ+=a}appendValue(a){this.addParameter(a),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(a){let b=this.getLeftIdentifierWrapper(),c=this.getRightIdentifierWrapper(),d="";for(let e of a)d+=e,e===b?d+=b:e===c&&(d+=c);return d}sanitizeStringLiteral(a){return a.replace(o,"''")}addParameter(a){this.#aK.push(a)}appendImmediateValue(a){if((0,f.Kg)(a))this.appendStringLiteral(a);else if((0,f.Et)(a)||(0,f.Lm)(a)||(0,f.sI)(a))this.append(a.toString());else if((0,f.kZ)(a))this.append("null");else if((0,f.$P)(a))this.appendImmediateValue(a.toISOString());else throw Error(`invalid immediate value ${a}`)}appendStringLiteral(a){this.append("'"),this.append(this.sanitizeStringLiteral(a)),this.append("'")}sortSelectModifiers(a){return a.sort((a,b)=>a.modifier&&b.modifier?r[a.modifier]-r[b.modifier]:1),(0,f.CN)(a)}compileColumnAlterations(a){this.compileList(a)}announcesNewColumnDataType(){return!0}}let q=(0,f.CN)({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),r=(0,f.CN)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),s=(0,f.CN)({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"})},43777:(a,b,c)=>{c.d(b,{K:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"OrNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"OrNode",left:a,right:b})})},44228:(a,b,c)=>{c.d(b,{JB:()=>j,M$:()=>m,Xm:()=>l,uJ:()=>k});var d=c(17938),e=c(31866),f=c(34850),g=c(63860),h=c(69679),i=c(4308);function j(a){return(0,d.MH)(a)?a.map(a=>k(a)):[k(a)]}function k(a){return(0,d.Kg)(a)?l(a):(0,i.uc)(a)?a.toOperationNode():(0,g.v0)(a)}function l(a){let b=" as ";if(!a.includes(b))return m(a);{let[c,d]=a.split(b).map(n);return e.N.create(m(c),h.O.create(d))}}function m(a){if(!a.includes("."))return f.H.create(a);{let[b,c]=a.split(".").map(n);return f.H.createWithSchema(b,c)}}function n(a){return a.trim()}},45335:(a,b,c)=>{c.d(b,{OU:()=>j});var d=c(97791),e=c(17938),f=c(62922),g=c(90998),h=c(16469),i=c(4787);class j{#c;constructor(a){this.#c=(0,e.CN)(a)}when(...a){return new k({...this.#c,node:f.P.cloneWithWhen(this.#c.node,g.t.create((0,h.GB)(a)))})}}class k{#c;constructor(a){this.#c=(0,e.CN)(a)}then(a){return new l({...this.#c,node:f.P.cloneWithThen(this.#c.node,(0,i.qH)(a)?(0,i.dJ)(a):(0,i.$s)(a))})}}class l{#c;constructor(a){this.#c=(0,e.CN)(a)}when(...a){return new k({...this.#c,node:f.P.cloneWithWhen(this.#c.node,g.t.create((0,h.GB)(a)))})}else(a){return new m({...this.#c,node:f.P.cloneWith(this.#c.node,{else:(0,i.qH)(a)?(0,i.dJ)(a):(0,i.$s)(a)})})}end(){return new d.Is(f.P.cloneWith(this.#c.node,{isStatement:!1}))}endCase(){return new d.Is(f.P.cloneWith(this.#c.node,{isStatement:!0}))}}class m{#c;constructor(a){this.#c=(0,e.CN)(a)}end(){return new d.Is(f.P.cloneWith(this.#c.node,{isStatement:!1}))}endCase(){return new d.Is(f.P.cloneWith(this.#c.node,{isStatement:!0}))}}},46866:(a,b,c)=>{c.d(b,{N:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"FromNode"===a.kind,create:a=>(0,d.CN)({kind:"FromNode",froms:(0,d.CN)(a)}),cloneWithFroms:(a,b)=>(0,d.CN)({...a,froms:(0,d.CN)([...a.froms,...b])})})},47724:(a,b,c)=>{c.d(b,{U:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"SelectAllNode"===a.kind,create:()=>(0,d.CN)({kind:"SelectAllNode"})})},48070:(a,b,c)=>{c.d(b,{a:()=>t,c:()=>f,d:()=>i,f:()=>h,i:()=>w,l:()=>l,n:()=>v,o:()=>q,p:()=>j,s:()=>m,t:()=>r,u:()=>k});let d=Object.create(null),e=a=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(a?d:globalThis),f=new Proxy(d,{get:(a,b)=>e()[b]??d[b],has:(a,b)=>b in e()||b in d,set:(a,b,c)=>(e(!0)[b]=c,!0),deleteProperty(a,b){if(!b)return!1;let c=e(!0);return delete c[b],!0},ownKeys:()=>Object.keys(e(!0))}),g="undefined"!=typeof process&&process.env&&"production"||"",h="production"===g,i=()=>"dev"===g||"development"===g,j=()=>"test"===g||function(a){return!!a&&"false"!==a}(f.TEST);function k(a,b){return"undefined"!=typeof process&&process.env?process.env[a]??b:"undefined"!=typeof Deno?Deno.env.get(a)??b:"undefined"!=typeof Bun?Bun.env[a]??b:b}function l(a,b=!0){let c=k(a);return c?"0"!==c&&"false"!==c.toLowerCase()&&""!==c:b}let m=Object.freeze({get BETTER_AUTH_SECRET(){return k("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return k("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return k("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return k("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return k("NODE_ENV","development")},get PACKAGE_VERSION(){return k("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return k("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}}),n={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},o=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),p=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];function q(){if(void 0!==k("FORCE_COLOR"))switch(k("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==k("NODE_DISABLE_COLORS")&&""!==k("NODE_DISABLE_COLORS")||void 0!==k("NO_COLOR")&&""!==k("NO_COLOR")||"dumb"===k("TERM"))return 1;if(k("TMUX"))return 24;if("TF_BUILD"in f&&"AGENT_NAME"in f)return 4;if("CI"in f){for(let{0:a,1:b}of o)if(a in f)return b;return"codeship"===k("CI_NAME")?8:1}if("TEAMCITY_VERSION"in f)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(k("TEAMCITY_VERSION"))?4:1;switch(k("TERM_PROGRAM")){case"iTerm.app":if(!k("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(k("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===k("COLORTERM")||"24bit"===k("COLORTERM"))return 24;if(k("TERM")){if(null!==/truecolor/.exec(k("TERM")))return 24;if(null!==/^xterm-256/.exec(k("TERM")))return 8;let a=k("TERM").toLowerCase();if(n[a])return n[a];if(p.some(b=>null!==b.exec(a)))return 4}return k("COLORTERM")?4:1}let r={reset:"\x1b[0m",bright:"\x1b[1m",dim:"\x1b[2m",undim:"\x1b[22m",underscore:"\x1b[4m",blink:"\x1b[5m",reverse:"\x1b[7m",hidden:"\x1b[8m",fg:{black:"\x1b[30m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"},bg:{black:"\x1b[40m",red:"\x1b[41m",green:"\x1b[42m",yellow:"\x1b[43m",blue:"\x1b[44m",magenta:"\x1b[45m",cyan:"\x1b[46m",white:"\x1b[47m"}},s=["info","success","warn","error","debug"];function t(a,b){return s.indexOf(b)<=s.indexOf(a)}let u={info:r.fg.blue,success:r.fg.green,warn:r.fg.yellow,error:r.fg.red,debug:r.fg.magenta},v=a=>{let b=a?.disabled!==!0,c=a?.level??"error",d=a?.disableColors!==void 0?!a.disableColors:1!==q();return{...Object.fromEntries(s.map(e=>[e,(...[f,...g])=>((e,f,g=[])=>{if(!b||!t(c,e))return;let h=((a,b,c)=>{let d=new Date().toISOString();return c?`${r.dim}${d}${r.reset} ${u[a]}${a.toUpperCase()}${r.reset} ${r.bright}[Better Auth]:${r.reset} ${b}`:`${d} ${a.toUpperCase()} [Better Auth]: ${b}`})(e,f,d);if(!a||"function"!=typeof a.log)return void("error"===e?console.error(h,...g):"warn"===e?console.warn(h,...g):console.log(h,...g));a.log("success"===e?"info":e,f,...g)})(e,f,g)])),get level(){return c}}},w=v()},49957:(a,b,c)=>{c.d(b,{i:()=>av,n:()=>az,r:()=>ay,t:()=>au});var d=c(85277),e=c(82153);let f=Uint8Array.of(0),g=Uint8Array.of(),h=(a,b,c,h,i)=>(function(a,b,c,h=32){(0,e.sd)(a),(0,e.Fe)(h,"length");let i=a.outputLen;if(h>255*i)throw Error("Length must be <= 255*HashLen");let j=Math.ceil(h/i);void 0===c?c=g:(0,e.DO)(c,void 0,"info");let k=new Uint8Array(j*i),l=d.w.create(a,b),m=l._cloneInto(),n=new Uint8Array(l.outputLen);for(let a=0;a<j;a++)f[0]=a+1,m.update(0===a?g:n).update(c).update(f).digestInto(n),k.set(n,i*a),l._cloneInto(m);return l.destroy(),m.destroy(),(0,e.uH)(n,f),k.slice(0,h)})(a,function(a,b,c){return(0,e.sd)(a),void 0===c&&(c=new Uint8Array(a.outputLen)),(0,d.w)(a,c,b)}(a,b,c),h,i);var i=c(71002),j=c(99609),k=c(80094),l=c(31741),m=c(62118);async function n(a,b,c){let d=await (0,m.j)(a,b,"sign");return(0,l.O)(a,d),new Uint8Array(await crypto.subtle.sign((0,k.B)(a,d.algorithm),d,c))}var o=c(97763),p=c(63624),q=c(11980),r=c(37193),s=c(55365),t=c(30869);class u{#aL;#aM;#aN;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#aL=a}setProtectedHeader(a){if(this.#aM)throw TypeError("setProtectedHeader can only be called once");return this.#aM=a,this}setUnprotectedHeader(a){if(this.#aN)throw TypeError("setUnprotectedHeader can only be called once");return this.#aN=a,this}async sign(a,b){let c,d,e,f;if(!this.#aM&&!this.#aN)throw new p.Ye("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,o.f)(this.#aM,this.#aN))throw new p.Ye("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...this.#aM,...this.#aN},h=(0,s.n)(p.Ye,new Map([["b64",!0]]),b?.crit,this.#aM,g),i=!0;if(h.has("b64")&&"boolean"!=typeof(i=this.#aM.b64))throw new p.Ye('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:k}=g;if("string"!=typeof k||!k)throw new p.Ye('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,r.y)(k,a,"sign"),i?(c=(0,j.l)(this.#aL),d=(0,q.lF)(c)):(d=this.#aL,c=""),this.#aM?(e=(0,j.l)(JSON.stringify(this.#aM)),f=(0,q.lF)(e)):(e="",f=new Uint8Array);let l=(0,q.xW)(f,(0,q.lF)("."),d),m=await (0,t.l)(a,k),u=await n(k,m,l),v={signature:(0,j.l)(u),payload:c};return this.#aN&&(v.header=this.#aN),this.#aM&&(v.protected=e),v}}class v{#aO;constructor(a){this.#aO=new u(a)}setProtectedHeader(a){return this.#aO.setProtectedHeader(a),this}async sign(a,b){let c=await this.#aO.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}var w=c(87404);class x{#aM;#aP;constructor(a={}){this.#aP=new w.cE(a)}setIssuer(a){return this.#aP.iss=a,this}setSubject(a){return this.#aP.sub=a,this}setAudience(a){return this.#aP.aud=a,this}setJti(a){return this.#aP.jti=a,this}setNotBefore(a){return this.#aP.nbf=a,this}setExpirationTime(a){return this.#aP.exp=a,this}setIssuedAt(a){return this.#aP.iat=a,this}setProtectedHeader(a){return this.#aM=a,this}async sign(a,b){let c=new v(this.#aP.data());if(c.setProtectedHeader(this.#aM),Array.isArray(this.#aM?.crit)&&this.#aM.crit.includes("b64")&&!1===this.#aM.b64)throw new p.Dp("JWTs MUST NOT use unencoded payload");return c.sign(a,b)}}var y=c(54833);async function z(a,b){let c=`SHA-${a.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(c,b))}var A=c(9400),B=c(20771),C=c(57246);async function D(a){if((0,A.D2)(a))if("secret"!==a.type)return a.export({format:"jwk"});else a=a.export();if(a instanceof Uint8Array)return{kty:"oct",k:(0,j.l)(a)};if(!(0,A.R7)(a))throw TypeError((0,C.X)(a,"CryptoKey","KeyObject","Uint8Array"));if(!a.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:b,key_ops:c,alg:d,use:e,...f}=await crypto.subtle.exportKey("jwk",a);return"AKP"===f.kty&&(f.alg=d),f}async function E(a){return D(a)}let F=(a,b)=>{if("string"!=typeof a||!a)throw new p._L(`${b} missing or invalid`)};async function G(a,b){let c,d;if((0,B.ll)(a))c=a;else if((0,A.P2)(a))c=await E(a);else throw TypeError((0,C.X)(a,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(b??="sha256")&&"sha384"!==b&&"sha512"!==b)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(c.kty){case"AKP":F(c.alg,'"alg" (Algorithm) Parameter'),F(c.pub,'"pub" (Public key) Parameter'),d={alg:c.alg,kty:c.kty,pub:c.pub};break;case"EC":F(c.crv,'"crv" (Curve) Parameter'),F(c.x,'"x" (X Coordinate) Parameter'),F(c.y,'"y" (Y Coordinate) Parameter'),d={crv:c.crv,kty:c.kty,x:c.x,y:c.y};break;case"OKP":F(c.crv,'"crv" (Subtype of Key Pair) Parameter'),F(c.x,'"x" (Public Key) Parameter'),d={crv:c.crv,kty:c.kty,x:c.x};break;case"RSA":F(c.e,'"e" (Exponent) Parameter'),F(c.n,'"n" (Modulus) Parameter'),d={e:c.e,kty:c.kty,n:c.n};break;case"oct":F(c.k,'"k" (Key Value) Parameter'),d={k:c.k,kty:c.kty};break;default:throw new p.T0('"kty" (Key Type) Parameter missing or unsupported')}let e=(0,q.lF)(JSON.stringify(d));return(0,j.l)(await z(b,e))}let H=Symbol();function I(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new p.T0(`Unsupported JWE Algorithm: ${a}`)}}function J(a,b){if(b.length<<3!==I(a))throw new p.aA("Invalid Initialization Vector length")}function K(a,b){let c=a.byteLength<<3;if(c!==b)throw new p.aA(`Invalid Content Encryption Key length. Expected ${b} bits, got ${c} bits`)}var L=c(93241);async function M(a,b,c,d,e){if(!(c instanceof Uint8Array))throw TypeError((0,C.X)(c,"Uint8Array"));let f=parseInt(a.slice(1,4),10),g=await crypto.subtle.importKey("raw",c.subarray(f>>3),"AES-CBC",!1,["encrypt"]),h=await crypto.subtle.importKey("raw",c.subarray(0,f>>3),{hash:`SHA-${f<<1}`,name:"HMAC"},!1,["sign"]),i=new Uint8Array(await crypto.subtle.encrypt({iv:d,name:"AES-CBC"},g,b)),j=(0,q.xW)(e,d,i,(0,q.mx)(e.length<<3));return{ciphertext:i,tag:new Uint8Array((await crypto.subtle.sign("HMAC",h,j)).slice(0,f>>3)),iv:d}}async function N(a,b,c,d,e){let f;c instanceof Uint8Array?f=await crypto.subtle.importKey("raw",c,"AES-GCM",!1,["encrypt"]):((0,L.$)(c,a,"encrypt"),f=c);let g=new Uint8Array(await crypto.subtle.encrypt({additionalData:e,iv:d,name:"AES-GCM",tagLength:128},f,b)),h=g.slice(-16);return{ciphertext:g.slice(0,-16),tag:h,iv:d}}async function O(a,b,c,d,e){if(!(0,A.R7)(c)&&!(c instanceof Uint8Array))throw TypeError((0,C.X)(c,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(d)J(a,d);else d=crypto.getRandomValues(new Uint8Array(I(a)>>3));switch(a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return c instanceof Uint8Array&&K(c,parseInt(a.slice(-3),10)),M(a,b,c,d,e);case"A128GCM":case"A192GCM":case"A256GCM":return c instanceof Uint8Array&&K(c,parseInt(a.slice(1,4),10)),N(a,b,c,d,e);default:throw new p.T0("Unsupported JWE Content Encryption Algorithm")}}function P(a,b){if(a.algorithm.length!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function Q(a,b,c){return a instanceof Uint8Array?crypto.subtle.importKey("raw",a,"AES-KW",!0,[c]):((0,L.$)(a,b,c),a)}async function R(a,b,c){let d=await Q(b,a,"wrapKey");P(d,a);let e=await crypto.subtle.importKey("raw",c,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",e,d,"AES-KW"))}async function S(a,b,c){let d=await Q(b,a,"unwrapKey");P(d,a);let e=await crypto.subtle.unwrapKey("raw",c,d,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",e))}function T(a){return(0,q.xW)((0,q.VS)(a.length),a)}async function U(a,b,c){let d=b>>3,e=Math.ceil(d/32),f=new Uint8Array(32*e);for(let b=1;b<=e;b++){let d=new Uint8Array(4+a.length+c.length);d.set((0,q.VS)(b),0),d.set(a,4),d.set(c,4+a.length);let e=await z("sha256",d);f.set(e,(b-1)*32)}return f.slice(0,d)}async function V(a,b,c,d,e=new Uint8Array,f=new Uint8Array){var g;(0,L.$)(a,"ECDH"),(0,L.$)(b,"ECDH","deriveBits");let h=T((0,q.lF)(c)),i=T(e),j=T(f),k=(0,q.VS)(d),l=new Uint8Array,m=(0,q.xW)(h,i,j,k,l);return U(new Uint8Array(await crypto.subtle.deriveBits({name:a.algorithm.name,public:a},b,"X25519"===(g=a).algorithm.name?256:Math.ceil(parseInt(g.algorithm.namedCurve.slice(-3),10)/8)<<3)),d,m)}function W(a){switch(a.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===a.algorithm.name}}async function X(a,b,c,d){if(!(a instanceof Uint8Array)||a.length<8)throw new p.aA("PBES2 Salt Input must be 8 or more octets");let e=(0,q.xW)((0,q.lF)(b),Uint8Array.of(0),a),f=parseInt(b.slice(13,16),10),g={hash:`SHA-${b.slice(8,11)}`,iterations:c,name:"PBKDF2",salt:e},h=await (d instanceof Uint8Array?crypto.subtle.importKey("raw",d,"PBKDF2",!1,["deriveBits"]):((0,L.$)(d,b,"deriveBits"),d));return new Uint8Array(await crypto.subtle.deriveBits(g,h,f))}async function Y(a,b,c,d=2048,e=crypto.getRandomValues(new Uint8Array(16))){let f=await X(e,a,d,b);return{encryptedKey:await R(a.slice(-6),f,c),p2c:d,p2s:(0,j.l)(e)}}async function Z(a,b,c,d,e){let f=await X(e,a,d,b);return S(a.slice(-6),f,c)}let $=a=>{switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new p.T0(`alg ${a} is not supported either by JOSE or your javascript runtime`)}};async function _(a,b,c){return(0,L.$)(b,a,"encrypt"),(0,l.O)(a,b),new Uint8Array(await crypto.subtle.encrypt($(a),b,c))}async function aa(a,b,c){return(0,L.$)(b,a,"decrypt"),(0,l.O)(a,b),new Uint8Array(await crypto.subtle.decrypt($(a),b,c))}function ab(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new p.T0(`Unsupported JWE Algorithm: ${a}`)}}let ac=a=>crypto.getRandomValues(new Uint8Array(ab(a)>>3));async function ad(a,b){if(!(a instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(b instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let c={name:"HMAC",hash:"SHA-256"},d=await crypto.subtle.generateKey(c,!1,["sign"]),e=new Uint8Array(await crypto.subtle.sign(c,d,a)),f=new Uint8Array(await crypto.subtle.sign(c,d,b)),g=0,h=-1;for(;++h<32;)g|=e[h]^f[h];return 0===g}async function ae(a,b,c,d,e,f){let g,h;if(!(b instanceof Uint8Array))throw TypeError((0,C.X)(b,"Uint8Array"));let i=parseInt(a.slice(1,4),10),j=await crypto.subtle.importKey("raw",b.subarray(i>>3),"AES-CBC",!1,["decrypt"]),k=await crypto.subtle.importKey("raw",b.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),l=(0,q.xW)(f,d,c,(0,q.mx)(f.length<<3)),m=new Uint8Array((await crypto.subtle.sign("HMAC",k,l)).slice(0,i>>3));try{g=await ad(e,m)}catch{}if(!g)throw new p.xO;try{h=new Uint8Array(await crypto.subtle.decrypt({iv:d,name:"AES-CBC"},j,c))}catch{}if(!h)throw new p.xO;return h}async function af(a,b,c,d,e,f){let g;b instanceof Uint8Array?g=await crypto.subtle.importKey("raw",b,"AES-GCM",!1,["decrypt"]):((0,L.$)(b,a,"decrypt"),g=b);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:f,iv:d,name:"AES-GCM",tagLength:128},g,(0,q.xW)(c,e)))}catch{throw new p.xO}}async function ag(a,b,c,d,e,f){if(!(0,A.R7)(b)&&!(b instanceof Uint8Array))throw TypeError((0,C.X)(b,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!d)throw new p.aA("JWE Initialization Vector missing");if(!e)throw new p.aA("JWE Authentication Tag missing");switch(J(a,d),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return b instanceof Uint8Array&&K(b,parseInt(a.slice(-3),10)),ae(a,b,c,d,e,f);case"A128GCM":case"A192GCM":case"A256GCM":return b instanceof Uint8Array&&K(b,parseInt(a.slice(1,4),10)),af(a,b,c,d,e,f);default:throw new p.T0("Unsupported JWE Content Encryption Algorithm")}}async function ah(a,b,c,d){let e=a.slice(0,7),f=await O(e,c,b,d,new Uint8Array);return{encryptedKey:f.ciphertext,iv:(0,j.l)(f.iv),tag:(0,j.l)(f.tag)}}async function ai(a,b,c,d,e){return ag(a.slice(0,7),b,c,d,e,new Uint8Array)}async function aj(a,b,c,d,e={}){let f,g,h;switch(a){case"dir":h=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i;if((0,A.Tz)(c),!W(c))throw new p.T0("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:k,apv:l}=e;i=e.epk?await (0,t.l)(e.epk,a):(await crypto.subtle.generateKey(c.algorithm,!0,["deriveBits"])).privateKey;let{x:m,y:n,crv:o,kty:q}=await E(i),r=await V(c,i,"ECDH-ES"===a?b:a,"ECDH-ES"===a?ab(b):parseInt(a.slice(-5,-2),10),k,l);if(g={epk:{x:m,crv:o,kty:q}},"EC"===q&&(g.epk.y=n),k&&(g.apu=(0,j.l)(k)),l&&(g.apv=(0,j.l)(l)),"ECDH-ES"===a){h=r;break}h=d||ac(b);let s=a.slice(-6);f=await R(s,r,h);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h=d||ac(b),(0,A.Tz)(c),f=await _(a,c,h);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{h=d||ac(b);let{p2c:i,p2s:j}=e;({encryptedKey:f,...g}=await Y(a,c,h,i,j));break}case"A128KW":case"A192KW":case"A256KW":h=d||ac(b),f=await R(a,c,h);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{h=d||ac(b);let{iv:i}=e;({encryptedKey:f,...g}=await ah(a,c,h,i));break}default:throw new p.T0('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:h,encryptedKey:f,parameters:g}}class ak{#aQ;#aM;#aR;#aN;#aS;#aT;#aU;#aV;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#aQ=a}setKeyManagementParameters(a){if(this.#aV)throw TypeError("setKeyManagementParameters can only be called once");return this.#aV=a,this}setProtectedHeader(a){if(this.#aM)throw TypeError("setProtectedHeader can only be called once");return this.#aM=a,this}setSharedUnprotectedHeader(a){if(this.#aR)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#aR=a,this}setUnprotectedHeader(a){if(this.#aN)throw TypeError("setUnprotectedHeader can only be called once");return this.#aN=a,this}setAdditionalAuthenticatedData(a){return this.#aS=a,this}setContentEncryptionKey(a){if(this.#aT)throw TypeError("setContentEncryptionKey can only be called once");return this.#aT=a,this}setInitializationVector(a){if(this.#aU)throw TypeError("setInitializationVector can only be called once");return this.#aU=a,this}async encrypt(a,b){let c,d,e,f,g,h;if(!this.#aM&&!this.#aN&&!this.#aR)throw new p.aA("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,o.f)(this.#aM,this.#aN,this.#aR))throw new p.aA("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let i={...this.#aM,...this.#aN,...this.#aR};if((0,s.n)(p.aA,new Map,b?.crit,this.#aM,i),void 0!==i.zip)throw new p.T0('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:k,enc:l}=i;if("string"!=typeof k||!k)throw new p.aA('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof l||!l)throw new p.aA('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#aT&&("dir"===k||"ECDH-ES"===k))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${k}`);(0,r.y)("dir"===k?l:k,a,"encrypt");{let e,f=await (0,t.l)(a,k);({cek:d,encryptedKey:c,parameters:e}=await aj(k,l,f,this.#aT,this.#aV)),e&&(b&&H in b?this.#aN?this.#aN={...this.#aN,...e}:this.setUnprotectedHeader(e):this.#aM?this.#aM={...this.#aM,...e}:this.setProtectedHeader(e))}if(this.#aM?(f=(0,j.l)(JSON.stringify(this.#aM)),g=(0,q.lF)(f)):(f="",g=new Uint8Array),this.#aS){h=(0,j.l)(this.#aS);let a=(0,q.lF)(h);e=(0,q.xW)(g,(0,q.lF)("."),a)}else e=g;let{ciphertext:m,tag:n,iv:u}=await O(l,this.#aQ,d,this.#aU,e),v={ciphertext:(0,j.l)(m)};return u&&(v.iv=(0,j.l)(u)),n&&(v.tag=(0,j.l)(n)),c&&(v.encrypted_key=(0,j.l)(c)),h&&(v.aad=h),this.#aM&&(v.protected=f),this.#aR&&(v.unprotected=this.#aR),this.#aN&&(v.header=this.#aN),v}}class al{#aO;constructor(a){this.#aO=new ak(a)}setContentEncryptionKey(a){return this.#aO.setContentEncryptionKey(a),this}setInitializationVector(a){return this.#aO.setInitializationVector(a),this}setProtectedHeader(a){return this.#aO.setProtectedHeader(a),this}setKeyManagementParameters(a){return this.#aO.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this.#aO.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}class am{#aT;#aU;#aV;#aM;#aW;#aX;#aY;#aP;constructor(a={}){this.#aP=new w.cE(a)}setIssuer(a){return this.#aP.iss=a,this}setSubject(a){return this.#aP.sub=a,this}setAudience(a){return this.#aP.aud=a,this}setJti(a){return this.#aP.jti=a,this}setNotBefore(a){return this.#aP.nbf=a,this}setExpirationTime(a){return this.#aP.exp=a,this}setIssuedAt(a){return this.#aP.iat=a,this}setProtectedHeader(a){if(this.#aM)throw TypeError("setProtectedHeader can only be called once");return this.#aM=a,this}setKeyManagementParameters(a){if(this.#aV)throw TypeError("setKeyManagementParameters can only be called once");return this.#aV=a,this}setContentEncryptionKey(a){if(this.#aT)throw TypeError("setContentEncryptionKey can only be called once");return this.#aT=a,this}setInitializationVector(a){if(this.#aU)throw TypeError("setInitializationVector can only be called once");return this.#aU=a,this}replicateIssuerAsHeader(){return this.#aW=!0,this}replicateSubjectAsHeader(){return this.#aX=!0,this}replicateAudienceAsHeader(){return this.#aY=!0,this}async encrypt(a,b){let c=new al(this.#aP.data());return this.#aM&&(this.#aW||this.#aX||this.#aY)&&(this.#aM={...this.#aM,iss:this.#aW?this.#aP.iss:void 0,sub:this.#aX?this.#aP.sub:void 0,aud:this.#aY?this.#aP.aud:void 0}),c.setProtectedHeader(this.#aM),this.#aU&&c.setInitializationVector(this.#aU),this.#aT&&c.setContentEncryptionKey(this.#aT),this.#aV&&c.setKeyManagementParameters(this.#aV),c.encrypt(a,b)}}var an=c(20228),ao=c(65805);async function ap(a,b,c,d,e){switch(a){case"dir":if(void 0!==c)throw new p.aA("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new p.aA("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e,f;if(!(0,an.G)(d.epk))throw new p.aA('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if((0,A.Tz)(b),!W(b))throw new p.T0("ECDH with the provided key is not allowed or not supported by your javascript runtime");let g=await (0,ao.Og)(d.epk,a);if((0,A.Tz)(g),void 0!==d.apu){if("string"!=typeof d.apu)throw new p.aA('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{e=(0,j.D)(d.apu)}catch{throw new p.aA("Failed to base64url decode the apu")}}if(void 0!==d.apv){if("string"!=typeof d.apv)throw new p.aA('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{f=(0,j.D)(d.apv)}catch{throw new p.aA("Failed to base64url decode the apv")}}let h=await V(g,b,"ECDH-ES"===a?d.enc:a,"ECDH-ES"===a?ab(d.enc):parseInt(a.slice(-5,-2),10),e,f);if("ECDH-ES"===a)return h;if(void 0===c)throw new p.aA("JWE Encrypted Key missing");return S(a.slice(-6),h,c)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new p.aA("JWE Encrypted Key missing");return(0,A.Tz)(b),aa(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let f;if(void 0===c)throw new p.aA("JWE Encrypted Key missing");if("number"!=typeof d.p2c)throw new p.aA('JOSE Header "p2c" (PBES2 Count) missing or invalid');let g=e?.maxPBES2Count||1e4;if(d.p2c>g)throw new p.aA('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof d.p2s)throw new p.aA('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{f=(0,j.D)(d.p2s)}catch{throw new p.aA("Failed to base64url decode the p2s")}return Z(a,b,c,d.p2c,f)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new p.aA("JWE Encrypted Key missing");return S(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let e,f;if(void 0===c)throw new p.aA("JWE Encrypted Key missing");if("string"!=typeof d.iv)throw new p.aA('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof d.tag)throw new p.aA('JOSE Header "tag" (Authentication Tag) missing or invalid');try{e=(0,j.D)(d.iv)}catch{throw new p.aA("Failed to base64url decode the iv")}try{f=(0,j.D)(d.tag)}catch{throw new p.aA("Failed to base64url decode the tag")}return ai(a,b,c,e,f)}default:throw new p.T0('Invalid or unsupported "alg" (JWE Algorithm) header value')}}var aq=c(23003);async function ar(a,b,c){let d,e,f,g,h,i,k;if(!(0,an.G)(a))throw new p.aA("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new p.aA("JOSE Header missing");if(void 0!==a.iv&&"string"!=typeof a.iv)throw new p.aA("JWE Initialization Vector incorrect type");if("string"!=typeof a.ciphertext)throw new p.aA("JWE Ciphertext missing or incorrect type");if(void 0!==a.tag&&"string"!=typeof a.tag)throw new p.aA("JWE Authentication Tag incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new p.aA("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new p.aA("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new p.aA("JWE AAD incorrect type");if(void 0!==a.header&&!(0,an.G)(a.header))throw new p.aA("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!(0,an.G)(a.unprotected))throw new p.aA("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=(0,j.D)(a.protected);d=JSON.parse(q.D0.decode(b))}catch{throw new p.aA("JWE Protected Header is invalid")}if(!(0,o.f)(d,a.header,a.unprotected))throw new p.aA("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let l={...d,...a.header,...a.unprotected};if((0,s.n)(p.aA,new Map,c?.crit,d,l),void 0!==l.zip)throw new p.T0('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:m,enc:n}=l;if("string"!=typeof m||!m)throw new p.aA("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof n||!n)throw new p.aA("missing JWE Encryption Algorithm (enc) in JWE Header");let u=c&&(0,aq.F)("keyManagementAlgorithms",c.keyManagementAlgorithms),v=c&&(0,aq.F)("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(u&&!u.has(m)||!u&&m.startsWith("PBES2"))throw new p.Rb('"alg" (Algorithm) Header Parameter value not allowed');if(v&&!v.has(n))throw new p.Rb('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==a.encrypted_key)try{e=(0,j.D)(a.encrypted_key)}catch{throw new p.aA("Failed to base64url decode the encrypted_key")}let w=!1;"function"==typeof b&&(b=await b(d,a),w=!0),(0,r.y)("dir"===m?n:m,b,"decrypt");let x=await (0,t.l)(b,m);try{f=await ap(m,x,e,l,c)}catch(a){if(a instanceof TypeError||a instanceof p.aA||a instanceof p.T0)throw a;f=ac(n)}if(void 0!==a.iv)try{g=(0,j.D)(a.iv)}catch{throw new p.aA("Failed to base64url decode the iv")}if(void 0!==a.tag)try{h=(0,j.D)(a.tag)}catch{throw new p.aA("Failed to base64url decode the tag")}let y=void 0!==a.protected?(0,q.lF)(a.protected):new Uint8Array;i=void 0!==a.aad?(0,q.xW)(y,(0,q.lF)("."),(0,q.lF)(a.aad)):y;try{k=(0,j.D)(a.ciphertext)}catch{throw new p.aA("Failed to base64url decode the ciphertext")}let z={plaintext:await ag(n,f,k,g,h,i)};if(void 0!==a.protected&&(z.protectedHeader=d),void 0!==a.aad)try{z.additionalAuthenticatedData=(0,j.D)(a.aad)}catch{throw new p.aA("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(z.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(z.unprotectedHeader=a.header),w)?{...z,key:x}:z}async function as(a,b,c){if(a instanceof Uint8Array&&(a=q.D0.decode(a)),"string"!=typeof a)throw new p.aA("Compact JWE must be a string or Uint8Array");let{0:d,1:e,2:f,3:g,4:h,length:i}=a.split(".");if(5!==i)throw new p.aA("Invalid Compact JWE");let j=await ar({ciphertext:g,iv:f||void 0,protected:d,tag:h||void 0,encrypted_key:e||void 0},b,c),k={plaintext:j.plaintext,protectedHeader:j.protectedHeader};return"function"==typeof b?{...k,key:j.key}:k}async function at(a,b,c){let d=await as(a,b,c),e=(0,w.k6)(d.protectedHeader,d.plaintext,c),{protectedHeader:f}=d;if(void 0!==f.iss&&f.iss!==e.iss)throw new p.ie('replicated "iss" claim header parameter mismatch',e,"iss","mismatch");if(void 0!==f.sub&&f.sub!==e.sub)throw new p.ie('replicated "sub" claim header parameter mismatch',e,"sub","mismatch");if(void 0!==f.aud&&JSON.stringify(f.aud)!==JSON.stringify(e.aud))throw new p.ie('replicated "aud" claim header parameter mismatch',e,"aud","mismatch");let g={payload:e,protectedHeader:f};return"function"==typeof b?{...g,key:d.key}:g}async function au(a,b,c=3600){return await new x(a).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+c).sign(new TextEncoder().encode(b))}async function av(a,b){try{return(await (0,y.V)(a,new TextEncoder().encode(b))).payload}catch(a){return null}}let aw=new Uint8Array([66,101,116,116,101,114,65,117,116,104,46,106,115,32,71,101,110,101,114,97,116,101,100,32,69,110,99,114,121,112,116,105,111,110,32,75,101,121]),ax="A256CBC-HS512";async function ay(a,b,c,d=3600){let e=h(i.sc,new TextEncoder().encode(b),new TextEncoder().encode(c),aw,64),f=await G({kty:"oct",k:j.l(e)},"sha256");return await new am(a).setProtectedHeader({alg:"dir",enc:ax,kid:f}).setIssuedAt().setExpirationTime((Date.now()/1e3|0)+d).setJti(crypto.randomUUID()).encrypt(e)}async function az(a,b,c){if(!a)return null;try{let{payload:d}=await at(a,async({kid:a})=>{let d=h(i.sc,new TextEncoder().encode(b),new TextEncoder().encode(c),aw,64);if(void 0===a||a===await G({kty:"oct",k:j.l(d)},"sha256"))return d;throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[ax,"A256GCM"]});return d}catch(a){return null}}},50874:(a,b,c)=>{c.d(b,{c:()=>d});class d{#M;#N;#aZ;constructor(){this.#M=new Promise((a,b)=>{this.#aZ=b,this.#N=a})}get promise(){return this.#M}resolve=a=>{this.#N&&this.#N(a)};reject=a=>{this.#aZ&&this.#aZ(a)}}},50885:(a,b,c)=>{c.d(b,{AU:()=>m,B3:()=>B,KJ:()=>w,KL:()=>s,Pe:()=>u,RK:()=>A,RO:()=>o,RV:()=>r,Tq:()=>x,Uo:()=>k,eq:()=>i,gt:()=>n,kZ:()=>t,lt:()=>p,mj:()=>z,ne:()=>j,o8:()=>y,or:()=>l,q1:()=>C,t2:()=>v,wJ:()=>q});var d=c(79928),e=c(94329),f=c(75872),g=c(37175);function h(a,b){return!(0,g.eG)(b)||(0,g.qt)(a)||(0,e.is)(a,g.Iw)||(0,e.is)(a,g.Or)||(0,e.is)(a,d.V)||(0,e.is)(a,f.XI)||(0,e.is)(a,g.Ss)?a:new g.Iw(a,b)}let i=(a,b)=>(0,g.ll)`${a} = ${h(b,a)}`,j=(a,b)=>(0,g.ll)`${a} <> ${h(b,a)}`;function k(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new g.Xs(1===b.length?b:[new g.DJ("("),g.ll.join(b,new g.DJ(" and ")),new g.DJ(")")])}function l(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new g.Xs(1===b.length?b:[new g.DJ("("),g.ll.join(b,new g.DJ(" or ")),new g.DJ(")")])}function m(a){return(0,g.ll)`not ${a}`}let n=(a,b)=>(0,g.ll)`${a} > ${h(b,a)}`,o=(a,b)=>(0,g.ll)`${a} >= ${h(b,a)}`,p=(a,b)=>(0,g.ll)`${a} < ${h(b,a)}`,q=(a,b)=>(0,g.ll)`${a} <= ${h(b,a)}`;function r(a,b){return Array.isArray(b)?0===b.length?(0,g.ll)`false`:(0,g.ll)`${a} in ${b.map(b=>h(b,a))}`:(0,g.ll)`${a} in ${h(b,a)}`}function s(a,b){return Array.isArray(b)?0===b.length?(0,g.ll)`true`:(0,g.ll)`${a} not in ${b.map(b=>h(b,a))}`:(0,g.ll)`${a} not in ${h(b,a)}`}function t(a){return(0,g.ll)`${a} is null`}function u(a){return(0,g.ll)`${a} is not null`}function v(a){return(0,g.ll)`exists ${a}`}function w(a){return(0,g.ll)`not exists ${a}`}function x(a,b,c){return(0,g.ll)`${a} between ${h(b,a)} and ${h(c,a)}`}function y(a,b,c){return(0,g.ll)`${a} not between ${h(b,a)} and ${h(c,a)}`}function z(a,b){return(0,g.ll)`${a} like ${b}`}function A(a,b){return(0,g.ll)`${a} not like ${b}`}function B(a,b){return(0,g.ll)`${a} ilike ${b}`}function C(a,b){return(0,g.ll)`${a} not ilike ${b}`}},50891:(a,b,c)=>{c.d(b,{a:()=>e});let d=new Map,e={decode:(a,b="utf-8")=>(d.has(b)||d.set(b,new TextDecoder(b)),d.get(b).decode(a)),encode:new TextEncoder().encode}},51060:(a,b,c)=>{c.d(b,{Pq:()=>h,iX:()=>g});var d=c(94329),e=c(90091);class f extends e.pe{static [d.i]="PgJsonBuilder";constructor(a){super(a,"json","PgJson")}build(a){return new g(a,this.config)}}class g extends e.Kl{static [d.i]="PgJson";constructor(a,b){super(a,b)}getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function h(a){return new f(a??"")}},51775:(a,b,c)=>{c.d(b,{Q:()=>i});var d=c(17938);let e=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],f=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],g=(0,d.CN)({is:a=>"DataTypeNode"===a.kind,create:a=>(0,d.CN)({kind:"DataTypeNode",dataType:a})});var h=c(77175);function i(a){if((0,h.N)(a))return a.toOperationNode();if(e.includes(a)||f.some(b=>b.test(a)))return g.create(a);throw Error(`invalid column data type ${JSON.stringify(a)}`)}},53460:(a,b,c)=>{c.d(b,{z:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"RawNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"RawNode",sqlFragments:(0,d.CN)(a),parameters:(0,d.CN)(b)}),createWithSql:a=>e.create([a],[]),createWithChild:a=>e.create(["",""],[a]),createWithChildren:a=>e.create(Array(a.length+1).fill(""),a)})},54144:(a,b,c)=>{c.d(b,{mu:()=>aU,cJ:()=>aV});var d=c(94329),e=c(75872),f=c(58941),g=c(90091);class h extends g.pe{static [d.i]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"always",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"byDefault",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class i extends h{static [d.i]="PgBigInt53Builder";constructor(a){super(a,"number","PgBigInt53")}build(a){return new j(a,this.config)}}class j extends g.Kl{static [d.i]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class k extends h{static [d.i]="PgBigInt64Builder";constructor(a){super(a,"bigint","PgBigInt64")}build(a){return new l(a,this.config)}}class l extends g.Kl{static [d.i]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(a){return BigInt(a)}}function m(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return"number"===d.mode?new i(c):new k(c)}class n extends g.pe{static [d.i]="PgBigSerial53Builder";constructor(a){super(a,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new o(a,this.config)}}class o extends g.Kl{static [d.i]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class p extends g.pe{static [d.i]="PgBigSerial64Builder";constructor(a){super(a,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(a){return new q(a,this.config)}}class q extends g.Kl{static [d.i]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(a){return BigInt(a)}}function r(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return"number"===d.mode?new n(c):new p(c)}var s=c(60400);class t extends g.pe{static [d.i]="PgCharBuilder";constructor(a,b){super(a,"string","PgChar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new u(a,this.config)}}class u extends g.Kl{static [d.i]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function v(a,b={}){let{name:c,config:d}=(0,f.Ll)(a,b);return new t(c,d)}class w extends g.pe{static [d.i]="PgCidrBuilder";constructor(a){super(a,"string","PgCidr")}build(a){return new x(a,this.config)}}class x extends g.Kl{static [d.i]="PgCidr";getSQLType(){return"cidr"}}function y(a){return new w(a??"")}class z extends g.pe{static [d.i]="PgCustomColumnBuilder";constructor(a,b,c){super(a,"custom","PgCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new A(a,this.config)}}class A extends g.Kl{static [d.i]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function B(a){return(b,c)=>{let{name:d,config:e}=(0,f.Ll)(b,c);return new z(d,e,a)}}var C=c(4642);class D extends g.pe{static [d.i]="PgDoublePrecisionBuilder";constructor(a){super(a,"number","PgDoublePrecision")}build(a){return new E(a,this.config)}}class E extends g.Kl{static [d.i]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(a){return"string"==typeof a?Number.parseFloat(a):a}}function F(a){return new D(a??"")}class G extends g.pe{static [d.i]="PgInetBuilder";constructor(a){super(a,"string","PgInet")}build(a){return new H(a,this.config)}}class H extends g.Kl{static [d.i]="PgInet";getSQLType(){return"inet"}}function I(a){return new G(a??"")}class J extends h{static [d.i]="PgIntegerBuilder";constructor(a){super(a,"number","PgInteger")}build(a){return new K(a,this.config)}}class K extends g.Kl{static [d.i]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(a){return"string"==typeof a?Number.parseInt(a):a}}function L(a){return new J(a??"")}class M extends g.pe{static [d.i]="PgIntervalBuilder";constructor(a,b){super(a,"string","PgInterval"),this.config.intervalConfig=b}build(a){return new N(a,this.config)}}class N extends g.Kl{static [d.i]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let a=this.fields?` ${this.fields}`:"",b=this.precision?`(${this.precision})`:"";return`interval${a}${b}`}}function O(a,b={}){let{name:c,config:d}=(0,f.Ll)(a,b);return new M(c,d)}var P=c(51060),Q=c(63988);class R extends g.pe{static [d.i]="PgLineBuilder";constructor(a){super(a,"array","PgLine")}build(a){return new S(a,this.config)}}class S extends g.Kl{static [d.i]="PgLine";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c),Number.parseFloat(d)]}mapToDriverValue(a){return`{${a[0]},${a[1]},${a[2]}}`}}class T extends g.pe{static [d.i]="PgLineABCBuilder";constructor(a){super(a,"json","PgLineABC")}build(a){return new U(a,this.config)}}class U extends g.Kl{static [d.i]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return{a:Number.parseFloat(b),b:Number.parseFloat(c),c:Number.parseFloat(d)}}mapToDriverValue(a){return`{${a.a},${a.b},${a.c}}`}}function V(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return d?.mode&&"tuple"!==d.mode?new T(c):new R(c)}class W extends g.pe{static [d.i]="PgMacaddrBuilder";constructor(a){super(a,"string","PgMacaddr")}build(a){return new X(a,this.config)}}class X extends g.Kl{static [d.i]="PgMacaddr";getSQLType(){return"macaddr"}}function Y(a){return new W(a??"")}class Z extends g.pe{static [d.i]="PgMacaddr8Builder";constructor(a){super(a,"string","PgMacaddr8")}build(a){return new $(a,this.config)}}class $ extends g.Kl{static [d.i]="PgMacaddr8";getSQLType(){return"macaddr8"}}function _(a){return new Z(a??"")}var aa=c(67351);class ab extends g.pe{static [d.i]="PgPointTupleBuilder";constructor(a){super(a,"array","PgPointTuple")}build(a){return new ac(a,this.config)}}class ac extends g.Kl{static [d.i]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c)]}return[a.x,a.y]}mapToDriverValue(a){return`(${a[0]},${a[1]})`}}class ad extends g.pe{static [d.i]="PgPointObjectBuilder";constructor(a){super(a,"json","PgPointObject")}build(a){return new ae(a,this.config)}}class ae extends g.Kl{static [d.i]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return{x:Number.parseFloat(b),y:Number.parseFloat(c)}}return a}mapToDriverValue(a){return`(${a.x},${a.y})`}}function af(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return d?.mode&&"tuple"!==d.mode?new ad(c):new ab(c)}function ag(a,b){let c=new DataView(new ArrayBuffer(8));for(let d=0;d<8;d++)c.setUint8(d,a[b+d]);return c.getFloat64(0,!0)}function ah(a){let b=function(a){let b=[];for(let c=0;c<a.length;c+=2)b.push(Number.parseInt(a.slice(c,c+2),16));return new Uint8Array(b)}(a),c=0,d=b[0];c+=1;let e=new DataView(b.buffer),f=e.getUint32(c,1===d);if(c+=4,0x20000000&f&&(e.getUint32(c,1===d),c+=4),(65535&f)==1){let a=ag(b,c),d=ag(b,c+=8);return c+=8,[a,d]}throw Error("Unsupported geometry type")}class ai extends g.pe{static [d.i]="PgGeometryBuilder";constructor(a){super(a,"array","PgGeometry")}build(a){return new aj(a,this.config)}}class aj extends g.Kl{static [d.i]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){return ah(a)}mapToDriverValue(a){return`point(${a[0]} ${a[1]})`}}class ak extends g.pe{static [d.i]="PgGeometryObjectBuilder";constructor(a){super(a,"json","PgGeometryObject")}build(a){return new al(a,this.config)}}class al extends g.Kl{static [d.i]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){let b=ah(a);return{x:b[0],y:b[1]}}mapToDriverValue(a){return`point(${a.x} ${a.y})`}}function am(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return d?.mode&&"tuple"!==d.mode?new ak(c):new ai(c)}class an extends g.pe{static [d.i]="PgRealBuilder";constructor(a,b){super(a,"number","PgReal"),this.config.length=b}build(a){return new ao(a,this.config)}}class ao extends g.Kl{static [d.i]="PgReal";constructor(a,b){super(a,b)}getSQLType(){return"real"}mapFromDriverValue=a=>"string"==typeof a?Number.parseFloat(a):a}function ap(a){return new an(a??"")}class aq extends g.pe{static [d.i]="PgSerialBuilder";constructor(a){super(a,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new ar(a,this.config)}}class ar extends g.Kl{static [d.i]="PgSerial";getSQLType(){return"serial"}}function as(a){return new aq(a??"")}class at extends h{static [d.i]="PgSmallIntBuilder";constructor(a){super(a,"number","PgSmallInt")}build(a){return new au(a,this.config)}}class au extends g.Kl{static [d.i]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=a=>"string"==typeof a?Number(a):a}function av(a){return new at(a??"")}class aw extends g.pe{static [d.i]="PgSmallSerialBuilder";constructor(a){super(a,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new ax(a,this.config)}}class ax extends g.Kl{static [d.i]="PgSmallSerial";getSQLType(){return"smallserial"}}function ay(a){return new aw(a??"")}var az=c(62125),aA=c(35235),aB=c(6852),aC=c(76993);class aD extends g.pe{static [d.i]="PgVarcharBuilder";constructor(a,b){super(a,"string","PgVarchar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new aE(a,this.config)}}class aE extends g.Kl{static [d.i]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function aF(a,b={}){let{name:c,config:d}=(0,f.Ll)(a,b);return new aD(c,d)}class aG extends g.pe{static [d.i]="PgBinaryVectorBuilder";constructor(a,b){super(a,"string","PgBinaryVector"),this.config.dimensions=b.dimensions}build(a){return new aH(a,this.config)}}class aH extends g.Kl{static [d.i]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function aI(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return new aG(c,d)}class aJ extends g.pe{static [d.i]="PgHalfVectorBuilder";constructor(a,b){super(a,"array","PgHalfVector"),this.config.dimensions=b.dimensions}build(a){return new aK(a,this.config)}}class aK extends g.Kl{static [d.i]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function aL(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return new aJ(c,d)}class aM extends g.pe{static [d.i]="PgSparseVectorBuilder";constructor(a,b){super(a,"string","PgSparseVector"),this.config.dimensions=b.dimensions}build(a){return new aN(a,this.config)}}class aN extends g.Kl{static [d.i]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function aO(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return new aM(c,d)}class aP extends g.pe{static [d.i]="PgVectorBuilder";constructor(a,b){super(a,"array","PgVector"),this.config.dimensions=b.dimensions}build(a){return new aQ(a,this.config)}}class aQ extends g.Kl{static [d.i]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function aR(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return new aP(c,d)}let aS=Symbol.for("drizzle:PgInlineForeignKeys"),aT=Symbol.for("drizzle:EnableRLS");class aU extends e.XI{static [d.i]="PgTable";static Symbol=Object.assign({},e.XI.Symbol,{InlineForeignKeys:aS,EnableRLS:aT});[aS]=[];[aT]=!1;[e.XI.Symbol.ExtraConfigBuilder]=void 0;[e.XI.Symbol.ExtraConfigColumns]={}}let aV=(a,b,c)=>(function(a,b,c,d,f=a){let g=new aU(a,d,f),h="function"==typeof b?b({bigint:m,bigserial:r,boolean:s.zM,char:v,cidr:y,customType:B,date:C.p6,doublePrecision:F,inet:I,integer:L,interval:O,json:P.Pq,jsonb:Q.Fx,line:V,macaddr:Y,macaddr8:_,numeric:aa.sH,point:af,geometry:am,real:ap,serial:as,smallint:av,smallserial:ay,text:az.Qq,time:aA.kB,timestamp:aB.vE,uuid:aC.uR,varchar:aF,bit:aI,halfvec:aL,sparsevec:aO,vector:aR}):b,i=Object.fromEntries(Object.entries(h).map(([a,b])=>{b.setName(a);let c=b.build(g);return g[aS].push(...b.buildForeignKeys(c,g)),[a,c]})),j=Object.fromEntries(Object.entries(h).map(([a,b])=>(b.setName(a),[a,b.buildExtraConfigColumn(g)]))),k=Object.assign(g,i);return k[e.XI.Symbol.Columns]=i,k[e.XI.Symbol.ExtraConfigColumns]=j,c&&(k[aU.Symbol.ExtraConfigBuilder]=c),Object.assign(k,{enableRLS:()=>(k[aU.Symbol.EnableRLS]=!0,k)})})(a,b,c,void 0)},54241:(a,b,c)=>{c.d(b,{l:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"BinaryOperationNode"===a.kind,create:(a,b,c)=>(0,d.CN)({kind:"BinaryOperationNode",leftOperand:a,operator:b,rightOperand:c})})},54745:(a,b,c)=>{c.d(b,{q:()=>f});var d=c(47724),e=c(17938);let f=(0,e.CN)({is:a=>"ReferenceNode"===a.kind,create:(a,b)=>(0,e.CN)({kind:"ReferenceNode",table:b,column:a}),createSelectAll:a=>(0,e.CN)({kind:"ReferenceNode",table:a,column:d.U.create()})})},54833:(a,b,c)=>{c.d(b,{V:()=>t});var d=c(99609),e=c(80094),f=c(31741),g=c(62118);async function h(a,b,c,d){let h=await (0,g.j)(a,b,"verify");(0,f.O)(a,h);let i=(0,e.B)(a,h.algorithm);try{return await crypto.subtle.verify(i,h,c,d)}catch{return!1}}var i=c(63624),j=c(11980),k=c(97763),l=c(20228),m=c(37193),n=c(55365),o=c(23003),p=c(30869);async function q(a,b,c){let e,f;if(!(0,l.G)(a))throw new i.Ye("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new i.Ye('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new i.Ye("JWS Protected Header incorrect type");if(void 0===a.payload)throw new i.Ye("JWS Payload missing");if("string"!=typeof a.signature)throw new i.Ye("JWS Signature missing or incorrect type");if(void 0!==a.header&&!(0,l.G)(a.header))throw new i.Ye("JWS Unprotected Header incorrect type");let g={};if(a.protected)try{let b=(0,d.D)(a.protected);g=JSON.parse(j.D0.decode(b))}catch{throw new i.Ye("JWS Protected Header is invalid")}if(!(0,k.f)(g,a.header))throw new i.Ye("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let q={...g,...a.header},r=(0,n.n)(i.Ye,new Map([["b64",!0]]),c?.crit,g,q),s=!0;if(r.has("b64")&&"boolean"!=typeof(s=g.b64))throw new i.Ye('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:t}=q;if("string"!=typeof t||!t)throw new i.Ye('JWS "alg" (Algorithm) Header Parameter missing or invalid');let u=c&&(0,o.F)("algorithms",c.algorithms);if(u&&!u.has(t))throw new i.Rb('"alg" (Algorithm) Header Parameter value not allowed');if(s){if("string"!=typeof a.payload)throw new i.Ye("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new i.Ye("JWS Payload must be a string or an Uint8Array instance");let v=!1;"function"==typeof b&&(b=await b(g,a),v=!0),(0,m.y)(t,b,"verify");let w=(0,j.xW)(void 0!==a.protected?(0,j.lF)(a.protected):new Uint8Array,(0,j.lF)("."),"string"==typeof a.payload?s?(0,j.lF)(a.payload):j.Rd.encode(a.payload):a.payload);try{e=(0,d.D)(a.signature)}catch{throw new i.Ye("Failed to base64url decode the signature")}let x=await (0,p.l)(b,t);if(!await h(t,x,e,w))throw new i.h2;if(s)try{f=(0,d.D)(a.payload)}catch{throw new i.Ye("Failed to base64url decode the payload")}else f="string"==typeof a.payload?j.Rd.encode(a.payload):a.payload;let y={payload:f};return(void 0!==a.protected&&(y.protectedHeader=g),void 0!==a.header&&(y.unprotectedHeader=a.header),v)?{...y,key:x}:y}async function r(a,b,c){if(a instanceof Uint8Array&&(a=j.D0.decode(a)),"string"!=typeof a)throw new i.Ye("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g)throw new i.Ye("Invalid Compact JWS");let h=await q({payload:e,protected:d,signature:f},b,c),k={payload:h.payload,protectedHeader:h.protectedHeader};return"function"==typeof b?{...k,key:h.key}:k}var s=c(87404);async function t(a,b,c){let d=await r(a,b,c);if(d.protectedHeader.crit?.includes("b64")&&!1===d.protectedHeader.b64)throw new i.Dp("JWTs MUST NOT use unencoded payload");let e={payload:(0,s.k6)(d.protectedHeader,d.payload,c),protectedHeader:d.protectedHeader};return"function"==typeof b?{...e,key:d.key}:e}},55365:(a,b,c)=>{c.d(b,{n:()=>e});var d=c(63624);function e(a,b,c,e,f){let g;if(void 0!==f.crit&&e?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!e||void 0===e.crit)return new Set;if(!Array.isArray(e.crit)||0===e.crit.length||e.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let h of(g=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,e.crit)){if(!g.has(h))throw new d.T0(`Extension Header Parameter "${h}" is not recognized`);if(void 0===f[h])throw new a(`Extension Header Parameter "${h}" is missing`);if(g.get(h)&&void 0===e[h])throw new a(`Extension Header Parameter "${h}" MUST be integrity protected`)}return new Set(e.crit)}},57246:(a,b,c)=>{function d(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}c.d(b,{X:()=>e,t:()=>f});let e=(a,...b)=>d("Key must be ",a,...b),f=(a,b,...c)=>d(`Key for the ${a} algorithm must be `,b,...c)},57850:(a,b,c)=>{c.d(b,{v:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"ListNode"===a.kind,create:a=>(0,d.CN)({kind:"ListNode",items:(0,d.CN)(a)})})},58941:(a,b,c)=>{c.d(b,{DV:()=>k,He:()=>function a(b,c){return Object.entries(b).reduce((b,[g,i])=>{if("string"!=typeof g)return b;let j=c?[...c,g]:[g];return(0,e.is)(i,d.V)||(0,e.is)(i,f.Xs)||(0,e.is)(i,f.Xs.Aliased)?b.push({path:j,field:i}):(0,e.is)(i,h.XI)?b.push(...a(i[h.XI.Symbol.Columns],j)):b.push(...a(i,j)),b},[])},Ll:()=>p,Lq:()=>q,XJ:()=>m,YD:()=>n,a6:()=>j,q:()=>l,zN:()=>o});var d=c(79928),e=c(94329),f=c(37175),g=c(83940),h=c(75872),i=c(21029);function j(a,b,c){let g={},i=a.reduce((a,{path:i,field:j},k)=>{let l;l=(0,e.is)(j,d.V)?j:(0,e.is)(j,f.Xs)?j.decoder:j.sql.decoder;let m=a;for(let[a,f]of i.entries())if(a<i.length-1)f in m||(m[f]={}),m=m[f];else{let a=b[k],n=m[f]=null===a?null:l.mapFromDriverValue(a);if(c&&(0,e.is)(j,d.V)&&2===i.length){let a=i[0];a in g?"string"==typeof g[a]&&g[a]!==(0,h.Io)(j.table)&&(g[a]=!1):g[a]=null===n&&(0,h.Io)(j.table)}}return a},{});if(c&&Object.keys(g).length>0)for(let[a,b]of Object.entries(g))"string"!=typeof b||c[b]||(i[a]=null);return i}function k(a,b){let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let[a,b]of c.entries())if(b!==d[a])return!1;return!0}function l(a,b){let c=Object.entries(b).filter(([,a])=>void 0!==a).map(([b,c])=>(0,e.is)(c,f.Xs)||(0,e.is)(c,d.V)?[b,c]:[b,new f.Iw(c,a[h.XI.Symbol.Columns][b])]);if(0===c.length)throw Error("No values to set");return Object.fromEntries(c)}function m(a,b){for(let c of b)for(let b of Object.getOwnPropertyNames(c.prototype))"constructor"!==b&&Object.defineProperty(a.prototype,b,Object.getOwnPropertyDescriptor(c.prototype,b)||Object.create(null))}function n(a){return a[h.XI.Symbol.Columns]}function o(a){return(0,e.is)(a,g.n)?a._.alias:(0,e.is)(a,f.Ss)?a[i.n].name:(0,e.is)(a,f.Xs)?void 0:a[h.XI.Symbol.IsAlias]?a[h.XI.Symbol.Name]:a[h.XI.Symbol.BaseName]}function p(a,b){return{name:"string"==typeof a&&a.length>0?a:"",config:"object"==typeof a?a:b}}function q(a){if("object"!=typeof a||null===a||"Object"!==a.constructor.name)return!1;if("logger"in a){let b=typeof a.logger;return"boolean"===b||"object"===b&&"function"==typeof a.logger.logQuery||"undefined"===b}if("schema"in a){let b=typeof a.schema;return"object"===b||"undefined"===b}if("casing"in a){let b=typeof a.casing;return"string"===b||"undefined"===b}if("mode"in a)return"default"===a.mode&&"planetscale"===a.mode&&void 0===a.mode;if("connection"in a){let b=typeof a.connection;return"string"===b||"object"===b||"undefined"===b}if("client"in a){let b=typeof a.client;return"object"===b||"function"===b||"undefined"===b}return 0===Object.keys(a).length}},59720:(a,b,c)=>{c.d(b,{iv:()=>p,pD:()=>o,DZ:()=>v,_k:()=>s,mm:()=>q,rl:()=>r,I$:()=>function a(b,c,d,g,h=a=>a){let i={};for(let[j,k]of g.entries())if(k.isJson){let e=c.relations[k.tsKey],g=d[j],l="string"==typeof g?JSON.parse(g):g;i[k.tsKey]=(0,f.is)(e,o)?l&&a(b,b[k.relationTableTsKey],l,k.selection,h):l.map(c=>a(b,b[k.relationTableTsKey],c,k.selection,h))}else{let a,b=h(d[j]),c=k.field;a=(0,f.is)(c,e.V)?c:(0,f.is)(c,l.Xs)?c.decoder:c.sql.decoder,i[k.tsKey]=null===b?null:a.mapFromDriverValue(b)}return i},W0:()=>u,K1:()=>t});var d=c(75872),e=c(79928),f=c(94329),g=c(54144);class h{static [f.i]="PgPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new i(a,this.columns,this.name)}}class i{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [f.i]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[g.mu.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}var j=c(50885),k=c(24603),l=c(37175);class m{constructor(a,b,c){this.sourceTable=a,this.referencedTable=b,this.relationName=c,this.referencedTableName=b[d.XI.Symbol.Name]}static [f.i]="Relation";referencedTableName;fieldName}class n{constructor(a,b){this.table=a,this.config=b}static [f.i]="Relations"}class o extends m{constructor(a,b,c,d){super(a,b,c?.relationName),this.config=c,this.isNullable=d}static [f.i]="One";withFieldName(a){let b=new o(this.sourceTable,this.referencedTable,this.config,this.isNullable);return b.fieldName=a,b}}class p extends m{constructor(a,b,c){super(a,b,c?.relationName),this.config=c}static [f.i]="Many";withFieldName(a){let b=new p(this.sourceTable,this.referencedTable,this.config);return b.fieldName=a,b}}function q(){return{and:j.Uo,between:j.Tq,eq:j.eq,exists:j.t2,gt:j.gt,gte:j.RO,ilike:j.B3,inArray:j.RV,isNull:j.kZ,isNotNull:j.Pe,like:j.mj,lt:j.lt,lte:j.wJ,ne:j.ne,not:j.AU,notBetween:j.o8,notExists:j.KJ,notLike:j.RK,notIlike:j.q1,notInArray:j.KL,or:j.or,sql:l.ll}}function r(){return{sql:l.ll,asc:k.Y,desc:k.i}}function s(a,b){1===Object.keys(a).length&&"default"in a&&!(0,f.is)(a.default,d.XI)&&(a=a.default);let c={},e={},g={};for(let[i,j]of Object.entries(a))if((0,f.is)(j,d.XI)){let a=(0,d.Lf)(j),b=e[a];for(let e of(c[a]=i,g[i]={tsName:i,dbName:j[d.XI.Symbol.Name],schema:j[d.XI.Symbol.Schema],columns:j[d.XI.Symbol.Columns],relations:b?.relations??{},primaryKey:b?.primaryKey??[]},Object.values(j[d.XI.Symbol.Columns])))e.primary&&g[i].primaryKey.push(e);let k=j[d.XI.Symbol.ExtraConfigBuilder]?.(j[d.XI.Symbol.ExtraConfigColumns]);if(k)for(let a of Object.values(k))(0,f.is)(a,h)&&g[i].primaryKey.push(...a.columns)}else if((0,f.is)(j,n)){let a,f=(0,d.Lf)(j.table),h=c[f];for(let[c,d]of Object.entries(j.config(b(j.table))))if(h){let b=g[h];b.relations[c]=d,a&&b.primaryKey.push(...a)}else f in e||(e[f]={relations:{},primaryKey:a}),e[f].relations[c]=d}return{tables:g,tableNamesMap:c}}function t(a,b){return new n(a,a=>Object.fromEntries(Object.entries(b(a)).map(([a,b])=>[a,b.withFieldName(a)])))}function u(a,b,c){if((0,f.is)(c,o)&&c.config)return{fields:c.config.fields,references:c.config.references};let e=b[(0,d.Lf)(c.referencedTable)];if(!e)throw Error(`Table "${c.referencedTable[d.XI.Symbol.Name]}" not found in schema`);let g=a[e];if(!g)throw Error(`Table "${e}" not found in schema`);let h=c.sourceTable,i=b[(0,d.Lf)(h)];if(!i)throw Error(`Table "${h[d.XI.Symbol.Name]}" not found in schema`);let j=[];for(let a of Object.values(g.relations))(c.relationName&&c!==a&&a.relationName===c.relationName||!c.relationName&&a.referencedTable===c.sourceTable)&&j.push(a);if(j.length>1)throw c.relationName?Error(`There are multiple relations with name "${c.relationName}" in table "${e}"`):Error(`There are multiple relations between "${e}" and "${c.sourceTable[d.XI.Symbol.Name]}". Please specify relation name`);if(j[0]&&(0,f.is)(j[0],o)&&j[0].config)return{fields:j[0].config.references,references:j[0].config.fields};throw Error(`There is not enough information to infer relation "${i}.${c.fieldName}"`)}function v(a){return{one:function(b,c){return new o(a,b,c,c?.fields.reduce((a,b)=>a&&b.notNull,!0)??!1)},many:function(b,c){return new p(a,b,c)}}}},60400:(a,b,c)=>{c.d(b,{zM:()=>h});var d=c(94329),e=c(90091);class f extends e.pe{static [d.i]="PgBooleanBuilder";constructor(a){super(a,"boolean","PgBoolean")}build(a){return new g(a,this.config)}}class g extends e.Kl{static [d.i]="PgBoolean";getSQLType(){return"boolean"}}function h(a){return new f(a??"")}},60724:(a,b,c)=>{c.d(b,{Y:()=>f});var d=c(17938),e=c(63570);let f=(0,d.CN)({is:a=>"CreateViewNode"===a.kind,create:a=>(0,d.CN)({kind:"CreateViewNode",name:e.y.create(a)}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},61407:(a,b,c)=>{c.d(b,{a:()=>n,c:()=>k,f:()=>h,i:()=>s,l:()=>m,r:()=>r,t:()=>q,u:()=>g});var d=c(73976);let e=null,f=async()=>(e||(e=new(await (0,d.t)())),e);async function g(){let a=(await f()).getStore();if(!a)throw Error("No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.");return a}async function h(a,b){return(await f()).run(a,b)}let i=null,j=async()=>(i||(i=new(await (0,d.t)())),i);async function k(){return void 0!==(await j()).getStore()}async function l(){let a=(await j()).getStore();if(!a)throw Error("No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.");return a}async function m(a,b){return(await j()).run(a,b)}function n(a){let b=Object.freeze({});return{get ref(){return b},async get(){let c=await l();if(!c.has(b)){let d=await a();return c.set(b,d),d}return c.get(b)},async set(a){(await l()).set(b,a)}}}let o=null,p=async()=>(o||(o=new(await (0,d.t)())),o),q=async a=>p().then(b=>b.getStore()||a).catch(()=>a),r=async(a,b)=>{let c=!0;return p().then(d=>(c=!0,d.run(a,b))).catch(a=>{if(!c)return b();throw a})},s=async(a,b)=>{let c=!0;return p().then(d=>(c=!0,a.transaction(async a=>d.run(a,b)))).catch(a=>{if(!c)return b();throw a})}},62118:(a,b,c)=>{c.d(b,{j:()=>f});var d=c(93241),e=c(57246);async function f(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError((0,e.X)(b,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",b,{hash:`SHA-${a.slice(-3)}`,name:"HMAC"},!1,[c])}return(0,d.Y)(b,a,c),b}},62125:(a,b,c)=>{c.d(b,{Qq:()=>i});var d=c(94329),e=c(58941),f=c(90091);class g extends f.pe{static [d.i]="PgTextBuilder";constructor(a,b){super(a,"string","PgText"),this.config.enumValues=b.enum}build(a){return new h(a,this.config)}}class h extends f.Kl{static [d.i]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function i(a,b={}){let{name:c,config:d}=(0,e.Ll)(a,b);return new g(c,d)}},62922:(a,b,c)=>{c.d(b,{P:()=>f});var d=c(17938),e=c(90998);let f=(0,d.CN)({is:a=>"CaseNode"===a.kind,create:a=>(0,d.CN)({kind:"CaseNode",value:a}),cloneWithWhen:(a,b)=>(0,d.CN)({...a,when:(0,d.CN)(a.when?[...a.when,b]:[b])}),cloneWithThen:(a,b)=>(0,d.CN)({...a,when:a.when?(0,d.CN)([...a.when.slice(0,-1),e.t.cloneWithResult(a.when[a.when.length-1],b)]):void 0}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},63549:(a,b,c)=>{c.d(b,{k:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"ParensNode"===a.kind,create:a=>(0,d.CN)({kind:"ParensNode",node:a})})},63570:(a,b,c)=>{c.d(b,{y:()=>f});var d=c(17938),e=c(69679);let f=(0,d.CN)({is:a=>"SchemableIdentifierNode"===a.kind,create:a=>(0,d.CN)({kind:"SchemableIdentifierNode",identifier:e.O.create(a)}),createWithSchema:(a,b)=>(0,d.CN)({kind:"SchemableIdentifierNode",schema:e.O.create(a),identifier:e.O.create(b)})})},63624:(a,b,c)=>{c.d(b,{$4:()=>p,BT:()=>o,Dm:()=>n,Dp:()=>l,Rb:()=>g,T0:()=>h,Ye:()=>k,_L:()=>m,aA:()=>j,h2:()=>r,i4:()=>d,ie:()=>e,n:()=>f,xO:()=>i,xb:()=>q});class d extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class e extends d{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class f extends d{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class g extends d{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class h extends d{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class i extends d{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(a="decryption operation failed",b){super(a,b)}}class j extends d{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class k extends d{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class l extends d{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class m extends d{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class n extends d{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class o extends d{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(a="no applicable key found in the JSON Web Key Set",b){super(a,b)}}class p extends d{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}class q extends d{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(a="request timed out",b){super(a,b)}}class r extends d{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(a="signature verification failed",b){super(a,b)}}},63860:(a,b,c)=>{c.d(b,{SS:()=>j,YK:()=>h,v0:()=>i});var d=c(25021),e=c(77175),f=c(22066),g=c(17938);function h(a){if((0,e.N)(a))return a.toOperationNode();if((0,g.Tn)(a))return a((0,f.A)()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify(a)}`)}function i(a){if((0,e.N)(a))return a.toOperationNode();if((0,g.Tn)(a))return a((0,f.A)()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify(a)}`)}function j(a){return(0,d.B)(a)||(0,d.q)(a)||(0,g.Tn)(a)}},63988:(a,b,c)=>{c.d(b,{Fx:()=>h,kn:()=>g});var d=c(94329),e=c(90091);class f extends e.pe{static [d.i]="PgJsonbBuilder";constructor(a){super(a,"json","PgJsonb")}build(a){return new g(a,this.config)}}class g extends e.Kl{static [d.i]="PgJsonb";constructor(a,b){super(a,b)}getSQLType(){return"jsonb"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function h(a){return new f(a??"")}},65805:(a,b,c)=>{c.d(b,{Og:()=>h});var d=c(99609),e=c(37832),f=c(63624),g=c(20228);async function h(a,b,c){let h;if(!(0,g.G)(a))throw TypeError("JWK must be an object");switch(b??=a.alg,h??=c?.extractable??a.ext,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,d.D)(a.k);case"RSA":if("oth"in a&&void 0!==a.oth)throw new f.T0('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return(0,e.x)({...a,alg:b,ext:h});case"AKP":if("string"!=typeof a.alg||!a.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==b&&b!==a.alg)throw TypeError("JWK alg and alg option value mismatch");return(0,e.x)({...a,ext:h});case"EC":case"OKP":return(0,e.x)({...a,alg:b,ext:h});default:throw new f.T0('Unsupported "kty" (Key Type) Parameter value')}}},66268:(a,b,c)=>{c.d(b,{c:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"JSONPathNode"===a.kind,create:a=>(0,d.CN)({kind:"JSONPathNode",inOperator:a,pathLegs:(0,d.CN)([])}),cloneWithLeg:(a,b)=>(0,d.CN)({...a,pathLegs:(0,d.CN)([...a.pathLegs,b])})})},67260:(a,b,c)=>{c.d(b,{G:()=>f});var d=c(50874),e=c(17938);async function f(a){let b=new d.c,c=new d.c;return a.provideConnection(async a=>(b.resolve(a),await c.promise)).catch(a=>b.reject(a)),(0,e.CN)({connection:await b.promise,release:c.resolve})}},67351:(a,b,c)=>{c.d(b,{Z5:()=>h,sH:()=>m});var d=c(94329),e=c(58941),f=c(90091);class g extends f.pe{static [d.i]="PgNumericBuilder";constructor(a,b,c){super(a,"string","PgNumeric"),this.config.precision=b,this.config.scale=c}build(a){return new h(a,this.config)}}class h extends f.Kl{static [d.i]="PgNumeric";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue(a){return"string"==typeof a?a:String(a)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class i extends f.pe{static [d.i]="PgNumericNumberBuilder";constructor(a,b,c){super(a,"number","PgNumericNumber"),this.config.precision=b,this.config.scale=c}build(a){return new j(a,this.config)}}class j extends f.Kl{static [d.i]="PgNumericNumber";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class k extends f.pe{static [d.i]="PgNumericBigIntBuilder";constructor(a,b,c){super(a,"bigint","PgNumericBigInt"),this.config.precision=b,this.config.scale=c}build(a){return new l(a,this.config)}}class l extends f.Kl{static [d.i]="PgNumericBigInt";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function m(a,b){let{name:c,config:d}=(0,e.Ll)(a,b),f=d?.mode;return"number"===f?new i(c,d?.precision,d?.scale):"bigint"===f?new k(c,d?.precision,d?.scale):new g(c,d?.precision,d?.scale)}},67882:(a,b,c)=>{c.d(b,{s:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"ValueListNode"===a.kind,create:a=>(0,d.CN)({kind:"ValueListNode",values:(0,d.CN)(a)})})},67952:(a,b,c)=>{c.d(b,{Pe:()=>j});var d=c(37175),e=c(94329),f=c(90091);class g{constructor(a,b){this.unique=a,this.name=b}static [e.i]="PgIndexBuilderOn";on(...a){return new h(a.map(a=>{if((0,e.is)(a,d.Xs))return a;let b=new f.ae(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),b}),this.unique,!1,this.name)}onOnly(...a){return new h(a.map(a=>{if((0,e.is)(a,d.Xs))return a;let b=new f.ae(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=a.defaultConfig,b}),this.unique,!0,this.name)}using(a,...b){return new h(b.map(a=>{if((0,e.is)(a,d.Xs))return a;let b=new f.ae(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),b}),this.unique,!0,this.name,a)}}class h{static [e.i]="PgIndexBuilder";config;constructor(a,b,c,d,e="btree"){this.config={name:d,columns:a,unique:b,only:c,method:e}}concurrently(){return this.config.concurrently=!0,this}with(a){return this.config.with=a,this}where(a){return this.config.where=a,this}build(a){return new i(this.config,a)}}class i{static [e.i]="PgIndex";config;constructor(a,b){this.config={...a,table:b}}}function j(a){return new g(!1,a)}},68479:(a,b,c)=>{c.d(b,{a:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"LimitNode"===a.kind,create:a=>(0,d.CN)({kind:"LimitNode",limit:a})})},68740:(a,b,c)=>{c.d(b,{kQ:()=>e,sy:()=>f});var d=c(17938);let e="kysely_migration",f="kysely_migration_lock";(0,d.CN)({__noMigrations__:!0})},68774:(a,b,c)=>{c.d(b,{b:()=>h});var d=c(17938),e=c(70085),f=c(43777);let g=(0,d.CN)({is:a=>"OnNode"===a.kind,create:a=>(0,d.CN)({kind:"OnNode",on:a}),cloneWithOperation:(a,b,c)=>(0,d.CN)({...a,on:"And"===b?e.s.create(a.on,c):f.K.create(a.on,c)})}),h=(0,d.CN)({is:a=>"JoinNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"JoinNode",joinType:a,table:b,on:void 0}),createWithOn:(a,b,c)=>(0,d.CN)({kind:"JoinNode",joinType:a,table:b,on:g.create(c)}),cloneWithOn:(a,b)=>(0,d.CN)({...a,on:a.on?g.cloneWithOperation(a.on,"And",b):g.create(b)})})},69256:(a,b,c)=>{c.d(b,{Z:()=>f});var d=c(17938),e=c(69679);let f=(0,d.CN)({is:a=>"ColumnNode"===a.kind,create:a=>(0,d.CN)({kind:"ColumnNode",column:e.O.create(a)})})},69679:(a,b,c)=>{c.d(b,{O:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"IdentifierNode"===a.kind,create:a=>(0,d.CN)({kind:"IdentifierNode",name:a})})},70085:(a,b,c)=>{c.d(b,{s:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"AndNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"AndNode",left:a,right:b})})},71002:(a,b,c)=>{c.d(b,{sc:()=>r});var d=c(82153);class e{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(a,b,c,e){this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=e,this.buffer=new Uint8Array(a),this.view=(0,d.O8)(this.buffer)}update(a){(0,d.CC)(this),(0,d.DO)(a);let{view:b,buffer:c,blockLen:e}=this,f=a.length;for(let g=0;g<f;){let h=Math.min(e-this.pos,f-g);if(h===e){let b=(0,d.O8)(a);for(;e<=f-g;g+=e)this.process(b,g);continue}c.set(a.subarray(g,g+h),this.pos),this.pos+=h,g+=h,this.pos===e&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){(0,d.CC)(this),(0,d.Ht)(a,this),this.finished=!0;let{buffer:b,view:c,blockLen:e,isLE:f}=this,{pos:g}=this;b[g++]=128,(0,d.uH)(this.buffer.subarray(g)),this.padOffset>e-g&&(this.process(c,0),g=0);for(let a=g;a<e;a++)b[a]=0;c.setBigUint64(e-8,BigInt(8*this.length),f),this.process(c,0);let h=(0,d.O8)(a),i=this.outputLen;if(i%4)throw Error("_sha2: outputLen must be aligned to 32bit");let j=i/4,k=this.get();if(j>k.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<j;a++)h.setUint32(4*a,k[a],f)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){(a||=new this.constructor).set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.destroyed=f,a.finished=e,a.length=d,a.pos=g,d%b&&a.buffer.set(c),a}clone(){return this._cloneInto()}}let f=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),g=BigInt(0x100000000-1),h=BigInt(32),i=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),j=new Uint32Array(64);class k extends e{constructor(a){super(64,a,8,!1)}get(){let{A:a,B:b,C:c,D:d,E:e,F:f,G:g,H:h}=this;return[a,b,c,d,e,f,g,h]}set(a,b,c,d,e,f,g,h){this.A=0|a,this.B=0|b,this.C=0|c,this.D=0|d,this.E=0|e,this.F=0|f,this.G=0|g,this.H=0|h}process(a,b){for(let c=0;c<16;c++,b+=4)j[c]=a.getUint32(b,!1);for(let a=16;a<64;a++){let b=j[a-15],c=j[a-2],e=(0,d.Ow)(b,7)^(0,d.Ow)(b,18)^b>>>3,f=(0,d.Ow)(c,17)^(0,d.Ow)(c,19)^c>>>10;j[a]=f+j[a-7]+e+j[a-16]|0}let{A:c,B:e,C:f,D:g,E:h,F:k,G:l,H:m}=this;for(let a=0;a<64;a++){var n,o,p,q;let b=m+((0,d.Ow)(h,6)^(0,d.Ow)(h,11)^(0,d.Ow)(h,25))+((n=h)&k^~n&l)+i[a]+j[a]|0,r=((0,d.Ow)(c,2)^(0,d.Ow)(c,13)^(0,d.Ow)(c,22))+((o=c)&(p=e)^o&(q=f)^p&q)|0;m=l,l=k,k=h,h=g+b|0,g=f,f=e,e=c,c=b+r|0}c=c+this.A|0,e=e+this.B|0,f=f+this.C|0,g=g+this.D|0,h=h+this.E|0,k=k+this.F|0,l=l+this.G|0,m=m+this.H|0,this.set(c,e,f,g,h,k,l,m)}roundClean(){(0,d.uH)(j)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,d.uH)(this.buffer)}}class l extends k{A=0|f[0];B=0|f[1];C=0|f[2];D=0|f[3];E=0|f[4];F=0|f[5];G=0|f[6];H=0|f[7];constructor(){super(32)}}let m=function(a,b=!1){let c=a.length,d=new Uint32Array(c),e=new Uint32Array(c);for(let f=0;f<c;f++){let{h:c,l:i}=function(a,b=!1){return b?{h:Number(a&g),l:Number(a>>h&g)}:{h:0|Number(a>>h&g),l:0|Number(a&g)}}(a[f],b);[d[f],e[f]]=[c,i]}return[d,e]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(a=>BigInt(a))),n=m[0],o=m[1],p=new Uint32Array(80),q=new Uint32Array(80);let r=(0,d.qj)(()=>new l,(0,d.nx)(1))},71121:(a,b,c)=>{function d(a){return a?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function e(a,b,c){let d="",e=0,f=0;for(let c of a)for(e=e<<8|c,f+=8;f>=6;)f-=6,d+=b[e>>f&63];if(f>0&&(d+=b[e<<6-f&63]),c){let a=(4-d.length%4)%4;d+="=".repeat(a)}return d}function f(a,b){let c=new Map;for(let a=0;a<b.length;a++)c.set(b[a],a);let d=[],e=0,f=0;for(let b of a){if("="===b)break;let a=c.get(b);if(void 0===a)throw Error(`Invalid Base64 character: ${b}`);e=e<<6|a,(f+=6)>=8&&(f-=8,d.push(e>>f&255))}return Uint8Array.from(d)}c.d(b,{K:()=>g,z:()=>h});let g={encode(a,b={}){let c=d(!1);return e("string"==typeof a?new TextEncoder().encode(a):new Uint8Array(a),c,b.padding??!0)},decode(a){"string"!=typeof a&&(a=new TextDecoder().decode(a));let b=d(a.includes("-")||a.includes("_"));return f(a,b)}},h={encode(a,b={}){let c=d(!0);return e("string"==typeof a?new TextEncoder().encode(a):new Uint8Array(a),c,b.padding??!0)},decode(a){let b=d(a.includes("-")||a.includes("_"));return f(a,b)}}},71650:(a,b,c)=>{c.d(b,{i:()=>l,n:()=>m,r:()=>k,t:()=>n});var d=c(37052),e=c(15879),f=c(81899),g=c(75578),h=c(81713);let{get:i,set:j}=(0,e.sL)(()=>null);async function k(a,b,c){let e=a.body?.callbackURL||a.context.options.baseURL;if(!e)throw new f.LG("BAD_REQUEST",{message:"callbackURL is required"});let g=(0,d.r)(128),h=(0,d.r)(32),i=a.context.oauthConfig?.storeStateStrategy||"cookie",k={...c||{},callbackURL:e,codeVerifier:g,errorURL:a.body?.errorCallbackURL,newUserURL:a.body?.newUserCallbackURL,link:b,expiresAt:Date.now()+6e5,requestSignUp:a.body?.requestSignUp};if(await j(k),"cookie"===i){let b=await (0,d.n)({key:a.context.secret,data:JSON.stringify(k)}),c=a.context.createAuthCookie("oauth_state",{maxAge:6e5});return a.setCookie(c.name,b,c.attributes),{state:h,codeVerifier:g}}let l=a.context.createAuthCookie("state",{maxAge:3e5});await a.setSignedCookie(l.name,h,a.context.secret,l.attributes);let m=new Date;m.setMinutes(m.getMinutes()+10);let n=await a.context.internalAdapter.createVerificationValue({value:JSON.stringify(k),identifier:h,expiresAt:m});if(!n)throw a.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new f.LG("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:n.identifier,codeVerifier:g}}async function l(a){let b,c=a.query.state||a.body.state,e=a.context.oauthConfig.storeStateStrategy||"cookie",f=g._H3({callbackURL:g.YjP(),codeVerifier:g.YjP(),errorURL:g.YjP().optional(),newUserURL:g.YjP().optional(),expiresAt:g.aig(),link:g.Ikc({email:g.YjP(),userId:g.auy.string()}).optional(),requestSignUp:g.zMY().optional()});if("cookie"===e){let e=a.context.createAuthCookie("oauth_state"),g=a.getCookie(e.name);if(!g){a.context.logger.error("State Mismatch. OAuth state cookie not found",{state:c});let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=please_restart_the_process`)}try{let c=await (0,d.t)({key:a.context.secret,data:g});b=f.parse(JSON.parse(c))}catch(c){a.context.logger.error("Failed to decrypt or parse OAuth state cookie",{error:c});let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=please_restart_the_process`)}a.setCookie(e.name,"",{maxAge:0})}else{let d=await a.context.internalAdapter.findVerificationValue(c);if(!d){a.context.logger.error("State Mismatch. Verification not found",{state:c});let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=please_restart_the_process`)}b=f.parse(JSON.parse(d.value));let e=a.context.createAuthCookie("state"),g=await a.getSignedCookie(e.name,a.context.secret);if(!a.context.oauthConfig?.skipStateCookieCheck&&(!g||g!==c)){let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=state_mismatch`)}a.setCookie(e.name,"",{maxAge:0}),await a.context.internalAdapter.deleteVerificationValue(d.id)}if(b.errorURL||(b.errorURL=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`),b.expiresAt<Date.now()){let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=please_restart_the_process`)}return b&&await j(b),b}let m={isAction:!1},n=a=>(0,h.q)("a-z","A-Z","0-9")(a||32)},71844:(a,b,c)=>{c.d(b,{n:()=>f});var d=c(71121),e=c(9732);function f(a,b){return{digest:async c=>{let f=new TextEncoder,g="string"==typeof c?f.encode(c):c,h=await (0,e.N)().digest(a,g);return"hex"===b?Array.from(new Uint8Array(h)).map(a=>a.toString(16).padStart(2,"0")).join(""):"base64"===b||"base64url"===b||"base64urlnopad"===b?b.includes("url")?d.z.encode(h,{padding:"base64urlnopad"!==b}):d.K.encode(h):h}}}},73976:(a,b,c)=>{c.d(b,{t:()=>e});let d=import("node:async_hooks").then(a=>a.AsyncLocalStorage).catch(a=>{if("AsyncLocalStorage"in globalThis)return globalThis.AsyncLocalStorage;throw console.warn("[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected."),console.warn("[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler"),console.warn("[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag"),a});async function e(){return d}},74218:(a,b,c)=>{c.d(b,{V:()=>e});var d=c(17938);class e{nodeStack=[];#a$=(0,d.CN)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode(a,b){if(!a)return a;this.nodeStack.push(a);let c=this.transformNodeImpl(a,b);return this.nodeStack.pop(),(0,d.CN)(c)}transformNodeImpl(a,b){return this.#a$[a.kind](a,b)}transformNodeList(a,b){return a?(0,d.CN)(a.map(a=>this.transformNode(a,b))):a}transformSelectQuery(a,b){return{kind:"SelectQueryNode",from:this.transformNode(a.from,b),selections:this.transformNodeList(a.selections,b),distinctOn:this.transformNodeList(a.distinctOn,b),joins:this.transformNodeList(a.joins,b),groupBy:this.transformNode(a.groupBy,b),orderBy:this.transformNode(a.orderBy,b),where:this.transformNode(a.where,b),frontModifiers:this.transformNodeList(a.frontModifiers,b),endModifiers:this.transformNodeList(a.endModifiers,b),limit:this.transformNode(a.limit,b),offset:this.transformNode(a.offset,b),with:this.transformNode(a.with,b),having:this.transformNode(a.having,b),explain:this.transformNode(a.explain,b),setOperations:this.transformNodeList(a.setOperations,b),fetch:this.transformNode(a.fetch,b),top:this.transformNode(a.top,b)}}transformSelection(a,b){return{kind:"SelectionNode",selection:this.transformNode(a.selection,b)}}transformColumn(a,b){return{kind:"ColumnNode",column:this.transformNode(a.column,b)}}transformAlias(a,b){return{kind:"AliasNode",node:this.transformNode(a.node,b),alias:this.transformNode(a.alias,b)}}transformTable(a,b){return{kind:"TableNode",table:this.transformNode(a.table,b)}}transformFrom(a,b){return{kind:"FromNode",froms:this.transformNodeList(a.froms,b)}}transformReference(a,b){return{kind:"ReferenceNode",column:this.transformNode(a.column,b),table:this.transformNode(a.table,b)}}transformAnd(a,b){return{kind:"AndNode",left:this.transformNode(a.left,b),right:this.transformNode(a.right,b)}}transformOr(a,b){return{kind:"OrNode",left:this.transformNode(a.left,b),right:this.transformNode(a.right,b)}}transformValueList(a,b){return{kind:"ValueListNode",values:this.transformNodeList(a.values,b)}}transformParens(a,b){return{kind:"ParensNode",node:this.transformNode(a.node,b)}}transformJoin(a,b){return{kind:"JoinNode",joinType:a.joinType,table:this.transformNode(a.table,b),on:this.transformNode(a.on,b)}}transformRaw(a,b){return{kind:"RawNode",sqlFragments:(0,d.CN)([...a.sqlFragments]),parameters:this.transformNodeList(a.parameters,b)}}transformWhere(a,b){return{kind:"WhereNode",where:this.transformNode(a.where,b)}}transformInsertQuery(a,b){return{kind:"InsertQueryNode",into:this.transformNode(a.into,b),columns:this.transformNodeList(a.columns,b),values:this.transformNode(a.values,b),returning:this.transformNode(a.returning,b),onConflict:this.transformNode(a.onConflict,b),onDuplicateKey:this.transformNode(a.onDuplicateKey,b),endModifiers:this.transformNodeList(a.endModifiers,b),with:this.transformNode(a.with,b),ignore:a.ignore,orAction:this.transformNode(a.orAction,b),replace:a.replace,explain:this.transformNode(a.explain,b),defaultValues:a.defaultValues,top:this.transformNode(a.top,b),output:this.transformNode(a.output,b)}}transformValues(a,b){return{kind:"ValuesNode",values:this.transformNodeList(a.values,b)}}transformDeleteQuery(a,b){return{kind:"DeleteQueryNode",from:this.transformNode(a.from,b),using:this.transformNode(a.using,b),joins:this.transformNodeList(a.joins,b),where:this.transformNode(a.where,b),returning:this.transformNode(a.returning,b),endModifiers:this.transformNodeList(a.endModifiers,b),with:this.transformNode(a.with,b),orderBy:this.transformNode(a.orderBy,b),limit:this.transformNode(a.limit,b),explain:this.transformNode(a.explain,b),top:this.transformNode(a.top,b),output:this.transformNode(a.output,b)}}transformReturning(a,b){return{kind:"ReturningNode",selections:this.transformNodeList(a.selections,b)}}transformCreateTable(a,b){return{kind:"CreateTableNode",table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b),constraints:this.transformNodeList(a.constraints,b),temporary:a.temporary,ifNotExists:a.ifNotExists,onCommit:a.onCommit,frontModifiers:this.transformNodeList(a.frontModifiers,b),endModifiers:this.transformNodeList(a.endModifiers,b),selectQuery:this.transformNode(a.selectQuery,b)}}transformColumnDefinition(a,b){return{kind:"ColumnDefinitionNode",column:this.transformNode(a.column,b),dataType:this.transformNode(a.dataType,b),references:this.transformNode(a.references,b),primaryKey:a.primaryKey,autoIncrement:a.autoIncrement,unique:a.unique,notNull:a.notNull,unsigned:a.unsigned,defaultTo:this.transformNode(a.defaultTo,b),check:this.transformNode(a.check,b),generated:this.transformNode(a.generated,b),frontModifiers:this.transformNodeList(a.frontModifiers,b),endModifiers:this.transformNodeList(a.endModifiers,b),nullsNotDistinct:a.nullsNotDistinct,identity:a.identity,ifNotExists:a.ifNotExists}}transformAddColumn(a,b){return{kind:"AddColumnNode",column:this.transformNode(a.column,b)}}transformDropTable(a,b){return{kind:"DropTableNode",table:this.transformNode(a.table,b),ifExists:a.ifExists,cascade:a.cascade}}transformOrderBy(a,b){return{kind:"OrderByNode",items:this.transformNodeList(a.items,b)}}transformOrderByItem(a,b){return{kind:"OrderByItemNode",orderBy:this.transformNode(a.orderBy,b),direction:this.transformNode(a.direction,b),collation:this.transformNode(a.collation,b),nulls:a.nulls}}transformGroupBy(a,b){return{kind:"GroupByNode",items:this.transformNodeList(a.items,b)}}transformGroupByItem(a,b){return{kind:"GroupByItemNode",groupBy:this.transformNode(a.groupBy,b)}}transformUpdateQuery(a,b){return{kind:"UpdateQueryNode",table:this.transformNode(a.table,b),from:this.transformNode(a.from,b),joins:this.transformNodeList(a.joins,b),where:this.transformNode(a.where,b),updates:this.transformNodeList(a.updates,b),returning:this.transformNode(a.returning,b),endModifiers:this.transformNodeList(a.endModifiers,b),with:this.transformNode(a.with,b),explain:this.transformNode(a.explain,b),limit:this.transformNode(a.limit,b),top:this.transformNode(a.top,b),output:this.transformNode(a.output,b),orderBy:this.transformNode(a.orderBy,b)}}transformColumnUpdate(a,b){return{kind:"ColumnUpdateNode",column:this.transformNode(a.column,b),value:this.transformNode(a.value,b)}}transformLimit(a,b){return{kind:"LimitNode",limit:this.transformNode(a.limit,b)}}transformOffset(a,b){return{kind:"OffsetNode",offset:this.transformNode(a.offset,b)}}transformOnConflict(a,b){return{kind:"OnConflictNode",columns:this.transformNodeList(a.columns,b),constraint:this.transformNode(a.constraint,b),indexExpression:this.transformNode(a.indexExpression,b),indexWhere:this.transformNode(a.indexWhere,b),updates:this.transformNodeList(a.updates,b),updateWhere:this.transformNode(a.updateWhere,b),doNothing:a.doNothing}}transformOnDuplicateKey(a,b){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(a.updates,b)}}transformCreateIndex(a,b){return{kind:"CreateIndexNode",name:this.transformNode(a.name,b),table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b),unique:a.unique,using:this.transformNode(a.using,b),ifNotExists:a.ifNotExists,where:this.transformNode(a.where,b),nullsNotDistinct:a.nullsNotDistinct}}transformList(a,b){return{kind:"ListNode",items:this.transformNodeList(a.items,b)}}transformDropIndex(a,b){return{kind:"DropIndexNode",name:this.transformNode(a.name,b),table:this.transformNode(a.table,b),ifExists:a.ifExists,cascade:a.cascade}}transformPrimaryKeyConstraint(a,b){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(a.columns,b),name:this.transformNode(a.name,b),deferrable:a.deferrable,initiallyDeferred:a.initiallyDeferred}}transformUniqueConstraint(a,b){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(a.columns,b),name:this.transformNode(a.name,b),nullsNotDistinct:a.nullsNotDistinct,deferrable:a.deferrable,initiallyDeferred:a.initiallyDeferred}}transformForeignKeyConstraint(a,b){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(a.columns,b),references:this.transformNode(a.references,b),name:this.transformNode(a.name,b),onDelete:a.onDelete,onUpdate:a.onUpdate,deferrable:a.deferrable,initiallyDeferred:a.initiallyDeferred}}transformSetOperation(a,b){return{kind:"SetOperationNode",operator:a.operator,expression:this.transformNode(a.expression,b),all:a.all}}transformReferences(a,b){return{kind:"ReferencesNode",table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b),onDelete:a.onDelete,onUpdate:a.onUpdate}}transformCheckConstraint(a,b){return{kind:"CheckConstraintNode",expression:this.transformNode(a.expression,b),name:this.transformNode(a.name,b)}}transformWith(a,b){return{kind:"WithNode",expressions:this.transformNodeList(a.expressions,b),recursive:a.recursive}}transformCommonTableExpression(a,b){return{kind:"CommonTableExpressionNode",name:this.transformNode(a.name,b),materialized:a.materialized,expression:this.transformNode(a.expression,b)}}transformCommonTableExpressionName(a,b){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b)}}transformHaving(a,b){return{kind:"HavingNode",having:this.transformNode(a.having,b)}}transformCreateSchema(a,b){return{kind:"CreateSchemaNode",schema:this.transformNode(a.schema,b),ifNotExists:a.ifNotExists}}transformDropSchema(a,b){return{kind:"DropSchemaNode",schema:this.transformNode(a.schema,b),ifExists:a.ifExists,cascade:a.cascade}}transformAlterTable(a,b){return{kind:"AlterTableNode",table:this.transformNode(a.table,b),renameTo:this.transformNode(a.renameTo,b),setSchema:this.transformNode(a.setSchema,b),columnAlterations:this.transformNodeList(a.columnAlterations,b),addConstraint:this.transformNode(a.addConstraint,b),dropConstraint:this.transformNode(a.dropConstraint,b),renameConstraint:this.transformNode(a.renameConstraint,b),addIndex:this.transformNode(a.addIndex,b),dropIndex:this.transformNode(a.dropIndex,b)}}transformDropColumn(a,b){return{kind:"DropColumnNode",column:this.transformNode(a.column,b)}}transformRenameColumn(a,b){return{kind:"RenameColumnNode",column:this.transformNode(a.column,b),renameTo:this.transformNode(a.renameTo,b)}}transformAlterColumn(a,b){return{kind:"AlterColumnNode",column:this.transformNode(a.column,b),dataType:this.transformNode(a.dataType,b),dataTypeExpression:this.transformNode(a.dataTypeExpression,b),setDefault:this.transformNode(a.setDefault,b),dropDefault:a.dropDefault,setNotNull:a.setNotNull,dropNotNull:a.dropNotNull}}transformModifyColumn(a,b){return{kind:"ModifyColumnNode",column:this.transformNode(a.column,b)}}transformAddConstraint(a,b){return{kind:"AddConstraintNode",constraint:this.transformNode(a.constraint,b)}}transformDropConstraint(a,b){return{kind:"DropConstraintNode",constraintName:this.transformNode(a.constraintName,b),ifExists:a.ifExists,modifier:a.modifier}}transformRenameConstraint(a,b){return{kind:"RenameConstraintNode",oldName:this.transformNode(a.oldName,b),newName:this.transformNode(a.newName,b)}}transformCreateView(a,b){return{kind:"CreateViewNode",name:this.transformNode(a.name,b),temporary:a.temporary,orReplace:a.orReplace,ifNotExists:a.ifNotExists,materialized:a.materialized,columns:this.transformNodeList(a.columns,b),as:this.transformNode(a.as,b)}}transformRefreshMaterializedView(a,b){return{kind:"RefreshMaterializedViewNode",name:this.transformNode(a.name,b),concurrently:a.concurrently,withNoData:a.withNoData}}transformDropView(a,b){return{kind:"DropViewNode",name:this.transformNode(a.name,b),ifExists:a.ifExists,materialized:a.materialized,cascade:a.cascade}}transformGenerated(a,b){return{kind:"GeneratedNode",byDefault:a.byDefault,always:a.always,identity:a.identity,stored:a.stored,expression:this.transformNode(a.expression,b)}}transformDefaultValue(a,b){return{kind:"DefaultValueNode",defaultValue:this.transformNode(a.defaultValue,b)}}transformOn(a,b){return{kind:"OnNode",on:this.transformNode(a.on,b)}}transformSelectModifier(a,b){return{kind:"SelectModifierNode",modifier:a.modifier,rawModifier:this.transformNode(a.rawModifier,b),of:this.transformNodeList(a.of,b)}}transformCreateType(a,b){return{kind:"CreateTypeNode",name:this.transformNode(a.name,b),enum:this.transformNode(a.enum,b)}}transformDropType(a,b){return{kind:"DropTypeNode",name:this.transformNode(a.name,b),ifExists:a.ifExists}}transformExplain(a,b){return{kind:"ExplainNode",format:a.format,options:this.transformNode(a.options,b)}}transformSchemableIdentifier(a,b){return{kind:"SchemableIdentifierNode",schema:this.transformNode(a.schema,b),identifier:this.transformNode(a.identifier,b)}}transformAggregateFunction(a,b){return{kind:"AggregateFunctionNode",func:a.func,aggregated:this.transformNodeList(a.aggregated,b),distinct:a.distinct,orderBy:this.transformNode(a.orderBy,b),withinGroup:this.transformNode(a.withinGroup,b),filter:this.transformNode(a.filter,b),over:this.transformNode(a.over,b)}}transformOver(a,b){return{kind:"OverNode",orderBy:this.transformNode(a.orderBy,b),partitionBy:this.transformNode(a.partitionBy,b)}}transformPartitionBy(a,b){return{kind:"PartitionByNode",items:this.transformNodeList(a.items,b)}}transformPartitionByItem(a,b){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(a.partitionBy,b)}}transformBinaryOperation(a,b){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(a.leftOperand,b),operator:this.transformNode(a.operator,b),rightOperand:this.transformNode(a.rightOperand,b)}}transformUnaryOperation(a,b){return{kind:"UnaryOperationNode",operator:this.transformNode(a.operator,b),operand:this.transformNode(a.operand,b)}}transformUsing(a,b){return{kind:"UsingNode",tables:this.transformNodeList(a.tables,b)}}transformFunction(a,b){return{kind:"FunctionNode",func:a.func,arguments:this.transformNodeList(a.arguments,b)}}transformCase(a,b){return{kind:"CaseNode",value:this.transformNode(a.value,b),when:this.transformNodeList(a.when,b),else:this.transformNode(a.else,b),isStatement:a.isStatement}}transformWhen(a,b){return{kind:"WhenNode",condition:this.transformNode(a.condition,b),result:this.transformNode(a.result,b)}}transformJSONReference(a,b){return{kind:"JSONReferenceNode",reference:this.transformNode(a.reference,b),traversal:this.transformNode(a.traversal,b)}}transformJSONPath(a,b){return{kind:"JSONPathNode",inOperator:this.transformNode(a.inOperator,b),pathLegs:this.transformNodeList(a.pathLegs,b)}}transformJSONPathLeg(a,b){return{kind:"JSONPathLegNode",type:a.type,value:a.value}}transformJSONOperatorChain(a,b){return{kind:"JSONOperatorChainNode",operator:this.transformNode(a.operator,b),values:this.transformNodeList(a.values,b)}}transformTuple(a,b){return{kind:"TupleNode",values:this.transformNodeList(a.values,b)}}transformMergeQuery(a,b){return{kind:"MergeQueryNode",into:this.transformNode(a.into,b),using:this.transformNode(a.using,b),whens:this.transformNodeList(a.whens,b),with:this.transformNode(a.with,b),top:this.transformNode(a.top,b),endModifiers:this.transformNodeList(a.endModifiers,b),output:this.transformNode(a.output,b),returning:this.transformNode(a.returning,b)}}transformMatched(a,b){return{kind:"MatchedNode",not:a.not,bySource:a.bySource}}transformAddIndex(a,b){return{kind:"AddIndexNode",name:this.transformNode(a.name,b),columns:this.transformNodeList(a.columns,b),unique:a.unique,using:this.transformNode(a.using,b),ifNotExists:a.ifNotExists}}transformCast(a,b){return{kind:"CastNode",expression:this.transformNode(a.expression,b),dataType:this.transformNode(a.dataType,b)}}transformFetch(a,b){return{kind:"FetchNode",rowCount:this.transformNode(a.rowCount,b),modifier:a.modifier}}transformTop(a,b){return{kind:"TopNode",expression:a.expression,modifiers:a.modifiers}}transformOutput(a,b){return{kind:"OutputNode",selections:this.transformNodeList(a.selections,b)}}transformDataType(a,b){return a}transformSelectAll(a,b){return a}transformIdentifier(a,b){return a}transformValue(a,b){return a}transformPrimitiveValueList(a,b){return a}transformOperator(a,b){return a}transformDefaultInsertValue(a,b){return a}transformOrAction(a,b){return a}transformCollate(a,b){return a}}},74297:(a,b,c)=>{c.d(b,{i:()=>i,n:()=>j,r:()=>h,t:()=>g});var d=c(5263),e=c(75564);function f(a,b="/api/auth"){try{let b=new URL(a);if("http:"!==b.protocol&&"https:"!==b.protocol)throw new e.$(`Invalid base URL: ${a}. URL must include 'http://' or 'https://'`)}catch(b){if(b instanceof e.$)throw b;throw new e.$(`Invalid base URL: ${a}. Please provide a valid base URL.`,String(b))}if(function(a){try{return"/"!==(new URL(a).pathname.replace(/\/+$/,"")||"/")}catch(b){throw new e.$(`Invalid base URL: ${a}. Please provide a valid base URL.`)}}(a))return a;let c=a.replace(/\/+$/,"");return b&&"/"!==b?(b=b.startsWith("/")?b:`/${b}`,`${c}${b}`):c}function g(a,b,c,g){if(a)return f(a,b);if(!1!==g){let a=d._K.BETTER_AUTH_URL||d._K.NEXT_PUBLIC_BETTER_AUTH_URL||d._K.PUBLIC_BETTER_AUTH_URL||d._K.NUXT_PUBLIC_BETTER_AUTH_URL||d._K.NUXT_PUBLIC_AUTH_URL||("/"!==d._K.BASE_URL?d._K.BASE_URL:void 0);if(a)return f(a,b)}let i=c?.headers.get("x-forwarded-host"),j=c?.headers.get("x-forwarded-proto");if(i&&j)return f(`${j}://${i}`,b);if(c){let a=h(c.url);if(!a)throw new e.$("Could not get origin from request. Please provide a valid base URL.");return f(a,b)}if("undefined"!=typeof window&&window.location)return f(window.location.origin,b)}function h(a){try{let b=new URL(a);return"null"===b.origin?null:b.origin}catch(a){return null}}function i(a){try{return new URL(a).protocol}catch(a){return null}}function j(a){try{return new URL(a).host}catch(a){return null}}},75301:(a,b,c)=>{c.d(b,{s:()=>g});var d=c(28707),e=c(71121),f=c(9732);let g=(a="SHA-256",b="none")=>{let c={importKey:async(b,c)=>(0,f.N)().importKey("raw","string"==typeof b?new TextEncoder().encode(b):b,{name:"HMAC",hash:{name:a}},!1,[c]),sign:async(a,g)=>{"string"==typeof a&&(a=await c.importKey(a,"sign"));let h=await (0,f.N)().sign("HMAC",a,"string"==typeof g?new TextEncoder().encode(g):g);return"hex"===b?d.u.encode(h):"base64"===b||"base64url"===b||"base64urlnopad"===b?e.z.encode(h,{padding:"base64urlnopad"!==b}):h},verify:async(a,g,h)=>("string"==typeof a&&(a=await c.importKey(a,"verify")),"hex"===b&&(h=d.u.decode(h)),("base64"===b||"base64url"===b||"base64urlnopad"===b)&&(h=await e.K.decode(h)),(0,f.N)().verify("HMAC",a,"string"==typeof h?new TextEncoder().encode(h):h,"string"==typeof g?new TextEncoder().encode(g):g))};return c}},75564:(a,b,c)=>{c.d(b,{$:()=>d.t,q:()=>d.n});var d=c(81233)},75578:(a,b,c)=>{c.d(b,{bzn:()=>cP,YOg:()=>cW,zMY:()=>cM,auy:()=>f,p6U:()=>cU,Rpp:()=>cm,k5n:()=>c3,uXy:()=>cy,ugL:()=>cA,_H3:()=>cZ,aig:()=>cI,Ikc:()=>cY,lqM:()=>c6,g1P:()=>c1,YjP:()=>cj});var d,e,f={};function g(a,b,c){function d(c,d){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:d,constr:g,traits:new Set},enumerable:!1}),c._zod.traits.has(a))return;c._zod.traits.add(a),b(c,d);let e=g.prototype,f=Object.keys(e);for(let a=0;a<f.length;a++){let b=f[a];b in c||(c[b]=e[b].bind(c))}}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}c.r(f),c.d(f,{bigint:()=>dk,boolean:()=>dj,date:()=>dl,number:()=>di,string:()=>dh}),Object.freeze({status:"aborted"}),Symbol("zod_brand");class h extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class i extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}let j={};function k(a){return a&&Object.assign(j,a),j}function l(a,b="|"){return a.map(a=>D(a)).join(b)}function m(a,b){return"bigint"==typeof b?b.toString():b}function n(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function o(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}let p=Symbol("evaluating");function q(a,b,c){let d;Object.defineProperty(a,b,{get(){if(d!==p)return void 0===d&&(d=p,d=c()),d},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function r(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function s(...a){let b={};for(let c of a)Object.assign(b,Object.getOwnPropertyDescriptors(c));return Object.defineProperties({},b)}function t(a){return JSON.stringify(a)}let u="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function v(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let w=n(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function x(a){if(!1===v(a))return!1;let b=a.constructor;if(void 0===b||"function"!=typeof b)return!0;let c=b.prototype;return!1!==v(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function y(a){return x(a)?{...a}:Array.isArray(a)?[...a]:a}let z=new Set(["string","number","symbol"]);function A(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function B(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function C(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function D(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}let E={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function F(a,b=0){if(!0===a.aborted)return!0;for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function G(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function H(a){return"string"==typeof a?a:a?.message}function I(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=H(a.inst?._zod.def?.error?.(a))??H(b?.error?.(a))??H(c.customError?.(a))??H(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function J(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function K(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}let L=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),a.message=JSON.stringify(b,m,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},M=g("$ZodError",L),N=g("$ZodError",L,{Parent:Error}),O=a=>(b,c,d,e)=>{let f=d?Object.assign(d,{async:!1}):{async:!1},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise)throw new h;if(g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>I(a,f,k())));throw u(b,e?.callee),b}return g.value},P=a=>async(b,c,d,e)=>{let f=d?Object.assign(d,{async:!0}):{async:!0},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise&&(g=await g),g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>I(a,f,k())));throw u(b,e?.callee),b}return g.value},Q=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new h;return f.issues.length?{success:!1,error:new(a??M)(f.issues.map(a=>I(a,e,k())))}:{success:!0,data:f.value}},R=Q(N),S=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>I(a,e,k())))}:{success:!0,data:f.value}},T=S(N),U=/^[cC][^\s-]{8,}$/,V=/^[0-9a-z]+$/,W=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,X=/^[0-9a-vA-V]{20}$/,Y=/^[A-Za-z0-9]{27}$/,Z=/^[a-zA-Z0-9_-]{21}$/,$=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,_=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,aa=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,ab=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ac=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ad=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ae=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,af=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ag=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ah=/^[A-Za-z0-9_-]*$/,ai=/^\+(?:[0-9]){6,14}[0-9]$/,aj="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ak=RegExp(`^${aj}$`);function al(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}let am=/^-?\d+n?$/,an=/^-?\d+$/,ao=/^-?\d+(?:\.\d+)?/,ap=/^(?:true|false)$/i,aq=/^[^A-Z]*$/,ar=/^[^a-z]*$/,as=g("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),at={number:"number",bigint:"bigint",object:"date"},au=g("$ZodCheckLessThan",(a,b)=>{as.init(a,b);let c=at[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),av=g("$ZodCheckGreaterThan",(a,b)=>{as.init(a,b);let c=at[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),aw=g("$ZodCheckMultipleOf",(a,b)=>{as.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===function(a,b){let c=(a.toString().split(".")[1]||"").length,d=b.toString(),e=(d.split(".")[1]||"").length;if(0===e&&/\d?e-\d?/.test(d)){let a=d.match(/\d?e-(\d?)/);a?.[1]&&(e=Number.parseInt(a[1]))}let f=c>e?c:e;return Number.parseInt(a.toFixed(f).replace(".",""))%Number.parseInt(b.toFixed(f).replace(".",""))/10**f}(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),ax=g("$ZodCheckNumberFormat",(a,b)=>{as.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=E[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=an)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",continue:!1,input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inst:a})}}),ay=g("$ZodCheckMaxLength",(a,b)=>{var c;as.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=J(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),az=g("$ZodCheckMinLength",(a,b)=>{var c;as.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=J(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),aA=g("$ZodCheckLengthEquals",(a,b)=>{var c;as.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=J(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),aB=g("$ZodCheckStringFormat",(a,b)=>{var c,d;as.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),aC=g("$ZodCheckRegex",(a,b)=>{aB.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),aD=g("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=aq),aB.init(a,b)}),aE=g("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=ar),aB.init(a,b)}),aF=g("$ZodCheckIncludes",(a,b)=>{as.init(a,b);let c=A(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),aG=g("$ZodCheckStartsWith",(a,b)=>{as.init(a,b);let c=RegExp(`^${A(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),aH=g("$ZodCheckEndsWith",(a,b)=>{as.init(a,b);let c=RegExp(`.*${A(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}}),aI=g("$ZodCheckOverwrite",(a,b)=>{as.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});class aJ{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}let aK={major:4,minor:1,patch:13},aL=g("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=aK;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=F(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new h;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=F(a,b)))});else{if(a.issues.length===b)continue;e||(e=F(a,b))}}return d?d.then(()=>a):a},c=(c,e,f)=>{if(F(c))return c.aborted=!0,c;let g=b(e,d,f);if(g instanceof Promise){if(!1===f.async)throw new h;return g.then(b=>a._zod.parse(b,f))}return a._zod.parse(g,f)};a._zod.run=(e,f)=>{if(f.skipChecks)return a._zod.parse(e,f);if("backward"===f.direction){let b=a._zod.parse({value:e.value,issues:[]},{...f,skipChecks:!0});return b instanceof Promise?b.then(a=>c(a,e,f)):c(b,e,f)}let g=a._zod.parse(e,f);if(g instanceof Promise){if(!1===f.async)throw new h;return g.then(a=>b(a,d,f))}return b(g,d,f)}}a["~standard"]={validate:b=>{try{let c=R(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return T(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),aM=g("$ZodString",(a,b)=>{aL.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??(a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)})(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),aN=g("$ZodStringFormat",(a,b)=>{aB.init(a,b),aM.init(a,b)}),aO=g("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=_),aN.init(a,b)}),aP=g("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=aa(a))}else b.pattern??(b.pattern=aa());aN.init(a,b)}),aQ=g("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=ab),aN.init(a,b)}),aR=g("$ZodURL",(a,b)=>{aN.init(a,b),a._zod.check=c=>{try{let d=c.value.trim(),e=new URL(d);b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:b.hostname.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),b.normalize?c.value=e.href:c.value=d;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),aS=g("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),aN.init(a,b)}),aT=g("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=Z),aN.init(a,b)}),aU=g("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=U),aN.init(a,b)}),aV=g("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=V),aN.init(a,b)}),aW=g("$ZodULID",(a,b)=>{b.pattern??(b.pattern=W),aN.init(a,b)}),aX=g("$ZodXID",(a,b)=>{b.pattern??(b.pattern=X),aN.init(a,b)}),aY=g("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=Y),aN.init(a,b)}),aZ=g("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=function(a){let b=al({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${aj}T(?:${d})$`)}(b)),aN.init(a,b)}),a$=g("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=ak),aN.init(a,b)}),a_=g("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=RegExp(`^${al(b)}$`)),aN.init(a,b)}),a0=g("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=$),aN.init(a,b)}),a1=g("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=ac),aN.init(a,b),a._zod.bag.format="ipv4"}),a2=g("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=ad),aN.init(a,b),a._zod.bag.format="ipv6",a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),a3=g("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=ae),aN.init(a,b)}),a4=g("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=af),aN.init(a,b),a._zod.check=c=>{let d=c.value.split("/");try{if(2!==d.length)throw Error();let[a,b]=d;if(!b)throw Error();let c=Number(b);if(`${c}`!==b||c<0||c>128)throw Error();new URL(`http://[${a}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function a5(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let a6=g("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=ag),aN.init(a,b),a._zod.bag.contentEncoding="base64",a._zod.check=c=>{a5(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}}),a7=g("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=ah),aN.init(a,b),a._zod.bag.contentEncoding="base64url",a._zod.check=c=>{!function(a){if(!ah.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return a5(b.padEnd(4*Math.ceil(b.length/4),"="))}(c.value)&&c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),a8=g("$ZodE164",(a,b)=>{b.pattern??(b.pattern=ai),aN.init(a,b)}),a9=g("$ZodJWT",(a,b)=>{aN.init(a,b),a._zod.check=c=>{!function(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}(c.value,b.alg)&&c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),ba=g("$ZodNumber",(a,b)=>{aL.init(a,b),a._zod.pattern=a._zod.bag.pattern??ao,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),bb=g("$ZodNumberFormat",(a,b)=>{ax.init(a,b),ba.init(a,b)}),bc=g("$ZodBoolean",(a,b)=>{aL.init(a,b),a._zod.pattern=ap,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),bd=g("$ZodBigInt",(a,b)=>{aL.init(a,b),a._zod.pattern=am,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=BigInt(c.value)}catch(a){}return"bigint"==typeof c.value||c.issues.push({expected:"bigint",code:"invalid_type",input:c.value,inst:a}),c}}),be=g("$ZodAny",(a,b)=>{aL.init(a,b),a._zod.parse=a=>a}),bf=g("$ZodUnknown",(a,b)=>{aL.init(a,b),a._zod.parse=a=>a}),bg=g("$ZodNever",(a,b)=>{aL.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)}),bh=g("$ZodDate",(a,b)=>{aL.init(a,b),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=new Date(c.value)}catch(a){}let e=c.value,f=e instanceof Date;return f&&!Number.isNaN(e.getTime())||c.issues.push({expected:"date",code:"invalid_type",input:e,...f?{received:"Invalid Date"}:{},inst:a}),c}});function bi(a,b,c){a.issues.length&&b.issues.push(...G(c,a.issues)),b.value[c]=a.value}let bj=g("$ZodArray",(a,b)=>{aL.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>bi(b,c,a))):bi(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function bk(a,b,c,d){a.issues.length&&b.issues.push(...G(c,a.issues)),void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}function bl(a){var b;let c=Object.keys(a.shape);for(let b of c)if(!a.shape?.[b]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${b}": expected a Zod schema`);let d=Object.keys(b=a.shape).filter(a=>"optional"===b[a]._zod.optin&&"optional"===b[a]._zod.optout);return{...a,keys:c,keySet:new Set(c),numKeys:c.length,optionalKeys:new Set(d)}}function bm(a,b,c,d,e,f){let g=[],h=e.keySet,i=e.catchall._zod,j=i.def.type;for(let e in b){if(h.has(e))continue;if("never"===j){g.push(e);continue}let f=i.run({value:b[e],issues:[]},d);f instanceof Promise?a.push(f.then(a=>bk(a,c,e,b))):bk(f,c,e,b)}return(g.length&&c.issues.push({code:"unrecognized_keys",keys:g,input:b,inst:f}),a.length)?Promise.all(a).then(()=>c):c}let bn=g("$ZodObject",(a,b)=>{let c;aL.init(a,b);let d=Object.getOwnPropertyDescriptor(b,"shape");if(!d?.get){let a=b.shape;Object.defineProperty(b,"shape",{get:()=>{let c={...a};return Object.defineProperty(b,"shape",{value:c}),c}})}let e=n(()=>bl(b));q(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=b.catchall;a._zod.parse=(b,d)=>{c??(c=e.value);let g=b.value;if(!v(g))return b.issues.push({expected:"object",code:"invalid_type",input:g,inst:a}),b;b.value={};let h=[],i=c.shape;for(let a of c.keys){let c=i[a]._zod.run({value:g[a],issues:[]},d);c instanceof Promise?h.push(c.then(c=>bk(c,b,a,g))):bk(c,b,a,g)}return f?bm(h,g,b,d,e.value,a):h.length?Promise.all(h).then(()=>b):b}}),bo=g("$ZodObjectJIT",(a,b)=>{let c,d;bn.init(a,b);let e=a._zod.parse,f=n(()=>bl(b)),g=!j.jitless,h=g&&w.value,i=b.catchall;a._zod.parse=(j,k)=>{d??(d=f.value);let l=j.value;return v(l)?g&&h&&k?.async===!1&&!0!==k.jitless?(c||(c=(a=>{let b=new aJ(["shape","payload","ctx"]),c=f.value,d=a=>{let b=t(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let e=Object.create(null),g=0;for(let a of c.keys)e[a]=`key_${g++}`;for(let a of(b.write("const newResult = {};"),c.keys)){let c=e[a],f=t(a);b.write(`const ${c} = ${d(a)};`),b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${f}, ...iss.path] : [${f}]
          })));
        }
        
        
        if (${c}.value === undefined) {
          if (${f} in input) {
            newResult[${f}] = undefined;
          }
        } else {
          newResult[${f}] = ${c}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),j=c(j,k),i)?bm([],l,j,k,d,a):j:e(j,k):(j.issues.push({expected:"object",code:"invalid_type",input:l,inst:a}),j)}});function bp(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;let e=a.filter(a=>!F(a));return 1===e.length?(b.value=e[0].value,e[0]):(b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>I(a,d,k())))}),b)}let bq=g("$ZodUnion",(a,b)=>{aL.init(a,b),q(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),q(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),q(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),q(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>o(a.source)).join("|")})$`)}});let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);if(b instanceof Promise)h.push(b),g=!0;else{if(0===b.issues.length)return b;h.push(b)}}return g?Promise.all(h).then(b=>bp(b,e,a,f)):bp(h,e,a,f)}}),br=g("$ZodIntersection",(a,b)=>{aL.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>bs(a,b,c)):bs(a,e,f)}});function bs(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),F(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(x(b)&&x(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}let bt=g("$ZodRecord",(a,b)=>{aL.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!x(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[],g=b.keyType._zod.values;if(g){let h;c.value={};let i=new Set;for(let a of g)if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){i.add("number"==typeof a?a.toString():a);let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...G(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...G(a,g.issues)),c.value[a]=g.value)}for(let a in e)i.has(a)||(h=h??[]).push(a);h&&h.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:h})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(h.issues.length){c.issues.push({code:"invalid_key",origin:"record",issues:h.issues.map(a=>I(a,d,k())),input:g,path:[g],inst:a}),c.value[h.value]=h.value;continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...G(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...G(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}}),bu=g("$ZodEnum",(a,b)=>{aL.init(a,b);let c=function(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}(b.entries),d=new Set(c);a._zod.values=d,a._zod.pattern=RegExp(`^(${c.filter(a=>z.has(typeof a)).map(a=>"string"==typeof a?A(a):a.toString()).join("|")})$`),a._zod.parse=(b,e)=>{let f=b.value;return d.has(f)||b.issues.push({code:"invalid_value",values:c,input:f,inst:a}),b}}),bv=g("$ZodTransform",(a,b)=>{aL.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new i(a.constructor.name);let e=b.transform(c.value,c);if(d.async)return(e instanceof Promise?e:Promise.resolve(e)).then(a=>(c.value=a,c));if(e instanceof Promise)throw new h;return c.value=e,c}});function bw(a,b){return a.issues.length&&void 0===b?{issues:[],value:void 0}:a}let bx=g("$ZodOptional",(a,b)=>{aL.init(a,b),a._zod.optin="optional",a._zod.optout="optional",q(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),q(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${o(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>{if("optional"===b.innerType._zod.optin){let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>bw(b,a.value)):bw(d,a.value)}return void 0===a.value?a:b.innerType._zod.run(a,c)}}),by=g("$ZodNullable",(a,b)=>{aL.init(a,b),q(a._zod,"optin",()=>b.innerType._zod.optin),q(a._zod,"optout",()=>b.innerType._zod.optout),q(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${o(a.source)}|null)$`):void 0}),q(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),bz=g("$ZodDefault",(a,b)=>{aL.init(a,b),a._zod.optin="optional",q(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>bA(a,b)):bA(d,b)}});function bA(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let bB=g("$ZodPrefault",(a,b)=>{aL.init(a,b),a._zod.optin="optional",q(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>("backward"===c.direction||void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),bC=g("$ZodNonOptional",(a,b)=>{aL.init(a,b),q(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>bD(b,a)):bD(e,a)}});function bD(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let bE=g("$ZodCatch",(a,b)=>{aL.init(a,b),q(a._zod,"optin",()=>b.innerType._zod.optin),q(a._zod,"optout",()=>b.innerType._zod.optout),q(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>I(a,c,k()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>I(a,c,k()))},input:a.value}),a.issues=[]),a)}}),bF=g("$ZodPipe",(a,b)=>{aL.init(a,b),q(a._zod,"values",()=>b.in._zod.values),q(a._zod,"optin",()=>b.in._zod.optin),q(a._zod,"optout",()=>b.out._zod.optout),q(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("backward"===c.direction){let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>bG(a,b.in,c)):bG(d,b.in,c)}let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>bG(a,b.out,c)):bG(d,b.out,c)}});function bG(a,b,c){return a.issues.length?(a.aborted=!0,a):b._zod.run({value:a.value,issues:a.issues},c)}let bH=g("$ZodReadonly",(a,b)=>{aL.init(a,b),q(a._zod,"propValues",()=>b.innerType._zod.propValues),q(a._zod,"values",()=>b.innerType._zod.values),q(a._zod,"optin",()=>b.innerType?._zod?.optin),q(a._zod,"optout",()=>b.innerType?._zod?.optout),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(bI):bI(d)}});function bI(a){return a.value=Object.freeze(a.value),a}let bJ=g("$ZodCustom",(a,b)=>{as.init(a,b),aL.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>bK(b,c,d,a));bK(e,c,d,a)}});function bK(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(K(a))}}Symbol("ZodOutput"),Symbol("ZodInput");class bL{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...b){let c=b[0];if(this._map.set(a,c),c&&"object"==typeof c&&"id"in c){if(this._idmap.has(c.id))throw Error(`ID ${c.id} already exists in the registry`);this._idmap.set(c.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};delete c.id;let d={...c,...this._map.get(a)};return Object.keys(d).length?d:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}(d=globalThis).__zod_globalRegistry??(d.__zod_globalRegistry=new bL);let bM=globalThis.__zod_globalRegistry;function bN(a,b){return new a({type:"string",format:"email",check:"string_format",abort:!1,...C(b)})}function bO(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...C(b)})}function bP(a,b){return new a({type:"string",format:"ipv4",check:"string_format",abort:!1,...C(b)})}function bQ(a,b){return new a({type:"string",format:"ipv6",check:"string_format",abort:!1,...C(b)})}function bR(a,b){return new au({check:"less_than",...C(b),value:a,inclusive:!1})}function bS(a,b){return new au({check:"less_than",...C(b),value:a,inclusive:!0})}function bT(a,b){return new av({check:"greater_than",...C(b),value:a,inclusive:!1})}function bU(a,b){return new av({check:"greater_than",...C(b),value:a,inclusive:!0})}function bV(a,b){return new aw({check:"multiple_of",...C(b),value:a})}function bW(a,b){return new ay({check:"max_length",...C(b),maximum:a})}function bX(a,b){return new az({check:"min_length",...C(b),minimum:a})}function bY(a,b){return new aA({check:"length_equals",...C(b),length:a})}function bZ(a){return new aI({check:"overwrite",tx:a})}let b$=g("ZodISODateTime",(a,b)=>{aZ.init(a,b),ck.init(a,b)}),b_=g("ZodISODate",(a,b)=>{a$.init(a,b),ck.init(a,b)}),b0=g("ZodISOTime",(a,b)=>{a_.init(a,b),ck.init(a,b)}),b1=g("ZodISODuration",(a,b)=>{a0.init(a,b),ck.init(a,b)}),b2=(a,b)=>{M.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b=a=>a.message){let c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code&&e.errors.length)e.errors.map(a=>d({issues:a}));else if("invalid_key"===e.code)d({issues:e.issues});else if("invalid_element"===e.code)d({issues:e.issues});else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(a),c})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>{a.issues.push(b),a.message=JSON.stringify(a.issues,m,2)}},addIssues:{value:b=>{a.issues.push(...b),a.message=JSON.stringify(a.issues,m,2)}},isEmpty:{get:()=>0===a.issues.length}})};g("ZodError",b2);let b3=g("ZodError",b2,{Parent:Error}),b4=O(b3),b5=P(b3),b6=Q(b3),b7=S(b3),b8=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return O(b3)(a,b,d)},b9=(a,b,c)=>O(b3)(a,b,c),ca=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return P(b3)(a,b,d)},cb=async(a,b,c)=>P(b3)(a,b,c),cc=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return Q(b3)(a,b,d)},cd=(a,b,c)=>Q(b3)(a,b,c),ce=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return S(b3)(a,b,d)},cf=async(a,b,c)=>S(b3)(a,b,c),cg=g("ZodType",(a,b)=>(aL.init(a,b),a.def=b,a.type=b.type,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone(s(b,{checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]})),a.clone=(b,c)=>B(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>b4(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>b6(a,b,c),a.parseAsync=async(b,c)=>b5(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>b7(a,b,c),a.spa=a.safeParseAsync,a.encode=(b,c)=>b8(a,b,c),a.decode=(b,c)=>b9(a,b,c),a.encodeAsync=async(b,c)=>ca(a,b,c),a.decodeAsync=async(b,c)=>cb(a,b,c),a.safeEncode=(b,c)=>cc(a,b,c),a.safeDecode=(b,c)=>cd(a,b,c),a.safeEncodeAsync=async(b,c)=>ce(a,b,c),a.safeDecodeAsync=async(b,c)=>cf(a,b,c),a.refine=(b,c)=>a.check(function(a,b={}){return new dg({type:"custom",check:"custom",fn:a,...C(b)})}(b,c)),a.superRefine=b=>a.check(function(a){let b=function(a,b){let c=new as({check:"custom",...C(void 0)});return c._zod.check=a,c}(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(K(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(K(a)))},a(c.value,c)));return b}(b)),a.overwrite=b=>a.check(bZ(b)),a.optional=()=>c6(a),a.nullable=()=>c8(a),a.nullish=()=>c6(c8(a)),a.nonoptional=b=>new db({type:"nonoptional",innerType:a,...C(b)}),a.array=()=>cW(a),a.or=b=>new c$({type:"union",options:[a,b],...C(void 0)}),a.and=b=>new c_({type:"intersection",left:a,right:b}),a.transform=b=>de(a,new c4({type:"transform",transform:b})),a.default=b=>(function(a,b){return new c9({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():y(b)}})})(a,b),a.prefault=b=>(function(a,b){return new da({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():y(b)}})})(a,b),a.catch=b=>(function(a,b){return new dc({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})})(a,b),a.pipe=b=>de(a,b),a.readonly=()=>new df({type:"readonly",innerType:a}),a.describe=b=>{let c=a.clone();return bM.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>bM.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return bM.get(a);let c=a.clone();return bM.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),ch=g("_ZodString",(a,b)=>{aM.init(a,b),cg.init(a,b);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(function(a,b){return new aC({check:"string_format",format:"regex",...C(b),pattern:a})}(...b)),a.includes=(...b)=>a.check(function(a,b){return new aF({check:"string_format",format:"includes",...C(b),includes:a})}(...b)),a.startsWith=(...b)=>a.check(function(a,b){return new aG({check:"string_format",format:"starts_with",...C(b),prefix:a})}(...b)),a.endsWith=(...b)=>a.check(function(a,b){return new aH({check:"string_format",format:"ends_with",...C(b),suffix:a})}(...b)),a.min=(...b)=>a.check(bX(...b)),a.max=(...b)=>a.check(bW(...b)),a.length=(...b)=>a.check(bY(...b)),a.nonempty=(...b)=>a.check(bX(1,...b)),a.lowercase=b=>a.check(new aD({check:"string_format",format:"lowercase",...C(b)})),a.uppercase=b=>a.check(new aE({check:"string_format",format:"uppercase",...C(b)})),a.trim=()=>a.check(bZ(a=>a.trim())),a.normalize=(...b)=>a.check(function(a){return bZ(b=>b.normalize(a))}(...b)),a.toLowerCase=()=>a.check(bZ(a=>a.toLowerCase())),a.toUpperCase=()=>a.check(bZ(a=>a.toUpperCase())),a.slugify=()=>a.check(bZ(a=>a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")))}),ci=g("ZodString",(a,b)=>{aM.init(a,b),ch.init(a,b),a.email=b=>a.check(bN(cl,b)),a.url=b=>a.check(new cp({type:"string",format:"url",check:"string_format",abort:!1,...C(b)})),a.jwt=b=>a.check(new cG({type:"string",format:"jwt",check:"string_format",abort:!1,...C(b)})),a.emoji=b=>a.check(new cq({type:"string",format:"emoji",check:"string_format",abort:!1,...C(b)})),a.guid=b=>a.check(bO(cn,b)),a.uuid=b=>a.check(new co({type:"string",format:"uuid",check:"string_format",abort:!1,...C(b)})),a.uuidv4=b=>a.check(new co({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...C(b)})),a.uuidv6=b=>a.check(new co({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...C(b)})),a.uuidv7=b=>a.check(new co({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...C(b)})),a.nanoid=b=>a.check(new cr({type:"string",format:"nanoid",check:"string_format",abort:!1,...C(b)})),a.guid=b=>a.check(bO(cn,b)),a.cuid=b=>a.check(new cs({type:"string",format:"cuid",check:"string_format",abort:!1,...C(b)})),a.cuid2=b=>a.check(new ct({type:"string",format:"cuid2",check:"string_format",abort:!1,...C(b)})),a.ulid=b=>a.check(new cu({type:"string",format:"ulid",check:"string_format",abort:!1,...C(b)})),a.base64=b=>a.check(new cD({type:"string",format:"base64",check:"string_format",abort:!1,...C(b)})),a.base64url=b=>a.check(new cE({type:"string",format:"base64url",check:"string_format",abort:!1,...C(b)})),a.xid=b=>a.check(new cv({type:"string",format:"xid",check:"string_format",abort:!1,...C(b)})),a.ksuid=b=>a.check(new cw({type:"string",format:"ksuid",check:"string_format",abort:!1,...C(b)})),a.ipv4=b=>a.check(bP(cx,b)),a.ipv6=b=>a.check(bQ(cz,b)),a.cidrv4=b=>a.check(new cB({type:"string",format:"cidrv4",check:"string_format",abort:!1,...C(b)})),a.cidrv6=b=>a.check(new cC({type:"string",format:"cidrv6",check:"string_format",abort:!1,...C(b)})),a.e164=b=>a.check(new cF({type:"string",format:"e164",check:"string_format",abort:!1,...C(b)})),a.datetime=b=>a.check(new b$({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...C(b)})),a.date=b=>a.check(new b_({type:"string",format:"date",check:"string_format",...C(b)})),a.time=b=>a.check(new b0({type:"string",format:"time",check:"string_format",precision:null,...C(b)})),a.duration=b=>a.check(new b1({type:"string",format:"duration",check:"string_format",...C(b)}))});function cj(a){return new ci({type:"string",...C(a)})}let ck=g("ZodStringFormat",(a,b)=>{aN.init(a,b),ch.init(a,b)}),cl=g("ZodEmail",(a,b)=>{aQ.init(a,b),ck.init(a,b)});function cm(a){return bN(cl,a)}let cn=g("ZodGUID",(a,b)=>{aO.init(a,b),ck.init(a,b)}),co=g("ZodUUID",(a,b)=>{aP.init(a,b),ck.init(a,b)}),cp=g("ZodURL",(a,b)=>{aR.init(a,b),ck.init(a,b)}),cq=g("ZodEmoji",(a,b)=>{aS.init(a,b),ck.init(a,b)}),cr=g("ZodNanoID",(a,b)=>{aT.init(a,b),ck.init(a,b)}),cs=g("ZodCUID",(a,b)=>{aU.init(a,b),ck.init(a,b)}),ct=g("ZodCUID2",(a,b)=>{aV.init(a,b),ck.init(a,b)}),cu=g("ZodULID",(a,b)=>{aW.init(a,b),ck.init(a,b)}),cv=g("ZodXID",(a,b)=>{aX.init(a,b),ck.init(a,b)}),cw=g("ZodKSUID",(a,b)=>{aY.init(a,b),ck.init(a,b)}),cx=g("ZodIPv4",(a,b)=>{a1.init(a,b),ck.init(a,b)});function cy(a){return bP(cx,a)}let cz=g("ZodIPv6",(a,b)=>{a2.init(a,b),ck.init(a,b)});function cA(a){return bQ(cz,a)}let cB=g("ZodCIDRv4",(a,b)=>{a3.init(a,b),ck.init(a,b)}),cC=g("ZodCIDRv6",(a,b)=>{a4.init(a,b),ck.init(a,b)}),cD=g("ZodBase64",(a,b)=>{a6.init(a,b),ck.init(a,b)}),cE=g("ZodBase64URL",(a,b)=>{a7.init(a,b),ck.init(a,b)}),cF=g("ZodE164",(a,b)=>{a8.init(a,b),ck.init(a,b)}),cG=g("ZodJWT",(a,b)=>{a9.init(a,b),ck.init(a,b)}),cH=g("ZodNumber",(a,b)=>{ba.init(a,b),cg.init(a,b),a.gt=(b,c)=>a.check(bT(b,c)),a.gte=(b,c)=>a.check(bU(b,c)),a.min=(b,c)=>a.check(bU(b,c)),a.lt=(b,c)=>a.check(bR(b,c)),a.lte=(b,c)=>a.check(bS(b,c)),a.max=(b,c)=>a.check(bS(b,c)),a.int=b=>a.check(cK(b)),a.safe=b=>a.check(cK(b)),a.positive=b=>a.check(bT(0,b)),a.nonnegative=b=>a.check(bU(0,b)),a.negative=b=>a.check(bR(0,b)),a.nonpositive=b=>a.check(bS(0,b)),a.multipleOf=(b,c)=>a.check(bV(b,c)),a.step=(b,c)=>a.check(bV(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null});function cI(a){return new cH({type:"number",checks:[],...C(a)})}let cJ=g("ZodNumberFormat",(a,b)=>{bb.init(a,b),cH.init(a,b)});function cK(a){return new cJ({type:"number",check:"number_format",abort:!1,format:"safeint",...C(a)})}let cL=g("ZodBoolean",(a,b)=>{bc.init(a,b),cg.init(a,b)});function cM(a){return new cL({type:"boolean",...C(a)})}let cN=g("ZodBigInt",(a,b)=>{bd.init(a,b),cg.init(a,b),a.gte=(b,c)=>a.check(bU(b,c)),a.min=(b,c)=>a.check(bU(b,c)),a.gt=(b,c)=>a.check(bT(b,c)),a.gte=(b,c)=>a.check(bU(b,c)),a.min=(b,c)=>a.check(bU(b,c)),a.lt=(b,c)=>a.check(bR(b,c)),a.lte=(b,c)=>a.check(bS(b,c)),a.max=(b,c)=>a.check(bS(b,c)),a.positive=b=>a.check(bT(BigInt(0),b)),a.negative=b=>a.check(bR(BigInt(0),b)),a.nonpositive=b=>a.check(bS(BigInt(0),b)),a.nonnegative=b=>a.check(bU(BigInt(0),b)),a.multipleOf=(b,c)=>a.check(bV(b,c));let c=a._zod.bag;a.minValue=c.minimum??null,a.maxValue=c.maximum??null,a.format=c.format??null}),cO=g("ZodAny",(a,b)=>{be.init(a,b),cg.init(a,b)});function cP(){return new cO({type:"any"})}let cQ=g("ZodUnknown",(a,b)=>{bf.init(a,b),cg.init(a,b)});function cR(){return new cQ({type:"unknown"})}let cS=g("ZodNever",(a,b)=>{bg.init(a,b),cg.init(a,b)}),cT=g("ZodDate",(a,b)=>{bh.init(a,b),cg.init(a,b),a.min=(b,c)=>a.check(bU(b,c)),a.max=(b,c)=>a.check(bS(b,c));let c=a._zod.bag;a.minDate=c.minimum?new Date(c.minimum):null,a.maxDate=c.maximum?new Date(c.maximum):null});function cU(a){return new cT({type:"date",...C(a)})}let cV=g("ZodArray",(a,b)=>{bj.init(a,b),cg.init(a,b),a.element=b.element,a.min=(b,c)=>a.check(bX(b,c)),a.nonempty=b=>a.check(bX(1,b)),a.max=(b,c)=>a.check(bW(b,c)),a.length=(b,c)=>a.check(bY(b,c)),a.unwrap=()=>a.element});function cW(a,b){return new cV({type:"array",element:a,...C(b)})}let cX=g("ZodObject",(a,b)=>{bo.init(a,b),cg.init(a,b),q(a,"shape",()=>b.shape),a.keyof=()=>c3(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:cR()}),a.loose=()=>a.clone({...a._zod.def,catchall:cR()}),a.strict=()=>a.clone({...a._zod.def,catchall:new cS({type:"never",...C(void 0)})}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>(function(a,b){if(!x(b))throw Error("Invalid input to extend: expected a plain object");let c=a._zod.def.checks;if(c&&c.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let d=s(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return r(this,"shape",c),c},checks:[]});return B(a,d)})(a,b),a.safeExtend=b=>(function(a,b){if(!x(b))throw Error("Invalid input to safeExtend: expected a plain object");let c={...a._zod.def,get shape(){let c={...a._zod.def.shape,...b};return r(this,"shape",c),c},checks:a._zod.def.checks};return B(a,c)})(a,b),a.merge=b=>(function(a,b){let c=s(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return r(this,"shape",c),c},get catchall(){return b._zod.def.catchall},checks:[]});return B(a,c)})(a,b),a.pick=b=>(function(a,b){let c=a._zod.def,d=s(a._zod.def,{get shape(){let a={};for(let d in b){if(!(d in c.shape))throw Error(`Unrecognized key: "${d}"`);b[d]&&(a[d]=c.shape[d])}return r(this,"shape",a),a},checks:[]});return B(a,d)})(a,b),a.omit=b=>(function(a,b){let c=a._zod.def,d=s(a._zod.def,{get shape(){let d={...a._zod.def.shape};for(let a in b){if(!(a in c.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete d[a]}return r(this,"shape",d),d},checks:[]});return B(a,d)})(a,b),a.partial=(...b)=>(function(a,b,c){let d=s(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return r(this,"shape",e),e},checks:[]});return B(b,d)})(c5,a,b[0]),a.required=(...b)=>(function(a,b,c){let d=s(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return r(this,"shape",e),e},checks:[]});return B(b,d)})(db,a,b[0])});function cY(a,b){return new cX({type:"object",shape:a??{},...C(b)})}function cZ(a,b){return new cX({type:"object",shape:a,catchall:cR(),...C(b)})}let c$=g("ZodUnion",(a,b)=>{bq.init(a,b),cg.init(a,b),a.options=b.options}),c_=g("ZodIntersection",(a,b)=>{br.init(a,b),cg.init(a,b)}),c0=g("ZodRecord",(a,b)=>{bt.init(a,b),cg.init(a,b),a.keyType=b.keyType,a.valueType=b.valueType});function c1(a,b,c){return new c0({type:"record",keyType:a,valueType:b,...C(c)})}let c2=g("ZodEnum",(a,b)=>{bu.init(a,b),cg.init(a,b),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new c2({...b,checks:[],...C(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new c2({...b,checks:[],...C(d),entries:e})}});function c3(a,b){return new c2({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...C(b)})}let c4=g("ZodTransform",(a,b)=>{bv.init(a,b),cg.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new i(a.constructor.name);c.addIssue=d=>{"string"==typeof d?c.issues.push(K(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),c.issues.push(K(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}}),c5=g("ZodOptional",(a,b)=>{bx.init(a,b),cg.init(a,b),a.unwrap=()=>a._zod.def.innerType});function c6(a){return new c5({type:"optional",innerType:a})}let c7=g("ZodNullable",(a,b)=>{by.init(a,b),cg.init(a,b),a.unwrap=()=>a._zod.def.innerType});function c8(a){return new c7({type:"nullable",innerType:a})}let c9=g("ZodDefault",(a,b)=>{bz.init(a,b),cg.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap}),da=g("ZodPrefault",(a,b)=>{bB.init(a,b),cg.init(a,b),a.unwrap=()=>a._zod.def.innerType}),db=g("ZodNonOptional",(a,b)=>{bC.init(a,b),cg.init(a,b),a.unwrap=()=>a._zod.def.innerType}),dc=g("ZodCatch",(a,b)=>{bE.init(a,b),cg.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap}),dd=g("ZodPipe",(a,b)=>{bF.init(a,b),cg.init(a,b),a.in=b.in,a.out=b.out});function de(a,b){return new dd({type:"pipe",in:a,out:b})}let df=g("ZodReadonly",(a,b)=>{bH.init(a,b),cg.init(a,b),a.unwrap=()=>a._zod.def.innerType}),dg=g("ZodCustom",(a,b)=>{bJ.init(a,b),cg.init(a,b)});function dh(a){return new ci({type:"string",coerce:!0,...C(a)})}function di(a){return new cH({type:"number",coerce:!0,checks:[],...C(a)})}function dj(a){return new cL({type:"boolean",coerce:!0,...C(a)})}function dk(a){return new cN({type:"bigint",coerce:!0,...C(a)})}function dl(a){return new cT({type:"date",coerce:!0,...C(a)})}e||(e={}),k({localeError:(()=>{let a={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return c=>{switch(c.code){case"invalid_type":return`Invalid input: expected ${c.expected}, received ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Invalid input: expected ${D(c.values[0])}`;return`Invalid option: expected one of ${l(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Too big: expected ${c.origin??"value"} to have ${b}${c.maximum.toString()} ${d.unit??"elements"}`;return`Too big: expected ${c.origin??"value"} to be ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Too small: expected ${c.origin} to have ${b}${c.minimum.toString()} ${d.unit}`;return`Too small: expected ${c.origin} to be ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Invalid string: must start with "${c.prefix}"`;if("ends_with"===c.format)return`Invalid string: must end with "${c.suffix}"`;if("includes"===c.format)return`Invalid string: must include "${c.includes}"`;if("regex"===c.format)return`Invalid string: must match pattern ${c.pattern}`;return`Invalid ${b[c.format]??c.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${c.divisor}`;case"unrecognized_keys":return`Unrecognized key${c.keys.length>1?"s":""}: ${l(c.keys,", ")}`;case"invalid_key":return`Invalid key in ${c.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${c.origin}`}}})()})},75872:(a,b,c)=>{c.d(b,{HE:()=>k,Io:()=>o,Lf:()=>p,XI:()=>n,e:()=>g});var d=c(94329),e=c(79419);let f=Symbol.for("drizzle:Schema"),g=Symbol.for("drizzle:Columns"),h=Symbol.for("drizzle:ExtraConfigColumns"),i=Symbol.for("drizzle:OriginalName"),j=Symbol.for("drizzle:BaseName"),k=Symbol.for("drizzle:IsAlias"),l=Symbol.for("drizzle:ExtraConfigBuilder"),m=Symbol.for("drizzle:IsDrizzleTable");class n{static [d.i]="Table";static Symbol={Name:e.E,Schema:f,OriginalName:i,Columns:g,ExtraConfigColumns:h,BaseName:j,IsAlias:k,ExtraConfigBuilder:l};[e.E];[i];[f];[g];[h];[j];[k]=!1;[m]=!0;[l]=void 0;constructor(a,b,c){this[e.E]=this[i]=a,this[f]=b,this[j]=c}}function o(a){return a[e.E]}function p(a){return`${a[f]??"public"}.${a[e.E]}`}},76862:(a,b,c)=>{c.d(b,{t:()=>u});var d=c(97791),e=c(17938),f=c(90663),g=c(35756);let h=(0,e.CN)({is:a=>"AggregateFunctionNode"===a.kind,create:(a,b=[])=>(0,e.CN)({kind:"AggregateFunctionNode",func:a,aggregated:b}),cloneWithDistinct:a=>(0,e.CN)({...a,distinct:!0}),cloneWithOrderBy(a,b,c=!1){let d=c?"withinGroup":"orderBy";return(0,e.CN)({...a,[d]:a[d]?g.O.cloneWithItems(a[d],b):g.O.create(b)})},cloneWithFilter:(a,b)=>(0,e.CN)({...a,filter:a.filter?f.o.cloneWithOperation(a.filter,"And",b):f.o.create(b)}),cloneWithOrFilter:(a,b)=>(0,e.CN)({...a,filter:a.filter?f.o.cloneWithOperation(a.filter,"Or",b):f.o.create(b)}),cloneWithOver:(a,b)=>(0,e.CN)({...a,over:b})}),i=(0,e.CN)({is:a=>"FunctionNode"===a.kind,create:(a,b)=>(0,e.CN)({kind:"FunctionNode",func:a,arguments:b})});var j=c(84699),k=c(23727),l=c(31866),m=c(69679),n=c(83965),o=c(16469),p=c(80955),q=c(93229);class r{#c;constructor(a){this.#c=(0,e.CN)(a)}get expressionType(){}as(a){return new s(this,a)}distinct(){return new r({...this.#c,aggregateFunctionNode:h.cloneWithDistinct(this.#c.aggregateFunctionNode)})}orderBy(...a){return new r({...this.#c,aggregateFunctionNode:q.L.cloneWithOrderByItems(this.#c.aggregateFunctionNode,(0,p.xk)(a))})}clearOrderBy(){return new r({...this.#c,aggregateFunctionNode:q.L.cloneWithoutOrderBy(this.#c.aggregateFunctionNode)})}withinGroupOrderBy(...a){return new r({...this.#c,aggregateFunctionNode:h.cloneWithOrderBy(this.#c.aggregateFunctionNode,(0,p.xk)(a),!0)})}filterWhere(...a){return new r({...this.#c,aggregateFunctionNode:h.cloneWithFilter(this.#c.aggregateFunctionNode,(0,o.GB)(a))})}filterWhereRef(a,b,c){return new r({...this.#c,aggregateFunctionNode:h.cloneWithFilter(this.#c.aggregateFunctionNode,(0,o.vC)(a,b,c))})}over(a){let b=(0,n.EQ)();return new r({...this.#c,aggregateFunctionNode:h.cloneWithOver(this.#c.aggregateFunctionNode,(a?a(b):b).toOperationNode())})}$call(a){return a(this)}$castTo(){return new r(this.#c)}$notNull(){return new r(this.#c)}toOperationNode(){return this.#c.aggregateFunctionNode}}class s{#a_;#b;constructor(a,b){this.#a_=a,this.#b=b}get expression(){return this.#a_}get alias(){return this.#b}toOperationNode(){return l.N.create(this.#a_.toOperationNode(),m.O.create(this.#b))}}var t=c(44228);function u(){let a=(a,b)=>new d.Is(i.create(a,(0,j.kU)(b??[]))),b=(a,b)=>new r({aggregateFunctionNode:h.create(a,b?(0,j.kU)(b):void 0)});return Object.assign(a,{agg:b,avg:a=>b("avg",[a]),coalesce:(...b)=>a("coalesce",b),count:a=>b("count",[a]),countAll:a=>new r({aggregateFunctionNode:h.create("count",(0,k.J)(a))}),max:a=>b("max",[a]),min:a=>b("min",[a]),sum:a=>b("sum",[a]),any:b=>a("any",[b]),jsonAgg:a=>new r({aggregateFunctionNode:h.create("json_agg",[(0,e.Kg)(a)?(0,t.M$)(a):a.toOperationNode()])}),toJson:a=>new d.Is(i.create("to_json",[(0,e.Kg)(a)?(0,t.M$)(a):a.toOperationNode()]))})}},76993:(a,b,c)=>{c.d(b,{dL:()=>h,uR:()=>i});var d=c(94329),e=c(37175),f=c(90091);class g extends f.pe{static [d.i]="PgUUIDBuilder";constructor(a){super(a,"string","PgUUID")}defaultRandom(){return this.default((0,e.ll)`gen_random_uuid()`)}build(a){return new h(a,this.config)}}class h extends f.Kl{static [d.i]="PgUUID";getSQLType(){return"uuid"}}function i(a){return new g(a??"")}},77175:(a,b,c)=>{c.d(b,{N:()=>e});var d=c(17938);function e(a){return(0,d.Gv)(a)&&(0,d.Tn)(a.toOperationNode)}},77883:(a,b,c)=>{let d,e;c.d(b,{k:()=>g});var f=c(94610);let g={startActiveSpan:(a,b)=>d?(e||(e=d.trace.getTracer("drizzle-orm","0.41.0")),(0,f.i)((c,d)=>d.startActiveSpan(a,a=>{try{return b(a)}catch(b){throw a.setStatus({code:c.SpanStatusCode.ERROR,message:b instanceof Error?b.message:"Unknown error"}),b}finally{a.end()}}),d,e)):b()}},78731:(a,b,c)=>{c.d(b,{c:()=>k,l:()=>i,s:()=>j,u:()=>e});var d=c(81899);let e=(a,b="ms")=>new Date(Date.now()+("sec"===b?1e3*a:a)),f=new WeakMap;function g(a,b){let c=b.fields,d={};for(let b in a){let e=c[b];if(!e){d[b]=a[b];continue}!1!==e.returned&&(d[b]=a[b])}return d}function h(a,b){f.has(a)||f.set(a,new Map);let c=f.get(a);if(c.has(b))return c.get(b);let d={..."user"===b?a.user?.additionalFields:{},..."session"===b?a.session?.additionalFields:{}};for(let c of a.plugins||[])c.schema&&c.schema[b]&&(d={...d,...c.schema[b].fields});return f.get(a).set(b,d),d}function i(a,b){return g(b,{fields:h(a,"user")})}function j(a,b){return g(b,{fields:h(a,"session")})}function k(a,b={},c){return function(a,b){let c=b.action||"create",e=b.fields,f=Object.assign(Object.create(null),null);for(let b in e){if(b in a){if(!1===e[b].input){if(void 0!==e[b].defaultValue&&"update"!==c){f[b]=e[b].defaultValue;continue}if(a[b])throw new d.LG("BAD_REQUEST",{message:`${b} is not allowed to be set`});continue}if(e[b].validator?.input&&void 0!==a[b]){f[b]=e[b].validator.input["~standard"].validate(a[b]);continue}if(e[b].transform?.input&&void 0!==a[b]){f[b]=e[b].transform?.input(a[b]);continue}f[b]=a[b];continue}if(void 0!==e[b].defaultValue&&"create"===c){if("function"==typeof e[b].defaultValue){f[b]=e[b].defaultValue();continue}f[b]=e[b].defaultValue;continue}if(e[b].required&&"create"===c)throw new d.LG("BAD_REQUEST",{message:`${b} is required`})}return f}(b,{fields:h(a,"user"),action:c})}},79419:(a,b,c)=>{c.d(b,{E:()=>d});let d=Symbol.for("drizzle:Name")},79440:(a,b,c)=>{var d,e;c.d(b,{CR:()=>g,ZS:()=>d,Zp:()=>f}),function(a){a.assertEqual=a=>{},a.assertIs=function(a){},a.assertNever=function(a){throw Error()},a.arrayToEnum=a=>{let b={};for(let c of a)b[c]=c;return b},a.getValidEnumValues=b=>{let c=a.objectKeys(b).filter(a=>"number"!=typeof b[b[a]]),d={};for(let a of c)d[a]=b[a];return a.objectValues(d)},a.objectValues=b=>a.objectKeys(b).map(function(a){return b[a]}),a.objectKeys="function"==typeof Object.keys?a=>Object.keys(a):a=>{let b=[];for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},a.find=(a,b)=>{for(let c of a)if(b(c))return c},a.isInteger="function"==typeof Number.isInteger?a=>Number.isInteger(a):a=>"number"==typeof a&&Number.isFinite(a)&&Math.floor(a)===a,a.joinValues=function(a,b=" | "){return a.map(a=>"string"==typeof a?`'${a}'`:a).join(b)},a.jsonStringifyReplacer=(a,b)=>"bigint"==typeof b?b.toString():b}(d||(d={})),(e||(e={})).mergeShapes=(a,b)=>({...a,...b});let f=d.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),g=a=>{switch(typeof a){case"undefined":return f.undefined;case"string":return f.string;case"number":return Number.isNaN(a)?f.nan:f.number;case"boolean":return f.boolean;case"function":return f.function;case"bigint":return f.bigint;case"symbol":return f.symbol;case"object":if(Array.isArray(a))return f.array;if(null===a)return f.null;if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return f.promise;if("undefined"!=typeof Map&&a instanceof Map)return f.map;if("undefined"!=typeof Set&&a instanceof Set)return f.set;if("undefined"!=typeof Date&&a instanceof Date)return f.date;return f.object;default:return f.unknown}}},79665:(a,b,c)=>{c.d(b,{C:()=>h,g:()=>g});var d=c(77175),e=c(84699),f=c(17938);class g{#a0;get dynamicReference(){return this.#a0}get refType(){}constructor(a){this.#a0=a}toOperationNode(){return(0,e.vd)(this.#a0)}}function h(a){return(0,f.Gv)(a)&&(0,d.N)(a)&&(0,f.Kg)(a.dynamicReference)}},79928:(a,b,c)=>{c.d(b,{V:()=>e});var d=c(94329);class e{constructor(a,b){this.table=a,this.config=b,this.name=b.name,this.keyAsName=b.keyAsName,this.notNull=b.notNull,this.default=b.default,this.defaultFn=b.defaultFn,this.onUpdateFn=b.onUpdateFn,this.hasDefault=b.hasDefault,this.primary=b.primaryKey,this.isUnique=b.isUnique,this.uniqueName=b.uniqueName,this.uniqueType=b.uniqueType,this.dataType=b.dataType,this.columnType=b.columnType,this.generated=b.generated,this.generatedIdentity=b.generatedIdentity}static [d.i]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(a){return a}mapToDriverValue(a){return a}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}},80094:(a,b,c)=>{c.d(b,{B:()=>e});var d=c(63624);function e(a,b){let c=`SHA-${a.slice(-3)}`;switch(a){case"HS256":case"HS384":case"HS512":return{hash:c,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:c,name:"RSA-PSS",saltLength:parseInt(a.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:c,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:c,name:"ECDSA",namedCurve:b.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:a};default:throw new d.T0(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},80955:(a,b,c)=>{c.d(b,{bE:()=>o,xk:()=>p});var d=c(79665),e=c(25021),f=c(17938);let g=(0,f.CN)({is:a=>"OrderByItemNode"===a.kind,create:(a,b)=>(0,f.CN)({kind:"OrderByItemNode",orderBy:a,direction:b}),cloneWith:(a,b)=>(0,f.CN)({...a,...b})});var h=c(53460),i=c(69679);let j={create:a=>(0,f.CN)({kind:"CollateNode",collation:i.O.create(a)})};class k{#c;constructor(a){this.#c=(0,f.CN)(a)}desc(){return new k({node:g.cloneWith(this.#c.node,{direction:h.z.createWithSql("desc")})})}asc(){return new k({node:g.cloneWith(this.#c.node,{direction:h.z.createWithSql("asc")})})}nullsLast(){return new k({node:g.cloneWith(this.#c.node,{nulls:"last"})})}nullsFirst(){return new k({node:g.cloneWith(this.#c.node,{nulls:"first"})})}collate(a){return new k({node:g.cloneWith(this.#c.node,{collation:j.create(a)})})}toOperationNode(){return this.#c.node}}var l=c(91561),m=c(63860),n=c(84699);function o(a){return"asc"===a||"desc"===a}function p(a){if(2===a.length)return[q(a[0],a[1])];if(1===a.length){let[b]=a;return Array.isArray(b)?((0,l.u)("orderBy(array) is deprecated, use multiple orderBy calls instead."),b.map(a=>q(a))):[q(b)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${a.length}`)}function q(a,b){let c=function(a){if((0,m.SS)(a))return(0,m.YK)(a);if((0,d.C)(a))return a.toOperationNode();let[b,c]=a.split(" ");return c?((0,l.u)("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),r((0,n.q5)(b),c)):(0,n.q5)(a)}(a);if(g.is(c)){if(b)throw Error("Cannot specify direction twice!");return c}return r(c,b)}function r(a,b){if("string"==typeof b){if(!o(b))throw Error(`Invalid order by direction: ${b}`);return g.create(a,h.z.createWithSql(b))}if((0,e.B)(b))return(0,l.u)("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),g.create(a,b.toOperationNode());let c=g.create(a);return b?b(new k({node:c})).toOperationNode():c}},81233:(a,b,c)=>{c.d(b,{n:()=>d,t:()=>e});let d={USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account."};var e=class extends Error{constructor(a,b){super(a),this.name="BetterAuthError",this.message=a,this.cause=b,this.stack=""}}},81713:(a,b,c)=>{function d(a){switch(a){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${a}`)}}function e(...a){let b=a.map(d).join("");if(0===b.length)throw Error("No valid characters provided for random string generation.");let c=b.length;return(a,...e)=>{let f;if(a<=0)throw Error("Length must be a positive integer.");let g=b,h=c;e.length>0&&(h=(g=e.map(d).join("")).length);let i=Math.floor(256/h)*h,j=new Uint8Array(2*a),k=j.length,l="",m=k;for(;l.length<a;)m>=k&&(crypto.getRandomValues(j),m=0),(f=j[m++])<i&&(l+=g[f%h]);return l}}c.d(b,{q:()=>e})},81899:(a,b,c)=>{c.d(b,{LG:()=>m,UD:()=>B,Ny:()=>C,aE:()=>bl,Zr:()=>p});var d=c(9732);let e=(()=>{let a=function(){};return a.prototype=Object.create(null),a})();function f(){return{root:{key:""},static:new e}}function g(a){return a.split("/").filter(Boolean)}function h(a,b){let c=new e;for(let[d,e]of b){let b=d<0?a.slice(-1*d).join("/"):a[d];if("string"==typeof e)c[e]=b;else{let a=b.match(e);if(a)for(let b in a.groups)c[b]=a.groups[b]}}return c}function i(a,b="",c,d){let f=g(c),h=a.root,j=0,k=[];for(let a=0;a<f.length;a++){let b=f[a];if(b.startsWith("**")){h.wildcard||(h.wildcard={key:"**"}),h=h.wildcard,k.push([-a,b.split(":")[1]||"_",2===b.length]);break}if("*"===b||b.includes(":")){h.param||(h.param={key:"*"}),h=h.param;let c="*"===b;k.push([a,c?`_${j++}`:function(a){if(!a.includes(":",1))return a.slice(1);let b=a.replace(/:(\w+)/g,(a,b)=>`(?<${b}>\\w+)`);return RegExp(`^${b}$`)}(b),c]);continue}let c=h.static?.[b];if(c)h=c;else{let a={key:b};h.static||(h.static=new e),h.static[b]=a,h=a}}let l=k.length>0;h.methods||(h.methods=new e),h.methods[b]||(h.methods[b]=[]),h.methods[b].push({data:d||null,paramsMap:l?k:void 0}),l||(a.static[c]=h)}let j={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511};var k=class extends Error{constructor(a="INTERNAL_SERVER_ERROR",b,c={},d="number"==typeof a?a:j[a]){super(b?.message,b?.cause?{cause:b.cause}:void 0),this.status=a,this.body=b,this.headers=c,this.statusCode=d,this.name="APIError",this.status=a,this.headers=c,this.statusCode=d,this.body=b?{code:b?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...b}:void 0}},l=class extends Error{constructor(a){super(a),this.name="BetterCallError"}};let m=function(a,b){class c extends a{#a1;constructor(...a){if(function(){let a=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");return void 0===a?Object.isExtensible(Error):Object.prototype.hasOwnProperty.call(a,"writable")?a.writable:void 0!==a.set}()){let b=Error.stackTraceLimit;Error.stackTraceLimit=0,super(...a),Error.stackTraceLimit=b}else super(...a);let b=Error().stack;b&&(this.#a1=function(a){let b=a.split("\n    at ");return b.length<=1?a:(b.splice(1,1),b.join("\n    at "))}(b.replace(/^Error/,this.name)))}get errorStack(){return this.#a1}}return Object.defineProperty(c.prototype,"constructor",{get:()=>b,enumerable:!1,configurable:!0}),c}(k,Error);async function n(a,b){let c=a.headers.get("content-type")||"",d=c.toLowerCase();if(a.body){if(b&&b.length>0&&!b.some(a=>{let b=d.split(";")[0].trim(),c=a.toLowerCase().trim();return b===c||b.includes(c)})){if(!d)throw new m(415,{message:`Content-Type is required. Allowed types: ${b.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"});throw new m(415,{message:`Content-Type "${c}" is not allowed. Allowed types: ${b.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"})}if(d.includes("application/json"))return await a.json();if(d.includes("application/x-www-form-urlencoded")){let b=await a.formData(),c={};return b.forEach((a,b)=>{c[b]=a.toString()}),c}if(d.includes("multipart/form-data")){let b=await a.formData(),c={};return b.forEach((a,b)=>{c[b]=a}),c}return d.includes("text/plain")?await a.text():d.includes("application/octet-stream")?await a.arrayBuffer():d.includes("application/pdf")||d.includes("image/")||d.includes("video/")?await a.blob():d.includes("application/stream")||a.body instanceof ReadableStream?a.body:await a.text()}}function o(a){return a instanceof m||a?.name==="APIError"}function p(a,b){if(a instanceof Response)return b?.headers instanceof Headers&&b.headers.forEach((b,c)=>{a.headers.set(c,b)}),a;if(a&&"object"==typeof a&&"_flag"in a&&"json"===a._flag){let c=a.body,d=a.routerResponse;if(d instanceof Response)return d;let e=new Headers;if(d?.headers){let a=new Headers(d.headers);for(let[b,c]of a.entries())a.set(b,c)}if(a.headers)for(let[b,c]of new Headers(a.headers).entries())e.set(b,c);if(b?.headers)for(let[a,c]of new Headers(b.headers).entries())e.set(a,c);return e.set("Content-Type","application/json"),new Response(JSON.stringify(c),{...d,headers:e,status:a.status??b?.status??d?.status,statusText:b?.statusText??d?.statusText})}if(o(a))return p(a.body,{status:b?.status??a.statusCode,statusText:a.status.toString(),headers:b?.headers||a.headers});let c=a,d=new Headers(b?.headers);return a?"string"==typeof a?(c=a,d.set("Content-Type","text/plain")):a instanceof ArrayBuffer||ArrayBuffer.isView(a)?(c=a,d.set("Content-Type","application/octet-stream")):a instanceof Blob?(c=a,d.set("Content-Type",a.type||"application/octet-stream")):a instanceof FormData?c=a:a instanceof URLSearchParams?(c=a,d.set("Content-Type","application/x-www-form-urlencoded")):a instanceof ReadableStream?(c=a,d.set("Content-Type","application/octet-stream")):function(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}(a)&&(c=function(a,b,c){let d=0,e=new WeakMap;return JSON.stringify(a,(a,b)=>{if("bigint"==typeof b)return b.toString();if("object"==typeof b&&null!==b){if(e.has(b))return`[Circular ref-${e.get(b)}]`;e.set(b,d++)}return b},void 0)}(a),d.set("Content-Type","application/json")):(null===a&&(c=JSON.stringify(null)),d.set("content-type","application/json")),new Response(c,{...b,headers:d})}async function q(a,b={}){let c={body:b.body,query:b.query};if(a.body){let d=await a.body["~standard"].validate(b.body);if(d.issues)return{data:null,error:r(d.issues,"body")};c.body=d.value}if(a.query){let d=await a.query["~standard"].validate(b.query);if(d.issues)return{data:null,error:r(d.issues,"query")};c.query=d.value}return a.requireHeaders&&!b.headers?{data:null,error:{message:"Headers is required"}}:a.requireRequest&&!b.request?{data:null,error:{message:"Request is required"}}:{data:c,error:null}}function r(a,b){let c=[];for(let b of a){let a=b.message;c.push(a)}return{message:`Invalid ${b} parameters`}}let s={name:"HMAC",hash:"SHA-256"},t=async a=>{let b="string"==typeof a?new TextEncoder().encode(a):a;return await (0,d.N)().importKey("raw",b,s,!1,["sign","verify"])},u=async(a,b,c)=>{try{let e=atob(a),f=new Uint8Array(e.length);for(let a=0,b=e.length;a<b;a++)f[a]=e.charCodeAt(a);return await (0,d.N)().verify(s,c,f,new TextEncoder().encode(b))}catch(a){return!1}},v=async(a,b)=>{let c=await t(b);return btoa(String.fromCharCode(...new Uint8Array(await (0,d.N)().sign(s.name,c,new TextEncoder().encode(a)))))},w=async(a,b)=>{let c=await v(a,b);return encodeURIComponent(a=`${a}.${c}`)},x=(a,b)=>{let c=a;if(b)if("secure"===b)c="__Secure-"+a;else{if("host"!==b)return;c="__Host-"+a}return c},y=(a,b,c={})=>{let d;if(d=c?.prefix==="secure"?`__Secure-${a}=${b}`:c?.prefix==="host"?`__Host-${a}=${b}`:`${a}=${b}`,a.startsWith("__Secure-")&&!c.secure&&(c.secure=!0),a.startsWith("__Host-")&&(c.secure||(c.secure=!0),"/"!==c.path&&(c.path="/"),c.domain&&(c.domain=void 0)),c&&"number"==typeof c.maxAge&&c.maxAge>=0){if(c.maxAge>3456e4)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");d+=`; Max-Age=${Math.floor(c.maxAge)}`}if(c.domain&&"host"!==c.prefix&&(d+=`; Domain=${c.domain}`),c.path&&(d+=`; Path=${c.path}`),c.expires){if(c.expires.getTime()-Date.now()>3456e7)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");d+=`; Expires=${c.expires.toUTCString()}`}return c.httpOnly&&(d+="; HttpOnly"),c.secure&&(d+="; Secure"),c.sameSite&&(d+=`; SameSite=${c.sameSite.charAt(0).toUpperCase()+c.sameSite.slice(1)}`),c.partitioned&&(c.secure||(c.secure=!0),d+="; Partitioned"),d},z=async(a,b,c,d)=>y(a,b=await w(b,c),d),A=async(a,{options:b,path:c})=>{let d,e=new Headers,{data:f,error:g}=await q(b,a);if(g)throw new m(400,{message:g.message,code:"VALIDATION_ERROR"});let h="headers"in a?a.headers instanceof Headers?a.headers:new Headers(a.headers):"request"in a&&a.request instanceof Request?a.request.headers:null,i=h?.get("cookie"),j=i?function(a){if("string"!=typeof a)throw TypeError("argument str must be a string");let b=new Map,c=0;for(;c<a.length;){let d=a.indexOf("=",c);if(-1===d)break;let e=a.indexOf(";",c);if(-1===e)e=a.length;else if(e<d){c=a.lastIndexOf(";",d-1)+1;continue}let f=a.slice(c,d).trim();if(!b.has(f)){let c=a.slice(d+1,e).trim();34===c.codePointAt(0)&&(c=c.slice(1,-1)),b.set(f,function(a){try{return a.includes("%")?decodeURIComponent(a):a}catch{return a}}(c))}c=e+1}return b}(i):void 0,k={...a,body:f.body,query:f.query,path:a.path||c||"virtual:",context:"context"in a&&a.context?a.context:{},returned:void 0,headers:a?.headers,request:a?.request,params:"params"in a?a.params:void 0,method:a.method,setHeader:(a,b)=>{e.set(a,b)},getHeader:a=>h?h.get(a):null,getCookie:(a,b)=>{let c=x(a,b);return c&&j?.get(c)||null},getSignedCookie:async(a,b,c)=>{let d=x(a,c);if(!d)return null;let e=j?.get(d);if(!e)return null;let f=e.lastIndexOf(".");if(f<1)return null;let g=e.substring(0,f),h=e.substring(f+1);return 44===h.length&&h.endsWith("=")?!!await u(h,g,await t(b))&&g:null},setCookie:(a,b,c)=>{let d=((a,b,c)=>y(a,b=encodeURIComponent(b),c))(a,b,c);return e.append("set-cookie",d),d},setSignedCookie:async(a,b,c,d)=>{let f=await z(a,b,c,d);return e.append("set-cookie",f),f},redirect:a=>(e.set("location",a),new m("FOUND",void 0,e)),error:(a,b,c)=>new m(a,b,c),setStatus:a=>{d=a},json:(b,c)=>a.asResponse?{body:c?.body||b,routerResponse:c,_flag:"json"}:b,responseHeaders:e,get responseStatus(){return d}};for(let a of b.use||[]){let b=await a({...k,returnHeaders:!0,asResponse:!1});b.response&&Object.assign(k.context,b.response),b.headers&&b.headers.forEach((a,b)=>{k.responseHeaders.set(b,a)})}return k};function B(a,b,c){let d="string"==typeof a?a:void 0,e="object"==typeof b?b:a,f="function"==typeof b?b:c;if(("GET"===e.method||"HEAD"===e.method)&&e.body)throw new l("Body is not allowed with GET or HEAD methods");let g=async(...a)=>{let b=a[0]||{},c=await A(b,{options:e,path:d}),g=await f(c).catch(async a=>{if(o(a)){let c=e.onAPIError;if(c&&await c(a),b.asResponse)return a}throw a}),h=c.responseHeaders,i=c.responseStatus;return b.asResponse?p(g,{headers:h,status:i}):b.returnHeaders?b.returnStatus?{headers:h,response:g,status:i}:{headers:h,response:g}:b.returnStatus?{response:g,status:i}:g};return g.options=e,g.path=d,g}function C(a,b){let c=async c=>{let d="function"==typeof a?a:b,e=await A(c,{options:"function"==typeof a?{}:a,path:"/"});if(!d)throw Error("handler must be defined");let f=await d(e),g=e.responseHeaders;return c.returnHeaders?{headers:g,response:f}:f};return c.options="function"==typeof a?{}:a,c}function D(a,b,c){function d(c,d){var e;for(let f in Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(e=c._zod).traits??(e.traits=new Set),c._zod.traits.add(a),b(c,d),g.prototype)f in c||Object.defineProperty(c,f,{value:g.prototype[f].bind(c)});c._zod.constr=g,c._zod.def=d}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}B.create=a=>(b,c,d)=>B(b,{...c,use:[...c?.use||[],...a?.use||[]]},d),C.create=a=>function(b,c){if("function"==typeof b)return C({use:a?.use},b);if(!c)throw Error("Middleware handler is required");return C({...b,method:"*",use:[...a?.use||[],...b.use||[]]},c)},Object.freeze({status:"aborted"}),Symbol("zod_brand");var E=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}};let F={};function G(a){return a&&Object.assign(F,a),F}function H(a,b){return"bigint"==typeof b?b.toString():b}function I(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function J(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}function K(a,b,c){Object.defineProperty(a,b,{get(){{let d=c();return a[b]=d,d}},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function L(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function M(a){return JSON.stringify(a)}let N=Error.captureStackTrace?Error.captureStackTrace:(...a)=>{};function O(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let P=I(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function Q(a){if(!1===O(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!1!==O(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}let R=new Set(["string","number","symbol"]);function S(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function T(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function U(a,b=0){for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function V(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function W(a){return"string"==typeof a?a:a?.message}function X(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=W(a.inst?._zod.def?.error?.(a))??W(b?.error?.(a))??W(c.customError?.(a))??W(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function Y(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function Z(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_VALUE,Number.MAX_VALUE;let $=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),Object.defineProperty(a,"message",{get:()=>JSON.stringify(b,H,2),enumerable:!0}),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},_=D("$ZodError",$),aa=D("$ZodError",$,{Parent:Error}),ab=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new E;return f.issues.length?{success:!1,error:new(a??_)(f.issues.map(a=>X(a,e,G())))}:{success:!0,data:f.value}},ac=ab(aa),ad=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>X(a,e,G())))}:{success:!0,data:f.value}},ae=ad(aa),af=D("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),ag=D("$ZodCheckMaxLength",(a,b)=>{var c;af.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=Y(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),ah=D("$ZodCheckMinLength",(a,b)=>{var c;af.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=Y(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),ai=D("$ZodCheckLengthEquals",(a,b)=>{var c;af.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=Y(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),aj=D("$ZodCheckOverwrite",(a,b)=>{af.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});var ak=class{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}};let al={major:4,minor:0,patch:0},am=D("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=al;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=U(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new E;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=U(a,b)))});else{if(a.issues.length===b)continue;e||(e=U(a,b))}}return d?d.then(()=>a):a};a._zod.run=(c,e)=>{let f=a._zod.parse(c,e);if(f instanceof Promise){if(!1===e.async)throw new E;return f.then(a=>b(a,d,e))}return b(f,d,e)}}a["~standard"]={validate:b=>{try{let c=ac(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return ae(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),an=D("$ZodUnknown",(a,b)=>{am.init(a,b),a._zod.parse=a=>a}),ao=D("$ZodNever",(a,b)=>{am.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)});function ap(a,b,c){a.issues.length&&b.issues.push(...V(c,a.issues)),b.value[c]=a.value}let aq=D("$ZodArray",(a,b)=>{am.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>ap(b,c,a))):ap(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function ar(a,b,c){a.issues.length&&b.issues.push(...V(c,a.issues)),b.value[c]=a.value}function as(a,b,c,d){a.issues.length?void 0===d[c]?c in d?b.value[c]=void 0:b.value[c]=a.value:b.issues.push(...V(c,a.issues)):void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}let at=D("$ZodObject",(a,b)=>{let c,d;am.init(a,b);let e=I(()=>{let a=Object.keys(b.shape);for(let c of a)if(!(b.shape[c]instanceof am))throw Error(`Invalid element at key "${c}": expected a Zod schema`);let c=function(a){return Object.keys(a).filter(b=>"optional"===a[b]._zod.optin&&"optional"===a[b]._zod.optout)}(b.shape);return{shape:b.shape,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(c)}});K(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=!F.jitless,g=f&&P.value,h=b.catchall;a._zod.parse=(i,j)=>{d??(d=e.value);let k=i.value;if(!O(k))return i.issues.push({expected:"object",code:"invalid_type",input:k,inst:a}),i;let l=[];if(f&&g&&j?.async===!1&&!0!==j.jitless)c||(c=(a=>{let b=new ak(["shape","payload","ctx"]),c=e.value,d=a=>{let b=M(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let f=Object.create(null),g=0;for(let a of c.keys)f[a]=`key_${g++}`;for(let a of(b.write("const newResult = {}"),c.keys))if(c.optionalKeys.has(a)){let c=f[a];b.write(`const ${c} = ${d(a)};`);let e=M(a);b.write(`
        if (${c}.issues.length) {
          if (input[${e}] === undefined) {
            if (${e} in input) {
              newResult[${e}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${c}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${e}, ...iss.path] : [${e}],
              }))
            );
          }
        } else if (${c}.value === undefined) {
          if (${e} in input) newResult[${e}] = undefined;
        } else {
          newResult[${e}] = ${c}.value;
        }
        `)}else{let c=f[a];b.write(`const ${c} = ${d(a)};`),b.write(`
          if (${c}.issues.length) payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${M(a)}, ...iss.path] : [${M(a)}]
          })));`),b.write(`newResult[${M(a)}] = ${c}.value`)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),i=c(i,j);else{i.value={};let a=d.shape;for(let b of d.keys){let c=a[b],d=c._zod.run({value:k[b],issues:[]},j),e="optional"===c._zod.optin&&"optional"===c._zod.optout;d instanceof Promise?l.push(d.then(a=>e?as(a,i,b,k):ar(a,i,b))):e?as(d,i,b,k):ar(d,i,b)}}if(!h)return l.length?Promise.all(l).then(()=>i):i;let m=[],n=d.keySet,o=h._zod,p=o.def.type;for(let a of Object.keys(k)){if(n.has(a))continue;if("never"===p){m.push(a);continue}let b=o.run({value:k[a],issues:[]},j);b instanceof Promise?l.push(b.then(b=>ar(b,i,a))):ar(b,i,a)}return(m.length&&i.issues.push({code:"unrecognized_keys",keys:m,input:k,inst:a}),l.length)?Promise.all(l).then(()=>i):i}});function au(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;return b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>X(a,d,G())))}),b}let av=D("$ZodUnion",(a,b)=>{am.init(a,b),K(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),K(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),K(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),K(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>J(a.source)).join("|")})$`)}}),a._zod.parse=(c,d)=>{let e=!1,f=[];for(let a of b.options){let b=a._zod.run({value:c.value,issues:[]},d);if(b instanceof Promise)f.push(b),e=!0;else{if(0===b.issues.length)return b;f.push(b)}}return e?Promise.all(f).then(b=>au(b,c,a,d)):au(f,c,a,d)}}),aw=D("$ZodIntersection",(a,b)=>{am.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>ax(a,b,c)):ax(a,e,f)}});function ax(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),U(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(Q(b)&&Q(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}let ay=D("$ZodEnum",(a,b)=>{am.init(a,b);let c=function(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}(b.entries);a._zod.values=new Set(c),a._zod.pattern=RegExp(`^(${c.filter(a=>R.has(typeof a)).map(a=>"string"==typeof a?a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):a.toString()).join("|")})$`),a._zod.parse=(b,d)=>{let e=b.value;return a._zod.values.has(e)||b.issues.push({code:"invalid_value",values:c,input:e,inst:a}),b}}),az=D("$ZodTransform",(a,b)=>{am.init(a,b),a._zod.parse=(a,c)=>{let d=b.transform(a.value,a);if(c.async)return(d instanceof Promise?d:Promise.resolve(d)).then(b=>(a.value=b,a));if(d instanceof Promise)throw new E;return a.value=d,a}}),aA=D("$ZodOptional",(a,b)=>{am.init(a,b),a._zod.optin="optional",a._zod.optout="optional",K(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),K(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${J(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>"optional"===b.innerType._zod.optin?b.innerType._zod.run(a,c):void 0===a.value?a:b.innerType._zod.run(a,c)}),aB=D("$ZodNullable",(a,b)=>{am.init(a,b),K(a._zod,"optin",()=>b.innerType._zod.optin),K(a._zod,"optout",()=>b.innerType._zod.optout),K(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${J(a.source)}|null)$`):void 0}),K(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),aC=D("$ZodDefault",(a,b)=>{am.init(a,b),a._zod.optin="optional",K(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>aD(a,b)):aD(d,b)}});function aD(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let aE=D("$ZodPrefault",(a,b)=>{am.init(a,b),a._zod.optin="optional",K(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>(void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),aF=D("$ZodNonOptional",(a,b)=>{am.init(a,b),K(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>aG(b,a)):aG(e,a)}});function aG(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let aH=D("$ZodCatch",(a,b)=>{am.init(a,b),a._zod.optin="optional",K(a._zod,"optout",()=>b.innerType._zod.optout),K(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>X(a,c,G()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>X(a,c,G()))},input:a.value}),a.issues=[]),a)}}),aI=D("$ZodPipe",(a,b)=>{am.init(a,b),K(a._zod,"values",()=>b.in._zod.values),K(a._zod,"optin",()=>b.in._zod.optin),K(a._zod,"optout",()=>b.out._zod.optout),a._zod.parse=(a,c)=>{let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>aJ(a,b,c)):aJ(d,b,c)}});function aJ(a,b,c){return U(a)?a:b.out._zod.run({value:a.value,issues:a.issues},c)}let aK=D("$ZodReadonly",(a,b)=>{am.init(a,b),K(a._zod,"propValues",()=>b.innerType._zod.propValues),K(a._zod,"values",()=>b.innerType._zod.values),K(a._zod,"optin",()=>b.innerType._zod.optin),K(a._zod,"optout",()=>b.innerType._zod.optout),a._zod.parse=(a,c)=>{let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(aL):aL(d)}});function aL(a){return a.value=Object.freeze(a.value),a}let aM=D("$ZodCustom",(a,b)=>{af.init(a,b),am.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>aN(b,c,d,a));aN(e,c,d,a)}});function aN(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(Z(a))}}Symbol("ZodOutput"),Symbol("ZodInput");let aO=new class{constructor(){this._map=new Map,this._idmap=new Map}add(a,...b){let c=b[0];if(this._map.set(a,c),c&&"object"==typeof c&&"id"in c){if(this._idmap.has(c.id))throw Error(`ID ${c.id} already exists in the registry`);this._idmap.set(c.id,a)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};return delete c.id,{...c,...this._map.get(a)}}return this._map.get(a)}has(a){return this._map.has(a)}};function aP(a,b){return new ah({check:"min_length",...T(b),minimum:a})}let aQ=(a,b)=>{_.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b){let c=b||function(a){return a.message},d={_errors:[]},e=a=>{for(let b of a.issues)if("invalid_union"===b.code&&b.errors.length)b.errors.map(a=>e({issues:a}));else if("invalid_key"===b.code)e({issues:b.issues});else if("invalid_element"===b.code)e({issues:b.issues});else if(0===b.path.length)d._errors.push(c(b));else{let a=d,e=0;for(;e<b.path.length;){let d=b.path[e];e!==b.path.length-1?a[d]=a[d]||{_errors:[]}:(a[d]=a[d]||{_errors:[]},a[d]._errors.push(c(b))),a=a[d],e++}}};return e(a),d})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>a.issues.push(b)},addIssues:{value:b=>a.issues.push(...b)},isEmpty:{get:()=>0===a.issues.length}})};D("ZodError",aQ);let aR=D("ZodError",aQ,{Parent:Error}),aS=(a,b,c,d)=>{let e=c?Object.assign(c,{async:!1}):{async:!1},f=a._zod.run({value:b,issues:[]},e);if(f instanceof Promise)throw new E;if(f.issues.length){let a=new(d?.Err??aR)(f.issues.map(a=>X(a,e,G())));throw N(a,d?.callee),a}return f.value},aT=async(a,b,c,d)=>{let e=c?Object.assign(c,{async:!0}):{async:!0},f=a._zod.run({value:b,issues:[]},e);if(f instanceof Promise&&(f=await f),f.issues.length){let a=new(d?.Err??aR)(f.issues.map(a=>X(a,e,G())));throw N(a,d?.callee),a}return f.value},aU=ab(aR),aV=ad(aR),aW=D("ZodType",(a,b)=>(am.init(a,b),a.def=b,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone({...b,checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),a.clone=(b,c)=>S(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>aS(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>aU(a,b,c),a.parseAsync=async(b,c)=>aT(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>aV(a,b,c),a.spa=a.safeParseAsync,a.refine=(b,c)=>a.check(function(a,b={}){return new bf({type:"custom",check:"custom",fn:a,...T(b)})}(b,c)),a.superRefine=b=>a.check(function(a){let b=function(a){let b=new af({check:"custom"});return b._zod.check=a,b}(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(Z(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(Z(a)))},a(c.value,c)));return b}(b)),a.overwrite=b=>a.check(new aj({check:"overwrite",tx:b})),a.optional=()=>a5(a),a.nullable=()=>a7(a),a.nullish=()=>a5(a7(a)),a.nonoptional=b=>new ba({type:"nonoptional",innerType:a,...T(b)}),a.array=()=>(function(a,b){return new a$({type:"array",element:a,...T(void 0)})})(a),a.or=b=>new a0({type:"union",options:[a,b],...T(void 0)}),a.and=b=>{var c;return c=a,new a1({type:"intersection",left:c,right:b})},a.transform=b=>bd(a,new a3({type:"transform",transform:b})),a.default=b=>(function(a,b){return new a8({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})})(a,b),a.prefault=b=>(function(a,b){return new a9({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})})(a,b),a.catch=b=>(function(a,b){return new bb({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})})(a,b),a.pipe=b=>bd(a,b),a.readonly=()=>new be({type:"readonly",innerType:a}),a.describe=b=>{let c=a.clone();return aO.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>aO.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return aO.get(a);let c=a.clone();return aO.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),aX=D("ZodUnknown",(a,b)=>{an.init(a,b),aW.init(a,b)});function aY(){return new aX({type:"unknown"})}let aZ=D("ZodNever",(a,b)=>{ao.init(a,b),aW.init(a,b)}),a$=D("ZodArray",(a,b)=>{aq.init(a,b),aW.init(a,b),a.element=b.element,a.min=(b,c)=>a.check(aP(b,c)),a.nonempty=b=>a.check(aP(1,b)),a.max=(b,c)=>a.check(new ag({check:"max_length",...T(c),maximum:b})),a.length=(b,c)=>a.check(new ai({check:"length_equals",...T(c),length:b})),a.unwrap=()=>a.element}),a_=D("ZodObject",(a,b)=>{at.init(a,b),aW.init(a,b),K(a,"shape",()=>b.shape),a.keyof=()=>(function(a,b){return new a2({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...T(void 0)})})(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:aY()}),a.loose=()=>a.clone({...a._zod.def,catchall:aY()}),a.strict=()=>a.clone({...a._zod.def,catchall:new aZ({type:"never",...T(void 0)})}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>(function(a,b){if(!Q(b))throw Error("Invalid input to extend: expected a plain object");return S(a,{...a._zod.def,get shape(){let c={...a._zod.def.shape,...b};return L(this,"shape",c),c},checks:[]})})(a,b),a.merge=b=>(function(a,b){return S(a,{...a._zod.def,get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return L(this,"shape",c),c},catchall:b._zod.def.catchall,checks:[]})})(a,b),a.pick=b=>(function(a,b){let c={},d=a._zod.def;for(let a in b){if(!(a in d.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&(c[a]=d.shape[a])}return S(a,{...a._zod.def,shape:c,checks:[]})})(a,b),a.omit=b=>(function(a,b){let c={...a._zod.def.shape},d=a._zod.def;for(let a in b){if(!(a in d.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete c[a]}return S(a,{...a._zod.def,shape:c,checks:[]})})(a,b),a.partial=(...b)=>(function(a,b,c){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return S(b,{...b._zod.def,shape:e,checks:[]})})(a4,a,b[0]),a.required=(...b)=>(function(a,b,c){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return S(b,{...b._zod.def,shape:e,checks:[]})})(ba,a,b[0])}),a0=D("ZodUnion",(a,b)=>{av.init(a,b),aW.init(a,b),a.options=b.options}),a1=D("ZodIntersection",(a,b)=>{aw.init(a,b),aW.init(a,b)}),a2=D("ZodEnum",(a,b)=>{ay.init(a,b),aW.init(a,b),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new a2({...b,checks:[],...T(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new a2({...b,checks:[],...T(d),entries:e})}}),a3=D("ZodTransform",(a,b)=>{az.init(a,b),aW.init(a,b),a._zod.parse=(c,d)=>{c.addIssue=d=>{"string"==typeof d?c.issues.push(Z(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),d.continue??(d.continue=!0),c.issues.push(Z(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}}),a4=D("ZodOptional",(a,b)=>{aA.init(a,b),aW.init(a,b),a.unwrap=()=>a._zod.def.innerType});function a5(a){return new a4({type:"optional",innerType:a})}let a6=D("ZodNullable",(a,b)=>{aB.init(a,b),aW.init(a,b),a.unwrap=()=>a._zod.def.innerType});function a7(a){return new a6({type:"nullable",innerType:a})}let a8=D("ZodDefault",(a,b)=>{aC.init(a,b),aW.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap}),a9=D("ZodPrefault",(a,b)=>{aE.init(a,b),aW.init(a,b),a.unwrap=()=>a._zod.def.innerType}),ba=D("ZodNonOptional",(a,b)=>{aF.init(a,b),aW.init(a,b),a.unwrap=()=>a._zod.def.innerType}),bb=D("ZodCatch",(a,b)=>{aH.init(a,b),aW.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap}),bc=D("ZodPipe",(a,b)=>{aI.init(a,b),aW.init(a,b),a.in=b.in,a.out=b.out});function bd(a,b){return new bc({type:"pipe",in:a,out:b})}let be=D("ZodReadonly",(a,b)=>{aK.init(a,b),aW.init(a,b)}),bf=D("ZodCustom",(a,b)=>{aM.init(a,b),aW.init(a,b)}),bg={};function bh(a){switch(a.constructor.name){case"ZodString":default:return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array"}}function bi(a){let b=[];return a.metadata?.openapi?.parameters?b.push(...a.metadata.openapi.parameters):a.query instanceof a_&&Object.entries(a.query.shape).forEach(([a,c])=>{c instanceof a_&&b.push({name:a,in:"query",schema:{type:bh(c),..."minLength"in c&&c.minLength?{minLength:c.minLength}:{},description:c.description}})}),b}function bj(a){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...a}}async function bk(a,b){return Object.entries(a).forEach(([a,b])=>{let c=b.options;if(!(!b.path||c.metadata?.SERVER_ONLY)&&("GET"===c.method&&(bg[b.path]={get:{tags:["Default",...c.metadata?.openapi?.tags||[]],description:c.metadata?.openapi?.description,operationId:c.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:bi(c),responses:bj(c.metadata?.openapi?.responses)}}),"POST"===c.method)){let a=function(a){if(a.metadata?.openapi?.requestBody)return a.metadata.openapi.requestBody;if(a.body&&(a.body instanceof a_||a.body instanceof a4)){let b=a.body.shape;if(!b)return;let c={},d=[];return Object.entries(b).forEach(([a,b])=>{b instanceof a_&&(c[a]={type:bh(b),description:b.description},b instanceof a4||d.push(a))}),{required:!(a.body instanceof a4)&&!!a.body,content:{"application/json":{schema:{type:"object",properties:c,required:d}}}}}}(c);bg[b.path]={post:{tags:["Default",...c.metadata?.openapi?.tags||[]],description:c.metadata?.openapi?.description,operationId:c.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:bi(c),...a?{requestBody:a}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:bj(c.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{schemas:{}},security:[{apiKeyCookie:[]}],servers:[{url:b?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:bg}}let bl=(a,b)=>{if(!b?.openapi?.disabled){let c={path:"/api/reference",...b?.openapi};a.openapi=B(c.path,{method:"GET"},async b=>new Response(((a,b)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(a)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${b?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(b.logo)}`:void 0} ,
	   	theme: ${b?.theme||"saturn"},
        metaData: {
			title: ${b?.title||"Open API Reference"},
			description: ${b?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`)(await bk(a),c.scalar),{headers:{"Content-Type":"text/html"}}))}let c=f(),d=f();for(let b of Object.values(a))if(!(!b.options||!b.path||b.options?.metadata?.SERVER_ONLY))for(let a of Array.isArray(b.options?.method)?b.options.method:[b.options?.method])i(c,a,b.path,b);if(b?.routerMiddleware?.length)for(let{path:a,middleware:c}of b.routerMiddleware)i(d,"*",a,c);let e=async a=>{let e=new URL(a.url),f=b?.basePath?e.pathname.split(b.basePath).reduce((a,c,d)=>(0!==d&&(d>1?a.push(`${b.basePath}${c}`):a.push(c)),a),[]).join(""):e.pathname;if(!f?.length)return new Response(null,{status:404,statusText:"Not Found"});let i=function(a,b="",c,d){"/"===c[c.length-1]&&(c=c.slice(0,-1));let e=a.static[c];if(e&&e.methods){let a=e.methods[b]||e.methods[""];if(void 0!==a)return a[0]}let f=g(c),i=function a(b,c,d,e,f){if(f===e.length){if(c.methods){let a=c.methods[d]||c.methods[""];if(a)return a}if(c.param&&c.param.methods){let a=c.param.methods[d]||c.param.methods[""];if(a){let b=a[0].paramsMap;if(b?.[b?.length-1]?.[2])return a}}if(c.wildcard&&c.wildcard.methods){let a=c.wildcard.methods[d]||c.wildcard.methods[""];if(a){let b=a[0].paramsMap;if(b?.[b?.length-1]?.[2])return a}}return}let g=e[f];if(c.static){let h=c.static[g];if(h){let c=a(b,h,d,e,f+1);if(c)return c}}if(c.param){let g=a(b,c.param,d,e,f+1);if(g)return g}if(c.wildcard&&c.wildcard.methods)return c.wildcard.methods[d]||c.wildcard.methods[""]}(a,a.root,b,f,0)?.[0];if(void 0!==i)return{data:i.data,params:i.paramsMap?h(f,i.paramsMap):void 0}}(c,a.method,f);if(!i?.data)return new Response(null,{status:404,statusText:"Not Found"});let j={};e.searchParams.forEach((a,b)=>{b in j?Array.isArray(j[b])?j[b].push(a):j[b]=[j[b],a]:j[b]=a});let k=i.data;try{let c=k.options.metadata?.allowedMediaTypes||b?.allowedMediaTypes,e={path:f,method:a.method,headers:a.headers,params:i.params?JSON.parse(JSON.stringify(i.params)):{},request:a,body:k.options.disableBody?void 0:await n(k.options.cloneRequest?a.clone():a,c),query:j,_flag:"router",asResponse:!0,context:b?.routerContext},l=function(a,b="",c,d){"/"===c[c.length-1]&&(c=c.slice(0,-1));let e=g(c);return(function a(b,c,d,e,f,g=[]){let h=e[f];if(c.wildcard&&c.wildcard.methods){let a=c.wildcard.methods[d]||c.wildcard.methods[""];a&&g.push(...a)}if(c.param&&(a(b,c.param,d,e,f+1,g),f===e.length&&c.param.methods)){let a=c.param.methods[d]||c.param.methods[""];a&&g.push(...a)}let i=c.static?.[h];if(i&&a(b,i,d,e,f+1,g),f===e.length&&c.methods){let a=c.methods[d]||c.methods[""];a&&g.push(...a)}return g})(a,a.root,b,e,0).map(a=>({data:a.data,params:a.paramsMap?h(e,a.paramsMap):void 0}))}(d,"*",f);if(l?.length)for(let{data:a,params:b}of l){let c=await a({...e,params:b,asResponse:!1});if(c instanceof Response)return c}return await k(e)}catch(a){if(b?.onError)try{let c=await b.onError(a);if(c instanceof Response)return p(c)}catch(a){if(o(a))return p(a);throw a}if(b?.throwError)throw a;if(o(a))return p(a);return console.error("# SERVER_ERROR: ",a),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async a=>{let c=await b?.onRequest?.(a);if(c instanceof Response)return c;let d=await e(c instanceof Request?c:a),f=await b?.onResponse?.(d);return f instanceof Response?f:d},endpoints:a}}},82153:(a,b,c)=>{function d(a,b=""){if(!Number.isSafeInteger(a)||a<0){let c=b&&`"${b}" `;throw Error(`${c}expected integer >= 0, got ${a}`)}}function e(a,b,c=""){let d=a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name,f=a?.length,g=void 0!==b;if(!d||g&&f!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(g?` of length ${b}`:"")+", got "+(d?`length=${f}`:`type=${typeof a}`));return a}function f(a){if("function"!=typeof a||"function"!=typeof a.create)throw Error("Hash must wrapped by utils.createHasher");d(a.outputLen),d(a.blockLen)}function g(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function h(a,b){e(a,void 0,"digestInto() output");let c=b.outputLen;if(a.length<c)throw Error('"digestInto() output" expected to be of length >='+c)}function i(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}function j(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}function k(a){return new DataView(a.buffer,a.byteOffset,a.byteLength)}function l(a,b){return a<<32-b|a>>>b}function m(a,b){return a<<b|a>>>32-b>>>0}c.d(b,{$h:()=>t,CC:()=>g,DH:()=>i,DO:()=>e,Fe:()=>d,Ht:()=>h,K_:()=>u,O8:()=>k,Ow:()=>l,aT:()=>r,aZ:()=>m,fd:()=>n,nx:()=>x,qj:()=>w,sd:()=>f,tY:()=>v,uH:()=>j});let n=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?a=>a:function(a){for(let c=0;c<a.length;c++){var b;a[c]=(b=a[c])<<24&0xff000000|b<<8&0xff0000|b>>>8&65280|b>>>24&255}return a},o="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,p={_0:48,_9:57,A:65,F:70,a:97,f:102};function q(a){return a>=p._0&&a<=p._9?a-p._0:a>=p.A&&a<=p.F?a-(p.A-10):a>=p.a&&a<=p.f?a-(p.a-10):void 0}function r(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(o)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=q(a.charCodeAt(e)),f=q(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}let s=async()=>{};async function t(a,b,c){let d=Date.now();for(let e=0;e<a;e++){c(e);let a=Date.now()-d;a>=0&&a<b||(await s(),d+=a)}}function u(a,b=""){if("string"==typeof a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}return e(a,void 0,b)}function v(a,b){if(void 0!==b&&"[object Object]"!==({}).toString.call(b))throw Error("options must be object or undefined");return Object.assign(a,b)}function w(a,b={}){let c=(b,c)=>a(c).update(b).digest(),d=a(void 0);return c.outputLen=d.outputLen,c.blockLen=d.blockLen,c.create=b=>a(b),Object.assign(c,b),Object.freeze(c)}let x=a=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,a])})},83021:(a,b,c)=>{c.d(b,{L:()=>k});var d=c(17938),e=c(46866);let f=(0,d.CN)({is:a=>"GroupByNode"===a.kind,create:a=>(0,d.CN)({kind:"GroupByNode",items:(0,d.CN)(a)}),cloneWithItems:(a,b)=>(0,d.CN)({...a,items:(0,d.CN)([...a.items,...b])})});var g=c(70085),h=c(43777);let i=(0,d.CN)({is:a=>"HavingNode"===a.kind,create:a=>(0,d.CN)({kind:"HavingNode",having:a}),cloneWithOperation:(a,b,c)=>(0,d.CN)({...a,having:"And"===b?g.s.create(a.having,c):h.K.create(a.having,c)})});var j=c(93229);let k=(0,d.CN)({is:a=>"SelectQueryNode"===a.kind,create:a=>(0,d.CN)({kind:"SelectQueryNode",...a&&{with:a}}),createFrom:(a,b)=>(0,d.CN)({kind:"SelectQueryNode",from:e.N.create(a),...b&&{with:b}}),cloneWithSelections:(a,b)=>(0,d.CN)({...a,selections:a.selections?(0,d.CN)([...a.selections,...b]):(0,d.CN)(b)}),cloneWithDistinctOn:(a,b)=>(0,d.CN)({...a,distinctOn:a.distinctOn?(0,d.CN)([...a.distinctOn,...b]):(0,d.CN)(b)}),cloneWithFrontModifier:(a,b)=>(0,d.CN)({...a,frontModifiers:a.frontModifiers?(0,d.CN)([...a.frontModifiers,b]):(0,d.CN)([b])}),cloneWithOrderByItems:(a,b)=>j.L.cloneWithOrderByItems(a,b),cloneWithGroupByItems:(a,b)=>(0,d.CN)({...a,groupBy:a.groupBy?f.cloneWithItems(a.groupBy,b):f.create(b)}),cloneWithLimit:(a,b)=>(0,d.CN)({...a,limit:b}),cloneWithOffset:(a,b)=>(0,d.CN)({...a,offset:b}),cloneWithFetch:(a,b)=>(0,d.CN)({...a,fetch:b}),cloneWithHaving:(a,b)=>(0,d.CN)({...a,having:a.having?i.cloneWithOperation(a.having,"And",b):i.create(b)}),cloneWithSetOperations:(a,b)=>(0,d.CN)({...a,setOperations:a.setOperations?(0,d.CN)([...a.setOperations,...b]):(0,d.CN)([...b])}),cloneWithoutSelections:a=>(0,d.CN)({...a,selections:[]}),cloneWithoutLimit:a=>(0,d.CN)({...a,limit:void 0}),cloneWithoutOffset:a=>(0,d.CN)({...a,offset:void 0}),cloneWithoutOrderBy:a=>j.L.cloneWithoutOrderBy(a),cloneWithoutGroupBy:a=>(0,d.CN)({...a,groupBy:void 0})})},83940:(a,b,c)=>{c.d(b,{J:()=>f,n:()=>e});var d=c(94329);class e{static [d.i]="Subquery";constructor(a,b,c,d=!1){this._={brand:"Subquery",sql:a,selectedFields:b,alias:c,isWith:d}}}class f extends e{static [d.i]="WithSubquery"}},83965:(a,b,c)=>{c.d(b,{GQ:()=>u,EQ:()=>v,bl:()=>t});var d=c(68774),e=c(17938),f=c(35756);let g=(0,e.CN)({is:a=>"PartitionByNode"===a.kind,create:a=>(0,e.CN)({kind:"PartitionByNode",items:(0,e.CN)(a)}),cloneWithItems:(a,b)=>(0,e.CN)({...a,items:(0,e.CN)([...a.items,...b])})}),h=(0,e.CN)({is:a=>"OverNode"===a.kind,create:()=>(0,e.CN)({kind:"OverNode"}),cloneWithOrderByItems:(a,b)=>(0,e.CN)({...a,orderBy:a.orderBy?f.O.cloneWithItems(a.orderBy,b):f.O.create(b)}),cloneWithPartitionByItems:(a,b)=>(0,e.CN)({...a,partitionBy:a.partitionBy?g.cloneWithItems(a.partitionBy,b):g.create(b)})});var i=c(53460),j=c(16469);class k{#c;constructor(a){this.#c=(0,e.CN)(a)}on(...a){return new k({...this.#c,joinNode:d.b.cloneWithOn(this.#c.joinNode,(0,j.GB)(a))})}onRef(a,b,c){return new k({...this.#c,joinNode:d.b.cloneWithOn(this.#c.joinNode,(0,j.vC)(a,b,c))})}onTrue(){return new k({...this.#c,joinNode:d.b.cloneWithOn(this.#c.joinNode,i.z.createWithSql("true"))})}$call(a){return a(this)}toOperationNode(){return this.#c.joinNode}}var l=c(93229),m=c(80955);let n=(0,e.CN)({is:a=>"PartitionByItemNode"===a.kind,create:a=>(0,e.CN)({kind:"PartitionByItemNode",partitionBy:a})});var o=c(84699);class p{#c;constructor(a){this.#c=(0,e.CN)(a)}orderBy(...a){return new p({overNode:h.cloneWithOrderByItems(this.#c.overNode,(0,m.xk)(a))})}clearOrderBy(){return new p({overNode:l.L.cloneWithoutOrderBy(this.#c.overNode)})}partitionBy(a){return new p({overNode:h.cloneWithPartitionByItems(this.#c.overNode,(0,o.kU)(a).map(n.create))})}$call(a){return a(this)}toOperationNode(){return this.#c.overNode}}var q=c(41517),r=c(42298),s=c(44228);function t(){return new q.n({executor:r.W})}function u(a,b){return new k({joinNode:d.b.create(a,(0,s.uJ)(b))})}function v(){return new p({overNode:h.create()})}},84605:(a,b,c)=>{c.d(b,{q:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"ValueNode"===a.kind,create:a=>(0,d.CN)({kind:"ValueNode",value:a}),createImmediate:a=>(0,d.CN)({kind:"ValueNode",value:a,immediate:!0})})},84699:(a,b,c)=>{c.d(b,{$O:()=>r,DT:()=>u,NF:()=>s,Ow:()=>w,RY:()=>v,kU:()=>q,q5:()=>t,vd:()=>p});var d=c(31866),e=c(69256),f=c(54745),g=c(34850),h=c(17938),i=c(63860),j=c(69679),k=c(80955),l=c(42382),m=c(864),n=c(98233),o=c(66268);function p(a){return(0,h.Kg)(a)?t(a):a.toOperationNode()}function q(a){return(0,h.MH)(a)?a.map(a=>r(a)):[r(a)]}function r(a){return(0,i.SS)(a)?(0,i.YK)(a):p(a)}function s(a,b){let c=t(a);if((0,l.Xm)(b))return m.Q.create(c,n.k.create(l.zX.create(b)));let d=b.slice(0,-1);if((0,l.Xm)(d))return m.Q.create(c,o.c.create(l.zX.create(d)));throw Error(`Invalid JSON operator: ${b}`)}function t(a){if(!a.includes("."))return f.q.create(e.Z.create(a));let b=a.split(".").map(x);if(3===b.length){var c=b;let[a,d,h]=c;return f.q.create(e.Z.create(h),g.H.createWithSchema(a,d))}if(2===b.length){var d=b;let[a,c]=d;return f.q.create(e.Z.create(c),g.H.create(a))}throw Error(`invalid column reference ${a}`)}function u(a){let b=" as ";if(!a.includes(b))return t(a);{let[c,e]=a.split(b).map(x);return d.N.create(t(c),j.O.create(e))}}function v(a){return e.Z.create(a)}function w(a){if(!a.includes(" "))return v(a);{let[b,c]=a.split(" ").map(x);if(!(0,k.bE)(c))throw Error(`invalid order direction "${c}" next to "${b}"`);return(0,k.xk)([b,c])[0]}}function x(a){return a.trim()}},85277:(a,b,c)=>{c.d(b,{w:()=>f});var d=c(82153);class e{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(a,b){if((0,d.sd)(a),(0,d.DO)(b,void 0,"key"),this.iHash=a.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let c=this.blockLen,e=new Uint8Array(c);e.set(b.length>c?a.create().update(b).digest():b);for(let a=0;a<e.length;a++)e[a]^=54;this.iHash.update(e),this.oHash=a.create();for(let a=0;a<e.length;a++)e[a]^=106;this.oHash.update(e),(0,d.uH)(e)}update(a){return(0,d.CC)(this),this.iHash.update(a),this}digestInto(a){(0,d.CC)(this),(0,d.DO)(a,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){let a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||=Object.create(Object.getPrototypeOf(this),{});let{oHash:b,iHash:c,finished:d,destroyed:e,blockLen:f,outputLen:g}=this;return a.finished=d,a.destroyed=e,a.blockLen=f,a.outputLen=g,a.oHash=b._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let f=(a,b,c)=>new e(a,b).update(c).digest();f.create=(a,b)=>new e(a,b)},87404:(a,b,c)=>{c.d(b,{cE:()=>m,k6:()=>l});var d=c(63624),e=c(11980),f=c(20228);let g=a=>Math.floor(a.getTime()/1e3),h=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function i(a){let b,c=h.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b}function j(a,b){if(!Number.isFinite(b))throw TypeError(`Invalid ${a} input`);return b}let k=a=>a.includes("/")?a.toLowerCase():`application/${a.toLowerCase()}`;function l(a,b,c={}){var h,j;let m,n;try{m=JSON.parse(e.D0.decode(b))}catch{}if(!(0,f.G)(m))throw new d.Dp("JWT Claims Set must be a top-level JSON object");let{typ:o}=c;if(o&&("string"!=typeof a.typ||k(a.typ)!==k(o)))throw new d.ie('unexpected "typ" JWT header value',m,"typ","check_failed");let{requiredClaims:p=[],issuer:q,subject:r,audience:s,maxTokenAge:t}=c,u=[...p];for(let a of(void 0!==t&&u.push("iat"),void 0!==s&&u.push("aud"),void 0!==r&&u.push("sub"),void 0!==q&&u.push("iss"),new Set(u.reverse())))if(!(a in m))throw new d.ie(`missing required "${a}" claim`,m,a,"missing");if(q&&!(Array.isArray(q)?q:[q]).includes(m.iss))throw new d.ie('unexpected "iss" claim value',m,"iss","check_failed");if(r&&m.sub!==r)throw new d.ie('unexpected "sub" claim value',m,"sub","check_failed");if(s&&(h=m.aud,j="string"==typeof s?[s]:s,"string"==typeof h?!j.includes(h):!(Array.isArray(h)&&j.some(Set.prototype.has.bind(new Set(h))))))throw new d.ie('unexpected "aud" claim value',m,"aud","check_failed");switch(typeof c.clockTolerance){case"string":n=i(c.clockTolerance);break;case"number":n=c.clockTolerance;break;case"undefined":n=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:v}=c,w=g(v||new Date);if((void 0!==m.iat||t)&&"number"!=typeof m.iat)throw new d.ie('"iat" claim must be a number',m,"iat","invalid");if(void 0!==m.nbf){if("number"!=typeof m.nbf)throw new d.ie('"nbf" claim must be a number',m,"nbf","invalid");if(m.nbf>w+n)throw new d.ie('"nbf" claim timestamp check failed',m,"nbf","check_failed")}if(void 0!==m.exp){if("number"!=typeof m.exp)throw new d.ie('"exp" claim must be a number',m,"exp","invalid");if(m.exp<=w-n)throw new d.n('"exp" claim timestamp check failed',m,"exp","check_failed")}if(t){let a=w-m.iat;if(a-n>("number"==typeof t?t:i(t)))throw new d.n('"iat" claim timestamp check failed (too far in the past)',m,"iat","check_failed");if(a<0-n)throw new d.ie('"iat" claim timestamp check failed (it should be in the past)',m,"iat","check_failed")}return m}class m{#aL;constructor(a){if(!(0,f.G)(a))throw TypeError("JWT Claims Set MUST be an object");this.#aL=structuredClone(a)}data(){return e.Rd.encode(JSON.stringify(this.#aL))}get iss(){return this.#aL.iss}set iss(a){this.#aL.iss=a}get sub(){return this.#aL.sub}set sub(a){this.#aL.sub=a}get aud(){return this.#aL.aud}set aud(a){this.#aL.aud=a}set jti(a){this.#aL.jti=a}set nbf(a){"number"==typeof a?this.#aL.nbf=j("setNotBefore",a):a instanceof Date?this.#aL.nbf=j("setNotBefore",g(a)):this.#aL.nbf=g(new Date)+i(a)}set exp(a){"number"==typeof a?this.#aL.exp=j("setExpirationTime",a):a instanceof Date?this.#aL.exp=j("setExpirationTime",g(a)):this.#aL.exp=g(new Date)+i(a)}set iat(a){void 0===a?this.#aL.iat=g(new Date):a instanceof Date?this.#aL.iat=j("setIssuedAt",g(a)):"string"==typeof a?this.#aL.iat=j("setIssuedAt",g(new Date)+i(a)):this.#aL.iat=j("setIssuedAt",a)}}},90091:(a,b,c)=>{c.d(b,{ae:()=>s,Kl:()=>q,pe:()=>p});var d=c(94329);class e{static [d.i]="ColumnBuilder";config;constructor(a,b,c){this.config={name:a,keyAsName:""===a,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:b,columnType:c,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(a){return this.config.default=a,this.config.hasDefault=!0,this}$defaultFn(a){return this.config.defaultFn=a,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(a){return this.config.onUpdateFn=a,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(a){""===this.config.name&&(this.config.name=a)}}var f=c(79928),g=c(79419);class h{static [d.i]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=void 0===a?"no action":a,this}onDelete(a){return this._onDelete=void 0===a?"no action":a,this}build(a){return new i(a,this)}}class i{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [d.i]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[g.E],...d,c[0].table[g.E],...e];return a??`${f.join("_")}_fk`}}var j=c(94610);function k(a,b){return`${a[g.E]}_${b.join("_")}_unique`}class l{constructor(a,b){this.name=b,this.columns=a}static [d.i]=null;columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(a){return new n(a,this.columns,this.nullsNotDistinctConfig,this.name)}}class m{static [d.i]=null;name;constructor(a){this.name=a}on(...a){return new l(a,this.name)}}class n{constructor(a,b,c,d){this.table=a,this.columns=b,this.name=d??k(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=c}static [d.i]=null;columns;name;nullsNotDistinct=!1;getName(){return this.name}}function o(a,b,c){for(let d=b;d<a.length;d++){let e=a[d];if("\\"===e){d++;continue}if('"'===e)return[a.slice(b,d).replace(/\\/g,""),d+1];if(!c&&(","===e||"}"===e))return[a.slice(b,d).replace(/\\/g,""),d]}return[a.slice(b).replace(/\\/g,""),a.length]}class p extends e{foreignKeyConfigs=[];static [d.i]="PgColumnBuilder";array(a){return new t(this.config.name,this,a)}references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a,b){return this.config.isUnique=!0,this.config.uniqueName=a,this.config.uniqueType=b?.nulls,this}generatedAlwaysAs(a){return this.config.generated={as:a,type:"always",mode:"stored"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>(0,j.i)((c,d)=>{let e=new h(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)},c,d))}buildExtraConfigColumn(a){return new r(a,this.config)}}class q extends f.V{constructor(a,b){b.uniqueName||(b.uniqueName=k(a,[b.name])),super(a,b),this.table=a}static [d.i]="PgColumn"}class r extends q{static [d.i]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(a){return this.indexConfig.opClass=a,this}}class s{static [d.i]="IndexedColumn";constructor(a,b,c,d){this.name=a,this.keyAsName=b,this.type=c,this.indexConfig=d}name;keyAsName;type;indexConfig}class t extends p{static [d.i]="PgArrayBuilder";constructor(a,b,c){super(a,"array","PgArray"),this.config.baseBuilder=b,this.config.size=c}build(a){let b=this.config.baseBuilder.build(a);return new u(a,this.config,b)}}class u extends q{constructor(a,b,c,d){super(a,b),this.baseColumn=c,this.range=d,this.size=b.size}size;static [d.i]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(a){return"string"==typeof a&&(a=function(a){let[b]=function a(b,c=0){let d=[],e=c,f=!1;for(;e<b.length;){let g=b[e];if(","===g){(f||e===c)&&d.push(""),f=!0,e++;continue}if(f=!1,"\\"===g){e+=2;continue}if('"'===g){let[a,c]=o(b,e+1,!0);d.push(a),e=c;continue}if("}"===g)return[d,e+1];if("{"===g){let[c,f]=a(b,e+1);d.push(c),e=f;continue}let[h,i]=o(b,e,!1);d.push(h),e=i}return[d,e]}(a,1);return b}(a)),a.map(a=>this.baseColumn.mapFromDriverValue(a))}mapToDriverValue(a,b=!1){let c=a.map(a=>null===a?null:(0,d.is)(this.baseColumn,u)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return b?c:function a(b){return`{${b.map(b=>Array.isArray(b)?a(b):"string"==typeof b?`"${b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${b}`).join(",")}}`}(c)}}},90663:(a,b,c)=>{c.d(b,{o:()=>g});var d=c(17938),e=c(70085),f=c(43777);let g=(0,d.CN)({is:a=>"WhereNode"===a.kind,create:a=>(0,d.CN)({kind:"WhereNode",where:a}),cloneWithOperation:(a,b,c)=>(0,d.CN)({...a,where:"And"===b?e.s.create(a.where,c):f.K.create(a.where,c)})})},90998:(a,b,c)=>{c.d(b,{t:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"WhenNode"===a.kind,create:a=>(0,d.CN)({kind:"WhenNode",condition:a}),cloneWithResult:(a,b)=>(0,d.CN)({...a,result:b})})},91561:(a,b,c)=>{c.d(b,{u:()=>e});let d=new Set;function e(a){d.has(a)||(d.add(a),console.log(a))}},93229:(a,b,c)=>{c.d(b,{L:()=>o});var d=c(6282),e=c(83021),f=c(12458),g=c(18370),h=c(90663),i=c(17938);let j=(0,i.CN)({is:a=>"ReturningNode"===a.kind,create:a=>(0,i.CN)({kind:"ReturningNode",selections:(0,i.CN)(a)}),cloneWithSelections:(a,b)=>(0,i.CN)({...a,selections:a.selections?(0,i.CN)([...a.selections,...b]):(0,i.CN)(b)})}),k=(0,i.CN)({is:a=>"ExplainNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"ExplainNode",format:a,options:b})});var l=c(8997);let m=(0,i.CN)({is:a=>"OutputNode"===a.kind,create:a=>(0,i.CN)({kind:"OutputNode",selections:(0,i.CN)(a)}),cloneWithSelections:(a,b)=>(0,i.CN)({...a,selections:a.selections?(0,i.CN)([...a.selections,...b]):(0,i.CN)(b)})});var n=c(35756);let o=(0,i.CN)({is:a=>e.L.is(a)||d.o.is(a)||f.U.is(a)||g.e.is(a)||l.r.is(a),cloneWithEndModifier:(a,b)=>(0,i.CN)({...a,endModifiers:a.endModifiers?(0,i.CN)([...a.endModifiers,b]):(0,i.CN)([b])}),cloneWithWhere:(a,b)=>(0,i.CN)({...a,where:a.where?h.o.cloneWithOperation(a.where,"And",b):h.o.create(b)}),cloneWithJoin:(a,b)=>(0,i.CN)({...a,joins:a.joins?(0,i.CN)([...a.joins,b]):(0,i.CN)([b])}),cloneWithReturning:(a,b)=>(0,i.CN)({...a,returning:a.returning?j.cloneWithSelections(a.returning,b):j.create(b)}),cloneWithoutReturning:a=>(0,i.CN)({...a,returning:void 0}),cloneWithoutWhere:a=>(0,i.CN)({...a,where:void 0}),cloneWithExplain:(a,b,c)=>(0,i.CN)({...a,explain:k.create(b,c?.toOperationNode())}),cloneWithTop:(a,b)=>(0,i.CN)({...a,top:b}),cloneWithOutput:(a,b)=>(0,i.CN)({...a,output:a.output?m.cloneWithSelections(a.output,b):m.create(b)}),cloneWithOrderByItems:(a,b)=>(0,i.CN)({...a,orderBy:a.orderBy?n.O.cloneWithItems(a.orderBy,b):n.O.create(b)}),cloneWithoutOrderBy:a=>(0,i.CN)({...a,orderBy:void 0})})},93241:(a,b,c)=>{c.d(b,{$:()=>h,Y:()=>g});let d=(a,b="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`);function e(a){return parseInt(a.name.slice(4),10)}function f(a,b){if(b&&!a.usages.includes(b))throw TypeError(`CryptoKey does not support this operation, its usages must include ${b}.`)}function g(a,b,c){switch(b){case"HS256":case"HS384":case"HS512":{if("HMAC"!==a.algorithm.name)throw d("HMAC");let c=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if("RSASSA-PKCS1-v1_5"!==a.algorithm.name)throw d("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if("RSA-PSS"!==a.algorithm.name)throw d("RSA-PSS");let c=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if("Ed25519"!==a.algorithm.name)throw d("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":let g;if(g=a.algorithm,g.name!==b)throw d(b);break;case"ES256":case"ES384":case"ES512":{if("ECDSA"!==a.algorithm.name)throw d("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw d(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}f(a,c)}function h(a,b,c){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if("AES-GCM"!==a.algorithm.name)throw d("AES-GCM");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw d(c,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if("AES-KW"!==a.algorithm.name)throw d("AES-KW");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw d(c,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":break;default:throw d("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if("PBKDF2"!==a.algorithm.name)throw d("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if("RSA-OAEP"!==a.algorithm.name)throw d("RSA-OAEP");let c=parseInt(b.slice(9),10)||1;if(e(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}f(a,c)}},93296:(a,b,c)=>{c.d(b,{y:()=>j}),c(42937),c(71650),c(37052),c(49957),c(35298);var d=c(38721),e=c(5263),f=c(75564),g=c(37175),h=c(24603),i=c(50885);let j=(a,b)=>{let c=null,j=a=>({getFieldName:c,options:d})=>{function j(c){let d=b.schema||a._.fullSchema;if(!d)throw new f.$("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");let e=d[c];if(!e)throw new f.$(`[# Drizzle Adapter]: The model "${c}" was not found in the schema object. Please pass the schema directly to the adapter options.`);return e}let k=async(c,d,e,k)=>{if("mysql"!==b.provider)return(await d.returning())[0];await d.execute();let m=j(c),n=d.config?.values;if(k?.length){let b=l(k.map(a=>void 0!==e[a.field]?{...a,value:e[a.field]}:a),c);return(await a.select().from(m).where(...b))[0]}if(n&&n[0]?.id?.value){let b=n[0]?.id?.value;return b||(b=(await a.select({id:(0,g.ll)`LAST_INSERT_ID()`}).from(m).orderBy((0,h.i)(m.id)).limit(1))[0].id),(await a.select().from(m).where((0,i.eq)(m.id,b)).limit(1).execute())[0]}if(e.id)return(await a.select().from(m).where((0,i.eq)(m.id,e.id)).limit(1).execute())[0];if(!("id"in m))throw new f.$(`The model "${c}" does not have an "id" field. Please use the "id" field as your primary key.`);return(await a.select().from(m).orderBy((0,h.i)(m.id)).limit(1).execute())[0]};function l(a,b){let d=j(b);if(!a)return[];if(1===a.length){let e=a[0];if(!e)return[];let g=c({model:b,field:e.field});if(!d[g])throw new f.$(`The field "${e.field}" does not exist in the schema for the model "${b}". Please update your schema.`);if("in"===e.operator){if(!Array.isArray(e.value))throw new f.$(`The value for the field "${e.field}" must be an array when using the "in" operator.`);return[(0,i.RV)(d[g],e.value)]}if("not_in"===e.operator){if(!Array.isArray(e.value))throw new f.$(`The value for the field "${e.field}" must be an array when using the "not_in" operator.`);return[(0,i.KL)(d[g],e.value)]}return"contains"===e.operator?[(0,i.mj)(d[g],`%${e.value}%`)]:"starts_with"===e.operator?[(0,i.mj)(d[g],`${e.value}%`)]:"ends_with"===e.operator?[(0,i.mj)(d[g],`%${e.value}`)]:"lt"===e.operator?[(0,i.lt)(d[g],e.value)]:"lte"===e.operator?[(0,i.wJ)(d[g],e.value)]:"ne"===e.operator?[(0,i.ne)(d[g],e.value)]:"gt"===e.operator?[(0,i.gt)(d[g],e.value)]:"gte"===e.operator?[(0,i.RO)(d[g],e.value)]:[(0,i.eq)(d[g],e.value)]}let e=a.filter(a=>"AND"===a.connector||!a.connector),g=a.filter(a=>"OR"===a.connector),h=(0,i.Uo)(...e.map(a=>{let e=c({model:b,field:a.field});if("in"===a.operator){if(!Array.isArray(a.value))throw new f.$(`The value for the field "${a.field}" must be an array when using the "in" operator.`);return(0,i.RV)(d[e],a.value)}if("not_in"===a.operator){if(!Array.isArray(a.value))throw new f.$(`The value for the field "${a.field}" must be an array when using the "not_in" operator.`);return(0,i.KL)(d[e],a.value)}return"contains"===a.operator?(0,i.mj)(d[e],`%${a.value}%`):"starts_with"===a.operator?(0,i.mj)(d[e],`${a.value}%`):"ends_with"===a.operator?(0,i.mj)(d[e],`%${a.value}`):"lt"===a.operator?(0,i.lt)(d[e],a.value):"lte"===a.operator?(0,i.wJ)(d[e],a.value):"gt"===a.operator?(0,i.gt)(d[e],a.value):"gte"===a.operator?(0,i.RO)(d[e],a.value):"ne"===a.operator?(0,i.ne)(d[e],a.value):(0,i.eq)(d[e],a.value)})),k=(0,i.or)(...g.map(a=>{let e=c({model:b,field:a.field});if("in"===a.operator){if(!Array.isArray(a.value))throw new f.$(`The value for the field "${a.field}" must be an array when using the "in" operator.`);return(0,i.RV)(d[e],a.value)}if("not_in"===a.operator){if(!Array.isArray(a.value))throw new f.$(`The value for the field "${a.field}" must be an array when using the "not_in" operator.`);return(0,i.KL)(d[e],a.value)}return"contains"===a.operator?(0,i.mj)(d[e],`%${a.value}%`):"starts_with"===a.operator?(0,i.mj)(d[e],`${a.value}%`):"ends_with"===a.operator?(0,i.mj)(d[e],`%${a.value}`):"lt"===a.operator?(0,i.lt)(d[e],a.value):"lte"===a.operator?(0,i.wJ)(d[e],a.value):"gt"===a.operator?(0,i.gt)(d[e],a.value):"gte"===a.operator?(0,i.RO)(d[e],a.value):"ne"===a.operator?(0,i.ne)(d[e],a.value):(0,i.eq)(d[e],a.value)})),l=[];return e.length&&l.push(h),g.length&&l.push(k),l}return{async create({model:b,data:c}){let d=j(b);if(!d)throw new f.$("Drizzle adapter failed to initialize. Drizzle Schema not found. Please provide a schema object in the adapter options object.");for(let a in c)if(!d[a])throw new f.$(`The field "${a}" does not exist in the "${b}" Drizzle schema. Please update your drizzle schema or re-generate using "npx @better-auth/cli generate".`);return await k(b,a.insert(d).values(c),c)},async findOne({model:c,where:f,join:g}){let h=j(c),i=l(f,c);if(d.experimental?.joins)if(a.query&&a.query[c]){let e,f=[];if(g)for(let[a,c]of(e={},Object.entries(g))){let g=c.limit??d.advanced?.database?.defaultFindManyLimit??100,h="one-to-one"===c.relation,i=h||b.usePlural?"":"s";e[`${a}${i}`]=!!h||{limit:g},h||f.push(`${a}${i}`)}let h=await a.query[c].findFirst({where:i[0],with:e});if(h)for(let a of f){let c=b.usePlural?a:a.slice(0,-1);h[c]=h[a],a!==c&&delete h[a]}return h}else e.vF.error(`[# Drizzle Adapter]: The model "${c}" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using "npx auth generate".`),e.vF.info("Falling back to regular query");let k=await a.select().from(h).where(...i);return k.length?k[0]:null},async findMany({model:f,where:g,sortBy:i,limit:k,offset:m,join:n}){let o=j(f),p=g?l(g,f):[],q=i?.direction==="desc"?h.i:h.Y;if(d.experimental?.joins)if(a.query[f]){let e,g,h=[];if(n)for(let[a,c]of(e={},Object.entries(n))){let f="one-to-one"===c.relation,g=c.limit??d.advanced?.database?.defaultFindManyLimit??100,i=f||b.usePlural?"":"s";e[`${a}${i}`]=!!f||{limit:g},f||h.push(`${a}${i}`)}i?.field&&(g=[q(o[c({model:f,field:i?.field})])]);let j=await a.query[f].findMany({where:p[0],with:e,limit:k??100,offset:m??0,orderBy:g});if(j)for(let a of j)for(let c of h){let d=b.usePlural?c:c.slice(0,-1);d!==c&&(a[d]=a[c],delete a[c])}return j}else e.vF.error(`[# Drizzle Adapter]: The model "${f}" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using "npx auth generate".`),e.vF.info("Falling back to regular query");let r=a.select().from(o);return void 0!==k&&(r=r.limit(k)),void 0!==m&&(r=r.offset(m)),i?.field&&(r=r.orderBy(q(o[c({model:f,field:i?.field})]))),await r.where(...p)},async count({model:b,where:c}){let d=j(b),e=c?l(c,b):[];return(await a.select({count:(0,g.ll)`count(${g.ll.raw("*")})`.mapWith(Number)}).from(d).where(...e))[0].count},async update({model:b,where:c,update:d}){let e=j(b),f=l(c,b);return await k(b,a.update(e).set(d).where(...f),d,c)},async updateMany({model:b,where:c,update:d}){let e=j(b),f=l(c,b);return await a.update(e).set(d).where(...f)},async delete({model:b,where:c}){let d=j(b),e=l(c,b);return await a.delete(d).where(...e)},async deleteMany({model:b,where:c}){let d=j(b),f=l(c,b),g=await a.delete(d).where(...f),h=0;return g&&"rowCount"in g?h=g.rowCount:Array.isArray(g)?h=g.length:g&&("affectedRows"in g||"rowsAffected"in g||"changes"in g)&&(h=g.affectedRows??g.rowsAffected??g.changes),"number"!=typeof h&&e.vF.error("[Drizzle Adapter] The result of the deleteMany operation is not a number. This is likely a bug in the adapter. Please report this issue to the Better Auth team.",{res:g,model:b,where:c}),h},options:b}},k=null;k={config:{adapterId:"drizzle",adapterName:"Drizzle Adapter",usePlural:b.usePlural??!1,debugLogs:b.debugLogs??!1,supportsUUIDs:"pg"===b.provider,transaction:!!b.transaction&&(b=>a.transaction(a=>b((0,d.t)({config:k.config,adapter:j(a)})(c))))},adapter:j(a)};let l=(0,d.t)(k);return a=>(c=a,l(a))}},94329:(a,b,c)=>{c.d(b,{i:()=>d,is:()=>e});let d=Symbol.for("drizzle:entityKind");function e(a,b){if(!a||"object"!=typeof a)return!1;if(a instanceof b)return!0;if(!Object.prototype.hasOwnProperty.call(b,d))throw Error(`Class "${b.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let c=Object.getPrototypeOf(a).constructor;if(c)for(;c;){if(d in c&&c[d]===b[d])return!0;c=Object.getPrototypeOf(c)}return!1}Symbol.for("drizzle:hasOwnEntityKind")},94610:(a,b,c)=>{c.d(b,{i:()=>d});function d(a,...b){return a(...b)}},96734:(a,b,c)=>{c.d(b,{l:()=>r});var d=c(69679),e=c(77175),f=c(53460),g=c(84605),h=c(84699),i=c(44228),j=c(4787),k=c(35467),l=c(31866),m=c(17938),n=c(42298);class o{#c;constructor(a){this.#c=(0,m.CN)(a)}get expressionType(){}get isRawBuilder(){return!0}as(a){return new q(this,a)}$castTo(){return new o({...this.#c})}$notNull(){return new o(this.#c)}withPlugin(a){return new o({...this.#c,plugins:void 0!==this.#c.plugins?(0,m.CN)([...this.#c.plugins,a]):(0,m.CN)([a])})}toOperationNode(){return this.#a2(this.#a3())}compile(a){return this.#a4(this.#a3(a))}async execute(a){let b=this.#a3(a);return b.executeQuery(this.#a4(b))}#a3(a){let b=void 0!==a?a.getExecutor():n.W;return void 0!==this.#c.plugins?b.withPlugins(this.#c.plugins):b}#a2(a){return a.transformQuery(this.#c.rawNode,this.#c.queryId)}#a4(a){return a.compileQuery(this.#a2(a),this.#c.queryId)}}function p(a){return new o(a)}class q{#a5;#b;constructor(a,b){this.#a5=a,this.#b=b}get expression(){return this.#a5}get alias(){return this.#b}get rawBuilder(){return this.#a5}toOperationNode(){return l.N.create(this.#a5.toOperationNode(),(0,e.N)(this.#b)?this.#b.toOperationNode():d.O.create(this.#b))}}let r=Object.assign((a,...b)=>p({queryId:(0,k.a)(),rawNode:f.z.create(a,b?.map(s)??[])}),{ref:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild((0,h.q5)(a))}),val:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild((0,j.$s)(a))}),value(a){return this.val(a)},table:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild((0,i.M$)(a))}),id(...a){let b=Array(a.length+1).fill(".");return b[0]="",b[b.length-1]="",p({queryId:(0,k.a)(),rawNode:f.z.create(b,a.map(d.O.create))})},lit:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild(g.q.createImmediate(a))}),literal(a){return this.lit(a)},raw:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithSql(a)}),join(a,b=r`, `){let c=Array(Math.max(2*a.length-1,0)),d=b.toOperationNode();for(let b=0;b<a.length;++b)c[2*b]=s(a[b]),b!==a.length-1&&(c[2*b+1]=d);return p({queryId:(0,k.a)(),rawNode:f.z.createWithChildren(c)})}});function s(a){return(0,e.N)(a)?a.toOperationNode():(0,j.$s)(a)}},97763:(a,b,c)=>{c.d(b,{f:()=>d});function d(...a){let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0}},97791:(a,b,c)=>{c.d(b,{Is:()=>k});var d=c(31866),e=c(70085),f=c(69679),g=c(77175),h=c(43777),i=c(63549),j=c(16469);class k{#s;constructor(a){this.#s=a}get expressionType(){}as(a){return new l(this,a)}or(...a){return new m(h.K.create(this.#s,(0,j.GB)(a)))}and(...a){return new n(e.s.create(this.#s,(0,j.GB)(a)))}$castTo(){return new k(this.#s)}$notNull(){return new k(this.#s)}toOperationNode(){return this.#s}}class l{#a6;#b;constructor(a,b){this.#a6=a,this.#b=b}get expression(){return this.#a6}get alias(){return this.#b}toOperationNode(){return d.N.create(this.#a6.toOperationNode(),(0,g.N)(this.#b)?this.#b.toOperationNode():f.O.create(this.#b))}}class m{#s;constructor(a){this.#s=a}get expressionType(){}as(a){return new l(this,a)}or(...a){return new m(h.K.create(this.#s,(0,j.GB)(a)))}$castTo(){return new m(this.#s)}toOperationNode(){return i.k.create(this.#s)}}class n{#s;constructor(a){this.#s=a}get expressionType(){}as(a){return new l(this,a)}and(...a){return new n(e.s.create(this.#s,(0,j.GB)(a)))}$castTo(){return new n(this.#s)}toOperationNode(){return i.k.create(this.#s)}}},97946:(a,b,c)=>{c.d(b,{i:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"SetOperationNode"===a.kind,create:(a,b,c)=>(0,d.CN)({kind:"SetOperationNode",operator:a,expression:b,all:c})})},98233:(a,b,c)=>{c.d(b,{k:()=>e});var d=c(17938);let e=(0,d.CN)({is:a=>"JSONOperatorChainNode"===a.kind,create:a=>(0,d.CN)({kind:"JSONOperatorChainNode",operator:a,values:(0,d.CN)([])}),cloneWithValue:(a,b)=>(0,d.CN)({...a,values:(0,d.CN)([...a.values,b])})})},99609:(a,b,c)=>{c.d(b,{D:()=>e,l:()=>f});var d=c(11980);function e(a){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof a?a:d.D0.decode(a),{alphabet:"base64url"});let b=a;b instanceof Uint8Array&&(b=d.D0.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/");try{var c=b;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let a=atob(c),d=new Uint8Array(a.length);for(let b=0;b<a.length;b++)d[b]=a.charCodeAt(b);return d}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function f(a){let b=a;return("string"==typeof b&&(b=d.Rd.encode(b)),Uint8Array.prototype.toBase64)?b.toBase64({alphabet:"base64url",omitPadding:!0}):(function(a){if(Uint8Array.prototype.toBase64)return a.toBase64();let b=[];for(let c=0;c<a.length;c+=32768)b.push(String.fromCharCode.apply(null,a.subarray(c,c+32768)));return btoa(b.join(""))})(b).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}}};